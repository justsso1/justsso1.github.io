{"meta":{"title":"JustssoÁöÑÂçöÂÆ¢","subtitle":"","description":"ÂâçÁ´ØÈÅìË∑Ø‰∏äÁöÑÁßØÁ¥Ø‰∏éÊÄùËÄÉ","author":"justsso","url":"https://justsso1.github.io","root":"/"},"pages":[{"title":"404 Not FoundÔºöËØ•È°µÊó†Ê≥ïÊòæÁ§∫","date":"2024-10-14T10:13:21.913Z","updated":"2024-10-14T10:13:21.913Z","comments":false,"path":"/404.html","permalink":"https://justsso1.github.io/404.html","excerpt":"","text":""},{"title":"ÂÖ≥‰∫é","date":"2024-10-14T10:34:48.261Z","updated":"2024-10-14T10:34:48.261Z","comments":false,"path":"about/index.html","permalink":"https://justsso1.github.io/about/index.html","excerpt":"","text":"‰∏™‰∫∫ËØ¶ÁªÜ‰ªãÁªç üëã Hi, I‚Äôm @justsso1üëÄ I‚Äôm interested in TypeScript„ÄÅReact„ÄÅJavaScript„ÄÅH5„ÄÅCSS3üå± I‚Äôm currently learning FrontEnd Engineer and Full Stack Engineer and AIüíûÔ∏è I‚Äôm looking to find a good jobüì´ How to reach me &#53;&#x32;&#x38;&#x32;&#x32;&#x36;&#x32;&#52;&#x39;&#64;&#x71;&#113;&#46;&#x63;&#111;&#x6d;üòÑ Pronouns: work hard and play hard‚ö° Fun fact: ‚Ä¶"},{"title":"Ê†áÁ≠æ","date":"2024-10-14T10:14:56.819Z","updated":"2024-10-14T10:14:56.819Z","comments":false,"path":"tags/index.html","permalink":"https://justsso1.github.io/tags/index.html","excerpt":"","text":""},{"title":"ÂàÜÁ±ª","date":"2024-10-14T10:35:04.724Z","updated":"2024-10-14T10:35:04.724Z","comments":false,"path":"categories/index.html","permalink":"https://justsso1.github.io/categories/index.html","excerpt":"","text":""},{"title":"","date":"2023-02-27T14:44:57.217Z","updated":"2023-02-27T14:44:57.217Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï.html","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95.html","excerpt":"","text":"ÊàëÁöÑËÄÉËØï PREVIEW_INFO = {}; if (location.href.toString().indexOf('file://localhost/') == 0) { location.href = location.href.toString().replace('file://localhost/', 'file:///'); } #outerContainer { width:1000px; height:1500px; } .vsplitbar { width: 3px; /*background: #B9B9B9;*/ border-right: 1px solid #8f949a; } .vsplitbar:hover, .vsplitbar.active { background: #8f949a; } #rightPanel { background-color: White; } /*#leftPanel { min-width: 120px; }*/ .splitterMask { position:absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; background-image: url(resources/images/transparent.gif); z-index: 20000; } &nbsp; PAGESNOTESCONSOLE NOTESÊàëÁöÑËÄÉËØïNo notes for this page.Notes added in Axure RP will appear here. (Áü©ÂΩ¢)ÂäüËÉΩÈÄªËæëÈ¶ñÈ°µ‰∏≠ÔºåÊúâ&nbsp; ÁßçÊÉÖÂÜµ„ÄÇ1.Áî®Êà∑Ê≤°ÊúâÂä†ÂÖ•‰ªª‰ΩïËê•ÔºåÈ¶ñÈ°µ‰ªÖ‰ªÖÂ±ïÁ§∫Êñ∞Ëê•ÂîÆÂçñÔºõ2.Áî®Êà∑Âä†ÂÖ•‰∫Ü1‰∏™ÊàñÂ§ö‰∏™Ëê•Ôºå (Áü©ÂΩ¢)ÂäüËÉΩÈÄªËæëÁÇπÂáª‚ÄúÊàëÁöÑËÄÉËØï‚ÄùÔºåÂºπÂá∫ËÆæÁΩÆËÄÉËØïÈù¢Êùø„ÄÇËÄÉËØïÈù¢ÊùøÂú®È°µÈù¢Ê≠£‰∏≠Èó¥„ÄÇ"},{"title":"","date":"2023-02-27T14:44:57.217Z","updated":"2023-02-27T14:44:57.217Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/axure_rp_page.css","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/axure_rp_page.css","excerpt":"","text":"/* so the window resize fires within a frame in IE7 */ html, body { height: 100%; } a { color: inherit; } p { margin: 0px; text-rendering: optimizeLegibility; font-feature-settings: \"kern\" 1; -webkit-font-feature-settings: \"kern\"; -moz-font-feature-settings: \"kern\"; -moz-font-feature-settings: \"kern=1\"; font-kerning: normal; } iframe { background: #FFFFFF; } /* to match IE with C, FF */ input { padding: 1px 0px 1px 0px; box-sizing: border-box; -moz-box-sizing: border-box; } textarea { margin: 0px; box-sizing: border-box; -moz-box-sizing: border-box; } div.intcases { font-family: arial; font-size: 12px; text-align:left; border:1px solid #AAA; background:#FFF none repeat scroll 0% 0%; z-index:9999; visibility:hidden; position:absolute; padding: 0px; border-radius: 3px; white-space: nowrap; } div.intcaselink { cursor: pointer; padding: 3px 8px 3px 8px; margin: 5px; background:#EEE none repeat scroll 0% 0%; border:1px solid #AAA; border-radius: 3px; } div.refpageimage { position: absolute; left: 0px; top: 0px; font-size: 0px; width: 16px; height: 16px; cursor: pointer; background-image: url(images/newwindow.gif); background-repeat: no-repeat; } div.annnoteimage { position: absolute; left: 0px; top: 0px; font-size: 0px; /*width: 16px; height: 12px;*/ cursor: help; /*background-image: url(images/note.gif);*/ /*background-repeat: no-repeat;*/ width: 13px; height: 12px; padding-top: 1px; text-align: center; background-color: #138CDD; -moz-box-shadow: 1px 1px 3px #aaa; -webkit-box-shadow: 1px 1px 3px #aaa; box-shadow: 1px 1px 3px #aaa; } div.annnoteline { display: inline-block; width: 9px; height: 1px; border-bottom: 1px solid white; margin-top: 1px; } div.annnotelabel { position: absolute; left: 0px; top: 0px; font-family: Helvetica,Arial; font-size: 10px; /*border: 1px solid rgb(166,221,242);*/ cursor: help; /*background:rgb(0,157,217) none repeat scroll 0% 0%;*/ padding: 1px 3px 1px 3px; white-space: nowrap; color: white; background-color: #138CDD; -moz-box-shadow: 1px 1px 3px #aaa; -webkit-box-shadow: 1px 1px 3px #aaa; box-shadow: 1px 1px 3px #aaa; } .annotation { font-size: 12px; padding-left: 2px; margin-bottom: 5px; } .annotationName { /*font-size: 13px; font-weight: bold; margin-bottom: 3px; white-space: nowrap;*/ font-family: 'Trebuchet MS'; font-size: 14px; font-weight: bold; margin-bottom: 5px; white-space: nowrap; } .annotationValue { font-family: Arial, Helvetica, Sans-Serif; font-size: 12px; color: #4a4a4a; line-height: 21px; margin-bottom: 20px; } .noteLink { text-decoration: inherit; color: inherit; } .noteLink:hover { background-color: white; } /* this is a fix for the issue where dialogs jump around and takes the text-align from the body */ .dialogFix { position:absolute; text-align:left; border: 1px solid #8f949a; } @keyframes pulsate { from { box-shadow: 0 0 10px #15d6ba; } to { box-shadow: 0 0 20px #15d6ba; } } @-webkit-keyframes pulsate { from { -webkit-box-shadow: 0 0 10px #15d6ba; box-shadow: 0 0 10px #15d6ba; } to { -webkit-box-shadow: 0 0 20px #15d6ba; box-shadow: 0 0 20px #15d6ba; } } @-moz-keyframes pulsate { from { -moz-box-shadow: 0 0 10px #15d6ba; box-shadow: 0 0 10px #15d6ba; } to { -moz-box-shadow: 0 0 20px #15d6ba; box-shadow: 0 0 20px #15d6ba; } } .legacyPulsateBorder { /*border: 5px solid #15d6ba; margin: -5px;*/ -moz-box-shadow: 0 0 10px 3px #15d6ba; box-shadow: 0 0 10px 3px #15d6ba; } .pulsateBorder { animation-name: pulsate; animation-timing-function: ease-in-out; animation-duration: 0.9s; animation-iteration-count: infinite; animation-direction: alternate; -webkit-animation-name: pulsate; -webkit-animation-timing-function: ease-in-out; -webkit-animation-duration: 0.9s; -webkit-animation-iteration-count: infinite; -webkit-animation-direction: alternate; -moz-animation-name: pulsate; -moz-animation-timing-function: ease-in-out; -moz-animation-duration: 0.9s; -moz-animation-iteration-count: infinite; -moz-animation-direction: alternate; } .ax_default_hidden, .ax_default_unplaced{ display: none; visibility: hidden; } .widgetNoteSelected { -moz-box-shadow: 0 0 10px 3px #138CDD; box-shadow: 0 0 10px 3px #138CDD; /*-moz-box-shadow: 0 0 20px #3915d6; box-shadow: 0 0 20px #3915d6;*/ /*border: 3px solid #3915d6;*/ /*margin: -3px;*/ } .singleImg { display: none; visibility: hidden; }"},{"title":"","date":"2023-02-27T14:44:57.218Z","updated":"2023-02-27T14:44:57.218Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/default.css","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/default.css","excerpt":"","text":"body { font-family : Arial, Helvetica, Sans-Serif; background-color: #8f949a; overflow:hidden; } a { cursor: pointer; } input[type=\"radio\"], input[type=\"checkbox\"] { margin: 0px 9px 0px 0px; vertical-align: bottom; } input { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; } #maximizePanelContainer { font-size: 4px; position:absolute; left: 0px; top: 0px; width: 55px; height: 20px; overflow: visible; z-index: 1000; } #maximizePanelOver { position: absolute; left: 0px; top: 0px; width: 55px; height: 20px; } .maximizePanel { position: absolute; left: 0px; top: 0px; width: 55px; height: 20px; background: #a2a2a2 url('../images/expand.png') no-repeat center center; background: url('../images/expand.svg') no-repeat center center, linear-gradient(rgba(200,200,200,.5),rgba(200,200,200,.5)); cursor: pointer; } #interfaceControlFrameMinimizeContainer { position:absolute; top: 0px; left: 0px; font-size: 2px; /*for IE*/ text-align: right; z-index: 100; height: 20px; width: 55px; background-color: #62666b; } #interfaceControlFrameMinimizeContainer a { display: inline-block; width: 55px; height: 20px; font-size: 2px; background: url('../images/close.png') no-repeat center center; background: url('../images/close.svg') no-repeat center center, linear-gradient(transparent,transparent); text-decoration: none; } .hashover #interfaceControlFrameMinimizeContainer a:hover { background: url('../images/close_hover.png') no-repeat center center; background: url('../images/close_hover.svg') no-repeat center center, linear-gradient(transparent,transparent); } #interfaceControlFrame { margin: 0px 0px 0px 55px; } #interfaceControlFrameCloseContainer { /*display: none;*/ position:absolute; bottom: 0px; left: 0px; font-size: 9px; font-family: 'Trebuchet MS'; font-weight: bold; letter-spacing: 1px; z-index: 100; width: 55px; background-color: #62666b; text-align: center; } #interfaceControlFrameCloseContainer a { display: inline-block; width: 55px; color: #ffffff; padding: 5px 0px; } #interfaceControlFrameHeader li a { display: block; width: 54px; height: 78px; text-align: center; padding-top: 50px; outline: none; margin-right: 1px; text-decoration: none; color: #ffffff; white-space: nowrap; background-color: transparent; background-repeat: no-repeat; background-position: 50% 17px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-left: 4px solid transparent; border-right: 4px solid transparent; } .hashover #interfaceControlFrameHeader li a:hover { background-color: transparent; background-repeat: no-repeat; background-position: 50% 17px; color: #c2c2c2; } #interfaceControlFrameHeader li a.selected, #interfaceControlFrameHeader li a.selected:hover { background-color: #f5f5f5; background-repeat: no-repeat; background-position: 50% 17px; color: #62666b; border-left: 5px solid #138CDD; } #interfaceControlFrameHeaderContainer { float: left; overflow: visible; width: 55px; margin-left: -55px; margin-top: 20px; } #interfaceControlFrameHeader { position: relative; list-style: none; font-size: 8px; z-index: 50; font-family: 'Trebuchet MS'; font-weight: bold; letter-spacing: 1px; } #interfaceControlFrameContainer { float: right; background-color: #f5f5f5; overflow: hidden; width: 100%; } #interfaceControlFrameLogoContainer { background-color: White; padding: 20px 10px 10px 10px; overflow: hidden; } #interfaceControlFrameLogoImageContainer { text-align: center; } #interfaceControlFrameLogoCaptionContainer { text-align: center; margin: 5px 10px 0px 10px; font-size: 12px; color: #4a4a4a; } #logoImage { width: 100%; } .emptyStateContainer { text-align: center; padding: 0px 10px; margin-top: 32px } .emptyStateTitle { margin: 0px 0px 9px 0px; font-weight: bold; } .emptyStateContent { line-height: 16px; } .dottedDivider { height: 2px; margin: 15px 0px 15px 0px; background: url('../images/divider.png') no-repeat center center; background: url('../images/divider.svg') no-repeat center center, linear-gradient(transparent,transparent); } .nondottedDivider { height: 2px; margin: 9px 0px 9px 0px; }"},{"title":"","date":"2023-02-27T14:44:57.217Z","updated":"2023-02-27T14:44:57.217Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/debug.css","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/debug.css","excerpt":"","text":"#debugHost { font-size: 12px; color:#4a4a4a; height: 100%; } #debugHostBtn a { background: url('images/variables_on.png'); background: url('images/variables_on.svg'),linear-gradient(transparent, transparent); } .hashover #debugHostBtn a:hover { background: url('images/variables_hover.png'); background: url('images/variables_hover.svg'),linear-gradient(transparent, transparent); } #debugHostBtn a.selected, #debugHostBtn a.selected:hover { background: url('images/variables_off.png'); background: url('images/variables_off.svg'),linear-gradient(transparent, transparent); } #debugHeader .pageNameHeader { padding-right: 0px; } #variablesClearLink { display: inline-block; margin-bottom: 15px; } #variablesClearLink:hover { color: #0a6cd6; } #traceClearLink { display: inline-block; margin-bottom: 15px; } #traceClearLink:hover { color: #0a6cd6; } #debugScrollContainer { overflow: auto; width: 100%; height: 100%; -webkit-overflow-scrolling: touch; } #debugContainer { padding: 10px 10px 10px 10px; } .variableName { font-weight: bold; } .variableDiv { margin-bottom: 20px; line-height: 16px; } #variablesContainer { padding-bottom: 5px; /*overflow: auto;*/ } #traceContainer { padding-top: 15px; /*padding: 0px 10px 10px 10px;*/ } .debugToolbarButton { font-size: 1em; color: #069; } .axEventBlock { display: inline-block; width: 100%; margin: 5px 0px 5px 0px; line-height: 21px; } /*a.axEventBlock:hover { background-color: #069; color: white; }*/ .axTime { margin: 0px 0px 0px 0px; font-size: 11px; color: #b1b3b5; } .axLabel { margin: 0px 0px 5px 0px; font-family: 'Trebuchet MS'; font-size: 14px; font-weight: bold; } .lastAxEvent { margin-bottom: 10px; border-bottom: 1px solid #c2c2c2; padding-bottom: 10px; } .axEvent { margin: 0px 0px 5px 0px; font-weight: bold; } .axCase { margin: 0px 0px 5px 8px; font-style: italic; } .axAction { margin: 0px 0px 5px 13px; } #traceEmptyState.emptyStateContainer { margin-top: 0px; } .debugLinksContainer { text-align: right; }"},{"title":"","date":"2023-02-27T14:44:57.217Z","updated":"2023-02-27T14:44:57.217Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/data.js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/data.js","excerpt":"","text":"$axure.loadCurrentPage( (function() { var _ = function() { var r={},a=arguments; for(var i=0; i"},{"title":"","date":"2023-02-27T14:44:57.218Z","updated":"2023-02-27T14:44:57.218Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/document(1).js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/document(1).js","excerpt":"","text":"$axure.loadDocument( (function() { var _ = function() { var r={},a=arguments; for(var i=0; i"},{"title":"","date":"2023-02-27T14:44:57.218Z","updated":"2023-02-27T14:44:57.218Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/document.js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/document.js","excerpt":"","text":"$axure.loadDocument( (function() { var _ = function() { var r={},a=arguments; for(var i=0; i"},{"title":"","date":"2023-02-27T14:44:57.219Z","updated":"2023-02-27T14:44:57.219Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/jquery-1.7.1.min(1).js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/jquery-1.7.1.min(1).js","excerpt":"","text":"/*! jQuery v1.7.1 jquery.com | jquery.org/license */ (function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f(\"\").appendTo(b),e=d.css(\"display\");d.remove();if(e===\"none\"||e===\"\"){cl||(cl=c.createElement(\"iframe\"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode===\"CSS1Compat\"?\"\":\"\")+\"\"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,\"display\"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g"},{"title":"","date":"2023-02-27T14:44:57.218Z","updated":"2023-02-27T14:44:57.218Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/expand.html","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/expand.html","excerpt":"","text":""},{"title":"","date":"2023-02-27T14:44:57.220Z","updated":"2023-02-27T14:44:57.220Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/jquery-1.7.1.min.js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/jquery-1.7.1.min.js","excerpt":"","text":"/*! jQuery v1.7.1 jquery.com | jquery.org/license */ (function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f(\"\").appendTo(b),e=d.css(\"display\");d.remove();if(e===\"none\"||e===\"\"){cl||(cl=c.createElement(\"iframe\"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode===\"CSS1Compat\"?\"\":\"\")+\"\"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,\"display\"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g"},{"title":"","date":"2023-02-27T14:44:57.221Z","updated":"2023-02-27T14:44:57.221Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/jquery-ui-themes.css","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/jquery-ui-themes.css","excerpt":"","text":"/* * jQuery UI CSS Framework * Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about) * Dual licensed under the MIT (MIT-LICENSE.txt) and GPL (GPL-LICENSE.txt) licenses. */ /* Layout helpers ----------------------------------*/ .ui-helper-hidden { display: none; } .ui-helper-hidden-accessible { position: absolute; left: -99999999px; } .ui-helper-reset { margin: 0; padding: 0; border: 0; outline: 0; line-height: 1.3; text-decoration: none; font-size: 100%; list-style: none; } .ui-helper-clearfix:after { content: \".\"; display: block; height: 0; clear: both; visibility: hidden; } .ui-helper-clearfix { display: inline-block; } /* required comment for clearfix to work in Opera \\*/ * html .ui-helper-clearfix { height:1%; } .ui-helper-clearfix { display:block; } /* end clearfix */ .ui-helper-zfix { width: 100%; height: 100%; top: 0; left: 0; position: absolute; opacity: 0; filter:Alpha(Opacity=0); } /* Interaction Cues ----------------------------------*/ .ui-state-disabled { cursor: default !important; } /* Icons ----------------------------------*/ /* states and images */ .ui-icon { display: block; text-indent: -99999px; overflow: hidden; background-repeat: no-repeat; } /* Misc visuals ----------------------------------*/ /* Overlays */ .ui-widget-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }/* Accordion ----------------------------------*/ .ui-accordion .ui-accordion-header { cursor: pointer; position: relative; margin-top: 1px; zoom: 1; } .ui-accordion .ui-accordion-li-fix { display: inline; } .ui-accordion .ui-accordion-header-active { border-bottom: 0 !important; } .ui-accordion .ui-accordion-header a { display: block; font-size: 1em; padding: .5em .5em .5em 2.2em; } .ui-accordion .ui-accordion-header .ui-icon { position: absolute; left: .5em; top: 50%; margin-top: -8px; } .ui-accordion .ui-accordion-content { padding: 1em 2.2em; border-top: 0; margin-top: -2px; position: relative; top: 1px; margin-bottom: 2px; overflow: auto; display: none; } .ui-accordion .ui-accordion-content-active { display: block; } /* Datepicker ----------------------------------*/ .ui-datepicker { width: 17em; padding: .2em .2em 0; } .ui-datepicker .ui-datepicker-header { position:relative; padding:.2em 0; } .ui-datepicker .ui-datepicker-prev, .ui-datepicker .ui-datepicker-next { position:absolute; top: 2px; width: 1.8em; height: 1.8em; } .ui-datepicker .ui-datepicker-prev-hover, .ui-datepicker .ui-datepicker-next-hover { top: 1px; } .ui-datepicker .ui-datepicker-prev { left:2px; } .ui-datepicker .ui-datepicker-next { right:2px; } .ui-datepicker .ui-datepicker-prev-hover { left:1px; } .ui-datepicker .ui-datepicker-next-hover { right:1px; } .ui-datepicker .ui-datepicker-prev span, .ui-datepicker .ui-datepicker-next span { display: block; position: absolute; left: 50%; margin-left: -8px; top: 50%; margin-top: -8px; } .ui-datepicker .ui-datepicker-title { margin: 0 2.3em; line-height: 1.8em; text-align: center; } .ui-datepicker .ui-datepicker-title select { float:left; font-size:1em; margin:1px 0; } .ui-datepicker select.ui-datepicker-month-year {width: 100%;} .ui-datepicker select.ui-datepicker-month, .ui-datepicker select.ui-datepicker-year { width: 49%;} .ui-datepicker .ui-datepicker-title select.ui-datepicker-year { float: right; } .ui-datepicker table {width: 100%; font-size: .9em; border-collapse: collapse; margin:0 0 .4em; } .ui-datepicker th { padding: .7em .3em; text-align: center; font-weight: bold; border: 0; } .ui-datepicker td { border: 0; padding: 1px; } .ui-datepicker td span, .ui-datepicker td a { display: block; padding: .2em; text-align: right; text-decoration: none; } .ui-datepicker .ui-datepicker-buttonpane { background-image: none; margin: .7em 0 0 0; padding:0 .2em; border-left: 0; border-right: 0; border-bottom: 0; } .ui-datepicker .ui-datepicker-buttonpane button { float: right; margin: .5em .2em .4em; cursor: pointer; padding: .2em .6em .3em .6em; width:auto; overflow:visible; } .ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current { float:left; } /* with multiple calendars */ .ui-datepicker.ui-datepicker-multi { width:auto; } .ui-datepicker-multi .ui-datepicker-group { float:left; } .ui-datepicker-multi .ui-datepicker-group table { width:95%; margin:0 auto .4em; } .ui-datepicker-multi-2 .ui-datepicker-group { width:50%; } .ui-datepicker-multi-3 .ui-datepicker-group { width:33.3%; } .ui-datepicker-multi-4 .ui-datepicker-group { width:25%; } .ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header { border-left-width:0; } .ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header { border-left-width:0; } .ui-datepicker-multi .ui-datepicker-buttonpane { clear:left; } .ui-datepicker-row-break { clear:both; width:100%; } /* RTL support */ .ui-datepicker-rtl { direction: rtl; } .ui-datepicker-rtl .ui-datepicker-prev { right: 2px; left: auto; } .ui-datepicker-rtl .ui-datepicker-next { left: 2px; right: auto; } .ui-datepicker-rtl .ui-datepicker-prev:hover { right: 1px; left: auto; } .ui-datepicker-rtl .ui-datepicker-next:hover { left: 1px; right: auto; } .ui-datepicker-rtl .ui-datepicker-buttonpane { clear:right; } .ui-datepicker-rtl .ui-datepicker-buttonpane button { float: left; } .ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current { float:right; } .ui-datepicker-rtl .ui-datepicker-group { float:right; } .ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header { border-right-width:0; border-left-width:1px; } .ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header { border-right-width:0; border-left-width:1px; } /* IE6 IFRAME FIX (taken from datepicker 1.5.3 */ .ui-datepicker-cover { display: none; /*sorry for IE5*/ display/**/: block; /*sorry for IE5*/ position: absolute; /*must have*/ z-index: -1; /*must have*/ filter: mask(); /*must have*/ top: -4px; /*must have*/ left: -4px; /*must have*/ width: 200px; /*must have*/ height: 200px; /*must have*/ } /* Dialog ----------------------------------*/ .ui-dialog { position: relative; padding: 0px; width: 300px;} .ui-dialog .ui-dialog-titlebar { padding: .3em .3em .1em .8em; font-size:.7em; position: relative; background-image: none; } .ui-dialog .ui-dialog-title { float: left; margin: .1em 0 .2em; font-family: 'Trebuchet MS'; font-size: 15px; font-weight: normal; color: #ffffff;} .ui-dialog .ui-dialog-titlebar-close { position: absolute; right: .1em; top: 50%; width: 19px; margin: -10px 0 0 0; padding: 1px; height: 18px; } .ui-dialog .ui-dialog-titlebar-close span { display: block; margin: 1px; } .ui-dialog .ui-dialog-titlebar-close:hover, .ui-dialog .ui-dialog-titlebar-close:focus { /*padding: 0;*/ } .ui-dialog .ui-dialog-content { border: 0; padding: .5em .2em; background: none; overflow: auto; zoom: 1; background-color: #ffffff;} .ui-dialog .ui-dialog-buttonpane { text-align: left; border-width: 1px 0 0 0; background-image: none; margin: .5em 0 0 0; padding: .3em 1em .5em .4em; } .ui-dialog .ui-dialog-buttonpane button { float: right; margin: .5em .4em .5em 0; cursor: pointer; padding: .2em .6em .3em .6em; line-height: 1.4em; width:auto; overflow:visible; } .ui-dialog .ui-resizable-se { width: 14px; height: 14px; right: 3px; bottom: 3px; } .ui-draggable .ui-dialog-titlebar { cursor: move; background-color: #8f949a; border-bottom: 1px solid #d9d9d9;} /* Progressbar ----------------------------------*/ .ui-progressbar { height:2em; text-align: left; } .ui-progressbar .ui-progressbar-value {margin: -1px; height:100%; }/* Resizable ----------------------------------*/ .ui-resizable { position: relative;} .ui-resizable-handle { position: absolute;font-size: 0.1px;z-index: 99999; display: block;} .ui-resizable-disabled .ui-resizable-handle, .ui-resizable-autohide .ui-resizable-handle { display: none; } .ui-resizable-n { cursor: n-resize; height: 7px; width: 100%; top: -5px; left: 0px; } .ui-resizable-s { cursor: s-resize; height: 7px; width: 100%; bottom: -5px; left: 0px; } .ui-resizable-e { cursor: e-resize; width: 7px; right: -5px; top: 0px; height: 100%; } .ui-resizable-w { cursor: w-resize; width: 7px; left: -5px; top: 0px; height: 100%; } .ui-resizable-se { cursor: se-resize; width: 12px; height: 12px; right: 1px; bottom: 1px; } .ui-resizable-sw { cursor: sw-resize; width: 9px; height: 9px; left: -5px; bottom: -5px; } .ui-resizable-nw { cursor: nw-resize; width: 9px; height: 9px; left: -5px; top: -5px; } .ui-resizable-ne { cursor: ne-resize; width: 9px; height: 9px; right: -5px; top: -5px;}/* Slider ----------------------------------*/ .ui-slider { position: relative; text-align: left; } .ui-slider .ui-slider-handle { position: absolute; z-index: 2; width: 1.2em; height: 1.2em; cursor: default; } .ui-slider .ui-slider-range { position: absolute; z-index: 1; font-size: .7em; display: block; border: 0; } .ui-slider-horizontal { height: .8em; } .ui-slider-horizontal .ui-slider-handle { top: -.3em; margin-left: -.6em; } .ui-slider-horizontal .ui-slider-range { top: 0; height: 100%; } .ui-slider-horizontal .ui-slider-range-min { left: 0; } .ui-slider-horizontal .ui-slider-range-max { right: 0; } .ui-slider-vertical { width: .8em; height: 100px; } .ui-slider-vertical .ui-slider-handle { left: -.3em; margin-left: 0; margin-bottom: -.6em; } .ui-slider-vertical .ui-slider-range { left: 0; width: 100%; } .ui-slider-vertical .ui-slider-range-min { bottom: 0; } .ui-slider-vertical .ui-slider-range-max { top: 0; }/* Tabs ----------------------------------*/ .ui-tabs { padding: .2em; zoom: 1; } .ui-tabs .ui-tabs-nav { list-style: none; position: relative; padding: .2em .2em 0; } .ui-tabs .ui-tabs-nav li { position: relative; float: left; border-bottom-width: 0 !important; margin: 0 .2em -1px 0; padding: 0; } .ui-tabs .ui-tabs-nav li a { float: left; text-decoration: none; padding: .5em 1em; } .ui-tabs .ui-tabs-nav li.ui-tabs-selected { padding-bottom: 1px; border-bottom-width: 0; } .ui-tabs .ui-tabs-nav li.ui-tabs-selected a, .ui-tabs .ui-tabs-nav li.ui-state-disabled a, .ui-tabs .ui-tabs-nav li.ui-state-processing a { cursor: text; } .ui-tabs .ui-tabs-nav li a, .ui-tabs.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-selected a { cursor: pointer; } /* first selector in group seems obsolete, but required to overcome bug in Opera applying cursor: text overall if defined elsewhere... */ .ui-tabs .ui-tabs-panel { padding: 1em 1.4em; display: block; border-width: 0; background: none; } .ui-tabs .ui-tabs-hide { display: none !important; } /* * jQuery UI CSS Framework * Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about) * Dual licensed under the MIT (MIT-LICENSE.txt) and GPL (GPL-LICENSE.txt) licenses. * To view and modify this theme, visit http://jqueryui.com/themeroller/ */ /* Component containers ----------------------------------*/ .ui-widget { font-family: Verdana,Arial,sans-serif/*{ffDefault}*/; font-size: 1.1em/*{fsDefault}*/; } .ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button { font-family: Verdana,Arial,sans-serif/*{ffDefault}*/; font-size: 1em; } .ui-widget-content { border: 1px solid #aaaaaa/*{borderColorContent}*/; background: #ffffff/*{bgColorContent}*/ url(images/ui-bg_glass_75_ffffff_1x400.png)/*{bgImgUrlContent}*/ 0/*{bgContentXPos}*/ 0/*{bgContentYPos}*/ repeat-x/*{bgContentRepeat}*/; color: #222222/*{fcContent}*/; } .ui-widget-content a { /*color: #222222*//*{fcContent}*/; } .ui-widget-header { border: none /*1px solid #aaaaaa*//*{borderColorHeader}*/; background: #D3D3D3/*{bgColorHeader}*/ url(images/ui-bg_highlight-soft_75_cccccc_1x100.png)/*{bgImgUrlHeader}*/ 0/*{bgHeaderXPos}*/ 50%/*{bgHeaderYPos}*/ repeat-x/*{bgHeaderRepeat}*/; color: #000000/*{fcHeader}*/; font-weight: bold; } .ui-widget-header a { color: #222222/*{fcHeader}*/; } /* Interaction states ----------------------------------*/ .ui-state-default, .ui-widget-content .ui-state-default { border: none /*1px solid #d3d3d3*//*{borderColorDefault}*/; /*background: #e6e6e6*//*{bgColorDefault}*/ /*url(images/ui-bg_glass_75_e6e6e6_1x400.png)*//*{bgImgUrlDefault}*/ /*0*//*{bgDefaultXPos}*/ /*50%*//*{bgDefaultYPos}*/ /*repeat-x*//*{bgDefaultRepeat}*/ font-weight: normal/*{fwDefault}*/; color: #555555/*{fcDefault}*/; outline: none; } .ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited { color: #555555/*{fcDefault}*/; text-decoration: none; outline: none; } .ui-state-hover, .ui-widget-content .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus { border: none /*1px solid #999999*//*{borderColorHover}*/; /*background: #dadada*//*{bgColorHover}*/ /*url(images/ui-bg_glass_75_dadada_1x400.png)*//*{bgImgUrlHover}*/ /*0*//*{bgHoverXPos}*/ /*50%*//*{bgHoverYPos}*/ /*repeat-x*//*{bgHoverRepeat}*/ font-weight: normal/*{fwDefault}*/; color: #212121/*{fcHover}*/; outline: none; } .ui-state-hover a, .ui-state-hover a:hover { color: #212121/*{fcHover}*/; text-decoration: none; outline: none; } .ui-state-active, .ui-widget-content .ui-state-active { border: 1px solid #aaaaaa/*{borderColorActive}*/; background: #ffffff/*{bgColorActive}*/ url(images/ui-bg_glass_65_ffffff_1x400.png)/*{bgImgUrlActive}*/ 0/*{bgActiveXPos}*/ 50%/*{bgActiveYPos}*/ repeat-x/*{bgActiveRepeat}*/; font-weight: normal/*{fwDefault}*/; color: #212121/*{fcActive}*/; outline: none; } .ui-state-active a, .ui-state-active a:link, .ui-state-active a:visited { color: #212121/*{fcActive}*/; outline: none; text-decoration: none; } /* Interaction Cues ----------------------------------*/ .ui-state-highlight, .ui-widget-content .ui-state-highlight {border: 1px solid #fcefa1/*{borderColorHighlight}*/; background: #fbf9ee/*{bgColorHighlight}*/ url(images/ui-bg_glass_55_fbf9ee_1x400.png)/*{bgImgUrlHighlight}*/ 0/*{bgHighlightXPos}*/ 50%/*{bgHighlightYPos}*/ repeat-x/*{bgHighlightRepeat}*/; color: #363636/*{fcHighlight}*/; } .ui-state-highlight a, .ui-widget-content .ui-state-highlight a { color: #363636/*{fcHighlight}*/; } .ui-state-error, .ui-widget-content .ui-state-error {border: 1px solid #cd0a0a/*{borderColorError}*/; background: #fef1ec/*{bgColorError}*/ url(images/ui-bg_inset-soft_95_fef1ec_1x100.png)/*{bgImgUrlError}*/ 0/*{bgErrorXPos}*/ 50%/*{bgErrorYPos}*/ repeat-x/*{bgErrorRepeat}*/; color: #cd0a0a/*{fcError}*/; } .ui-state-error a, .ui-widget-content .ui-state-error a { color: #363636/*{fcError}*/; } .ui-state-error-text, .ui-widget-content .ui-state-error-text { color: #cd0a0a/*{fcError}*/; } .ui-state-disabled, .ui-widget-content .ui-state-disabled { opacity: .35; filter:Alpha(Opacity=35); background-image: none; } .ui-priority-primary, .ui-widget-content .ui-priority-primary { font-weight: bold; } .ui-priority-secondary, .ui-widget-content .ui-priority-secondary { opacity: .7; filter:Alpha(Opacity=70); font-weight: normal; } /* Icons ----------------------------------*/ /* states and images */ .ui-icon { width: 16px; height: 16px; background-image: url(images/ui-icons_222222_256x240.png)/*{iconsContent}*/; } .ui-widget-content .ui-icon {background-image: url(images/ui-icons_222222_256x240.png)/*{iconsContent}*/; } .ui-widget-header .ui-icon {background-image: url(images/ui-icons_454545_256x240.png)/*{iconsHeader}*/; } .ui-state-default .ui-icon { background-image: url(images/ui-icons_888888_256x240.png)/*{iconsDefault}*/; } .ui-state-hover .ui-icon, .ui-state-focus .ui-icon {background-image: url(images/ui-icons_222222_256x240.png)/*{iconsHover}*/; } .ui-state-active .ui-icon {background-image: url(images/ui-icons_454545_256x240.png)/*{iconsActive}*/; } .ui-state-highlight .ui-icon {background-image: url(images/ui-icons_2e83ff_256x240.png)/*{iconsHighlight}*/; } .ui-state-error .ui-icon, .ui-state-error-text .ui-icon {background-image: url(images/ui-icons_cd0a0a_256x240.png)/*{iconsError}*/; } /* positioning */ .ui-icon-carat-1-n { background-position: 0 0; } .ui-icon-carat-1-ne { background-position: -16px 0; } .ui-icon-carat-1-e { background-position: -32px 0; } .ui-icon-carat-1-se { background-position: -48px 0; } .ui-icon-carat-1-s { background-position: -64px 0; } .ui-icon-carat-1-sw { background-position: -80px 0; } .ui-icon-carat-1-w { background-position: -96px 0; } .ui-icon-carat-1-nw { background-position: -112px 0; } .ui-icon-carat-2-n-s { background-position: -128px 0; } .ui-icon-carat-2-e-w { background-position: -144px 0; } .ui-icon-triangle-1-n { background-position: 0 -16px; } .ui-icon-triangle-1-ne { background-position: -16px -16px; } .ui-icon-triangle-1-e { background-position: -32px -16px; } .ui-icon-triangle-1-se { background-position: -48px -16px; } .ui-icon-triangle-1-s { background-position: -64px -16px; } .ui-icon-triangle-1-sw { background-position: -80px -16px; } .ui-icon-triangle-1-w { background-position: -96px -16px; } .ui-icon-triangle-1-nw { background-position: -112px -16px; } .ui-icon-triangle-2-n-s { background-position: -128px -16px; } .ui-icon-triangle-2-e-w { background-position: -144px -16px; } .ui-icon-arrow-1-n { background-position: 0 -32px; } .ui-icon-arrow-1-ne { background-position: -16px -32px; } .ui-icon-arrow-1-e { background-position: -32px -32px; } .ui-icon-arrow-1-se { background-position: -48px -32px; } .ui-icon-arrow-1-s { background-position: -64px -32px; } .ui-icon-arrow-1-sw { background-position: -80px -32px; } .ui-icon-arrow-1-w { background-position: -96px -32px; } .ui-icon-arrow-1-nw { background-position: -112px -32px; } .ui-icon-arrow-2-n-s { background-position: -128px -32px; } .ui-icon-arrow-2-ne-sw { background-position: -144px -32px; } .ui-icon-arrow-2-e-w { background-position: -160px -32px; } .ui-icon-arrow-2-se-nw { background-position: -176px -32px; } .ui-icon-arrowstop-1-n { background-position: -192px -32px; } .ui-icon-arrowstop-1-e { background-position: -208px -32px; } .ui-icon-arrowstop-1-s { background-position: -224px -32px; } .ui-icon-arrowstop-1-w { background-position: -240px -32px; } .ui-icon-arrowthick-1-n { background-position: 0 -48px; } .ui-icon-arrowthick-1-ne { background-position: -16px -48px; } .ui-icon-arrowthick-1-e { background-position: -32px -48px; } .ui-icon-arrowthick-1-se { background-position: -48px -48px; } .ui-icon-arrowthick-1-s { background-position: -64px -48px; } .ui-icon-arrowthick-1-sw { background-position: -80px -48px; } .ui-icon-arrowthick-1-w { background-position: -96px -48px; } .ui-icon-arrowthick-1-nw { background-position: -112px -48px; } .ui-icon-arrowthick-2-n-s { background-position: -128px -48px; } .ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; } .ui-icon-arrowthick-2-e-w { background-position: -160px -48px; } .ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; } .ui-icon-arrowthickstop-1-n { background-position: -192px -48px; } .ui-icon-arrowthickstop-1-e { background-position: -208px -48px; } .ui-icon-arrowthickstop-1-s { background-position: -224px -48px; } .ui-icon-arrowthickstop-1-w { background-position: -240px -48px; } .ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; } .ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; } .ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; } .ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; } .ui-icon-arrowreturn-1-w { background-position: -64px -64px; } .ui-icon-arrowreturn-1-n { background-position: -80px -64px; } .ui-icon-arrowreturn-1-e { background-position: -96px -64px; } .ui-icon-arrowreturn-1-s { background-position: -112px -64px; } .ui-icon-arrowrefresh-1-w { background-position: -128px -64px; } .ui-icon-arrowrefresh-1-n { background-position: -144px -64px; } .ui-icon-arrowrefresh-1-e { background-position: -160px -64px; } .ui-icon-arrowrefresh-1-s { background-position: -176px -64px; } .ui-icon-arrow-4 { background-position: 0 -80px; } .ui-icon-arrow-4-diag { background-position: -16px -80px; } .ui-icon-extlink { background-position: -32px -80px; } .ui-icon-newwin { background-position: -48px -80px; } .ui-icon-refresh { background-position: -64px -80px; } .ui-icon-shuffle { background-position: -80px -80px; } .ui-icon-transfer-e-w { background-position: -96px -80px; } .ui-icon-transferthick-e-w { background-position: -112px -80px; } .ui-icon-folder-collapsed { background-position: 0 -96px; } .ui-icon-folder-open { background-position: -16px -96px; } .ui-icon-document { background-position: -32px -96px; } .ui-icon-document-b { background-position: -48px -96px; } .ui-icon-note { background-position: -64px -96px; } .ui-icon-mail-closed { background-position: -80px -96px; } .ui-icon-mail-open { background-position: -96px -96px; } .ui-icon-suitcase { background-position: -112px -96px; } .ui-icon-comment { background-position: -128px -96px; } .ui-icon-person { background-position: -144px -96px; } .ui-icon-print { background-position: -160px -96px; } .ui-icon-trash { background-position: -176px -96px; } .ui-icon-locked { background-position: -192px -96px; } .ui-icon-unlocked { background-position: -208px -96px; } .ui-icon-bookmark { background-position: -224px -96px; } .ui-icon-tag { background-position: -240px -96px; } .ui-icon-home { background-position: 0 -112px; } .ui-icon-flag { background-position: -16px -112px; } .ui-icon-calendar { background-position: -32px -112px; } .ui-icon-cart { background-position: -48px -112px; } .ui-icon-pencil { background-position: -64px -112px; } .ui-icon-clock { background-position: -80px -112px; } .ui-icon-disk { background-position: -96px -112px; } .ui-icon-calculator { background-position: -112px -112px; } .ui-icon-zoomin { background-position: -128px -112px; } .ui-icon-zoomout { background-position: -144px -112px; } .ui-icon-search { background-position: -160px -112px; } .ui-icon-wrench { background-position: -176px -112px; } .ui-icon-gear { background-position: -192px -112px; } .ui-icon-heart { background-position: -208px -112px; } .ui-icon-star { background-position: -224px -112px; } .ui-icon-link { background-position: -240px -112px; } .ui-icon-cancel { background-position: 0 -128px; } .ui-icon-plus { background-position: -16px -128px; } .ui-icon-plusthick { background-position: -32px -128px; } .ui-icon-minus { background-position: -48px -128px; } .ui-icon-minusthick { background-position: -64px -128px; } .ui-icon-close { background-position: -80px -128px; } .ui-icon-closethick { background-position: -96px -128px; } .ui-icon-key { background-position: -112px -128px; } .ui-icon-lightbulb { background-position: -128px -128px; } .ui-icon-scissors { background-position: -144px -128px; } .ui-icon-clipboard { background-position: -160px -128px; } .ui-icon-copy { background-position: -176px -128px; } .ui-icon-contact { background-position: -192px -128px; } .ui-icon-image { background-position: -208px -128px; } .ui-icon-video { background-position: -224px -128px; } .ui-icon-script { background-position: -240px -128px; } .ui-icon-alert { background-position: 0 -144px; } .ui-icon-info { background-position: -16px -144px; } .ui-icon-notice { background-position: -32px -144px; } .ui-icon-help { background-position: -48px -144px; } .ui-icon-check { background-position: -64px -144px; } .ui-icon-bullet { background-position: -80px -144px; } .ui-icon-radio-off { background-position: -96px -144px; } .ui-icon-radio-on { background-position: -112px -144px; } .ui-icon-pin-w { background-position: -128px -144px; } .ui-icon-pin-s { background-position: -144px -144px; } .ui-icon-play { background-position: 0 -160px; } .ui-icon-pause { background-position: -16px -160px; } .ui-icon-seek-next { background-position: -32px -160px; } .ui-icon-seek-prev { background-position: -48px -160px; } .ui-icon-seek-end { background-position: -64px -160px; } .ui-icon-seek-first { background-position: -80px -160px; } .ui-icon-stop { background-position: -96px -160px; } .ui-icon-eject { background-position: -112px -160px; } .ui-icon-volume-off { background-position: -128px -160px; } .ui-icon-volume-on { background-position: -144px -160px; } .ui-icon-power { background-position: 0 -176px; } .ui-icon-signal-diag { background-position: -16px -176px; } .ui-icon-signal { background-position: -32px -176px; } .ui-icon-battery-0 { background-position: -48px -176px; } .ui-icon-battery-1 { background-position: -64px -176px; } .ui-icon-battery-2 { background-position: -80px -176px; } .ui-icon-battery-3 { background-position: -96px -176px; } .ui-icon-circle-plus { background-position: 0 -192px; } .ui-icon-circle-minus { background-position: -16px -192px; } .ui-icon-circle-close { background-position: -32px -192px; } .ui-icon-circle-triangle-e { background-position: -48px -192px; } .ui-icon-circle-triangle-s { background-position: -64px -192px; } .ui-icon-circle-triangle-w { background-position: -80px -192px; } .ui-icon-circle-triangle-n { background-position: -96px -192px; } .ui-icon-circle-arrow-e { background-position: -112px -192px; } .ui-icon-circle-arrow-s { background-position: -128px -192px; } .ui-icon-circle-arrow-w { background-position: -144px -192px; } .ui-icon-circle-arrow-n { background-position: -160px -192px; } .ui-icon-circle-zoomin { background-position: -176px -192px; } .ui-icon-circle-zoomout { background-position: -192px -192px; } .ui-icon-circle-check { background-position: -208px -192px; } .ui-icon-circlesmall-plus { background-position: 0 -208px; } .ui-icon-circlesmall-minus { background-position: -16px -208px; } .ui-icon-circlesmall-close { background-position: -32px -208px; } .ui-icon-squaresmall-plus { background-position: -48px -208px; } .ui-icon-squaresmall-minus { background-position: -64px -208px; } .ui-icon-squaresmall-close { background-position: -80px -208px; } .ui-icon-grip-dotted-vertical { background-position: 0 -224px; } .ui-icon-grip-dotted-horizontal { background-position: -16px -224px; } .ui-icon-grip-solid-vertical { background-position: -32px -224px; } .ui-icon-grip-solid-horizontal { background-position: -48px -224px; } .ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; } .ui-icon-grip-diagonal-se { background-position: -80px -224px; } /* Misc visuals ----------------------------------*/ /* Corner radius */ .ui-corner-tl { -moz-border-radius-topleft: 4px/*{cornerRadius}*/; -webkit-border-top-left-radius: 4px/*{cornerRadius}*/; } .ui-corner-tr { -moz-border-radius-topright: 4px/*{cornerRadius}*/; -webkit-border-top-right-radius: 4px/*{cornerRadius}*/; } .ui-corner-bl { -moz-border-radius-bottomleft: 4px/*{cornerRadius}*/; -webkit-border-bottom-left-radius: 4px/*{cornerRadius}*/; } .ui-corner-br { -moz-border-radius-bottomright: 4px/*{cornerRadius}*/; -webkit-border-bottom-right-radius: 4px/*{cornerRadius}*/; } .ui-corner-top { -moz-border-radius-topleft: 4px/*{cornerRadius}*/; -webkit-border-top-left-radius: 4px/*{cornerRadius}*/; -moz-border-radius-topright: 4px/*{cornerRadius}*/; -webkit-border-top-right-radius: 4px/*{cornerRadius}*/; } .ui-corner-bottom { -moz-border-radius-bottomleft: 4px/*{cornerRadius}*/; -webkit-border-bottom-left-radius: 4px/*{cornerRadius}*/; -moz-border-radius-bottomright: 4px/*{cornerRadius}*/; -webkit-border-bottom-right-radius: 4px/*{cornerRadius}*/; } .ui-corner-right { -moz-border-radius-topright: 4px/*{cornerRadius}*/; -webkit-border-top-right-radius: 4px/*{cornerRadius}*/; -moz-border-radius-bottomright: 4px/*{cornerRadius}*/; -webkit-border-bottom-right-radius: 4px/*{cornerRadius}*/; } .ui-corner-left { -moz-border-radius-topleft: 4px/*{cornerRadius}*/; -webkit-border-top-left-radius: 4px/*{cornerRadius}*/; -moz-border-radius-bottomleft: 4px/*{cornerRadius}*/; -webkit-border-bottom-left-radius: 4px/*{cornerRadius}*/; } .ui-corner-all { -moz-border-radius: 0px/*{cornerRadius}*/; -webkit-border-radius: 0px/*{cornerRadius}*/; } /* Overlays */ .ui-widget-overlay { background: #aaaaaa/*{bgColorOverlay}*/ none/*{bgImgUrlOverlay}*/ 0/*{bgOverlayXPos}*/ 0/*{bgOverlayYPos}*/ repeat-x/*{bgOverlayRepeat}*/; opacity: .3;filter:Alpha(Opacity=30)/*{opacityOverlay}*/; } .ui-widget-shadow { margin: -4px/*{offsetTopShadow}*/ 0 0 -4px/*{offsetLeftShadow}*/; padding: 4px/*{thicknessShadow}*/; background: #aaaaaa/*{bgColorShadow}*/ none/*{bgImgUrlShadow}*/ 0/*{bgShadowXPos}*/ 0/*{bgShadowYPos}*/ repeat-x/*{bgShadowRepeat}*/; opacity: .35;filter:Alpha(Opacity=35)/*{opacityShadow}*/; -moz-border-radius: 4px/*{cornerRadiusShadow}*/; -webkit-border-radius: 4px/*{cornerRadiusShadow}*/; }"},{"title":"","date":"2023-02-27T14:44:57.220Z","updated":"2023-02-27T14:44:57.220Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/jquery-ui-1.8.10.custom.min.js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/jquery-ui-1.8.10.custom.min.js","excerpt":"","text":"/*! * jQuery UI 1.8.10 * * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about) * Dual licensed under the MIT or GPL Version 2 licenses. * http://jquery.org/license * * http://docs.jquery.com/UI */ (function(c,j){function k(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,\"visibility\")===\"hidden\"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:\"1.8.10\",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106, NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return typeof a===\"number\"?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css(\"position\"))||/absolute/.test(this.css(\"position\"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this, \"position\",1))&&/(auto|scroll)/.test(c.curCSS(this,\"overflow\",1)+c.curCSS(this,\"overflow-y\",1)+c.curCSS(this,\"overflow-x\",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,\"overflow\",1)+c.curCSS(this,\"overflow-y\",1)+c.curCSS(this,\"overflow-x\",1))}).eq(0);return/fixed/.test(this.css(\"position\"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css(\"zIndex\",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css(\"position\"); if(b===\"absolute\"||b===\"relative\"||b===\"fixed\"){b=parseInt(a.css(\"zIndex\"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?\"selectstart\":\"mousedown\")+\".ui-disableSelection\",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(\".ui-disableSelection\")}});c.each([\"Width\",\"Height\"],function(a,b){function d(f,g,l,m){c.each(e,function(){g-=parseFloat(c.curCSS(f,\"padding\"+this,true))||0;if(l)g-=parseFloat(c.curCSS(f, \"border\"+this+\"Width\",true))||0;if(m)g-=parseFloat(c.curCSS(f,\"margin\"+this,true))||0});return g}var e=b===\"Width\"?[\"Left\",\"Right\"]:[\"Top\",\"Bottom\"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn[\"inner\"+b]=function(f){if(f===j)return i[\"inner\"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+\"px\")})};c.fn[\"outer\"+b]=function(f,g){if(typeof f!==\"number\")return i[\"outer\"+b].call(this,f);return this.each(function(){c(this).css(h, d(this,f,true,g)+\"px\")})}});c.extend(c.expr[\":\"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,\"tabindex\");if(\"area\"===b){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!==\"map\")return false;a=c(\"img[usemap=#\"+d+\"]\")[0];return!!a&&k(a)}return(/input|select|textarea|button|object/.test(b)?!a.disabled:\"a\"==b?a.href||!isNaN(d):!isNaN(d))&&k(a)},tabbable:function(a){var b=c.attr(a,\"tabindex\");return(isNaN(b)||b>=0)&&c(a).is(\":focusable\")}}); c(function(){var a=document.body,b=a.appendChild(b=document.createElement(\"div\"));c.extend(b.style,{minHeight:\"100px\",height:\"auto\",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart=\"onselectstart\"in b;a.removeChild(b).style.display=\"none\"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a); return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){c(document).unbind(\"mousemove.\"+this.widgetName,this._mouseMoveDelegate).unbind(\"mouseup.\"+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;a.target==this._mouseDownEvent.target&&c.data(a.target,this.widgetName+\".preventClickEvent\", true);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery); ;/* * jQuery UI Position 1.8.10 * * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about) * Dual licensed under the MIT or GPL Version 2 licenses. * http://jquery.org/license * * http://docs.jquery.com/UI/Position */ (function(c){c.ui=c.ui||{};var n=/left|center|right/,o=/top|center|bottom/,t=c.fn.position,u=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return t.apply(this,arguments);b=c.extend({},b);var a=c(b.of),d=a[0],g=(b.collision||\"flip\").split(\" \"),e=b.offset?b.offset.split(\" \"):[0,0],h,k,j;if(d.nodeType===9){h=a.width();k=a.height();j={top:0,left:0}}else if(d.setTimeout){h=a.width();k=a.height();j={top:a.scrollTop(),left:a.scrollLeft()}}else if(d.preventDefault){b.at=\"left top\";h=k=0;j={top:b.of.pageY, left:b.of.pageX}}else{h=a.outerWidth();k=a.outerHeight();j=a.offset()}c.each([\"my\",\"at\"],function(){var f=(b[this]||\"\").split(\" \");if(f.length===1)f=n.test(f[0])?f.concat([\"center\"]):o.test(f[0])?[\"center\"].concat(f):[\"center\",\"center\"];f[0]=n.test(f[0])?f[0]:\"center\";f[1]=o.test(f[1])?f[1]:\"center\";b[this]=f});if(g.length===1)g[1]=g[0];e[0]=parseInt(e[0],10)||0;if(e.length===1)e[1]=e[0];e[1]=parseInt(e[1],10)||0;if(b.at[0]===\"right\")j.left+=h;else if(b.at[0]===\"center\")j.left+=h/2;if(b.at[1]===\"bottom\")j.top+= k;else if(b.at[1]===\"center\")j.top+=k/2;j.left+=e[0];j.top+=e[1];return this.each(function(){var f=c(this),l=f.outerWidth(),m=f.outerHeight(),p=parseInt(c.curCSS(this,\"marginLeft\",true))||0,q=parseInt(c.curCSS(this,\"marginTop\",true))||0,v=l+p+(parseInt(c.curCSS(this,\"marginRight\",true))||0),w=m+q+(parseInt(c.curCSS(this,\"marginBottom\",true))||0),i=c.extend({},j),r;if(b.my[0]===\"right\")i.left-=l;else if(b.my[0]===\"center\")i.left-=l/2;if(b.my[1]===\"bottom\")i.top-=m;else if(b.my[1]===\"center\")i.top-= m/2;i.left=Math.round(i.left);i.top=Math.round(i.top);r={left:i.left-p,top:i.top-q};c.each([\"left\",\"top\"],function(s,x){c.ui.position[g[s]]&&c.ui.position[g[s]][x](i,{targetWidth:h,targetHeight:k,elemWidth:l,elemHeight:m,collisionPosition:r,collisionWidth:v,collisionHeight:w,offset:e,my:b.my,at:b.at})});c.fn.bgiframe&&f.bgiframe();f.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left= d>0?b.left-d:Math.max(b.left-a.collisionPosition.left,b.left)},top:function(b,a){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=d>0?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if(a.at[0]!==\"center\"){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();var g=a.my[0]===\"left\"?-a.elemWidth:a.my[0]===\"right\"?a.elemWidth:0,e=a.at[0]===\"left\"?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+= a.collisionPosition.left0?g+e+h:0}},top:function(b,a){if(a.at[1]!==\"center\"){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();var g=a.my[1]===\"top\"?-a.elemHeight:a.my[1]===\"bottom\"?a.elemHeight:0,e=a.at[1]===\"top\"?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=a.collisionPosition.top0?g+e+h:0}}}};if(!c.offset.setOffset){c.offset.setOffset=function(b,a){if(/static/.test(c.curCSS(b,\"position\")))b.style.position=\"relative\";var d=c(b), g=d.offset(),e=parseInt(c.curCSS(b,\"top\",true),10)||0,h=parseInt(c.curCSS(b,\"left\",true),10)||0;g={top:a.top-g.top+e,left:a.left-g.left+h};\"using\"in a?a.using.call(b,g):d.css(g)};c.fn.offset=function(b){var a=this[0];if(!a||!a.ownerDocument)return null;if(b)return this.each(function(){c.offset.setOffset(this,b)});return u.call(this)}}})(jQuery); ;/* * jQuery UI Draggable 1.8.10 * * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about) * Dual licensed under the MIT or GPL Version 2 licenses. * http://jquery.org/license * * http://docs.jquery.com/UI/Draggables * * Depends: * jquery.ui.core.js * jquery.ui.mouse.js * jquery.ui.widget.js */ (function(d){d.widget(\"ui.draggable\",d.ui.mouse,{widgetEventPrefix:\"drag\",options:{addClasses:true,appendTo:\"parent\",axis:false,connectToSortable:false,containment:false,cursor:\"auto\",cursorAt:false,grid:false,handle:false,helper:\"original\",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:\"default\",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:\"both\",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper== \"original\"&&!/^(?:r|a|f)/.test(this.element.css(\"position\")))this.element[0].style.position=\"relative\";this.options.addClasses&&this.element.addClass(\"ui-draggable\");this.options.disabled&&this.element.addClass(\"ui-draggable-disabled\");this._mouseInit()},destroy:function(){if(this.element.data(\"draggable\")){this.element.removeData(\"draggable\").unbind(\".draggable\").removeClass(\"ui-draggable ui-draggable-dragging ui-draggable-disabled\");this._mouseDestroy();return this}},_mouseCapture:function(a){var b= this.options;if(this.helper||b.disabled||d(a.target).is(\".ui-resizable-handle\"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;return true},_mouseStart:function(a){var b=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(d.ui.ddmanager)d.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css(\"position\");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top- this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);b.containment&&this._setContainment();if(this._trigger(\"start\",a)===false){this._clear();return false}this._cacheHelperProportions(); d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass(\"ui-draggable-dragging\");this._mouseDrag(a,true);return true},_mouseDrag:function(a,b){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo(\"absolute\");if(!b){b=this._uiHash();if(this._trigger(\"drag\",a,b)===false){this._mouseUp({});return false}this.position=b.position}if(!this.options.axis||this.options.axis!=\"y\")this.helper[0].style.left=this.position.left+\"px\";if(!this.options.axis|| this.options.axis!=\"x\")this.helper[0].style.top=this.position.top+\"px\";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var b=false;if(d.ui.ddmanager&&!this.options.dropBehaviour)b=d.ui.ddmanager.drop(this,a);if(this.dropped){b=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper==\"original\")return false;if(this.options.revert==\"invalid\"&&!b||this.options.revert==\"valid\"&&b||this.options.revert===true||d.isFunction(this.options.revert)&& this.options.revert.call(this.element,b)){var c=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger(\"stop\",a)!==false&&c._clear()})}else this._trigger(\"stop\",a)!==false&&this._clear();return false},cancel:function(){this.helper.is(\".ui-draggable-dragging\")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var b=!this.options.handle||!d(this.options.handle,this.element).length?true:false;d(this.options.handle,this.element).find(\"*\").andSelf().each(function(){if(this== a.target)b=true});return b},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a])):b.helper==\"clone\"?this.element.clone():this.element;a.parents(\"body\").length||a.appendTo(b.appendTo==\"parent\"?this.element[0].parentNode:b.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css(\"position\"))&&a.css(\"position\",\"absolute\");return a},_adjustOffsetFromHelper:function(a){if(typeof a==\"string\")a=a.split(\" \");if(d.isArray(a))a={left:+a[0],top:+a[1]|| 0};if(\"left\"in a)this.offset.click.left=a.left+this.margins.left;if(\"right\"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if(\"top\"in a)this.offset.click.top=a.top+this.margins.top;if(\"bottom\"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition==\"absolute\"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0], this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==\"html\"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css(\"borderTopWidth\"),10)||0),left:a.left+(parseInt(this.offsetParent.css(\"borderLeftWidth\"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==\"relative\"){var a=this.element.position();return{top:a.top- (parseInt(this.helper.css(\"top\"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css(\"left\"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css(\"marginLeft\"),10)||0,top:parseInt(this.element.css(\"marginTop\"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment== \"parent\")a.containment=this.helper[0].parentNode;if(a.containment==\"document\"||a.containment==\"window\")this.containment=[(a.containment==\"document\"?0:d(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(a.containment==\"document\"?0:d(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(a.containment==\"document\"?0:d(window).scrollLeft())+d(a.containment==\"document\"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment==\"document\"? 0:d(window).scrollTop())+(d(a.containment==\"document\"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var b=d(a.containment)[0];if(b){a=d(a.containment).offset();var c=d(b).css(\"overflow\")!=\"hidden\";this.containment=[a.left+(parseInt(d(b).css(\"borderLeftWidth\"),10)||0)+(parseInt(d(b).css(\"paddingLeft\"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css(\"borderTopWidth\"), 10)||0)+(parseInt(d(b).css(\"paddingTop\"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css(\"borderLeftWidth\"),10)||0)-(parseInt(d(b).css(\"paddingRight\"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css(\"borderTopWidth\"),10)||0)-(parseInt(d(b).css(\"paddingBottom\"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(a.containment.constructor== Array)this.containment=a.containment},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a==\"absolute\"?1:-1;var c=this.cssPosition==\"absolute\"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&d.browser.version"},{"title":"","date":"2023-02-27T14:44:57.221Z","updated":"2023-02-27T14:44:57.221Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/messagecenter.js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/messagecenter.js","excerpt":"","text":"if (typeof console == 'undefined') console = { log: function () { } }; // sniff chrome var CHROME_5_LOCAL = false; var CHROME = false; var SAFARI = false; var FIREFOX = false; var WEBKIT = false; var OS_MAC = false; var IOS = false; var ANDROID = false; var MOBILE_DEVICE = false; var IE = false; var IE_10_AND_BELOW = false; //ie 10 and lower var IE_11_AND_ABOVE = false; //ie 11 and above var BROWSER_VERSION = 5000; (function () { if(!window.$axure) window.$axure = function() {}; var useragent = window.navigator.userAgent; var edgeRegex = /Edge\\/([0-9]+)/g; var edgeMatch = edgeRegex.exec(useragent); $axure.browser = { isEdge: Boolean(edgeMatch) }; if(!$axure.browser.isEdge) { var chromeRegex = /Chrome\\/([0-9]+).([0-9]+)/g; var chromeMatch = chromeRegex.exec(useragent); CHROME = Boolean(chromeMatch); CHROME_5_LOCAL = chromeMatch && Number(chromeMatch[1]) >= 5 && location.href.indexOf('file://') >= 0; } var safariRegex = /Safari\\/([0-9]+)/g; var safariMatch = safariRegex.exec(useragent); SAFARI = Boolean(safariMatch) && !CHROME; //because chrome also inserts safari string into user agent var webkitRegex = /WebKit\\//g ; WEBKIT = Boolean(webkitRegex.exec(useragent)); FIREFOX = useragent.toLowerCase().indexOf('firefox') > -1; var macRegex = /Mac/g ; OS_MAC = Boolean(macRegex.exec(window.navigator.platform)); IOS = useragent.match(/iPhone/i) || useragent.match(/iPad/i) || useragent.match(/iPod/i); ANDROID = useragent.match(/Android/i); MOBILE_DEVICE = ANDROID || IOS || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Tablet PC/i) || navigator.userAgent.match(/Windows Phone/i); if($.browser) { if($.browser.msie) IE_10_AND_BELOW = true; else IE_11_AND_ABOVE = useragent.toLowerCase().indexOf('trident') > -1; BROWSER_VERSION = $.browser.version; } IE = IE_10_AND_BELOW || IE_11_AND_ABOVE; //Used by sitemap and variables.js getLinkUrl functions so that they know //whether to embed global variables in URL as query string or hash string //_shouldSendVars persists the value for sitemap instead of re-checking every time var _shouldSendVars; var _shouldSendVarsToServer = function(url) { if(typeof _shouldSendVars != 'undefined') { return _shouldSendVars; } if(SAFARI || (IE_10_AND_BELOW && BROWSER_VERSION < 10)) { var urlToCheck = typeof url != 'undefined' ? url : window.location.href; var serverRegex = /http:\\/\\/127\\.0\\.0\\.1:[0-9]{5}/g; var serverMatch = serverRegex.exec(urlToCheck); var previewRegex = /[0-9]{2}\\.[0-9]{2}\\.[0-9]{2}/g; var previewMatch = previewRegex.exec(urlToCheck); if(Boolean(serverMatch) && Boolean(previewMatch)) { _shouldSendVars = true; return _shouldSendVars; } } _shouldSendVars = false; return _shouldSendVars; }; $axure.shouldSendVarsToServer = _shouldSendVarsToServer; })(); (function() { var _topMessageCenter; var _messageCenter = {}; var _listeners = []; var _stateListeners = []; var _state = {}; var _eventObject = null; var _queuedMessages = []; var _initialized = false; // this is for the non Chrome 5 local scenarios. The \"top\" message center will dispatch to all the bottom ones var _childrenMessageCenters = []; // create $axure if it hasn't been created if (!window.$axure) window.$axure = function() {}; $axure.messageCenter = _messageCenter; // isolate scope, and initialize _topMessageCenter. (function() { if (!CHROME_5_LOCAL) { var topAxureWindow = window; try { while(topAxureWindow.parent && topAxureWindow.parent !== topAxureWindow && topAxureWindow.parent.$axure) topAxureWindow = topAxureWindow.parent; } catch(e) {} _topMessageCenter = topAxureWindow.$axure.messageCenter; } })(); $(window.document).ready(function() { if (CHROME_5_LOCAL) { $('body').append(\"\" + \"\"); _eventObject = window.document.createEvent('Event'); _eventObject.initEvent('axureMessageSenderEvent', true, true); $('#axureEventReceiverDiv').bind('axureMessageReceiverEvent', function () { var request = JSON.parse($(this).text()); _handleRequest(request); }); } else { if (_topMessageCenter != _messageCenter) { _topMessageCenter.addChildMessageCenter(_messageCenter); console.log('adding from ' + window.location.toString()); } } }); var _handleRequest = function (request) { // route the request to all the listeners for(var i = 0; i < _listeners.length; i++) _listeners[i](request.message, request.data); // now handle the queued messages if we're initializing if (request.message == 'initialize') { _initialized = true; // send all the queued messages and return for (var i = 0; i < _queuedMessages.length; i++) { var qRequest = _queuedMessages[i]; _messageCenter.postMessage(qRequest.message, qRequest.data); } _queuedMessages = []; } // and then handle the set state messages, if necessary if (request.message == 'setState') { _state[request.data.key] = request.data.value; for (var i = 0; i < _stateListeners.length; i++) { var keyListener = _stateListeners[i]; // if thep passed a null or empty value, always post the message if (!keyListener.key || keyListener.key == request.data.key) { keyListener.listener(request.data.key, request.data.value); } } } }; // ----------------------------------------------------------------------------------------- // This method allows for dispatching messages in the non-chromelocal scenario. // Each child calls this on _topMessageCenter // ----------------------------------------------------------------------------------------- _messageCenter.addChildMessageCenter = function(messageCenter) { _childrenMessageCenters[_childrenMessageCenters.length] = messageCenter; }; // ----------------------------------------------------------------------------------------- // This method allows for dispatching messages in the non-chromelocal scenario. // Each child calls this on _topMessageCenter // ----------------------------------------------------------------------------------------- _messageCenter.dispatchMessage = function(message, data) { _handleRequest({ message: message, data: data }); }; // ----------------------------------------------------------------------------------------- // ----------------------------------------------------------------------------------------- _messageCenter.dispatchMessageRecursively = function(message, data) { console.log(\"dispatched to \" + window.location.toString()); // dispatch to the top center first _messageCenter.dispatchMessage(message, data); $('iframe').each(function(index, frame) { //try,catch to handle permissions error in FF when loading pages from another domain try { if (frame.contentWindow.$axure && frame.contentWindow.$axure.messageCenter) { frame.contentWindow.$axure.messageCenter.dispatchMessageRecursively(message, data); } }catch(e) {} }); }; var _combineEventMessages = false; var _compositeEventMessageData = []; _messageCenter.startCombineEventMessages = function() { _combineEventMessages = true; } _messageCenter.endCombineEventMessages = function () { _messageCenter.sendCompositeEventMessage(); _combineEventMessages = false; } _messageCenter.sendCompositeEventMessage = function () { _messageCenter.postMessage('axCompositeEventMessage', _compositeEventMessageData); _compositeEventMessageData = []; } _messageCenter.postMessage = function (message, data) { if(_combineEventMessages) { if(message == 'axEvent' || message == 'axCase' || message == 'axAction' || message == 'axEventComplete') { _compositeEventMessageData.push({ 'message': message, 'data': data }); if(_compositeEventMessageData.length >= 10) _messageCenter.sendCompositeEventMessage(); return; } } if(!CHROME_5_LOCAL) { _topMessageCenter.dispatchMessageRecursively(message, data); } else { var request = { message: message, data: data }; if(_initialized) { var senderDiv = window.document.getElementById('axureEventSenderDiv'); var messageText = JSON.stringify(request); // console.log('sending event: ' + messageText); senderDiv.innerText = messageText; senderDiv.dispatchEvent(_eventObject); // console.log('event sent'); } else { _queuedMessages[_queuedMessages.length] = request; } } }; _messageCenter.setState = function(key, value) { var data = { key: key, value: value }; _messageCenter.postMessage('setState', data); }; _messageCenter.getState = function(key) { return _state[key]; }; _messageCenter.addMessageListener = function(listener) { _listeners[_listeners.length] = listener; }; _messageCenter.addStateListener = function(key, listener) { _stateListeners[_stateListeners.length] = { key: key, listener: listener }; }; })();"},{"title":"","date":"2023-02-27T14:44:57.221Z","updated":"2023-02-27T14:44:57.221Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/page_notes.css","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/page_notes.css","excerpt":"","text":"#pageNotesHost { font-size: 12px; color:#4a4a4a; height: 100%; } #pageNotesHostBtn a { background: url('images/notes_on.png'); background: url('images/notes_on.svg'),linear-gradient(transparent, transparent); } .hashover #pageNotesHostBtn a:hover { background: url('images/notes_hover.png'); background: url('images/notes_hover.svg'),linear-gradient(transparent, transparent); } #pageNotesHostBtn a.selected, #pageNotesHostBtn a.selected:hover { background: url('images/notes_off.png'); background: url('images/notes_off.svg'),linear-gradient(transparent, transparent); } #footnotesButton { background: url('images/footnotes.png') no-repeat center center; background: url('images/footnotes.svg') no-repeat center center,linear-gradient(transparent, transparent); } #footnotesButton:hover { background: url('images/footnotes_hover.png') no-repeat center center; background: url('images/footnotes_hover.svg') no-repeat center center,linear-gradient(transparent, transparent); } #footnotesButton.sitemapToolbarButtonSelected, #footnotesButton.sitemapToolbarButtonSelected:hover { background: url('images/footnotes_on.png') no-repeat center center; background: url('images/footnotes_on.svg') no-repeat center center,linear-gradient(transparent, transparent); } .nextPageButton { background: url('images/forward.png') no-repeat center center; background: url('images/forward.svg') no-repeat center center,linear-gradient(transparent, transparent); } .nextPageButton:hover { background: url('images/forward_hover.png') no-repeat center center; background: url('images/forward_hover.svg') no-repeat center center,linear-gradient(transparent, transparent); } .prevPageButton { background: url('images/back.png') no-repeat center center; background: url('images/back.svg') no-repeat center center,linear-gradient(transparent, transparent); } .prevPageButton:hover { background: url('images/back_hover.png') no-repeat center center; background: url('images/back_hover.svg') no-repeat center center,linear-gradient(transparent, transparent); } #pageNotesScrollContainer { overflow: auto; width: 100%; /*height: 100%;*/ -webkit-overflow-scrolling: touch; } #pageNotesContainer { /*padding: 10px 10px 10px 12px;*/ } #pageNotesContent { overflow: visible; } .pageNoteContainer { padding: 10px; } .pageNoteName { font-family: 'Trebuchet MS'; font-size: 14px; font-weight: bold; margin-bottom: 5px; /*text-decoration: underline;*/ white-space: nowrap; } .pageNote { line-height: 21px; /*margin-bottom: 20px;*/ } .widgetNoteContainer { padding: 10px; border-bottom: 1px solid transparent; border-top: 1px solid transparent; cursor: pointer; } .widgetNoteContainerSelected { background-color: white; border-bottom: 1px solid #c2c2c2; border-top: 1px solid #c2c2c2; } /*.widgetNoteContainer:hover { background-color: white; //border-bottom: 1px solid #c2c2c2; //border-top: 1px solid #c2c2c2; }*/ .widgetNoteFootnote { display: inline-block; /*vertical-align: top; margin: 2px 5px 10px 0px; padding: 1px 6px; font-size: 10px; color: #ffffff; background-color: #0a6cd6;*/ width: 13px; height: 12px; padding-top: 1px; text-align: center; background-color: #138CDD; /*-moz-box-shadow: 1px 1px 3px #aaa; -webkit-box-shadow: 1px 1px 3px #aaa; box-shadow: 1px 1px 3px #aaa;*/ font-size: 0px; margin-right: 8px; } div.annnoteline { display: inline-block; width: 9px; height: 1px; border-bottom: 1px solid white; margin-top: 1px; } .widgetNoteLabel { display: inline-block; vertical-align: top; font-family: 'Trebuchet MS'; font-size: 14px; font-weight: bold; margin-bottom: 5px; } .noteLink { text-decoration: inherit; color: inherit; } .noteLink:hover { background-color: white; }"},{"title":"","date":"2023-02-27T14:44:57.225Z","updated":"2023-02-27T14:44:57.225Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/reset.css","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/reset.css","excerpt":"","text":"html,body,div,span, applet,object,iframe, h1,h2,h3,h4,h5,h6,p,blockquote,pre, a,abbr,acronym,address,big,cite,code, del,dfn,em,font,img,ins,kbd,q,s,samp, small,strike,strong,sub,sup,tt,var, dd,dl,dt,li,ol,ul, fieldset,form,label,legend, table,caption,tbody,tfoot,thead,tr,th,td { margin: 0; padding: 0; border: 0; } table { border-collapse: collapse; border-spacing: 0; } ol,ul { list-style: none; } q:before,q:after, blockquote:before,blockquote:after { content: \"\"; }"},{"title":"","date":"2023-02-27T14:44:57.225Z","updated":"2023-02-27T14:44:57.225Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/saved_resource.html","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/saved_resource.html","excerpt":"","text":"ÊàëÁöÑËÄÉËØï $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; }; $axure.utils.getOtherPath = function() { return 'resources/Other.html'; }; $axure.utils.getReloadPath = function() { return 'resources/reload.html'; }; È¶ñÈ°µ ÊàëÁöÑ ÊòµÁß∞ ÊâãÊú∫ ÊàëÁöÑËÄÉËØï ÊâòÁ¶è ÈõÖÊÄù GRE SAT ËÄÉËØïÁßëÁõÆÔºö ËÄÉËØïÊó∂Èó¥Ôºö"},{"title":"","date":"2023-02-27T14:44:57.225Z","updated":"2023-02-27T14:44:57.225Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/sitemap.css","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/sitemap.css","excerpt":"","text":"#sitemapHost { font-size: 12px; color:#4a4a4a; height: 100%; } #sitemapHostBtn a { background: url('images/sitemap_on.png'); background: url('images/sitemap_on.svg'),linear-gradient(transparent, transparent); } .hashover #sitemapHostBtn a:hover { background: url('images/sitemap_hover.png'); background: url('images/sitemap_hover.svg'),linear-gradient(transparent, transparent); } #sitemapHostBtn a.selected, #sitemapHostBtn a.selected:hover { background: url('images/sitemap_off.png'); background: url('images/sitemap_off.svg'),linear-gradient(transparent, transparent); } #sitemapHost .pageButtonHeader { top: -27px; } #sitemapTreeContainer { overflow: auto; width: 100%; height: 100%; -webkit-overflow-scrolling: touch; } .sitemapTree { margin: 0px 0px 10px 0px; overflow:visible; } .sitemapTree ul { list-style-type: none; margin: 0px 0px 0px 0px; padding-left: 0px; } .sitemapPlusMinusLink { } .sitemapMinus { vertical-align:middle; background: url('images/minus.gif'); background-repeat: no-repeat; margin-right: 3px; margin-bottom: 1px; height:9px; width:9px; display:inline-block; } .sitemapPlus { vertical-align:middle; background: url('images/plus.gif'); background-repeat: no-repeat; margin-right: 3px; margin-bottom: 1px; height:9px; width:9px; display:inline-block; } .sitemapPageLink { margin-left: 0px; } .sitemapPageIcon { margin: 0px 0px -3px 4px; width: 16px; height: 16px; display: inline-block; background: url('images/page.png') no-repeat center center; background: url('images/page.svg') no-repeat center center, linear-gradient(transparent,transparent); } .sitemapFlowIcon { background: url('images/flow.png') no-repeat center center; background: url('images/flow.svg') no-repeat center center, linear-gradient(transparent,transparent); } .sitemapFolderIcon { background: url('images/folder_closed.png') no-repeat center center; background: url('images/folder_closed.svg') no-repeat center center, linear-gradient(transparent,transparent); } .sitemapFolderOpenIcon { background: url('images/folder_open.png') no-repeat center center; background: url('images/folder_open.svg') no-repeat center center, linear-gradient(transparent,transparent); } .sitemapPageName { margin-left: 7px; } .sitemapNode { /*margin:4px 0px 4px 0px;*/ white-space:nowrap; } .sitemapPageLinkContainer { /*display: inline-block;*/ margin-left: 0px; padding: 4px 0px 4px 0px; } /* .sitemapNode div { padding-top: 1px; padding-bottom: 3px; padding-left: 20px; height: 14px; } */ .sitemapExpandableNode { margin-left: 0px; } .sitemapHighlight { /*display: inline-block;*/ background-color : #C8E0F0; font-weight: bold; } .sitemapGreyedName { color: #AAA; } .pluginNameHeader { font-family: 'Trebuchet MS'; font-size: 12px; letter-spacing: 1px; /*font-weight: bold;*/ white-space: nowrap; margin-bottom: 5px; } .pageNameHeader { font-family: 'Trebuchet MS'; /*display: inline-block;*/ /*float: left;*/ font-size: 15px; font-weight: bold; /*height: 23px;*/ padding-right: 77px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; } .pageButtonHeader { float: right; position: relative; /*width: 72px;*/ height: 24px; top: -22px; margin-bottom: -24px; } .sitemapHeader { padding-top: 27px; border-bottom: 1px solid #d9d9d9; min-width: 110px; } .sitemapToolbar { margin: 0px 5px 14px 12px; } .sitemapToolbarButton { float: left; width: 22px; height: 22px; border: 1px solid transparent; } #linksButton { background: url('images/share.png') no-repeat center center; background: url('images/share.svg') no-repeat center center, linear-gradient(transparent,transparent); } #linksButton:hover { background: url('images/share_hover.png') no-repeat center center; background: url('images/share_hover.svg') no-repeat center center, linear-gradient(transparent,transparent); } #linksButton.sitemapToolbarButtonSelected, .hashover #linksButton.sitemapToolbarButtonSelected:hover { background: url('images/share_on.png') no-repeat center center; background: url('images/share_on.svg') no-repeat center center, linear-gradient(transparent,transparent); } #adaptiveButton { background: url('images/views.png') no-repeat center center; background: url('images/views.svg') no-repeat center center, linear-gradient(transparent,transparent); } #adaptiveButton:hover { background: url('images/views_hover.png') no-repeat center center; background: url('images/views_hover.svg') no-repeat center center, linear-gradient(transparent,transparent); } #adaptiveButton.sitemapToolbarButtonSelected, #adaptiveButton.sitemapToolbarButtonSelected:hover { background: url('images/views_on.png') no-repeat center center; background: url('images/views_on.svg') no-repeat center center, linear-gradient(transparent,transparent); } #highlightInteractiveButton { background: url('images/hotspots.png') no-repeat center center; background: url('images/hotspots.svg') no-repeat center center, linear-gradient(transparent,transparent); margin-top: 1px; } #highlightInteractiveButton:hover { background: url('images/hotspots_hover.png') no-repeat center center; background: url('images/hotspots_hover.svg') no-repeat center center, linear-gradient(transparent,transparent); } #highlightInteractiveButton.sitemapToolbarButtonSelected, #highlightInteractiveButton.sitemapToolbarButtonSelected:hover { background: url('images/hotspots_on.png') no-repeat center center; background: url('images/hotspots_on.svg') no-repeat center center, linear-gradient(transparent,transparent); } /*#variablesButton { background: url('images/229_variables_16.png') no-repeat center center; }*/ #searchButton { background: url('images/232_search_16.png') no-repeat center center; } .sitemapLinkContainer { margin-top: 8px; padding-right: 5px; /*font-size: 12px;*/ } .sitemapLinkField { width: 100%; font-size: 12px; margin-top: 3px; padding: 5px; } .sitemapRadioSelected { font-weight: bold; } .sitemapOptionContainer { margin-top: 8px; padding-right: 5px; /*font-size: 12px;*/ } #sitemapOptionsDiv { margin-top: 10px; /*margin-left: 16px;*/ } #viewSelectDiv { padding: 2px 0px 0px 0px; /*margin-left: 5px;*/ } #viewSelect { width: 70%; } .sitemapUrlOption { padding-bottom: 8px; } .optionLabel { font-size: 12px; } .sitemapPopupContainer { display: none; position: absolute; background-color: #F4F4F4; border: 1px solid #B9B9B9; padding: 5px 5px 5px 5px; margin: 5px 0px 0px 5px; z-index: 1; } #sitemapLinksContainer { border-top: 1px solid #d9d9d9; padding: 10px; margin-left: 0px; /*line-height: 18px;*/ } #adaptiveViewsContainer { border-top: 1px solid #d9d9d9; padding: 10px; margin-left: 0px; line-height: 18px; } .adaptiveViewOption { padding: 2px; } .adaptiveViewOption:hover { background-color: rgb(204,235,248); cursor: pointer; } .currentAdaptiveView { font-weight: bold; } .adaptiveCheckboxDiv { height: 15px; width: 15px; float: left; } .checkedAdaptive { background: url('images/adaptivecheck.png') no-repeat center center; } /*#variablesContainer { max-height: 350px; overflow: auto; }*/ /*#variablesClearLink { color: #069; left: 5px; }*/ #searchDiv { padding: 8px 12px 11px 12px; } #searchBox { width: 100%; border: none; border-top: 1px solid #d9d9d9; /*border-bottom: 1px solid #d9d9d9;*/ padding: 5px; font-size: 12px; } .searchBoxHint { color: #8f949a; /*font-style: italic;*/ } #sitemapLinksPageName { font-weight: bold; } #sitemapOptionsHeader { font-weight: bold; }"},{"title":"","date":"2023-02-27T14:44:57.225Z","updated":"2023-02-27T14:44:57.225Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/startPost.js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/startPost.js","excerpt":"","text":"// 8.0.0.3382. Generated 1/14/2019 10:26:32 PM UTC //***** sitemap.js *****// var currentNodeUrl = ''; var allNodeUrls = []; function openNextPage() { var index = allNodeUrls.indexOf(currentNodeUrl) + 1; if(index >= allNodeUrls.length) return; var nextNodeUrl = allNodeUrls[index]; $('.sitemapPageLink[nodeUrl=\"' + nextNodeUrl + '\"]').click(); } function openPreviousPage() { var index = allNodeUrls.indexOf(currentNodeUrl) - 1; if(index < 0) return; var nextNodeUrl = allNodeUrls[index]; $('.sitemapPageLink[nodeUrl=\"' + nextNodeUrl + '\"]').click(); } // use this to isolate the scope (function() { var SHOW_HIDE_ANIMATION_DURATION = 0; var HIGHLIGHT_INTERACTIVE_VAR_NAME = 'hi'; var currentPageLoc = ''; var currentPlayerLoc = ''; var currentPageHashString = ''; $(window.document).ready(function() { $axure.player.createPluginHost({ id: 'sitemapHost', context: 'interface', title: 'PAGES', gid: 1 }); generateSitemap(); $('.sitemapPlusMinusLink').toggle(collapse_click, expand_click); $('.sitemapPageLink').click(node_click); $('#sitemapLinksContainer').hide(); $('#linksButton').click(links_click); $('#adaptiveButton').click(adaptive_click); $('#adaptiveViewsContainer').hide(); $('#highlightInteractiveButton').click(highlight_interactive); $('#searchButton').click(search_click); $('#searchBox').keyup(search_input_keyup); $('.sitemapLinkField').click(function() { this.select(); }); $('input[value=\"withoutmap\"]').click(withoutSitemapRadio_click); $('input[value=\"withmap\"]').click(withSitemapRadio_click); $('#minimizeBox, #collapseBox, #footnotesBox, #highlightBox').change(sitemapUrlOptions_change); $('#viewSelect').change(sitemapUrlViewSelect_change); $(document).on('ContainerHeightChange', function() { updateContainerHeight(); }); // bind to the page load $axure.page.bind('load.sitemap', function() { currentPageLoc = $axure.page.location.split(\"#\")[0]; var decodedPageLoc = decodeURI(currentPageLoc); currentNodeUrl = decodedPageLoc.substr(decodedPageLoc.lastIndexOf('/') ? decodedPageLoc.lastIndexOf('/') + 1 : 0); currentPlayerLoc = $(location).attr('href').split(\"#\")[0].split(\"?\")[0]; currentPageHashString = '#p=' + currentNodeUrl.substr(0, currentNodeUrl.lastIndexOf('.')); setVarInCurrentUrlHash('p', currentNodeUrl.substring(0, currentNodeUrl.lastIndexOf('.html'))); $('.sitemapPageLink').parent().parent().removeClass('sitemapHighlight'); $('.sitemapPageLink[nodeUrl=\"' + currentNodeUrl + '\"]').parent().parent().addClass('sitemapHighlight'); var pageName = $axure.page.pageName; $('.pageNameHeader').html(pageName); $('#sitemapLinksPageName').html($('.sitemapHighlight > .sitemapPageLinkContainer > .sitemapPageLink > .sitemapPageName').html()); //Click the \"Without sitemap\" radio button so that it's selected by default $('input[value=\"withoutmap\"]').click(); //If highlight var is present and set to 1 or else if //sitemap highlight button is selected then highlight interactive elements var hiVal = getHashStringVar(HIGHLIGHT_INTERACTIVE_VAR_NAME); if(hiVal.length > 0 && hiVal == 1) { $('#highlightInteractiveButton').addClass('sitemapToolbarButtonSelected'); $axure.messageCenter.postMessage('highlightInteractive', true); } else if($('#highlightInteractiveButton').is('.sitemapToolbarButtonSelected')) { $axure.messageCenter.postMessage('highlightInteractive', true); } //Set the current view if it is defined in the hash string //If the view is invalid, set it to 'auto' in the string //ELSE set the view based on the currently selected view in the toolbar menu var viewStr = getHashStringVar(ADAPTIVE_VIEW_VAR_NAME); if(viewStr.length > 0) { var $view = $('.adaptiveViewOption[val=\"' + viewStr + '\"]'); if($view.length > 0) $view.click(); else $('.adaptiveViewOption[val=\"auto\"]').click(); } else if($('.checkedAdaptive').length > 0) { var $viewOption = $('.checkedAdaptive').parents('.adaptiveViewOption'); if($viewOption.attr('val') != 'auto') $viewOption.click(); } $axure.messageCenter.postMessage('finishInit'); return false; }); var $adaptiveViewsContainer = $('#adaptiveViewsContainer'); var $viewSelect = $('#viewSelect'); //Fill out adaptive view container with prototype's defined adaptive views, as well as the default, and Auto $adaptiveViewsContainer.append('Auto'); $viewSelect.append('Auto'); if(typeof $axure.document.defaultAdaptiveView.name != 'undefined') { //If the name is a blank string, make the view name the width if non-zero, else 'any' var defaultViewName = $axure.document.defaultAdaptiveView.name; $adaptiveViewsContainer.append('' + defaultViewName + ''); $viewSelect.append('' + defaultViewName + ''); } var enabledViewIds = $axure.document.configuration.enabledViewIds; for(var viewIndex = 0; viewIndex < $axure.document.adaptiveViews.length; viewIndex++) { var currView = $axure.document.adaptiveViews[viewIndex]; if(enabledViewIds.indexOf(currView.id) < 0) continue; var widthString = currView.size.width == 0 ? 'any' : currView.size.width; var heightString = currView.size.height == 0 ? 'any' : currView.size.height; var conditionString = ''; if(currView.condition == '>' || currView.condition == '>=') { conditionString = ' and above'; } else if(currView.condition == '"},{"title":"","date":"2023-02-27T14:44:57.226Z","updated":"2023-02-27T14:44:57.226Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/styles(1).css","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/styles(1).css","excerpt":"","text":"body { margin:0px; background-image:none; position:static; left:auto; width:375px; margin-left:0; margin-right:0; text-align:left; } #base { position:absolute; z-index:0; } #u0_div { border-width:0px; position:absolute; left:0px; top:0px; width:375px; height:667px; background:inherit; background-color:rgba(255, 255, 255, 1); box-sizing:border-box; border-width:1px; border-style:solid; border-color:rgba(121, 121, 121, 1); border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; } #u0 { border-width:0px; position:absolute; left:0px; top:0px; width:375px; height:667px; } #u0_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u0_ann { border-width:0px; position:absolute; left:368px; top:-4px; width:1px; height:1px; } #u1_div { border-width:0px; position:absolute; left:0px; top:0px; width:375px; height:60px; background:inherit; background-color:rgba(255, 255, 255, 1); box-sizing:border-box; border-width:1px; border-style:solid; border-color:rgba(121, 121, 121, 1); border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; } #u1 { border-width:0px; position:absolute; left:0px; top:606px; width:375px; height:60px; } #u1_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u2_img { border-width:0px; position:absolute; left:0px; top:0px; width:2px; height:62px; } #u2 { border-width:0px; position:absolute; left:186px; top:606px; width:1px; height:61px; } #u2_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u3_img { border-width:0px; position:absolute; left:0px; top:0px; width:20px; height:20px; } #u3 { border-width:0px; position:absolute; left:63px; top:612px; width:20px; height:20px; } #u3_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u4_div { border-width:0px; position:absolute; left:0px; top:0px; width:29px; height:20px; background:inherit; background-color:rgba(255, 255, 255, 0); border:none; border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; text-align:center; } #u4 { border-width:0px; position:absolute; left:60px; top:638px; width:29px; height:20px; font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; text-align:center; } #u4_text { border-width:0px; position:absolute; left:0px; top:0px; width:29px; white-space:nowrap; } #u5_div { border-width:0px; position:absolute; left:0px; top:0px; width:29px; height:20px; background:inherit; background-color:rgba(255, 255, 255, 0); border:none; border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; text-align:center; } #u5 { border-width:0px; position:absolute; left:264px; top:638px; width:29px; height:20px; font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; text-align:center; } #u5_text { border-width:0px; position:absolute; left:0px; top:0px; width:29px; white-space:nowrap; } #u6_img { border-width:0px; position:absolute; left:0px; top:0px; width:20px; height:20px; } #u6 { border-width:0px; position:absolute; left:266px; top:612px; width:20px; height:20px; } #u6_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u7_div { border-width:0px; position:absolute; left:0px; top:0px; width:375px; height:117px; background:inherit; background-color:rgba(255, 255, 255, 1); box-sizing:border-box; border-width:1px; border-style:solid; border-color:rgba(121, 121, 121, 1); border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; } #u7 { border-width:0px; position:absolute; left:0px; top:33px; width:375px; height:117px; } #u7_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u8_img { border-width:0px; position:absolute; left:0px; top:0px; width:60px; height:60px; } #u8 { border-width:0px; position:absolute; left:11px; top:54px; width:60px; height:60px; } #u8_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u9_div { border-width:0px; position:absolute; left:0px; top:0px; width:29px; height:20px; background:inherit; background-color:rgba(255, 255, 255, 0); border:none; border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; } #u9 { border-width:0px; position:absolute; left:101px; top:59px; width:29px; height:20px; font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; } #u9_text { border-width:0px; position:absolute; left:0px; top:0px; width:29px; white-space:nowrap; } #u10_div { border-width:0px; position:absolute; left:0px; top:0px; width:29px; height:20px; background:inherit; background-color:rgba(255, 255, 255, 0); border:none; border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; } #u10 { border-width:0px; position:absolute; left:102px; top:89px; width:29px; height:20px; font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; } #u10_text { border-width:0px; position:absolute; left:0px; top:0px; width:29px; white-space:nowrap; } #u11_div { border-width:0px; position:absolute; left:0px; top:0px; width:365px; height:436px; background:inherit; background-color:rgba(255, 255, 255, 1); box-sizing:border-box; border-width:1px; border-style:solid; border-color:rgba(121, 121, 121, 1); border-radius:10px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; } #u11 { border-width:0px; position:absolute; left:5px; top:160px; width:365px; height:436px; } #u11_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u12 { border-width:0px; position:absolute; left:0px; top:0px; width:0px; height:0px; } #u13_div { border-width:0px; position:absolute; left:0px; top:0px; width:352px; height:60px; background:inherit; background-color:rgba(255, 255, 255, 1); box-sizing:border-box; border-width:1px; border-style:solid; border-color:rgba(121, 121, 121, 1); border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; } #u13 { border-width:0px; position:absolute; left:11px; top:215px; width:352px; height:60px; } #u13_div.mouseDown { border-width:0px; position:absolute; left:0px; top:0px; width:352px; height:60px; background:inherit; background-color:rgba(255, 255, 255, 1); box-sizing:border-box; border-width:1px; border-style:solid; border-color:rgba(121, 121, 121, 1); border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; } #u13.mouseDown { } #u13_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u13_ann { border-width:0px; position:absolute; left:356px; top:211px; width:1px; height:1px; } #u14_div { border-width:0px; position:absolute; left:0px; top:0px; width:81px; height:28px; background:inherit; background-color:rgba(255, 255, 255, 0); border:none; border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; font-size:20px; } #u14 { border-width:0px; position:absolute; left:32px; top:232px; width:81px; height:28px; font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; font-size:20px; } #u14_text { border-width:0px; position:absolute; left:0px; top:0px; width:81px; white-space:nowrap; } #u15_img { border-width:0px; position:absolute; left:0px; top:0px; width:20px; height:20px; } #u15 { border-width:0px; position:absolute; left:296px; top:234px; width:20px; height:20px; } #u15_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u16 { border-width:0px; position:absolute; left:0px; top:0px; width:0px; height:0px; } #u17_div { border-width:0px; position:absolute; left:0px; top:0px; width:352px; height:271px; background:inherit; background-color:rgba(255, 255, 255, 1); box-sizing:border-box; border-width:1px; border-style:solid; border-color:rgba(121, 121, 121, 1); border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; } #u17 { border-width:0px; position:absolute; left:11px; top:177px; width:352px; height:271px; } #u17_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; } #u18 { border-width:0px; position:absolute; left:138px; top:242px; width:204px; height:50px; } #u18_input { position:absolute; left:0px; top:0px; width:204px; height:50px; font-family:'ArialMT', 'Arial'; font-weight:400; font-style:normal; font-size:13px; text-decoration:none; color:#000000; } #u18_input:disabled { color:grayText; } #u19_div { border-width:0px; position:absolute; left:0px; top:0px; width:96px; height:25px; background:inherit; background-color:rgba(255, 255, 255, 0); border:none; border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; font-size:18px; } #u19 { border-width:0px; position:absolute; left:32px; top:253px; width:96px; height:25px; font-size:18px; } #u19_text { border-width:0px; position:absolute; left:0px; top:0px; width:96px; white-space:nowrap; } #u20_div { border-width:0px; position:absolute; left:0px; top:0px; width:96px; height:25px; background:inherit; background-color:rgba(255, 255, 255, 0); border:none; border-radius:0px; -moz-box-shadow:none; -webkit-box-shadow:none; box-shadow:none; font-size:18px; } #u20 { border-width:0px; position:absolute; left:32px; top:321px; width:96px; height:25px; font-size:18px; } #u20_text { border-width:0px; position:absolute; left:0px; top:0px; width:96px; white-space:nowrap; } #u21 { border-width:0px; position:absolute; left:138px; top:321px; width:204px; height:50px; } #u21_input { position:absolute; left:0px; top:0px; width:204px; height:50px; font-family:'ArialMT', 'Arial'; font-weight:400; font-style:normal; font-size:13px; text-decoration:none; color:#000000; text-align:left; } #u22_img { border-width:0px; position:absolute; left:0px; top:0px; width:30px; height:30px; } #u22 { border-width:0px; position:absolute; left:319px; top:184px; width:30px; height:30px; } #u22_text { border-width:0px; position:absolute; left:0px; top:0px; width:0px; visibility:hidden; word-wrap:break-word; }"},{"title":"","date":"2023-02-27T14:44:57.226Z","updated":"2023-02-27T14:44:57.226Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/styles.css","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/styles.css","excerpt":"","text":".ax_default { font-family:'ArialMT', 'Arial'; font-weight:400; font-style:normal; font-size:13px; color:#333333; text-align:center; line-height:normal; } .box_1 { } .box_2 { } ._ÂΩ¢Áä∂ { } .image { } .button { } .primary_button { color:#FFFFFF; } ._‰∏ÄÁ∫ßÊ†áÈ¢ò { font-family:'ArialMT', 'Arial'; font-weight:bold; font-style:normal; font-size:32px; text-align:left; } ._‰∫åÁ∫ßÊ†áÈ¢ò { font-family:'ArialMT', 'Arial'; font-weight:bold; font-style:normal; font-size:24px; text-align:left; } ._‰∏âÁ∫ßÊ†áÈ¢ò { font-family:'ArialMT', 'Arial'; font-weight:bold; font-style:normal; font-size:18px; text-align:left; } ._ÂõõÁ∫ßÊ†áÈ¢ò { font-family:'ArialMT', 'Arial'; font-weight:bold; font-style:normal; font-size:14px; text-align:left; } ._‰∫îÁ∫ßÊ†áÈ¢ò { font-family:'ArialMT', 'Arial'; font-weight:bold; font-style:normal; text-align:left; } ._ÂÖ≠Á∫ßÊ†áÈ¢ò { font-family:'ArialMT', 'Arial'; font-weight:bold; font-style:normal; font-size:10px; text-align:left; } .label { font-size:14px; text-align:left; } ._ÊñáÊú¨ÊÆµËêΩ { text-align:left; } .line { } .text_field { color:#000000; text-align:left; } .droplist { color:#000000; text-align:left; } .html_button { font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; text-align:center; } ._ÊµÅÁ®ãÂΩ¢Áä∂ { } ._ËøûÊé•Á∫ø { } .snapshot { } .icon { } .shape { } ._34Âè∑Â≠ó_ÂçïË°åÂàóË°®ÂÜÖÔºåÂ∑¶Êñπ‰∏ªÊ†áÈ¢òÊñáÂ≠óÂ≠óÔºâ { font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; font-size:17px; text-align:left; } ._28Âè∑Â≠ó_È°µÈù¢Â§áÊ≥®‰ø°ÊÅØÂèäÂàóË°®ÁöÑË°®Â§¥ËØ¥ÊòéÊñáÂ≠ó__Ôºâ { font-family:'PingFangSC-Regular', 'PingFang SC'; font-weight:400; font-style:normal; font-size:14px; text-align:left; } .image1 { color:#000000; }"},{"title":"","date":"2023-02-27T14:44:57.226Z","updated":"2023-02-27T14:44:57.226Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/startPre.js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/startPre.js","excerpt":"","text":"// 8.0.0.3382. Generated 1/14/2019 10:26:32 PM UTC //***** splitter.js *****// /* * jQuery.splitter.js - two-pane splitter window plugin * * version 1.51 (2009/01/09) * * Dual licensed under the MIT and GPL licenses: * http://www.opensource.org/licenses/mit-license.php * http://www.gnu.org/licenses/gpl.html */ /** * The splitter() plugin implements a two-pane resizable splitter window. * The selected elements in the jQuery object are converted to a splitter; * each selected element should have two child elements, used for the panes * of the splitter. The plugin adds a third child element for the splitbar. * * For more details see: http://methvin.com/splitter/ * * * @example $('#MySplitter').splitter(); * @desc Create a vertical splitter with default settings * * @example $('#MySplitter').splitter({type: 'h', accessKey: 'M'}); * @desc Create a horizontal splitter resizable via Alt+Shift+M * * @name splitter * @type jQuery * @param Object options Options for the splitter (not required) * @cat Plugins/Splitter * @return jQuery * @author Dave Methvin (dave.methvin@gmail.com) */ ;(function($){ $.fn.splitter = function(args){ args = args || {}; return this.each(function() { var zombie; // left-behind splitbar for outline resizes function startSplitMouse(evt) { if ( opts.outline ) zombie = zombie || bar.clone(false).insertAfter(A); panes.css(\"-webkit-user-select\", \"none\"); // Safari selects A/B text on a move bar.addClass(opts.activeClass); $('').insertAfter(bar); A._posSplit = A[0][opts.pxSplit] - evt[opts.eventPos]; $(document) .bind(\"mousemove\", doSplitMouse) .bind(\"mouseup\", endSplitMouse); } function doSplitMouse(evt) { var newPos = A._posSplit+evt[opts.eventPos]; if ( opts.outline ) { newPos = Math.max(0, Math.min(newPos, splitter._DA - bar._DA)); bar.css(opts.origin, newPos); } else resplit(newPos); } function endSplitMouse(evt) { $('div.splitterMask').remove(); bar.removeClass(opts.activeClass); var newPos = A._posSplit+evt[opts.eventPos]; if ( opts.outline ) { zombie.remove(); zombie = null; resplit(newPos); } panes.css(\"-webkit-user-select\", \"text\"); // let Safari select text again $(document) .unbind(\"mousemove\", doSplitMouse) .unbind(\"mouseup\", endSplitMouse); } function resplit(newPos) { // Constrain new splitbar position to fit pane size limits newPos = Math.max(A._min, splitter._DA - B._max, Math.min(newPos, A._max, splitter._DA - bar._DA - B._min)); // Resize/position the two panes bar._DA = bar[0][opts.pxSplit]; // bar size may change during dock var posOffset = bar.is(':visible') ? bar._DA - 1 : 0; bar.css(opts.origin, newPos - posOffset).css(opts.fixed, splitter._DF); A.css(opts.origin, 0).css(opts.split, newPos).css(opts.fixed, splitter._DF); B.css(opts.origin, newPos + bar._DA - posOffset) .css(opts.split, splitter._DA-bar._DA-newPos).css(opts.fixed, splitter._DF); // IE fires resize for us; all others pay cash if ( !IE_10_AND_BELOW ) panes.trigger(\"resize\"); } function dimSum(jq, dims) { // Opera returns -1 for missing min/max width, turn into 0 var sum = 0; for ( var i=1; i < arguments.length; i++ ) sum += Math.max(parseInt(jq.css(arguments[i])) || 0, 0); return sum; } // Determine settings based on incoming opts, element classes, and defaults var vh = (args.splitHorizontal? 'h' : args.splitVertical? 'v' : args.type) || 'v'; var opts = $.extend({ activeClass: 'active', // class name for active splitter pxPerKey: 8, // splitter px moved per keypress tabIndex: 0, // tab order indicator accessKey: '' // accessKey for splitbar },{ v: { // Vertical splitters: keyLeft: 39, keyRight: 37, cursor: \"col-resize\", splitbarClass: \"vsplitbar\", outlineClass: \"voutline\", type: 'v', eventPos: \"pageX\", origin: \"left\", split: \"width\", pxSplit: \"offsetWidth\", side1: \"Left\", side2: \"Right\", fixed: \"height\", pxFixed: \"offsetHeight\", side3: \"Top\", side4: \"Bottom\" }, h: { // Horizontal splitters: keyTop: 40, keyBottom: 38, cursor: \"row-resize\", splitbarClass: \"hsplitbar\", outlineClass: \"houtline\", type: 'h', eventPos: \"pageY\", origin: \"top\", split: \"height\", pxSplit: \"offsetHeight\", side1: \"Top\", side2: \"Bottom\", fixed: \"width\", pxFixed: \"offsetWidth\", side3: \"Left\", side4: \"Right\" } }[vh], args); // Create jQuery object closures for splitter and both panes var splitter = $(this).css({position: \"relative\"}); var panes = $(\">*\", splitter[0]).css({ position: \"absolute\", // positioned inside splitter container \"z-index\": \"1\", // splitbar is positioned above \"-moz-outline-style\": \"none\" // don't show dotted outline }); var A = $(panes[0]); // left or top var B = $(panes[1]); // right or bottom // Focuser element, provides keyboard support; title is shown by Opera accessKeys var focuser = $('') .attr({accessKey: opts.accessKey, tabIndex: opts.tabIndex, title: opts.splitbarClass}) .bind($.browser.opera?\"click\":\"focus\", function(){ this.focus(); bar.addClass(opts.activeClass) }) .bind(\"keydown\", function(e){ var key = e.which || e.keyCode; var dir = key==opts[\"key\"+opts.side1]? 1 : key==opts[\"key\"+opts.side2]? -1 : 0; if ( dir ) resplit(A[0][opts.pxSplit]+dir*opts.pxPerKey, false); }) .bind(\"blur\", function(){ bar.removeClass(opts.activeClass) }); // Splitbar element, can be already in the doc or we create one var bar = $(panes[2] || '') .insertAfter(A).css(\"z-index\", \"100\").append(focuser) .attr({\"class\": opts.splitbarClass, unselectable: \"on\"}) .css({position: \"absolute\", \"user-select\": \"none\", \"-webkit-user-select\": \"none\", \"-khtml-user-select\": \"none\", \"-moz-user-select\": \"none\", \"top\": \"0px\"}) .bind(\"mousedown\", startSplitMouse); // Use our cursor unless the style specifies a non-default cursor if ( /^(auto|default|)$/.test(bar.css(\"cursor\")) ) bar.css(\"cursor\", opts.cursor); // Cache several dimensions for speed, rather than re-querying constantly bar._DA = bar[0][opts.pxSplit]; splitter._PBF = $.boxModel? dimSum(splitter, \"border\"+opts.side3+\"Width\", \"border\"+opts.side4+\"Width\") : 0; splitter._PBA = $.boxModel? dimSum(splitter, \"border\"+opts.side1+\"Width\", \"border\"+opts.side2+\"Width\") : 0; A._pane = opts.side1; B._pane = opts.side2; $.each([A,B], function(){ this._min = opts[\"min\"+this._pane] || dimSum(this, \"min-\"+opts.split); this._max = opts[\"max\"+this._pane] || dimSum(this, \"max-\"+opts.split) || 9999; this._init = opts[\"size\"+this._pane]===true ? parseInt($.curCSS(this[0],opts.split)) : opts[\"size\"+this._pane]; }); // Determine initial position, get from cookie if specified var initPos = A._init; if ( !isNaN(B._init) ) // recalc initial B size as an offset from the top or left side initPos = splitter[0][opts.pxSplit] - splitter._PBA - B._init - bar._DA; if ( opts.cookie ) { if ( !$.cookie ) alert('jQuery.splitter(): jQuery cookie plugin required'); var ckpos = parseInt($.cookie(opts.cookie)); if ( !isNaN(ckpos) ) initPos = ckpos; $(window).bind(\"unload\", function(){ var state = String(bar.css(opts.origin)); // current location of splitbar $.cookie(opts.cookie, state, {expires: opts.cookieExpires || 365, path: opts.cookiePath || document.location.pathname}); }); } if ( isNaN(initPos) ) // King Solomon's algorithm initPos = Math.round((splitter[0][opts.pxSplit] - splitter._PBA - bar._DA)/2); // Resize event propagation and splitter sizing if ( opts.anchorToWindow ) { // Account for margin or border on the splitter container and enforce min height splitter._hadjust = dimSum(splitter, \"borderTopWidth\", \"borderBottomWidth\", \"marginBottom\"); splitter._hmin = Math.max(dimSum(splitter, \"minHeight\"), 20); $(window).bind(\"resize\", function(){ var top = splitter.offset().top; var wh = $(window).height(); splitter.css(\"height\", Math.max(wh-top-splitter._hadjust, splitter._hmin)+\"px\"); if ( !IE_10_AND_BELOW ) splitter.trigger(\"resize\"); }).trigger(\"resize\"); } else if ( opts.resizeToWidth && !IE_10_AND_BELOW ) $(window).bind(\"resize\", function(){ splitter.trigger(\"resize\"); }); // Resize event handler; triggered immediately to set initial position splitter.bind(\"resize\", function(e, size){ // Custom events bubble in jQuery 1.3; don't Yo Dawg if ( e.target != this ) return; // Determine new width/height of splitter container splitter._DF = splitter[0][opts.pxFixed] - splitter._PBF; splitter._DA = splitter[0][opts.pxSplit] - splitter._PBA; // Bail if splitter isn't visible or content isn't there yet if ( splitter._DF >> 0; var from = trunc(Number(arguments[1]) || 0); if(from < 0) from += len; for(; from < len; from++) { if(from in this && this[from] === elt) return from; } return -1; }; } var trunc = function(num) { return num < 0 ? Math.ceil(num) : Math.floor(num); }; })(); //***** axplayer.js *****// if (!window.$axure) window.$axure = function () { }; if (typeof console == 'undefined') console = { log: function () { } }; if(window._axUtils) $axure.utils = _axUtils; $axure.loadDocument = function(document) { $axure.document = document; }; function setUpController() { //$axure.utils = _axUtils; var _page = {}; $axure.page = _page; $axure.utils.makeBindable(_page, ['load']); var _player = function() { }; $axure.player = _player; //----------------------------------------- //Global Var array, getLinkUrl function and setGlobalVar listener are //for use in setting global vars in page url string when clicking a //page in the sitemap //----------------------------------------- var _globalVars = {}; //----------------------------------------- //Used by getLinkUrl below to check if local server is running //in order to send back the global variables as a query string //in the page url //----------------------------------------- var _shouldSendVarsToServer = function () { //If exception occurs (due to page in content frame being from a different domain, etc) //then run the check without the url (which will end up checking against sitemap url) try { var mainFrame = document.getElementById(\"mainFrame\"); return $axure.shouldSendVarsToServer(mainFrame.contentWindow.location.href); } catch (e) { return $axure.shouldSendVarsToServer(); } }; var _getLinkUrl = function (baseUrl) { var toAdd = ''; for(var globalVarName in _globalVars) { var val = _globalVars[globalVarName]; if(val != null) { if(toAdd.length > 0) toAdd += '&'; toAdd += globalVarName + '=' + encodeURIComponent(val); } } return toAdd.length > 0 ? baseUrl + (_shouldSendVarsToServer() ? '?' : '#') + toAdd + \"&CSUM=1\" : baseUrl; }; $axure.getLinkUrlWithVars = _getLinkUrl; $axure.messageCenter.addMessageListener(function(message, data) { if (message == 'setGlobalVar'){ _globalVars[data.globalVarName] = data.globalVarValue; } }); $axure.messageCenter.addStateListener('page.data', function (key, value) { for (var subKey in value) { _page[subKey] = value[subKey]; } $axure.page.triggerEvent('load'); }); // --------------------------------------------- // Navigates the main frame (setting the currently visible page). If the link is relative, // this method should test if it is actually a axure rp page being loaded and properly set // up all the controller for the page if it is // --------------------------------------------- _page.navigate = function (url, includeVariables) { var mainFrame = document.getElementById(\"mainFrame\"); //var mainFrame = window.parent.mainFrame; // if this is a relative url... var urlToLoad; if (url.indexOf(':') < 0 || url[0] == '/') { var winHref = window.location.href; var page = winHref.substring(0, winHref.lastIndexOf('/') + 1) + url; urlToLoad = page; } else { urlToLoad = url; } if (!includeVariables) { mainFrame.contentWindow.location.href = urlToLoad; return; } var urlWithVars = $axure.getLinkUrlWithVars(urlToLoad); var currentData = $axure.messageCenter.getState('page.data'); var currentUrl = currentData && currentData.location; if(currentUrl && currentUrl.indexOf('#') != -1) currentUrl = currentUrl.substring(0, currentUrl.indexOf('#')) // this is so we can make sure the current frame reloads if the variables have changed // by default, if the location is the same but the hash code is different, the browser will not // trigger a reload mainFrame.contentWindow.location.href = currentUrl && urlToLoad.toLowerCase() != currentUrl.toLowerCase() ? urlWithVars : 'resources/reload.html#' + encodeURI(urlWithVars); }; var pluginIds = []; var plugins = {}; var currentVisibleHostId = null; // --------------------------------------------- // Adds a tool box frame from a url to the interface. This is useful for loading plugins // settings is an object that supports the following properties: // - id : the id of the element for the plugin // - context : the context to create the plugin host for // - title : the user-visible caption for the plugin // --------------------------------------------- _player.createPluginHost = function (settings) { // right now we only understand an interface context if (!(!settings.context || settings.context === 'interface')) { throw ('unknown context type'); } if (!settings.id) throw ('each plugin host needs an id'); var host = $('') .appendTo('#interfaceControlFrameHostContainer'); host.hide(); var headerLink = $('' + settings.title.toUpperCase() + ''); headerLink .click($axure.utils.curry(interfaceControlHeaderButton_click, settings.id)).wrap(''); if((settings.id == 'feedbackHost' || settings.id == 'feedbackContainer') && pluginIds[pluginIds.length - 1] == 'debugHost') headerLink.parent().insertBefore('#debugHostBtn'); else headerLink.parent().appendTo('#interfaceControlFrameHeader'); pluginIds[pluginIds.length] = settings.id; plugins[settings.id] = settings; $(document).trigger('pluginCreated', [settings.gid]); }; // private methods var interfaceControlHeaderButton_click = function (id) { var clickedPlugin = $('#interfaceControlFrameHeader a[pluginId=' + id + ']'); if(clickedPlugin.hasClass('selected')) { clickedPlugin.removeClass('selected'); $('#' + id).hide(); _player.collapseToBar(); $(document).trigger('pluginShown',['']); } else { $('#interfaceControlFrameHeader a').removeClass('selected'); clickedPlugin.addClass('selected'); $('#' + currentVisibleHostId).hide(); $('#' + id).show(); currentVisibleHostId = id; _player.expandFromBar(); $(document).trigger('pluginShown', [plugins[id].gid]); } $(document).trigger('ContainerHeightChange'); }; $axure.player.showPlugin = function(gid) { for(var id in plugins) { if(plugins[id].gid == gid) { $('a[pluginId=\"' + id + '\"]').click(); break; } } }; } function setUpDocumentStateManager() { var mgr = $axure.prototype.documentStateManager = {}; $axure.utils.makeBindable(mgr, ['globalVariableChanged']); mgr.globalVariableValues = {}; mgr.setGlobalVariable = function(varname, value, source) { var arg = {}; arg.variableName = varname; arg.newValue = value; arg.oldValue = this.getGlobalVariable(varname); arg.source = source; mgr.globalVariableValues[varname] = value; this.triggerEvent('globalVariableChanged', arg); }; mgr.getGlobalVariable = function(varname) { return mgr.globalVariableValues[varname]; }; } function setUpPageStateManager() { var mgr = $axure.prototype.pageStateManager = {}; mgr.panelToStateIds = {}; } //***** messagecenter.js *****// if (typeof console == 'undefined') console = { log: function () { } }; // sniff chrome var CHROME_5_LOCAL = false; var CHROME = false; var SAFARI = false; var FIREFOX = false; var WEBKIT = false; var OS_MAC = false; var IOS = false; var ANDROID = false; var MOBILE_DEVICE = false; var IE = false; var IE_10_AND_BELOW = false; //ie 10 and lower var IE_11_AND_ABOVE = false; //ie 11 and above var BROWSER_VERSION = 5000; (function () { if(!window.$axure) window.$axure = function() {}; var useragent = window.navigator.userAgent; var edgeRegex = /Edge\\/([0-9]+)/g; var edgeMatch = edgeRegex.exec(useragent); $axure.browser = { isEdge: Boolean(edgeMatch) }; if(!$axure.browser.isEdge) { var chromeRegex = /Chrome\\/([0-9]+).([0-9]+)/g; var chromeMatch = chromeRegex.exec(useragent); CHROME = Boolean(chromeMatch); CHROME_5_LOCAL = chromeMatch && Number(chromeMatch[1]) >= 5 && location.href.indexOf('file://') >= 0; } var safariRegex = /Safari\\/([0-9]+)/g; var safariMatch = safariRegex.exec(useragent); SAFARI = Boolean(safariMatch) && !CHROME; //because chrome also inserts safari string into user agent var webkitRegex = /WebKit\\//g ; WEBKIT = Boolean(webkitRegex.exec(useragent)); FIREFOX = useragent.toLowerCase().indexOf('firefox') > -1; var macRegex = /Mac/g ; OS_MAC = Boolean(macRegex.exec(window.navigator.platform)); IOS = useragent.match(/iPhone/i) || useragent.match(/iPad/i) || useragent.match(/iPod/i); ANDROID = useragent.match(/Android/i); MOBILE_DEVICE = ANDROID || IOS || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Tablet PC/i) || navigator.userAgent.match(/Windows Phone/i); if($.browser) { if($.browser.msie) IE_10_AND_BELOW = true; else IE_11_AND_ABOVE = useragent.toLowerCase().indexOf('trident') > -1; BROWSER_VERSION = $.browser.version; } IE = IE_10_AND_BELOW || IE_11_AND_ABOVE; //Used by sitemap and variables.js getLinkUrl functions so that they know //whether to embed global variables in URL as query string or hash string //_shouldSendVars persists the value for sitemap instead of re-checking every time var _shouldSendVars; var _shouldSendVarsToServer = function(url) { if(typeof _shouldSendVars != 'undefined') { return _shouldSendVars; } if(SAFARI || (IE_10_AND_BELOW && BROWSER_VERSION < 10)) { var urlToCheck = typeof url != 'undefined' ? url : window.location.href; var serverRegex = /http:\\/\\/127\\.0\\.0\\.1:[0-9]{5}/g; var serverMatch = serverRegex.exec(urlToCheck); var previewRegex = /[0-9]{2}\\.[0-9]{2}\\.[0-9]{2}/g; var previewMatch = previewRegex.exec(urlToCheck); if(Boolean(serverMatch) && Boolean(previewMatch)) { _shouldSendVars = true; return _shouldSendVars; } } _shouldSendVars = false; return _shouldSendVars; }; $axure.shouldSendVarsToServer = _shouldSendVarsToServer; })(); (function() { var _topMessageCenter; var _messageCenter = {}; var _listeners = []; var _stateListeners = []; var _state = {}; var _eventObject = null; var _queuedMessages = []; var _initialized = false; // this is for the non Chrome 5 local scenarios. The \"top\" message center will dispatch to all the bottom ones var _childrenMessageCenters = []; // create $axure if it hasn't been created if (!window.$axure) window.$axure = function() {}; $axure.messageCenter = _messageCenter; // isolate scope, and initialize _topMessageCenter. (function() { if (!CHROME_5_LOCAL) { var topAxureWindow = window; try { while(topAxureWindow.parent && topAxureWindow.parent !== topAxureWindow && topAxureWindow.parent.$axure) topAxureWindow = topAxureWindow.parent; } catch(e) {} _topMessageCenter = topAxureWindow.$axure.messageCenter; } })(); $(window.document).ready(function() { if (CHROME_5_LOCAL) { $('body').append(\"\" + \"\"); _eventObject = window.document.createEvent('Event'); _eventObject.initEvent('axureMessageSenderEvent', true, true); $('#axureEventReceiverDiv').bind('axureMessageReceiverEvent', function () { var request = JSON.parse($(this).text()); _handleRequest(request); }); } else { if (_topMessageCenter != _messageCenter) { _topMessageCenter.addChildMessageCenter(_messageCenter); console.log('adding from ' + window.location.toString()); } } }); var _handleRequest = function (request) { // route the request to all the listeners for(var i = 0; i < _listeners.length; i++) _listeners[i](request.message, request.data); // now handle the queued messages if we're initializing if (request.message == 'initialize') { _initialized = true; // send all the queued messages and return for (var i = 0; i < _queuedMessages.length; i++) { var qRequest = _queuedMessages[i]; _messageCenter.postMessage(qRequest.message, qRequest.data); } _queuedMessages = []; } // and then handle the set state messages, if necessary if (request.message == 'setState') { _state[request.data.key] = request.data.value; for (var i = 0; i < _stateListeners.length; i++) { var keyListener = _stateListeners[i]; // if thep passed a null or empty value, always post the message if (!keyListener.key || keyListener.key == request.data.key) { keyListener.listener(request.data.key, request.data.value); } } } }; // ----------------------------------------------------------------------------------------- // This method allows for dispatching messages in the non-chromelocal scenario. // Each child calls this on _topMessageCenter // ----------------------------------------------------------------------------------------- _messageCenter.addChildMessageCenter = function(messageCenter) { _childrenMessageCenters[_childrenMessageCenters.length] = messageCenter; }; // ----------------------------------------------------------------------------------------- // This method allows for dispatching messages in the non-chromelocal scenario. // Each child calls this on _topMessageCenter // ----------------------------------------------------------------------------------------- _messageCenter.dispatchMessage = function(message, data) { _handleRequest({ message: message, data: data }); }; // ----------------------------------------------------------------------------------------- // ----------------------------------------------------------------------------------------- _messageCenter.dispatchMessageRecursively = function(message, data) { console.log(\"dispatched to \" + window.location.toString()); // dispatch to the top center first _messageCenter.dispatchMessage(message, data); $('iframe').each(function(index, frame) { //try,catch to handle permissions error in FF when loading pages from another domain try { if (frame.contentWindow.$axure && frame.contentWindow.$axure.messageCenter) { frame.contentWindow.$axure.messageCenter.dispatchMessageRecursively(message, data); } }catch(e) {} }); }; var _combineEventMessages = false; var _compositeEventMessageData = []; _messageCenter.startCombineEventMessages = function() { _combineEventMessages = true; } _messageCenter.endCombineEventMessages = function () { _messageCenter.sendCompositeEventMessage(); _combineEventMessages = false; } _messageCenter.sendCompositeEventMessage = function () { _messageCenter.postMessage('axCompositeEventMessage', _compositeEventMessageData); _compositeEventMessageData = []; } _messageCenter.postMessage = function (message, data) { if(_combineEventMessages) { if(message == 'axEvent' || message == 'axCase' || message == 'axAction' || message == 'axEventComplete') { _compositeEventMessageData.push({ 'message': message, 'data': data }); if(_compositeEventMessageData.length >= 10) _messageCenter.sendCompositeEventMessage(); return; } } if(!CHROME_5_LOCAL) { _topMessageCenter.dispatchMessageRecursively(message, data); } else { var request = { message: message, data: data }; if(_initialized) { var senderDiv = window.document.getElementById('axureEventSenderDiv'); var messageText = JSON.stringify(request); // console.log('sending event: ' + messageText); senderDiv.innerText = messageText; senderDiv.dispatchEvent(_eventObject); // console.log('event sent'); } else { _queuedMessages[_queuedMessages.length] = request; } } }; _messageCenter.setState = function(key, value) { var data = { key: key, value: value }; _messageCenter.postMessage('setState', data); }; _messageCenter.getState = function(key) { return _state[key]; }; _messageCenter.addMessageListener = function(listener) { _listeners[_listeners.length] = listener; }; _messageCenter.addStateListener = function(key, listener) { _stateListeners[_stateListeners.length] = { key: key, listener: listener }; }; })();"},{"title":"","date":"2023-02-27T14:44:57.224Z","updated":"2023-02-27T14:44:57.224Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/prototypePre.js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/prototypePre.js","excerpt":"","text":"// 8.0.0.3382. Generated 1/14/2019 10:26:32 PM UTC //***** axQuery.js *****// $axure = function(query) { return $axure.query(query); }; // ******* AxQuery and Page metadata ******** // (function() { var $ax = function() { var returnVal = $axure.apply(this, arguments); var axFn = $ax.fn; for (var key in axFn) { returnVal[key] = axFn[key]; } return returnVal; }; $ax.public = $axure; $ax.fn = {}; $axure.internal = function(initFunction) { //Attach messagecenter to $ax object so that it can be used in viewer.js, etc in internal scope if(!$ax.messageCenter) $ax.messageCenter = $axure.messageCenter; return initFunction($ax); }; var _lastFiredResize = 0; var _resizeFunctions = []; var _lastTimeout; var _fireResize = function() { if (_lastTimeout) window.clearTimeout(_lastTimeout); _lastTimeout = undefined; _lastFiredResize = new Date().getTime(); for(var i = 0; i < _resizeFunctions.length; i++) _resizeFunctions[i](); }; $axure.resize = function(fn) { if(fn) _resizeFunctions[_resizeFunctions.length] = fn; else $(window).resize(); }; $(window).resize(function() { var THRESHOLD = 50; var now = new Date().getTime(); if(now - _lastFiredResize > THRESHOLD) { _fireResize(); } else if(!_lastTimeout) { _lastTimeout = window.setTimeout(_fireResize, THRESHOLD); } }); window.$obj = function(id) { return $ax.getObjectFromElementId(id); }; window.$id = function(obj) { return obj.scriptIds[0]; }; window.$jobj = function(id) { return $(document.getElementById(id)); }; window.$jobjAll = function(id) { return $addAll($jobj(id), id); }; window.$addAll = function(jobj, id) { return jobj.add($jobj(id + '_ann')).add($jobj(id + '_ref')); }; $ax.INPUT = function(id) { return id + \"_input\"; }; $ax.IsImageFocusable = function (type) { return $ax.public.fn.IsImageBox(type) || $ax.public.fn.IsVector(type) || $ax.public.fn.IsTreeNodeObject(type) || $ax.public.fn.IsTableCell(type); }; $ax.IsTreeNodeObject = function (type) { return $ax.public.fn.IsTreeNodeObject(type); }; $ax.IsSelectionButton = function (type) { return $ax.public.fn.IsCheckBox(type) || $ax.public.fn.IsRadioButton(type); }; var _fn = {}; $axure.fn = _fn; $axure.fn.jQuery = function() { var elements = this.getElements(); return $(elements); }; $axure.fn.$ = $axure.fn.jQuery; var _query = function(query, queryArg) { var returnVal = {}; var _axQueryObject = returnVal.query = { }; _axQueryObject.filterFunctions = []; if (query == '*') { _axQueryObject.filterFunctions[0] = function() { return true; }; } else if (typeof(query) === 'function') { _axQueryObject.filterFunctions[0] = query; } else { var firstString = $.trim(query.toString()); if (firstString.charAt(0) == '@') { _axQueryObject.filterFunctions[0] = function(diagramObject) { return diagramObject.label == firstString.substring(1); }; } else if (firstString.charAt(0) == '#') { _axQueryObject.elementId = firstString.substring(1); } else { if (firstString == 'label') { _axQueryObject.filterFunctions[0] = function(diagramObject) { return queryArg instanceof Array && queryArg.indexOf(diagramObject.label) > 0 || queryArg instanceof RegExp && queryArg.test(diagramObject.label) || diagramObject.label == queryArg; }; } else if(firstString == 'elementId') { _axQueryObject.filterFunctions[0] = function(diagramObject, elementId) { return queryArg instanceof Array && queryArg.indexOf(elementId) > 0 || elementId == queryArg; }; } } } var axureFn = $axure.fn; for (var key in axureFn) { returnVal[key] = axureFn[key]; } return returnVal; }; $axure.query = _query; var _getFilterFnFromQuery = function(query) { var filter = function(diagramObject, elementId) { // Non diagram objects are allowed to be queryed, such as text inputs. if (diagramObject && !$ax.public.fn.IsReferenceDiagramObject(diagramObject.type) && !document.getElementById(elementId)) return false; var retVal = true; for(var i = 0; i < query.filterFunctions.length && retVal; i++) { retVal = query.filterFunctions[i](diagramObject, elementId); } return retVal; }; return filter; }; $ax.public.fn.filter = function(query, queryArg) { var returnVal = _query(query, queryArg); if(this.query.elementId) returnVal.query.elementId = this.query.elementId; //If there is already a function, offset by 1 when copying other functions over. var offset = returnVal.query.filterFunctions[0] ? 1 : 0; //Copy all functions over to new array. for(var i = 0; i < this.query.filterFunctions.length; i++) returnVal.query.filterFunctions[i+offset] = this.query.filterFunctions[i]; //Functions are in reverse order now returnVal.query.filterFunctions.reverse(); return returnVal; }; $ax.public.fn.each = function(fn) { var filter = _getFilterFnFromQuery(this.query); var elementIds = this.query.elementId ? [this.query.elementId] : $ax.getAllElementIds(); for (var i = 0; i < elementIds.length; i++) { var elementId = elementIds[i]; var diagramObject = $ax.getObjectFromElementId(elementId); if (filter(diagramObject, elementId)) { fn.apply(diagramObject, [diagramObject, elementId]); } } }; $ax.public.fn.getElements = function() { var elements = []; this.each(function(dObj, elementId) { var elementById = document.getElementById(elementId); if(elementById) elements[elements.length] = elementById; }); return elements; }; $ax.public.fn.getElementIds = function() { var elementIds = []; this.each(function(dObj, elementId) { elementIds[elementIds.length] = elementId; }); return elementIds; }; // Deep means to keep getting parents parent until at the root parent. Parent is then an array instead of an id. // Filter options: layer, rdo, repeater, item, dynamicPanel, state $ax.public.fn.getParents = function (deep, filter) { if(filter == '*') filter = ['layer', 'rdo', 'repeater', 'item', 'dynamicPanel', 'state']; var elementIds = this.getElementIds(); var parentIds = []; var getParent = function(elementId) { var containerIndex = elementId.indexOf('_container'); if(containerIndex !== -1) elementId = elementId.substring(0, containerIndex); if(elementId.indexOf('_text') !== -1) elementId = $ax.GetShapeIdFromText(elementId); // Check repeater item before layer, because repeater item detects it's parent layer, but wants to go directly to it's repeater first. // if repeater item, then just return repeater var scriptId = $ax.repeater.getScriptIdFromElementId(elementId); var itemNum = $ax.repeater.getItemIdFromElementId(elementId); var parentRepeater = $ax.getParentRepeaterFromScriptId(scriptId); // scriptId is item or repeater itself if (parentRepeater == scriptId) { // If you are repeater item, return your repeater if (itemNum) return filter.indexOf('repeater') != -1 ? scriptId : getParent(scriptId); // Otherwise you are actually at repeater, clean parentRepeater, or else you loop parentRepeater = undefined; } // Layer only references it if it is a direct layer to it var parent = $ax.getLayerParentFromElementId(elementId); // If layer is allowed we found parent, otherwise ignore and keep climbing if (parent) return filter.indexOf('layer') != -1 ? parent : getParent(parent); // if state, then just return panel if(scriptId.indexOf('_state') != -1) { var panelId = $ax.repeater.createElementId(scriptId.split('_')[0], itemNum); // If dynamic panel is allowed we found parent, otherwise ignore and keep climbing return filter.indexOf('dynamicPanel') != -1 ? panelId : getParent(panelId); } var parentType = ''; if(parentRepeater) { parentType = 'item'; parent = $ax.repeater.createElementId(parentRepeater, itemNum); } var masterPath = $ax.getPathFromScriptId($ax.repeater.getScriptIdFromElementId(elementId)); masterPath.pop(); if(masterPath.length > 0) { var masterId = $ax.getElementIdFromPath(masterPath, { itemNum: itemNum }); if(!masterId) return undefined; var masterRepeater = $ax.getParentRepeaterFromElementId($ax.repeater.getScriptIdFromElementId(masterId)); if(!parentRepeater || masterRepeater) { parentType = 'rdo'; parent = masterId; } } var obj = $obj(elementId); var parentDynamicPanel = obj.parentDynamicPanel; if(parentDynamicPanel) { // Make sure the parent if not parentRepeater, or dynamic panel is also in that repeater // If there is a parent master, the dynamic panel must be in it, otherwise parentDynamicPanel would be undefined. var panelPath = masterPath; panelPath[panelPath.length] = parentDynamicPanel; panelId = $ax.getElementIdFromPath(panelPath, { itemNum: itemNum }); if(!panelId) return undefined; var panelRepeater = $ax.getParentRepeaterFromElementId(panelId); if(!parentRepeater || panelRepeater) { parentType = 'state'; parent = panelId + '_state' + obj.panelIndex; } } // If at top or parent type is desired, then return parent, otherwise keep climbing return !parent || filter.indexOf(parentType) != -1 ? parent : getParent(parent); }; for(var i = 0; i < elementIds.length; i++) { var parent = getParent(elementIds[i]); if(deep) { var parents = []; while(parent) { parents[parents.length] = parent; // If id is not a valid object, you are either repeater item or dynamic panel state //if(!$obj(parent)) parent = $ax.visibility.getWidgetFromContainer($jobj(parent).parent().attr('id')); parent = getParent(parent); } parent = parents; } parentIds[parentIds.length] = parent; } return parentIds; }; // Get the path to the child, where non leaf nodes can be masters, layers, dynamic panels, and repeaters. $ax.public.fn.getChildren = function(deep, ignoreUnplaced) { // ignoreUnplaced should probably be the default, but when that is done a full audit of usages should be done var elementIds = this.getElementIds(); var children = []; var getChildren = function(elementId) { var obj = $obj(elementId); if(!obj) return undefined; var isRepeater = obj.type == $ax.constants.REPEATER_TYPE; var isDynamicPanel = obj.type == $ax.constants.DYNAMIC_PANEL_TYPE; var isLayer = obj.type == $ax.constants.LAYER_TYPE; var isMaster = obj.type == $ax.constants.MASTER_TYPE; var isMenu = obj.type == $ax.constants.MENU_OBJECT_TYPE; var isTreeNode = obj.type == $ax.constants.TREE_NODE_OBJECT_TYPE; var isTable = obj.type == $ax.constants.TABLE_TYPE; //var isCompoundVector = obj.type == $ax.constants.VECTOR_SHAPE_TYPE && obj.generateCompound; if (isRepeater || isDynamicPanel || isLayer || isMaster || isMenu || isTreeNode || isTable) {// || isCompoundVector) { // Find parent that children should be pulled from. Default is just the elementId query (used by table and master) var parent = $jobj(elementId); if(isRepeater) { parent = $(); var itemIds = $ax.getItemIdsForRepeater(elementId); for(var itemIndex = 0; itemIndex < itemIds.length; itemIndex++) parent = parent.add($jobj($ax.repeater.createElementId(elementId, itemIds[itemIndex]))); } else if(isDynamicPanel) { // Really only need to do active state probably... parent = $jobj(elementId).children(); // Get through all containers while ($(parent[0]).attr('id').indexOf('container') != -1) parent = parent.children(); // Now at states, but want states content parent = parent.children(); } else if(isTreeNode) parent = $jobj($ax.repeater.applySuffixToElementId(elementId, '_children')); // Menu doesn't want all children, only tables and menus, so it must be handled specially var children = isMenu ? parent.children('.ax_table').add(parent.children('.ax_menu')) : parent.children(); children = $ax.visibility.getRealChildren(_fixForBasicLinks(children)); // For tree nodes you want the the button shape contained by the elementQuery too if(isTreeNode) { var treeNodeChildren = $jobj(elementId).children(); for(var treeNodeIndex = 0; treeNodeIndex < treeNodeChildren.length; treeNodeIndex++) { var treeNodeChild = $(treeNodeChildren[treeNodeIndex]); var childObj = $obj(treeNodeChild.attr('id')); if (childObj && $ax.public.fn.IsVector(childObj.type)) children = children.add(treeNodeChild); } } var childrenIds = []; for(var childIndex = 0; childIndex < children.length; childIndex++) { var childObj = $(children[childIndex]); var id = childObj.attr('id'); if(typeof(id) == 'undefined' && childObj.is('a')) id = $(childObj.children()[0]).attr('id'); // Ignore annotations and any other children that are not elements if (id.split('_').length > 1) continue; // Ignore Unplaced if(ignoreUnplaced && $ax.visibility.isScriptIdLimbo($ax.repeater.getScriptIdFromElementId(id))) continue; childrenIds.push(id); } if(deep) { var childObjs = []; for(var i = 0; i < childrenIds.length; i++) { var childId = childrenIds[i]; childObjs[i] = { id: childId, children: getChildren(childId) }; } childrenIds = childObjs; } return childrenIds; } return undefined; }; for(var i = 0; i < elementIds.length; i++) { children[children.length] = { id : elementIds[i], children : getChildren(elementIds[i])}; } return children; }; var _fixForBasicLinks = function(query) { var hasBasicLinks = query.filter('.basiclink').length > 0; if(!hasBasicLinks) return query; var retval = $(); for(var i = 0; i < query.length; i++) { var child = $(query[i]); if(child.hasClass('basiclink')) retval = retval.add(child.children()); else retval = retval.add(child); } return retval; }; })(); //***** globals.js *****// $axure.internal(function($ax) { var _globals = $ax.globals = {}; $ax.globals.MaxZIndex = 1000; $ax.globals.MinZIndex = -1000; }); //***** axutils.js *****// /* * * * * */ (function() { // define the root namespace object if(!window.$axure) window.$axure = {}; $axure.utils = {}; // ------------------------------------------------------------------------ // Makes an object bindable // ------------------------------------------------------------------------ $axure.utils.makeBindable = function(obj, events) { if(obj.registeredBindings != null) return; // copy the events obj.bindableEvents = events.slice(); obj.registeredBindings = {}; obj.bind = function(eventName, fn) { var binding = {}; binding.eventName = eventName; binding.action = fn; var bindingList = this.registeredBindings[eventName]; if(bindingList == null) { bindingList = []; this.registeredBindings[eventName] = bindingList; } bindingList[bindingList.length] = binding; }; obj.unbind = function(eventName) { if(eventName.indexOf('.') >= 0) { this.registeredBindings[eventName] = null; } else { var event = eventName.split('.')[0]; for(var bindingKey in this.registeredBindings) { if(bindingKey.split('.')[0] == event) { this.registeredBindings[bindingKey] = null; } } } }; obj.triggerEvent = function(eventName, arg) { for(var bindingKey in this.registeredBindings) { if(bindingKey.split('.')[0] == eventName) { var bindings = this.registeredBindings[bindingKey]; for(var i = 0; i < bindings.length; i++) { if(arg == null) { bindings[i].action(); } else { bindings[i].action(arg); } } } } }; }; $axure.utils.loadCSS = function(url) { $('head').append(''); }; $axure.utils.loadJS = function(url) { $('head').append(''); }; $axure.utils.curry = function(fn) { var curriedArgs = Array.prototype.slice.call(arguments, [1]); return function() { fn.apply(this, curriedArgs.concat(Array.prototype.slice.call(arguments))); }; }; $axure.utils.succeeded = function(result) { return result && result.success; }; $axure.utils.createUniqueTag = function() { return Math.random().toString().substring(2) + Math.random().toString().substring(2) + Math.random().toString().substring(2) + Math.random().toString().substring(2); }; $axure.utils.formatDate = function(date) { var months = [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]; var hours = date.getHours(); var amPm = (hours > 11 ? 'PM' : 'AM'); hours = hours % 12; if(hours == '0') hours = '12'; var minutes = date.getMinutes() + ''; if(minutes.length == 1) { minutes = '0' + minutes; } return [ months[date.getMonth()], ' ', date.getDate(), ' ', date.getFullYear(), ' ', hours, ':', minutes, ' ', amPm].join(''); }; $axure.utils.quickObject = function() { var returnVal = {}; for(var i = 0; i < arguments.length; i += 2) { returnVal[arguments[i]] = arguments[i + 1]; } return returnVal; }; var matrixBase = { mul: function(val) { if(val.x !== undefined) { return $axure.utils.Vector2D( this.m11 * val.x + this.m12 * val.y + this.tx, this.m21 * val.x + this.m22 * val.y + this.ty); } else if(val.m11) { return $axure.utils.Matrix2D( this.m11 * val.m11 + this.m12 * val.m21, this.m11 * val.m12 + this.m12 * val.m22, this.m21 * val.m11 + this.m22 * val.m21, this.m21 * val.m12 + this.m22 * val.m22, val.tx + this.tx * val.m11 + this.ty * val.m21, val.ty + this.tx * val.m12 + this.ty * val.m22 ); } else if(Number(val)) { var num = Number(val); return $axure.utils.Matrix2D(this.m11 * num, this.m12 * num, this.m21 * num, this.m22 * num, this.tx * num, this.ty * num); } else return undefined; }, rotate: function(angle) { var angleRad = angle * Math.PI / 180; var c = Math.cos(angleRad); var s = Math.sin(angleRad); return this.mul($axure.utils.Matrix2D(c, -s, s, c)); }, translate: function(tx, ty) { return this.mul($axure.utils.Matrix2D(1, 0, 0, 1, tx, ty)); } }; $axure.utils.Matrix2D = function(m11, m12, m21, m22, tx, ty) { return $.extend({ m11: m11 || 0, m12: m12 || 0, m21: m21 || 0, m22: m22 || 0, tx: tx || 0, ty: ty || 0 }, matrixBase); }; $axure.utils.Vector2D = function(x, y) { return { x: x || 0, y: y || 0 }; }; $axure.utils.Matrix2D.identity = function() { return $axure.utils.Matrix2D(1, 0, 0, 1, 0, 0); }; $axure.utils.fixPng = function(png) { if(!(/MSIE ((5\\.5)|6)/.test(navigator.userAgent) && navigator.platform == \"Win32\")) return; var src = png.src; if(!png.style.width) { png.style.width = $(png).width(); } if(!png.style.height) { png.style.height = $(png).height(); } png.onload = function() { }; png.src = $axure.utils.getTransparentGifPath(); png.runtimeStyle.filter = \"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='\" + src + \"',sizingMethod='scale')\"; }; })(); // TODO: [mas] simplify this if(window.$axure && window.$axure.internal) { $axure.internal(function($ax) { $ax.utils = $axure.utils; }); } // Its too much of a pain to escape everything and use regular expresions, just replace manually (function () { var original = String.prototype.replace; // TODO: maybe use flags or object instead to pass options in String.prototype.replace = function (search, newVal, replaceFirst, ignoreCase) { // Use original is some cases if (search instanceof RegExp) return original.apply(this, arguments); search = String(search); var searchCompare = ignoreCase ? this.toLowerCase() : this; if (ignoreCase) search = search.toLowerCase(); var searchLength = search.length; var thisLength = this.length; var index = 0; var retVal = ''; while (index != -1) { var nextIndex = searchCompare.indexOf(search, index); if (nextIndex != -1) { retVal += this.substring(index, nextIndex) + newVal; index = nextIndex + searchLength; if (index >= thisLength) index = -1; } else { retVal += this.substring(index); index = -1; } if (replaceFirst) break; } return retVal; }; if (!Array.prototype.indexOf) { Array.prototype.indexOf = function (elt /*, from*/) { var len = this.length >>> 0; var from = trunc(Number(arguments[1]) || 0); if(from < 0) from += len; for(; from < len; from++) { if(from in this && this[from] === elt) return from; } return -1; }; } var trunc = function(num) { return num < 0 ? Math.ceil(num) : Math.floor(num); }; })(); //***** annotation.js *****// // ******* Annotation MANAGER ******** // $axure.internal(function($ax) { var NOTE_SIZE = 10; var _annotationManager = $ax.annotation = {}; var _updateLinkLocations = $ax.annotation.updateLinkLocations = function(elementId) { var textId = $ax.GetTextPanelId(elementId); if(!textId) return; var rotation = $ax.getObjectFromElementId(elementId).style.textRotation; //we have to do this because webkit reports the post-transform position but when you set positions it's pre-transform if(WEBKIT && rotation) { //we can dynamiclly rotate a widget now, show need to remember the transform rather than just remove it //here jquery.css will return 'none' if element is display none var oldShapeTransform = document.getElementById(elementId).style['-webkit-transform']; var oldTextTransform = document.getElementById(textId).style['-webkit-transform']; $('#' + elementId).css('-webkit-transform', 'scale(1)'); $('#' + textId).css('-webkit-transform', 'scale(1)'); } $('#' + textId).find('span[id$=\"_ann\"]').each(function(index, value) { var elementId = value.id.replace('_ann', ''); var annPos = $(value).position(); var left = annPos.left - NOTE_SIZE; var top = annPos.top; $('#' + elementId + 'Note').css('left', left).css('top', top); }); //undo the transform reset if(WEBKIT && rotation) { $('#' + elementId).css('-webkit-transform', oldShapeTransform || ''); $('#' + textId).css('-webkit-transform', oldTextTransform || ''); } }; var dialogs = {}; $ax.annotation.ToggleWorkflow = function(event, id, width, height) { if(dialogs[id]) { var $dialog = dialogs[id]; // reset the dialog dialogs[id] = undefined; if($dialog.dialog(\"isOpen\")) { $dialog.dialog(\"close\"); return; } } // we'll need to save the scroll position just for stupid IE which will skip otherwise var win = $(window); var scrollY = win.scrollTop(); var scrollX = win.scrollLeft(); var bufferH = 10; var bufferV = 10; var blnLeft = false; var blnAbove = false; var sourceTop = event.pageY - scrollY; var sourceLeft = event.pageX - scrollX; if(sourceLeft > width + bufferH) { blnLeft = true; } if(sourceTop > height + bufferV) { blnAbove = true; } var top = 0; var left = 0; if(blnAbove) top = sourceTop - height - 20; else top = sourceTop + 10; if(blnLeft) left = sourceLeft - width - 4; else left = sourceLeft - 6; $ax.globals.MaxZIndex = $ax.globals.MaxZIndex + 1; if(IE_10_AND_BELOW) height += 50; var dObj = $ax.getObjectFromElementId(id); var ann = dObj.annotation; var $dialog = $('') .appendTo('body') .html($ax.legacy.GetAnnotationHtml(ann)) .dialog({ title: dObj.label, width: width, height: height, minHeight: 150, zIndex: $ax.globals.MaxZIndex, position: [left, top], dialogClass: 'dialogFix', autoOpen: false }); $dialog.parent().appendTo('#base'); $dialog.dialog('open'); dialogs[id] = $dialog; // scroll ... just for IE window.scrollTo(scrollX, scrollY); }; $ax.annotation.InitializeAnnotations = function (query) { if(!$ax.document.configuration.showAnnotations) return; query.each(function(dObj, elementId) { if(!dObj.annotation) return; if(dObj.type == 'hyperlink') { var parentId = $ax.GetParentIdFromLink(elementId); var textId = $ax.GetTextPanelId(parentId); var elementIdQuery = $('#' + elementId); elementIdQuery.after(\"&#8203;\"); if($ax.document.configuration.useLabels) { var label = $('#' + elementId).attr(\"data-label\"); if(!label || label == \"\") label = \"?\"; $('#' + textId).append(\"\" + label + \"\"); } else { $('#' + textId).append(\"\"); } $('#' + elementId + 'Note').click(function(e) { $ax.annotation.ToggleWorkflow(e, elementId, 300, 200, false); return false; }); _updateLinkLocations(parentId); } else { if($ax.document.configuration.useLabels) { var label = $('#' + elementId).attr(\"data-label\"); if(!label || label == \"\") label = \"?\"; $('#' + elementId + \"_ann\").append(\"\" + label + \"\"); } else { $('#' + elementId + \"_ann\").append(\"\"); } $('#' + elementId + 'Note').click(function(e) { $ax.annotation.ToggleWorkflow(e, elementId, 300, 200, false); return false; }); } $('#' + elementId + 'Note.annnoteimage').append(\"\"); }); }; $ax.annotation.jQueryAnn = function(query) { var elementIds = []; query.each(function(diagramObject, elementId) { if(diagramObject.annotation) elementIds[elementIds.length] = elementId; }); var elementIdSelectors = jQuery.map(elementIds, function(elementId) { return '#' + elementId + '_ann'; }); var jQuerySelectorText = (elementIdSelectors.length > 0) ? elementIdSelectors.join(', ') : ''; return $(jQuerySelectorText); }; $(window.document).ready(function() { $ax.annotation.InitializeAnnotations($ax(function(dObj) { return dObj.annotation; })); $ax.messageCenter.addMessageListener(function(message, data) { //If the annotations are being hidden via the Sitemap toggle button, hide any open dialogs if(message == 'annotationToggle') { if(data == false) { for(var index in dialogs) { var $dialog = dialogs[index]; if($dialog.dialog(\"isOpen\")) { $dialog.dialog(\"close\"); } } } } }); }); //adjust annotation location to a element's top right corner $ax.annotation.adjustIconLocation = function(id) { var ann = document.getElementById(id + \"_ann\"); if(ann) { var corners = $ax.public.fn.getCornersFromComponent(id); var newTopRight = $ax.public.fn.vectorPlus(corners.relativeTopRight, corners.centerPoint); //note size is 14x8, this is how rp calculated it as well ann.style.left = (newTopRight.x - 7) + \"px\"; ann.style.top = (newTopRight.y - 4) + \"px\"; } var ref = document.getElementById(id + \"_ref\"); if(ref) { if(!corners) corners = $ax.public.fn.getCornersFromComponent(id); var newBottomRight = $ax.public.fn.vectorPlus(corners.relativeBottomRight, corners.centerPoint); ref.style.left = (newBottomRight.x - 8) + 'px'; ref.style.top = (newBottomRight.y - 10) + 'px'; } } }); //***** axQuery.std.js *****// // ******* AxQuery Plugins ******** // $axure.internal(function($ax) { $ax.constants = {}; $ax.constants.TABLE_TYPE = 'table'; $ax.constants.MENU_OBJECT_TYPE = 'menuObject'; $ax.constants.MASTER_TYPE = 'master'; $ax.constants.PAGE_TYPE = 'page'; $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE = 'referenceDiagramObject'; $ax.constants.REPEATER_TYPE = 'repeater'; $ax.constants.DYNAMIC_PANEL_TYPE = 'dynamicPanel'; $ax.constants.LAYER_TYPE = 'layer'; $ax.constants.TEXT_BOX_TYPE = 'textBox'; $ax.constants.TEXT_AREA_TYPE = 'textArea'; $ax.constants.LIST_BOX_TYPE = 'listBox'; $ax.constants.COMBO_BOX_TYPE = 'comboBox'; $ax.constants.CHECK_BOX_TYPE = 'checkbox'; $ax.constants.RADIO_BUTTON_TYPE = 'radioButton'; $ax.constants.BUTTON_TYPE = 'button'; //html button $ax.constants.IMAGE_MAP_REGION_TYPE = 'imageMapRegion'; $ax.constants.IMAGE_BOX_TYPE = 'imageBox'; $ax.constants.VECTOR_SHAPE_TYPE = 'vectorShape'; $ax.constants.SNAPSHOT_TYPE = 'screenshot'; $ax.constants.TREE_NODE_OBJECT_TYPE = 'treeNodeObject'; $ax.constants.TABLE_CELL_TYPE = 'tableCell'; $ax.constants.VERTICAL_LINE_TYPE = 'verticalLine'; $ax.constants.HORIZONTAL_LINE_TYPE = 'horizontalLine'; $ax.constants.INLINE_FRAME_TYPE = 'inlineFrame'; $ax.constants.CONNECTOR_TYPE = 'connector'; $ax.constants.ALL_TYPE = '*'; $ax.constants.TEXT_TYPE = 'richTextPanel'; $ax.constants.LINK_TYPE = 'hyperlink'; // TODO: Need solid passo f this. Constants should be able to bemade local, may need some public lists or something. // public.fn function should take not arg and use this. May need some $ax.IsType fuctions that will take a type arg and be static $ax.public.fn.IsTable = function (type) { return type == $ax.constants.TABLE_TYPE; } $ax.public.fn.IsMenuObject = function (type) { return type == $ax.constants.MENU_OBJECT_TYPE; } $ax.public.fn.IsMaster = function (type) { return type == $ax.constants.MASTER_TYPE; } $ax.public.fn.IsPage = function (type) { return type == $ax.constants.PAGE_TYPE; } $ax.public.fn.IsReferenceDiagramObject = function (type) { return type == $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE; } $ax.public.fn.IsRepeater = function (type) { return type == $ax.constants.REPEATER_TYPE; } $ax.public.fn.IsDynamicPanel = $ax.IsDynamicPanel = function (type) { return type == $ax.constants.DYNAMIC_PANEL_TYPE; } $ax.public.fn.IsLayer = $ax.IsLayer = function (type) { return type == $ax.constants.LAYER_TYPE; } $ax.public.fn.IsTextBox = function (type) { return type == $ax.constants.TEXT_BOX_TYPE; } $ax.public.fn.IsTextArea = function (type) { return type == $ax.constants.TEXT_AREA_TYPE; } $ax.public.fn.IsListBox = function (type) { return type == $ax.constants.LIST_BOX_TYPE; } $ax.public.fn.IsComboBox = function (type) { return type == $ax.constants.COMBO_BOX_TYPE; } $ax.public.fn.IsCheckBox = function (type) { return type == $ax.constants.CHECK_BOX_TYPE; } $ax.public.fn.IsRadioButton = function (type) { return type == $ax.constants.RADIO_BUTTON_TYPE; } $ax.public.fn.IsButton = function (type) { return type == $ax.constants.BUTTON_TYPE; } $ax.public.fn.IsIamgeMapRegion = function (type) { return type == $ax.constants.IMAGE_MAP_REGION_TYPE; } $ax.public.fn.IsImageBox = function (type) { return type == $ax.constants.IMAGE_BOX_TYPE; } $ax.public.fn.IsVector = function (type) { return type == $ax.constants.VECTOR_SHAPE_TYPE; } $ax.public.fn.IsSnapshot = function (type) { return type == $ax.constants.SNAPSHOT_TYPE; } $ax.public.fn.IsTreeNodeObject = function (type) { return type == $ax.constants.TREE_NODE_OBJECT_TYPE; } $ax.public.fn.IsTableCell = function (type) { return type == $ax.constants.TABLE_CELL_TYPE; } $ax.public.fn.IsInlineFrame = function (type) { return type == $ax.constants.INLINE_FRAME_TYPE; } $ax.public.fn.IsConnector = function (type) { return type == $ax.constants.CONNECTOR_TYPE; } $ax.public.fn.IsContainer = function (type) { return type== $ax.constants.VECTOR_SHAPE_TYPE || type == $ax.constants.TABLE_TYPE || type == $ax.constants.MENU_OBJECT_TYPE || type == $ax.constants.TREE_NODE_OBJECT_TYPE; } var PLAIN_TEXT_TYPES = [$ax.constants.TEXT_BOX_TYPE, $ax.constants.TEXT_AREA_TYPE, $ax.constants.LIST_BOX_TYPE, $ax.constants.COMBO_BOX_TYPE, $ax.constants.CHECK_BOX_TYPE, $ax.constants.RADIO_BUTTON_TYPE, $ax.constants.BUTTON_TYPE]; $ax.public.fn.IsResizable = function (type) { return $.inArray(type, RESIZABLE_TYPES) !== -1; } var RESIZABLE_TYPES = [ $ax.constants.BUTTON_TYPE, $ax.constants.DYNAMIC_PANEL_TYPE, $ax.constants.IMAGE_BOX_TYPE, $ax.constants.IMAGE_MAP_REGION_TYPE, $ax.constants.INLINE_FRAME_TYPE, $ax.constants.LAYER_TYPE, $ax.constants.LIST_BOX_TYPE, $ax.constants.COMBO_BOX_TYPE, $ax.constants.VECTOR_SHAPE_TYPE, $ax.constants.TEXT_AREA_TYPE, $ax.constants.TEXT_BOX_TYPE, $ax.constants.SNAPSHOT_TYPE ]; $ax.public.fn.SupportsRichText = function() { var obj = $obj(this.getElementIds()[0]); // Catch root tree nodes as they are not supported. if(obj.type == $ax.constants.TREE_NODE_OBJECT_TYPE) return obj.friendlyType == 'Tree Node'; // Do the same for tree node icons maybe? return $.inArray(obj.type, SUPPORTS_RICH_TEXT_TYPES) != -1; } var SUPPORTS_RICH_TEXT_TYPES = [$ax.constants.CHECK_BOX_TYPE, $ax.constants.RADIO_BUTTON_TYPE, $ax.constants.IMAGE_BOX_TYPE, $ax.constants.VECTOR_SHAPE_TYPE, $ax.constants.TABLE_CELL_TYPE, $ax.constants.CONNECTOR_TYPE]; var _addJQueryFunction = function(name) { $ax.public.fn[name] = function() { var val = $.fn[name].apply(this.jQuery(), arguments); return arguments[0] ? this : val; }; }; var _jQueryFunctionsToAdd = ['text', 'val', 'css']; for (var jqueryFunctionIndex = 0; jqueryFunctionIndex < _jQueryFunctionsToAdd.length; jqueryFunctionIndex++) _addJQueryFunction(_jQueryFunctionsToAdd[jqueryFunctionIndex]); // var _addJQueryEventFunction = function(name) { // $ax.public.fn[name] = function() { // $.fn[name].apply(this.jQuery(), arguments); // return this; // }; // }; // var _addJQueryEventFunction = function(name) { // $ax.public.fn[name] = (function(nn) { // return function() { // $.fn[nn].apply(this.jQuery(), arguments); // return this; // }; // })(name); // }; var _addJQueryEventFunction = function(name) { $ax.public.fn[name] = function() { //With Martin - No idea why this is necessary. We tried encapsulating the function thinking it was related to closure (above), //but that didn't fix the problem. If we don't add this Repeaters will give \"Uncaught TypeError: Object # has no method 'apply'\" //here (but Indeterminately, often on larger/slower Repeaters) because it is Undefined. However it seems the catch is never hit //if we surround the statement with the try/catch. Perhaps the try/catch block creates a scope or closure. try { $.fn[name].apply(this.jQuery(), arguments); } catch(e) { console.log(\"Couldn't find the event: \" + name); } return this; }; }; var _jQueryEventFunctionsToAdd = ['click', 'mouseenter', 'mouseleave', 'bind']; for(var jqueryEventIndex = 0; jqueryEventIndex < _jQueryEventFunctionsToAdd.length; jqueryEventIndex++) _addJQueryEventFunction(_jQueryEventFunctionsToAdd[jqueryEventIndex]); $ax.public.fn.openLink = function(url, includeVariables) { this.jQuery().each(function() { if(!($(this).is('iframe'))) { return; } var objIframe = $(this).get(0); $ax.navigate({ url: url, target: \"frame\", includeVariables: includeVariables, frame: objIframe }); }); return this; }; $ax.public.fn.SetPanelState = function(stateNumber, options, showWhenSet) { var animateInInfo = _getAnimateInfo(options && options.animateIn, 500); var animateOutInfo = _getAnimateInfo(options && options.animateOut, 500); var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { var elementId = elementIds[index]; if ($ax.public.fn.IsDynamicPanel($ax.getTypeFromElementId(elementId))) { var stateName = $ax.visibility.GetPanelStateId(elementId, Number(stateNumber) - 1); var wasVisible = $ax.visibility.IsIdVisible(elementId); // If compressing because you are fit to content and the change of state may change size, must be before the change. if(options.compress && $ax.dynamicPanelManager.isIdFitToContent(elementId) && wasVisible) { $ax.dynamicPanelManager.compressDelta(elementId, $ax.visibility.GetPanelState(elementId), stateName, options.vertical, options.compressEasing, options.compressDuration); } $ax.visibility.SetPanelState(elementId, stateName, animateOutInfo.easingType, animateOutInfo.direction, animateOutInfo.duration, animateInInfo.easingType, animateInInfo.direction, animateInInfo.duration, showWhenSet); // If compressing because of a show, must be after state is set. if(options.compress && !wasVisible && showWhenSet) { $ax.dynamicPanelManager.compressToggle(elementId, options.vertical, true, options.compressEasing, options.compressDuration); } } } return this; }; $ax.public.fn.show = function(options, eventInfo) { var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { var elementId = elementIds[index]; var lightboxId = $ax.repeater.applySuffixToElementId(elementId, '_lightbox'); var lightbox = $jobj(lightboxId); if(options && options.showType == 'lightbox') { $ax.flyoutManager.unregisterPanel(elementId, true); // Add lightbox if there isn't one if(lightbox.length == 0) { lightbox = $(''); lightbox.attr('id', lightboxId); var color = 'rgb(' + options.lightbox.r + ',' + options.lightbox.g + ',' + options.lightbox.b + ')'; lightbox.css({ position: 'fixed', left: '0px', top: '0px', width: '10000px', height: '10000px', 'background-color': color, opacity: options.lightbox.a / 255 }); var parents = $ax('#' + elementId).getParents(true, ['dynamicPanel'])[0]; var fixedParentPanelId = undefined; for(var j = 0; j < parents.length; j++) { var parentId = parents[j]; if($jobj(parentId).css('z-index') != 'auto' || $ax.features.supports.mobile) { fixedParentPanelId = parents[j]; break; } } if(!fixedParentPanelId) $('#base').append(lightbox); else $jobj(fixedParentPanelId).append(lightbox); var wasVisible = $ax.visibility.IsIdVisible(elementId); (function(lightbox, query) { $ax.event.attachClick(lightbox, function() { $ax.action.addAnimation(elementId, $ax.action.queueTypes.fade, function() { if(!wasVisible) query.hide(); else $ax.action.fireAnimationFromQueue(elementId, $ax.action.queueTypes.fade); lightbox.remove(); }); }); })(lightbox, this); } $ax.legacy.BringToFront(lightboxId, true); $ax.legacy.BringToFront(elementId, true); } else if(options && options.showType == 'flyout') { // Remove lightbox if there is one lightbox.remove(); var src = eventInfo.thiswidget; var target = $ax.getWidgetInfo(elementId); var rects = {}; if(src.valid) rects.src = $ax.geometry.genRect(src, true); if(target.valid) rects.target = $ax.geometry.genRect(target, true); $ax.flyoutManager.registerFlyout(rects, elementId, eventInfo.srcElement); //$ax.style.AddRolloverOverride(elementId); $ax.legacy.BringToFront(elementId); } else { // Remove lightbox, unregister flyout lightbox.remove(); $ax.flyoutManager.unregisterPanel(elementId, true); } _setVisibility(elementId, true, options); } return this; }; var _getAnimateInfo = function (options, defaultDuration, useHide) { var animateInfo = { duration: options && (useHide ? options.durationHide : options.duration) || defaultDuration }; var easing = options && (useHide ? options.easingHide : options.easing) || 'none'; switch (easing) { case 'fade': animateInfo.easingType = 'fade'; animateInfo.direction = ''; break; case 'slideLeft': animateInfo.easingType = 'swing'; animateInfo.direction = 'left'; break; case 'slideRight': animateInfo.easingType = 'swing'; animateInfo.direction = 'right'; break; case 'slideUp': animateInfo.easingType = 'swing'; animateInfo.direction = 'up'; break; case 'slideDown': ; animateInfo.easingType = 'swing'; animateInfo.direction = 'down'; break; case 'flipLeft': animateInfo.easingType = 'flip'; animateInfo.direction = 'left'; break; case 'flipRight': animateInfo.easingType = 'flip'; animateInfo.direction = 'right'; break; case 'flipUp': animateInfo.easingType = 'flip'; animateInfo.direction = 'up'; break; case 'flipDown': animateInfo.easingType = 'flip'; animateInfo.direction = 'down'; break; default: animateInfo.easingType = 'none'; animateInfo.direction = ''; } return animateInfo; }; $ax.public.fn.hide = function(options) { var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { var elementId = elementIds[index]; // var wasShown = $ax.visibility.IsIdVisible(elementId); _setVisibility(elementId, false, options); } return this; }; $ax.public.fn.toggleVisibility = function(options) { var elementIds = this.getElementIds(); for (var index = 0; index < elementIds.length; index++) { var elementId = elementIds[index]; var show = !$ax.visibility.IsIdVisible(elementId); _setVisibility(elementId, show, options, !show); } return this; }; var _setVisibility = function (elementId, value, options, useHide) { var animateInfo = _getAnimateInfo(options, 0, useHide); var wasShown = $ax.visibility.IsIdVisible(elementId); var compress = options && options.showType == 'compress' && wasShown != value; if (compress) $ax.dynamicPanelManager.compressToggle(elementId, options.vertical, value, options.compressEasing, options.compressDuration); var onComplete = function () { $ax.dynamicPanelManager.fitParentPanel(elementId); }; $ax.visibility.SetWidgetVisibility(elementId, { value: value, easing: animateInfo.easingType, direction: animateInfo.direction, duration: animateInfo.duration, fire: true, onComplete: onComplete }); if(options && options.bringToFront) $ax.legacy.BringToFront(elementId); }; $ax.public.fn.setOpacity = function(opacity, easing, duration) { if(!easing || ! duration) { easing = 'none'; duration = 0; } var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { var elementId = elementIds[index]; var onComplete = function() { $ax.action.fireAnimationFromQueue(elementId, $ax.action.queueTypes.fade); }; var query = $jobj(elementId); if(duration == 0 || easing == 'none') { query.css('opacity', opacity); onComplete(); } else query.animate({ opacity: opacity }, { duration: duration, easing: easing, queue: false, complete: onComplete }); } } //move one widget. I didn't combine moveto and moveby, since this is in .public, and separate them maybe more clear for the user var _move = function (elementId, x, y, options, moveTo) { if(!options.easing) options.easing = 'none'; if(!options.duration) options.duration = 500; var obj = $obj(elementId); // Layer move using container now. if($ax.public.fn.IsLayer(obj.type)) { $ax.move.MoveWidget(elementId, x, y, options, moveTo, function () { if(options.onComplete) options.onComplete(); $ax.dynamicPanelManager.fitParentPanel(elementId); }, false); } else { var xDelta = x; var yDelta = y; if (moveTo) { var jobj = $jobj(elementId); var left = Number(jobj.css('left').replace('px', '')); var top = Number(jobj.css('top').replace('px', '')); xDelta = x - left; yDelta = y - top; } $ax.move.MoveWidget(elementId, xDelta, yDelta, options, false, function () { $ax.dynamicPanelManager.fitParentPanel(elementId); }, true); } }; $ax.public.fn.moveTo = function (x, y, options) { var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { _move(elementIds[index], x, y, options, true); } return this; }; $ax.public.fn.moveBy = function (x, y, options) { var elementIds = this.getElementIds(); if(x == 0 && y == 0) { for(var i = 0; i < elementIds.length; i++) { var elementId = elementIds[i]; $ax.move.nopMove(elementId, options); //$ax.event.raiseSyntheticEvent(elementId, \"onMove\"); $ax.action.fireAnimationFromQueue(elementId, $ax.action.queueTypes.move); //if($axure.fn.IsLayer($obj(elementId).type)) { // var childrenIds = $ax.public.fn.getLayerChildrenDeep(elementId, true); // for(var j = 0; j < childrenIds.length; j++) $ax.event.raiseSyntheticEvent(childrenIds[j], 'onMove'); //} } return this; } for(var index = 0; index < elementIds.length; index++) { _move(elementIds[index], x, y, options, false); } return this; }; $ax.public.fn.circularMoveAndRotate = function(degreeChange, options, centerPointLeft, centerPointTop, doRotation, moveDelta, resizeOffset, rotatableMove, moveComplete) { if(!rotatableMove) rotatableMove = { x: 0, y: 0 }; var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { var elementId = elementIds[index]; var onComplete = function () { $ax.dynamicPanelManager.fitParentPanel(elementId); if (moveComplete) moveComplete(); } $ax.move.circularMove(elementId, degreeChange, { x: centerPointLeft, y: centerPointTop }, moveDelta, rotatableMove, resizeOffset, options, true, onComplete, doRotation); if(doRotation) $ax.move.rotate(elementId, degreeChange, options.easing, options.duration, false, true, function () { $ax.dynamicPanelManager.fitParentPanel(elementId); }); else $ax.action.fireAnimationFromQueue(elementId, $ax.action.queueTypes.rotate); } }; $ax.public.fn.rotate = function (degree, easing, duration, to, axShouldFire) { var elementIds = this.getElementIds(); // this function will no longer handle compound vectors. for(var index = 0; index < elementIds.length; index++) { var elementId = elementIds[index]; degree = parseFloat(degree); $ax.move.rotate(elementId, degree, easing, duration, to, axShouldFire, function () { $ax.dynamicPanelManager.fitParentPanel(elementId); }); } }; $ax.public.fn.resize = function(newLocationAndSizeCss, resizeInfo, axShouldFire, moves, onCompletedFunc) { var elementIds = this.getElementIds(); if(!elementIds) return; var completeAndFire = function(moved, id) { if(axShouldFire) { $ax.action.fireAnimationFromQueue(id, $ax.action.queueTypes.resize); if(moves) $ax.action.fireAnimationFromQueue(id, $ax.action.queueTypes.move); } if(onCompletedFunc) onCompletedFunc(); }; for(var index = 0; index < elementIds.length; index++) { var elementId = elementIds[index]; var obj = $obj(elementId); if(!$ax.public.fn.IsResizable(obj.type)) { //$ax.dynamicPanelManager.fitParentPanel(elementId); completeAndFire(moves, elementId); continue; } var oldSize = $ax('#' + elementId).size(); var oldWidth = oldSize.width; var oldHeight = oldSize.height; var query = $jobj(elementId); var isDynamicPanel = $ax.public.fn.IsDynamicPanel(obj.type); if(isDynamicPanel) { // No longer fitToContent, calculate additional styling that needs to be done. $ax.dynamicPanelManager.setFitToContentCss(elementId, false, oldWidth, oldHeight); if (query.css('position') == 'fixed' && ((obj.fixedHorizontal && obj.fixedHorizontal == 'center') || (obj.fixedVertical && obj.fixedVertical == 'middle'))) { moves = true; var loc = $ax.dynamicPanelManager.getFixedPosition(elementId, oldWidth, oldHeight, newLocationAndSizeCss.width, newLocationAndSizeCss.height); if(loc) { if (loc[0] != 0 && !$ax.dynamicPanelManager.isPercentWidthPanel(obj)) newLocationAndSizeCss['margin-left'] = '+=' + (Number(newLocationAndSizeCss['margin-left'].substr(2)) + loc[0]); if (loc[1] != 0) newLocationAndSizeCss['margin-top'] = '+=' + (Number(newLocationAndSizeCss['margin-top'].substr(2)) + loc[1]); } } var onComplete = function() { $ax.flyoutManager.updateFlyout(elementId); $ax.dynamicPanelManager.fitParentPanel(elementId); $ax.dynamicPanelManager.updatePanelPercentWidth(elementId); $ax.dynamicPanelManager.updatePanelContentPercentWidth(elementId); completeAndFire(moves, elementId); $ax.event.raiseSyntheticEvent(elementId, 'onResize'); }; } else { //if contains text var textChildren = query.children('div.text'); if(textChildren && textChildren.length != 0) { var textDivId = textChildren.attr('id'); var textObj = $ax('#' + textDivId); var leftPadding = textObj.left(true); var rightPadding = oldWidth - leftPadding - textObj.width(); //greater or equal to 1px var newTextWidth = Math.max(newLocationAndSizeCss.width - leftPadding - rightPadding, 1); var textChildCss = { width: newTextWidth }; var textStepFunction = function() { //change the width of the text div may effect the height //var currentTextHeight = Number($(textChildren.children('p')[0]).css('height').replace('px', '')); //textChildren.css('height', currentTextHeight); var display = $ax.public.fn.displayHackStart(document.getElementById(textDivId)); $ax.style.updateTextAlignmentForVisibility(textDivId); $ax.public.fn.displayHackEnd(display); }; } //get all the other children that matters onComplete = function() { $ax.dynamicPanelManager.fitParentPanel(elementId); completeAndFire(moves, elementId); $ax.annotation.adjustIconLocation(elementId); $ax.event.raiseSyntheticEvent(elementId, 'onResize'); }; } var children = query.children().not('div.text'); while(children && children.length && $(children[0]).attr('id').indexOf('container') != -1) { children = children.children().not('div.text'); } if(children && children.length !== 0) { var childAnimationArray = []; var isConnector = $ax.public.fn.IsConnector(obj.type); children.each(function (i, child) { var childCss = { width: newLocationAndSizeCss.width, height: newLocationAndSizeCss.height }; //$ax.size() use outerWidth/Height(false), which include padding and borders(no margins) var childSizingObj = $ax('#' + child.id).size(); var differentSizedImage = childSizingObj.width - oldWidth != 0 || childSizingObj.height - oldHeight != 0; if ((differentSizedImage || isConnector) && child.tagName == 'IMG') { //oldwidth is zero for connectors var widthOffset = oldWidth ? (childSizingObj.width - oldWidth) * newLocationAndSizeCss.width / oldWidth : childSizingObj.width; var heightOffset = oldHeight ? (childSizingObj.height - oldHeight) * newLocationAndSizeCss.height / oldHeight : childSizingObj.height; childCss.width += widthOffset; childCss.height += heightOffset; } //there are elements like inputs, come with a padding and border, so need to use outerwidth for starting point, due to jquery 1.7 css() on width/height bugs if($(child).css('position') === 'absolute') { if(child.offsetLeft) { childSizingObj.left = child.offsetLeft; childCss.left = oldWidth ? child.offsetLeft * newLocationAndSizeCss.width / oldWidth : child.offsetLeft; //- transformedShift.x; } if(child.offsetTop) { childSizingObj.top = child.offsetTop; childCss.top = oldHeight ? child.offsetTop * newLocationAndSizeCss.height / oldHeight : child.offsetTop; //- transformedShift.y; } } childAnimationArray.push({ obj: child, sizingObj: childSizingObj, sizingCss: childCss }); }); } if(!resizeInfo.easing || resizeInfo.easing == 'none') { query.animate(newLocationAndSizeCss, 0); if(childAnimationArray) { $(childAnimationArray).each(function (i, animationObj) { if(animationObj.resizeMatrixFunction) { $(animationObj.obj).css($ax.public.fn.setTransformHowever(animationObj.resizeMatrixFunction(animationObj.width, animationObj.height))); } else { $(animationObj.obj).animate(animationObj.sizingCss, 0); } }); } //if(childCss) children.animate(childCss, 0); //if(sketchyImage && sketchyImageCss) $(sketchyImage).animate(sketchyImageCss, 0); if(textChildCss) { textChildren.animate(textChildCss, { duration: 0, step: textStepFunction }); } onComplete(); } else { if(childAnimationArray) { $(childAnimationArray).each(function (i, animationObj) { if(animationObj.resizeMatrixFunction) { $(animationObj.sizingObj).animate(animationObj.sizingCss, { queue: false, duration: resizeInfo.duration, easing: resizeInfo.easing, step: function (now) { var widthRatio = (animationObj.width - 1.0) * now + 1.0; var heightRatio = (animationObj.height - 1.0) * now + 1.0; $(animationObj.obj).css($ax.public.fn.setTransformHowever(animationObj.resizeMatrixFunction(widthRatio, heightRatio))); } }); } else { $(animationObj.sizingObj).animate(animationObj.sizingCss, { queue: false, duration: resizeInfo.duration, easing: resizeInfo.easing, step: function (now, tween) { $(animationObj.obj).css(tween.prop, now); } }); } }); } if(textChildCss) { textChildren.animate(textChildCss, { queue: false, duration: resizeInfo.duration, easing: resizeInfo.easing, step: textStepFunction }); } if(isDynamicPanel) { query.animate(newLocationAndSizeCss, { queue: false, duration: resizeInfo.duration, easing: resizeInfo.easing, complete: onComplete }); } else { var locObj = { left: $ax.public.fn.GetFieldFromStyle(query, 'left'), top: $ax.public.fn.GetFieldFromStyle(query, 'top'), width: $ax.public.fn.GetFieldFromStyle(query, 'width'), height: $ax.public.fn.GetFieldFromStyle(query, 'height'), }; $(locObj).animate(newLocationAndSizeCss, { queue: false, duration: resizeInfo.duration, easing: resizeInfo.easing, step: function (now, tween) { query.css(tween.prop, now); }, complete: onComplete }); } } } }; $ax.public.fn.bringToFront = function() { var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { $ax.legacy.BringToFront(elementIds[index]); } return this; }; $ax.public.fn.sendToBack = function() { var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { $ax.legacy.SendToBack(elementIds[index]); } return this; }; $ax.public.fn.text = function() { if(arguments[0] == undefined) { var firstId = this.getElementIds()[0]; if(!firstId) { return undefined; } return getWidgetText(firstId); } else { var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { var currentItem = elementIds[index]; var widgetType = $ax.getTypeFromElementId(currentItem); if($ax.public.fn.IsTextBox(widgetType) || $ax.public.fn.IsTextArea(widgetType)) { //For non rtf SetWidgetFormText(currentItem, arguments[0]); } else { var idRtf = '#' + currentItem; if($(idRtf).length == 0) idRtf = '#u' + (Number(currentItem.substring(1)) + 1); if($(idRtf).length != 0) { //If the richtext div already has some text in it, //preserve only the first style and get rid of the rest //If no pre-existing p-span tags, don't do anything if($(idRtf).find('p').find('span').length > 0) { $(idRtf).find('p:not(:first)').remove(); $(idRtf).find('p').find('span:not(:first)').remove(); //Replace new-lines with NEWLINE token, then html encode the string, //finally replace NEWLINE token with linebreak var textWithLineBreaks = arguments[0].replace(/\\n/g, '--NEWLINE--'); var textHtml = $('').text(textWithLineBreaks).html(); $(idRtf).find('span').html(textHtml.replace(/--NEWLINE--/g, '')); } } } } return this; } }; var getWidgetText = function(id) { var idQuery = $jobj(id); var inputQuery = $jobj($ax.INPUT(id)); if(inputQuery.length) idQuery = inputQuery; if (idQuery.is('input') && ($ax.public.fn.IsCheckBox(idQuery.attr('type')) || idQuery.attr('type') == 'radio')) { idQuery = idQuery.parent().find('label').find('div'); } if(idQuery.is('div')) { var $rtfObj = idQuery.hasClass('text') ? idQuery : idQuery.find('.text'); if($rtfObj.length == 0) return ''; var textOut = ''; $rtfObj.children('p').each(function(index) { if(index != 0) textOut += '\\n'; var htmlContent = $(this).html(); if(isSoloBr(htmlContent)) return; // It has a solo br, then it was just put in for a newline, and paragraph already added the new line. //Replace line breaks (set in SetWidgetRichText) with newlines and nbsp's with regular spaces. htmlContent = htmlContent.replace(/]*>/ig, '\\n').replace(/&nbsp;/ig, ' '); textOut += $(htmlContent).text(); }); return textOut; } else { var val = idQuery.val(); return val == undefined ? '' : val; } }; var isSoloBr = function(html) { html = $(html); // Html needs one and only one span var spanChildren = html.length == 1 && html.is('span') ? html.children() : false; // Span children needs exactly one br and no text in the span return spanChildren && spanChildren.length == 1 && spanChildren.is('br') && spanChildren.text().trim() == ''; }; $ax.public.fn.setRichTextHtml = function() { if(arguments[0] == undefined) { //No getter function, so just return undefined return undefined; } else { var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { var currentItem = elementIds[index]; var widgetType = $ax.getTypeFromElementId(currentItem); if ($ax.public.fn.IsTextBox(widgetType) || $ax.public.fn.IsTextArea(widgetType)) { //Do nothing for non rtf continue; } else { //TODO -- [mas] fix this! var idRtf = '#' + currentItem; if($(idRtf).length == 0) idRtf = '#u' + (parseInt(currentItem.substring(1)) + 1); if($(idRtf).length != 0) SetWidgetRichText(idRtf, arguments[0]); } } return this; } }; $ax.public.fn.value = function() { if(arguments[0] == undefined) { var firstId = this.getElementIds()[0]; if(!firstId) { return undefined; } var widgetType = $ax.getTypeFromElementId(firstId); if ($ax.public.fn.IsComboBox(widgetType) || $ax.public.fn.IsListBox(widgetType)) { //for select lists and drop lists return $('#' + firstId + ' :selected').text(); } else if ($ax.public.fn.IsCheckBox(widgetType) || $ax.public.fn.IsRadioButton(widgetType)) { //for radio/checkboxes return $('#' + firstId + '_input').is(':checked'); } else if ($ax.public.fn.IsTextBox(widgetType)) { //for text box return $('#' + firstId + '_input').val(); } else { //for text based form elements return this.jQuery().first().val(); } } else { var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { var widgetType = $ax.getTypeFromElementId(elementIds[index]); var elementIdQuery = $('#' + elementIds[index]); if ($ax.public.fn.IsCheckBox(widgetType) || $ax.public.fn.IsRadioButton(widgetType)) { //for radio/checkboxes if(arguments[0] == true) { elementIdQuery.attr('checked', true); } else if(arguments[0] == false) { elementIdQuery.removeAttr('checked'); } } else { //For select lists, drop lists, text based form elements elementIdQuery.val(arguments[0]); } } return this; } }; $ax.public.fn.checked = function() { if(arguments[0] == undefined) { return this.selected(); } else { this.selected(arguments[0]); return this; } }; var _getRelativeLeft = function (id, parent) { var currentNode = window.document.getElementById(id).offsetParent; var left = $ax('#' + id).left(true); while (currentNode != null && currentNode.tagName != \"BODY\" && currentNode != parent) { left += currentNode.offsetLeft; currentNode = currentNode.offsetParent; } return left; }; var _getRelativeTop = function(id, parent) { var currentNode = window.document.getElementById(id).offsetParent; var top = $ax('#' + id).top(true); while(currentNode != null && currentNode.tagName != \"BODY\" && currentNode != parent) { top += currentNode.offsetTop; currentNode = currentNode.offsetParent; } return top; }; var _scrollHelper = function(id, scrollX, scrollY, easing, duration) { var target = window.document.getElementById(id); var scrollable = $ax.legacy.GetScrollable(target); var targetLeft = _getRelativeLeft(id, scrollable); var targetTop = _getRelativeTop(id, scrollable); if(!scrollX) targetLeft = scrollable.scrollLeft; if(!scrollY) targetTop = scrollable.scrollTop; var $scrollable = $(scrollable); if($scrollable.is('body')) { $scrollable = $('html,body'); } if(easing == 'none') { if(scrollY) $scrollable.scrollTop(targetTop); if(scrollX) $scrollable.scrollLeft(targetLeft); } else { if(!scrollX) { $scrollable.animate({ scrollTop: targetTop }, duration, easing); } else if(!scrollY) { $scrollable.animate({ scrollLeft: targetLeft }, duration, easing); } else { $scrollable.animate({ scrollTop: targetTop, scrollLeft: targetLeft }, duration, easing); } } }; $ax.public.fn.scroll = function(scrollOption) { var easing = 'none'; var duration = 500; if(scrollOption && scrollOption.easing) { easing = scrollOption.easing; if(scrollOption.duration) { duration = scrollOption.duration; } } var scrollX = true; var scrollY = true; if(scrollOption.direction == 'vertical') { scrollX = false; } else if(scrollOption.direction == 'horizontal') { scrollY = false; } var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { // if($ax.getTypeFromElementId(elementIds[index]) == IMAGE_MAP_REGION_TYPE) { _scrollHelper(elementIds[index], scrollX, scrollY, easing, duration); // } } return this; }; $ax.public.fn.enabled = function() { if(arguments[0] == undefined) { var firstId = this.getElementIds()[0]; if(!firstId) return undefined; var widgetType = $ax.getTypeFromElementId(firstId); if ($ax.public.fn.IsImageBox(widgetType) || $ax.public.fn.IsVector(widgetType)) return !$ax.style.IsWidgetDisabled(firstId); else return this.jQuery().first().not(':disabled').length > 0; } else { var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { var elementId = elementIds[index]; var widgetType = $ax.getTypeFromElementId(elementId); var enabled = arguments[0]; if ($ax.public.fn.IsImageBox(widgetType) || $ax.public.fn.IsVector(widgetType)) $ax.style.SetWidgetEnabled(elementId, enabled); if ($ax.public.fn.IsDynamicPanel(widgetType) || $ax.public.fn.IsLayer(widgetType)) { $ax.style.SetWidgetEnabled(elementId, enabled); var children = this.getChildren(false, true)[index].children; for(var i = 0; i < children.length; i++) { $axure('#' + children[i]).enabled(enabled); } } var obj = $obj(elementId); var images = obj.images; if(PLAIN_TEXT_TYPES.indexOf(widgetType) != -1 && images) { var img = $jobj($ax.repeater.applySuffixToElementId(elementId, '_image_sketch')); var key = (enabled ? 'normal~' : 'disabled~') + ($ax.adaptive.currentViewId || ''); img.attr('src', images[key]); } var jobj = $jobj(elementId); var input = $jobj($ax.INPUT(elementId)); if(input.length) jobj = input; if (OS_MAC && WEBKIT && $ax.public.fn.IsComboBox(widgetType)) jobj.css('color', enabled ? '' : 'grayText'); if(enabled) jobj.removeAttr('disabled'); else jobj.attr('disabled', 'disabled'); } return this; } }; $ax.public.fn.visible = function() { var ids = this.getElementIds(); for(var index = 0; index < ids.length; index++) $ax.visibility.SetIdVisible(ids[index], arguments[0]); return this; }; $ax.public.fn.selected = function() { if(arguments[0] == undefined) { var firstId = this.getElementIds()[0]; if(!firstId) return undefined; var widgetType = $ax.getTypeFromElementId(firstId); if ($ax.public.fn.IsTreeNodeObject(widgetType)) { var treeNodeButtonShapeId = ''; var allElementIds = $ax.getAllElementIds(); for(var i = 0; i < allElementIds.length; i++) { var elementId = allElementIds[i]; var currObj = $ax.getObjectFromElementId(elementId); if ($ax.public.fn.IsVector(currObj.type) && currObj.parent && currObj.parent.scriptIds && currObj.parent.scriptIds[0] == firstId) { treeNodeButtonShapeId = elementId; break; } } if(treeNodeButtonShapeId == '') return undefined; return $ax.style.IsWidgetSelected(treeNodeButtonShapeId); } else if ($ax.public.fn.IsImageBox(widgetType) || $ax.public.fn.IsVector(widgetType) || $ax.public.fn.IsTableCell(widgetType) || $ax.public.fn.IsDynamicPanel(widgetType) || $ax.public.fn.IsLayer(widgetType)) { return $ax.style.IsWidgetSelected(firstId); } else if ($ax.public.fn.IsCheckBox(widgetType) || $ax.public.fn.IsRadioButton(widgetType)) { return $jobj($ax.INPUT(firstId)).prop('checked'); } return this; } var elementIds = this.getElementIds(); var func = typeof (arguments[0]) === 'function' ? arguments[0] : null; var enabled = arguments[0]; // If this is a function it will be overridden with the return value; for(var index = 0; index < elementIds.length; index++) { var elementId = elementIds[index]; if(func) { enabled = func($axure('#' + elementId)); } var widgetType = $ax.getTypeFromElementId(elementId); if ($ax.public.fn.IsTreeNodeObject(widgetType)) { //for tree node var treeRootId = $('#' + elementIds[index]).parents('.treeroot').attr('id'); var treeNodeButtonShapeId = ''; var childElementIds = $jobj(elementId).children(); for(var i = 0; i < childElementIds.length; i++) { var elementId = childElementIds[i].id; var currObj = $ax.getObjectFromElementId(elementId); if (currObj && currObj.type == $ax.constants.VECTOR_SHAPE_TYPE && currObj.parent && currObj.parent.scriptIds && currObj.parent.scriptIds[0] == elementIds[index]) { treeNodeButtonShapeId = elementId; break; } } if(treeNodeButtonShapeId == '') continue; $ax.tree.SelectTreeNode(elementId, enabled); } else if ($ax.public.fn.IsImageBox(widgetType) || $ax.public.fn.IsVector(widgetType) || $ax.public.fn.IsVector(widgetType) || $ax.public.fn.IsTableCell(widgetType) || $ax.public.fn.IsDynamicPanel(widgetType) || $ax.public.fn.IsLayer(widgetType)) { $ax.style.SetWidgetSelected(elementIds[index], enabled); } else if ($ax.public.fn.IsCheckBox(widgetType) || $ax.public.fn.IsRadioButton(widgetType)) { var query = $jobj($ax.INPUT(elementId)); var curr = query.prop('checked'); //NOTE: won't fire onselect nore onunselect event if states didn't changes if(curr != enabled) { query.prop('checked', enabled); $ax.event.TryFireCheckChanged(elementId, enabled); } } } return this; }; $ax.public.fn.focus = function() { var firstId = this.getElementIds()[0]; var focusableId = $ax.event.getFocusableWidgetOrChildId(firstId); $('#' + focusableId).focus(); return this; }; $ax.public.fn.expanded = function() { if(arguments[0] == undefined) { var firstId = this.getElementIds()[0]; return firstId && !$ax.public.fn.IsTreeNodeObject($ax.getTypeFromElementId(firstId)) && $ax.visibility.IsIdVisible(firstId + '_children'); } else { var elementIds = this.getElementIds(); for(var index = 0; index < elementIds.length; index++) { if ($ax.public.fn.IsTreeNodeObject($ax.getTypeFromElementId(elementIds[index]))) { var treeNodeId = elementIds[index]; var childContainerId = treeNodeId + '_children'; var scriptId = $ax.repeater.getScriptIdFromElementId(treeNodeId); var itemId = $ax.repeater.getItemIdFromElementId(treeNodeId); var plusMinusId = 'u' + (parseInt(scriptId.substring(1)) + 1); if(itemId) plusMinusId = $ax.repeater.createElementId(plusMinusId, itemId); if($('#' + childContainerId).length == 0 || !$jobj(plusMinusId).children().first().is('img')) plusMinusId = ''; if(arguments[0] == true) { $ax.tree.ExpandNode(treeNodeId, childContainerId, plusMinusId); } else if(arguments[0] == false) { $ax.tree.CollapseNode(treeNodeId, childContainerId, plusMinusId); } } } return this; } }; $ax.public.fn.size = function () { var firstId = this.getElementIds()[0]; if(!firstId) return undefined; var object = $ax.getObjectFromElementIdDisregardHex(firstId); if(object && (object.type == 'layer' || object.generateCompound)) { var boundingRect = $ax.public.fn.getWidgetBoundingRect(firstId); return { width: boundingRect.width, height: boundingRect.height }; } var firstIdObject = $jobj(firstId); var trap = _displayWidget($ax.repeater.removeSuffixFromElementId(firstId)); var size = { width: firstIdObject.outerWidth(), height: firstIdObject.outerHeight() }; trap(); return size; }; $ax.public.fn.width = function() { var firstId = this.getElementIds()[0]; if(!firstId) return undefined; var object = $ax.getObjectFromElementIdDisregardHex(firstId); if (object && (object.type == 'layer' || object.generateCompound)) { var boundingRect = $ax.public.fn.getWidgetBoundingRect(firstId); return boundingRect.width; } var firstIdObject = $jobj(firstId); return firstIdObject.outerWidth(); }; $ax.public.fn.height = function() { var firstId = this.getElementIds()[0]; if(!firstId) return undefined; var object = $ax.getObjectFromElementIdDisregardHex(firstId); if (object && (object.type == 'layer' || object.generateCompound)) { var boundingRect = $ax.public.fn.getWidgetBoundingRect(firstId); return boundingRect.height; } var firstIdObject = $jobj(firstId); return firstIdObject.outerHeight(); }; $ax.public.fn.readAttribute = function(object, attribute) { if(object && object.hasAttribute(attribute)) { return object.getAttribute(attribute); } return null; }; $ax.public.fn.locRelativeIgnoreLayer = function (vert) { var elementId = this.getElementIds()[0]; if(!elementId) return undefined; var parents = this.getParents(true, '*')[0]; for(var i = 0; i < parents.length; i++) { var type = $ax.getTypeFromElementId(parents[i]); if(!$axure.fn.IsLayer(type) && !$axure.fn.IsReferenceDiagramObject(type)) { var func = vert ? _getRelativeTop : _getRelativeLeft; return func(elementId, $jobj(parents[i])[0]); } } var axThis = $ax('#' + elementId); return vert ? axThis.top() : _bodyToWorld(axThis.left(), true); }; var _bodyToWorld = $axure.fn.bodyToWorld = function(x, from) { var body = $('body'); if (body.css('position') != 'relative') return x; var offset = (Number(body.css('left').replace('px', '')) + Math.max(0, ($(window).width() - body.width()) / 2)); if(from) offset *= -1; return x + offset; } $ax.public.fn.left = function (relative) { var firstId = this.getElementIds()[0]; if(!firstId) return undefined; var left = _getLoc(firstId, false, false, relative); // If you are absolute, unless your are a pinned panel... if(relative || $obj(firstId) && $obj(firstId).fixedVertical) return left; // ... or you are in one... var parentPanels = $ax('#' + firstId).getParents(true, 'dynamicPanel')[0]; for(var i = 0; i < parentPanels.length; i++) if ($obj(parentPanels[i]).fixedVertical) return left; // ... you must convert from body to world coordinates return _bodyToWorld(left); }; $ax.public.fn.top = function(relative) { var firstId = this.getElementIds()[0]; return firstId && _getLoc(firstId, true, false, relative); }; var _getLoc = function(id, vert, high, relative) { var mathFunc = high ? 'max' : 'min'; var prop = vert ? 'top' : 'left'; var dim = vert ? 'height' : 'width'; var obj = $jobj(id); var strippedId = $ax.repeater.removeSuffixFromElementId(id); var axObj = $obj(strippedId); var oldDisplay = obj.css('display'); var displaySet = false; if(oldDisplay == 'none') { obj.css('display', ''); displaySet = true; } var loc = Math.NaN; var rdo = axObj.type == $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE; if (!rdo) loc = $ax.getNumFromPx(obj.css(prop)); var fixed = _fixedOffset(id, vert); if(fixed.valid) loc = !vert && fixed.fullWidth ? 0 : fixed.offset; else if (!relative) { var parents = []; var parObj = id.indexOf('text') != -1 ? axObj : axObj.parent; // When working with text id, parent widget is the ax obj we are dealing with, so that should be the first parent while($ax.public.fn.IsContainer(parObj.type)) { parents.push($ax.getScriptIdFromPath([parObj.id], strippedId)); parObj = parObj.parent; } var otherParents = $ax('#' + id).getParents(true, ['item', 'repeater', 'dynamicPanel', 'layer'])[0]; for(var i = 0; i < otherParents.length; i++) { parents.push(otherParents[i]); } for(var i = 0; i < parents.length; i++) { var parentId = $ax.visibility.getWidgetFromContainer(parents[i]); var parent = $ax.visibility.applyWidgetContainer(parentId, true); // Layer may not have container, and will be at 0,0 otherwise. if (!parent.length) continue; fixed = _fixedOffset(parentId, vert); if(fixed.valid) { loc += fixed.offset; break; // If fixed ignore any parents if there are any, they don't matter. } else loc += $ax.getNumFromPx(parent.css(prop)); } } if (high) loc += obj[dim](); // Special Layer code if (axObj.type == 'layer') { // If layer has a container, then use that. Otherwise must deal with children. Children can move in container after created, but ignoring for now. var container = $ax.visibility.applyWidgetContainer(id, true, true); if(container.length) loc += $ax.getNumFromPx(container.css(prop)); else loc += (_getChildLoc(axObj.objs, vert, high, dim, true, id) || 0); } if(displaySet) obj.css('display', oldDisplay); return loc; }; var _getChildLoc = function (children, vert, high, dim, root, path, itemId) { if (typeof (path) == 'string') { itemId = $ax.repeater.getItemIdFromElementId(path); path = $ax.getPathFromScriptId(path); path.pop(); // Remove object id, only want rdo path. } var mathFunc = high ? 'max' : 'min'; var childLoc = NaN; for (var i = 0; i < children.length; i++) { var childObj = children[i]; var childId = $ax.getElementIdFromPath([childObj.id], { relativeTo: path }); if (!childId) continue; childId = $ax.repeater.createElementId(childId, itemId); if($ax.public.fn.IsReferenceDiagramObject(childObj.type)) { path.push(childObj.id); var childProp = _getChildLoc($ax.pageData.masters[$obj(childId).masterId].diagram.objects, vert, high, dim, false, path, itemId); path.pop(); if(isNaN(childProp)) continue; } else if($ax.public.fn.IsLayer(childObj.type)) { childProp = _getChildLoc(childObj.objs, vert, high, dim, false, path, itemId); } else { if(!$ax.visibility.IsIdVisible(childId)) continue; childProp = $ax('#' + childId).locRelativeIgnoreLayer(vert); if(high) childProp += $jobj(childId)[dim](); } if(isNaN(childLoc)) childLoc = childProp; else if(!isNaN(childProp)) childLoc = Math[mathFunc](childLoc, childProp); } return root && isNaN(childLoc) ? 0 : childLoc; }; var _fixedOffset = function (id, vert) { var axObj = $obj(id); //I think this is only for pinned panels? So why are we coming through here for rtps? if(!axObj) return { valid: false }; var dim = vert ? 'height' : 'width'; var alignment = axObj['fixed' + (vert ? 'Vertical' : 'Horizontal')]; if(!alignment) return { valid: false }; var loc = 0; // TODO: This returns 0 for width/height it or any parent is display none. Similar issue when using axquery width/height // TODO: Look into replacing this with axquery width/height and fixing that to use this hack. Potentially want to make js generic trapper. var trap = _displayWidget(id); var query = $jobj(id); var objSize = query[dim](); trap(); if(alignment == 'center' || alignment == 'middle') { loc = $ax.getNumFromPx(query.css('margin-' + (vert ? 'top' : 'left'))); loc += ($(window)[dim]()) / 2; } else if(alignment == 'bottom' || alignment == 'right') { loc = $ax.getNumFromPx(query.css(vert ? 'bottom' : 'right')); loc = $(window)[dim]() - objSize - loc; // subract loc because margin here moves farther left/up as it gets bigger. } else { loc = $ax.getNumFromPx(query.css(vert ? 'top' : 'left')); } var scrollKey = 'scroll' + (vert ? 'Top' : 'Left'); return { offset: $(window)[scrollKey]() + loc, valid: true, fullWidth: axObj.percentWidth == 1 }; }; var _displayWidget = function(id) { var parents = $ax('#' + id).getParents(true, '*')[0]; parents.push(id); // also need to show self var displayed = []; for(var i = 0; i < parents.length; i++) { var currId = parents[i]; var currObj = $jobj(currId); if(currObj.css('display') == 'none') { currObj.css('display', 'block'); displayed.push(currId); } } return function() { for(var i = 0; i < displayed.length; i++) { $jobj(displayed[i]).css('display', 'none'); } }; } }); //***** doc.js *****// $axure.internal(function($ax) { var _pageData; var _initializePageFragment = function(pageFragment, objIdToObject) { var objectArrayHelper = function(objects, parent) { for(var i = 0; i < objects.length; i++) { diagramObjectHelper(objects[i], parent); } }; var diagramObjectHelper = function(diagramObject, parent) { $ax.initializeObject('diagramObject', diagramObject); objIdToObject[pageFragment.packageId + '~' + diagramObject.id] = diagramObject; diagramObject.parent = parent; diagramObject.owner = pageFragment; diagramObject.scriptIds = []; if(diagramObject.diagrams) { //dynamic panel for(var i = 0; i < diagramObject.diagrams.length; i++) { var diagram = diagramObject.diagrams[i]; objectArrayHelper(diagram.objects, diagram); } } else if($ax.public.fn.IsLayer(diagramObject.type)) { var layerObjs = diagramObject.objs; objectArrayHelper(layerObjs, parent); } if(diagramObject.objects) objectArrayHelper(diagramObject.objects, diagramObject); }; objectArrayHelper(pageFragment.diagram.objects, pageFragment.diagram); }; var _initalizeStylesheet = function(stylesheet) { var stylesById = {}; var customStyles = stylesheet.customStyles; for(var key in customStyles) { var style = customStyles[key]; stylesById[style.id] = style; } var duplicateStyles = stylesheet.duplicateStyles; for(var duplicateKey in duplicateStyles) { stylesById[duplicateKey] = stylesById[duplicateStyles[duplicateKey]]; } stylesheet.stylesById = stylesById; }; var _initializeDocumentData = function() { _initalizeStylesheet($ax.document.stylesheet); }; var _initializePageData; // ******* Dictionaries ******** // (function() { var scriptIdToParentLayer = {}; var elementIdToObject = {}; var scriptIdToObject = {}; var scriptIdToRepeaterId = {}; var repeaterIdToScriptIds = {}; var repeaterIdToItemIds = {}; var scriptIdToPath = {}; var _scriptIds = []; var elementIdToText = {}; var radioGroupToSelectedElementId = {}; _initializePageData = function() { if(!_pageData || !_pageData.page || !_pageData.page.diagram) return; var objIdToObject = {}; _initializePageFragment(_pageData.page, objIdToObject); for(var masterId in _pageData.masters) { var master = _pageData.masters[masterId]; _initializePageFragment(master, objIdToObject); } var _pathsToScriptIds = []; _pathToScriptIdHelper(_pageData.objectPaths, [], _pathsToScriptIds, scriptIdToPath); for(var i = 0; i < _pathsToScriptIds.length; i++) { var path = _pathsToScriptIds[i].idPath; var scriptId = _pathsToScriptIds[i].scriptId; var packageId = _pageData.page.packageId; if(path.length > 1) { for(var j = 0; j < path.length - 1; j++) { var rdoId = path[j]; var rdo = objIdToObject[packageId + '~' + rdoId]; packageId = rdo.masterId; } } var diagramObject = objIdToObject[packageId + '~' + path[path.length - 1]]; diagramObject.scriptIds[diagramObject.scriptIds.length] = scriptId; scriptIdToObject[scriptId] = diagramObject; _scriptIds[_scriptIds.length] = scriptId; } // Now map scriptIds to repeaters and layers var mapScriptIdToRepeaterId = function(scriptId, repeaterId) { scriptIdToRepeaterId[scriptId] = repeaterId; var scriptIds = repeaterIdToScriptIds[repeaterId]; if(scriptIds) scriptIds[scriptIds.length] = scriptId; else repeaterIdToScriptIds[repeaterId] = [scriptId]; }; var mapScriptIdToLayerId = function(obj, layerId, path) { var pathCopy = $ax.deepCopy(path); pathCopy[path.length] = obj.id; var scriptId = $ax.getScriptIdFromPath(pathCopy); scriptIdToParentLayer[scriptId] = layerId; } var mapIdsToRepeaterAndLayer = function(path, objs, repeaterId) { var pathCopy = $ax.deepCopy(path); for(var i = 0; i < objs.length; i++) { var obj = objs[i]; pathCopy[path.length] = obj.id; var scriptId = $ax.getScriptIdFromPath(pathCopy); // Rdo have no element on page and are not mapped to the repeater if(repeaterId) mapScriptIdToRepeaterId(scriptId, repeaterId); if($ax.public.fn.IsDynamicPanel(obj.type)) { for(var j = 0; j < obj.diagrams.length; j++) mapIdsToRepeaterAndLayer(path, obj.diagrams[j].objects, repeaterId); } else if($ax.public.fn.IsReferenceDiagramObject(obj.type)) { mapIdsToRepeaterAndLayer(pathCopy, $ax.pageData.masters[obj.masterId].diagram.objects, repeaterId); } else if($ax.public.fn.IsRepeater(obj.type)) { mapScriptIdToRepeaterId(scriptId, scriptId); mapIdsToRepeaterAndLayer(path, obj.objects, scriptId); } else if($ax.public.fn.IsLayer(obj.type)) { var layerObjs = obj.objs; for(var j = 0; j < layerObjs.length; j++) { mapScriptIdToLayerId(layerObjs[j], scriptId, path); } mapIdsToRepeaterAndLayer(path, layerObjs, repeaterId); } else if(obj.objects && obj.objects.length) { if(repeaterId) { for(var j = 0; j < obj.objects.length; j++) { mapIdsToRepeaterAndLayer(path, obj.objects, repeaterId); } } } } }; mapIdsToRepeaterAndLayer([], $ax.pageData.page.diagram.objects); }; $ax.getPathFromScriptId = function(scriptId) { var reversedPath = []; var path = scriptIdToPath[scriptId]; while(path && path.uniqueId) { reversedPath[reversedPath.length] = path.uniqueId; path = path.parent; } return reversedPath.reverse(); }; var _getScriptIdFromFullPath = function(path) { var current = $ax.pageData.objectPaths; for(var i = 0; i < path.length; i++) { current = current[path[i]]; if(!current) return current; } return current && current.scriptId; }; var _getScriptIdFromPath = function(path, relativeTo) { var relativePath = []; var includeMasterInPath = false; if(relativeTo) { var relativeToScriptId; if(relativeTo.srcElement) { //this is eventInfo relativeToScriptId = $ax.repeater.getScriptIdFromElementId(relativeTo.srcElement); includeMasterInPath = relativeTo.isMasterEvent; } else if(typeof relativeTo === 'string') { //this is an element id relativeToScriptId = relativeTo; } if(relativeToScriptId) { relativePath = $ax.getPathFromScriptId(relativeToScriptId); if(!includeMasterInPath) relativePath = relativePath.slice(0, relativePath.length - 1); } else if(relativeTo instanceof Array) { //this is a path relativePath = relativeTo; } } var fullPath = relativePath.concat(path); var scriptId = _getScriptIdFromFullPath(fullPath); return !$ax.visibility.isScriptIdLimbo(scriptId) && scriptId; }; $ax.getScriptIdFromPath = _getScriptIdFromPath; var _getElementIdsFromPath = function(path, eventInfo) { var scriptId = _getScriptIdFromPath(path, eventInfo); if(!scriptId) return []; // Don't need placed check hear. If unplaced, scriptId will be undefined and exit out before here. return $ax.getElementIdsFromEventAndScriptId(eventInfo, scriptId); }; $ax.getElementIdsFromPath = _getElementIdsFromPath; var _getElementIdFromPath = function(path, params) { var scriptId = _getScriptIdFromPath(path, params.relativeTo); if(!scriptId) return scriptId; var itemNum = params.itemNum; if(params.relativeTo && typeof params.relativeTo === 'string') { if($jobj(params.relativeTo)) itemNum = $ax.repeater.getItemIdFromElementId(params.relativeTo); } return $ax.repeater.createElementId(scriptId, itemNum); }; $ax.getElementIdFromPath = _getElementIdFromPath; var _getElementsIdFromEventAndScriptId = function(eventInfo, scriptId) { var itemId = eventInfo && $ax.repeater.getItemIdFromElementId(eventInfo.srcElement); var target = false; // Try to get itemId from target if you can't get it from source. if(!itemId) { itemId = eventInfo && eventInfo.targetElement && $ax.repeater.getItemIdFromElementId(eventInfo.targetElement); if(itemId) target = true; } var parentRepeater = $ax.getParentRepeaterFromScriptId(scriptId); if(parentRepeater && scriptId != parentRepeater) { if(itemId && (!eventInfo || parentRepeater == $ax.getParentRepeaterFromScriptId($ax.repeater.getScriptIdFromElementId(target ? eventInfo.targetElement : eventInfo.srcElement)))) { return [$ax.repeater.createElementId(scriptId, itemId)]; } var elementIds = []; var itemIds = $ax.getItemIdsForRepeater(parentRepeater); if(!itemIds) return []; for(var i = 0; i < itemIds.length; i++) elementIds[i] = $ax.repeater.createElementId(scriptId, itemIds[i]); return elementIds; } return [scriptId]; }; $ax.getElementIdsFromEventAndScriptId = _getElementsIdFromEventAndScriptId; var _getSrcElementIdFromEvent = function(event) { var currentQuery = $(event.srcElement || event.target); while(currentQuery && currentQuery.length && (!$obj(currentQuery.attr('id')) || $jobj(currentQuery.attr('id')).hasClass('text'))) { currentQuery = currentQuery.parent(); }; return currentQuery.attr('id'); }; $ax.getSrcElementIdFromEvent = _getSrcElementIdFromEvent; var _getEventInfoFromEvent = function(event, skipShowDescriptions, elementId) { var eventInfo = {}; eventInfo.srcElement = elementId; eventInfo.now = new Date(); if(event != null) { //elementId can be empty string, so can't simple use \"or\" assignment here. eventInfo.srcElement = elementId || elementId == '' ? elementId : _getSrcElementIdFromEvent(event); eventInfo.which = event.which; // When getting locations in mobile, need to extract the touch object to get the mouse location attributes var mouseEvent = (event.originalEvent && event.originalEvent.changedTouches && event.originalEvent.changedTouches[0]) || event.originalEvent; if(mouseEvent && !mouseEvent.type) mouseEvent.type = event.type; if(skipShowDescriptions) eventInfo.skipShowDescriptions = true; // Always update mouse location if possible $ax.event.updateMouseLocation(mouseEvent); } // Always set event info about cursor var _cursor = eventInfo.cursor = {}; _cursor.x = $ax.mouseLocation.x; _cursor.y = $ax.mouseLocation.y; var body = $('body'); if(body.css('position') == 'relative') { _cursor.x -= (Number(body.css('left').replace('px', '')) + Math.max(0, ($(window).width() - body.width()) / 2)); } eventInfo.pageX = _cursor.x + 'px'; eventInfo.pageY = _cursor.y + 'px'; // Do Keyboard Info eventInfo.keyInfo = $ax.event.keyState(); eventInfo.window = _getWindowInfo(); eventInfo.thiswidget = _getWidgetInfo(eventInfo.srcElement); eventInfo.item = _getItemInfo(eventInfo.srcElement); eventInfo.dragInfo = $ax.drag.GetWidgetDragInfo(); return eventInfo; }; $ax.getEventInfoFromEvent = _getEventInfoFromEvent; $ax.getBasicEventInfo = function() { var eventInfo = {}; eventInfo.now = new Date(); eventInfo.window = _getWindowInfo(); eventInfo.cursor = { x: 0, y: 0}; return eventInfo; }; var _getWindowInfo = function() { var win = {}; win.width = $(window).width(); win.height = $(window).height(); win.scrollx = $(window).scrollLeft(); win.scrolly = $(window).scrollTop(); return win; }; $ax.getWindowInfo = _getWindowInfo; var repeaterInfoCache = []; $ax.cacheRepeaterInfo = function(repeaterId, repeaterInfo) { repeaterInfoCache[repeaterId] = repeaterInfo; } $ax.removeCachedRepeaterInfo = function(repeaterId) { repeaterInfoCache[repeaterId] = undefined; } var _getItemInfo = function(elementId) { if(!elementId) return { valid: false }; elementId = _getParentElement(elementId); var index = $ax.repeater.getItemIdFromElementId(elementId); if(!index) return { valid: false }; var item = { valid: true }; var scriptId = $ax.repeater.getScriptIdFromElementId(elementId); var repeaterId = $ax.getParentRepeaterFromScriptId(scriptId); item.repeater = repeaterInfoCache[repeaterId] ? repeaterInfoCache[repeaterId] : _getWidgetInfo(repeaterId); $ax.repeater.setDisplayProps(item, repeaterId, index); item.ismarked = $ax.repeater.isEditItem(repeaterId, index); item.isvisible = Boolean($jobj(elementId).length); return item; }; $ax.getItemInfo = _getItemInfo; var _getWidgetInfo = function(elementId) { if(!elementId) return { valid: false }; elementId = _getParentElement(elementId); var elementAxQuery = $ax('#' + elementId); var elementQuery = $jobj(elementId); var obj = $obj(elementId); var widget = { valid: true, isWidget: true, obj: obj, elementQuery: elementQuery, isLayer: $ax.public.fn.IsLayer(obj.type) }; widget.elementId = elementId; widget.name = widget.label = (elementQuery.data('label') ? elementQuery.data('label') : ''); widget.text = $ax('#' + elementId).text(); widget.opacity = Number(elementQuery.css('opacity')) * 100; widget.rotation = $ax.move.getRotationDegree(widget.elementId); var scriptId = $ax.repeater.getScriptIdFromElementId(elementId); var repeaterId = $ax.getParentRepeaterFromScriptId(scriptId); if(repeaterId) widget.repeater = $ax.public.fn.IsRepeater(obj.type) ? widget : _getWidgetInfo(repeaterId); //if($ax.public.fn.IsLayer(obj.type)) { // var boundingRect = $ax.public.fn.getWidgetBoundingRect(elementId); // widget.x = boundingRect.left; // widget.y = boundingRect.top; // widget.width = boundingRect.width; // widget.height = boundingRect.height; // if(elementQuery.length != 0) { // widget.pagex = elementAxQuery.left(); // widget.pagey = elementAxQuery.top(); // } //} else { // var elementExists = elementQuery.length > 0; // var x = elementExists ? elementAxQuery.locRelativeIgnoreLayer(false) : 0; // var y = elementExists ? elementAxQuery.locRelativeIgnoreLayer(true) : 0; // widget.x = x; // widget.y = y; // if(elementExists) { // widget.pagex = elementAxQuery.left(); // widget.pagey = elementAxQuery.top(); // widget.width = elementAxQuery.width(); // widget.height = elementAxQuery.height(); // } // //if (obj.generateCompound) { // // // assume this means that this is a compound vector. // // widget.x = boundingRect.left; // // widget.y = boundingRect.top; // // //widget.pagex += boundingRect.left; // // //widget.pagey += boundingRect.top; // //} //} // Right now only dynamic panel can scroll if($ax.public.fn.IsDynamicPanel(obj.type)) { var stateQuery = $('#' + $ax.visibility.GetPanelState(elementId)); widget.scrollx = stateQuery.scrollLeft(); widget.scrolly = stateQuery.scrollTop(); widget.stateQuery = stateQuery; //if($ax.dynamicPanelManager.isIdFitToContent(elementId)) { // widget.width = stateQuery.width(); // widget.height = stateQuery.height(); //} } else { widget.scrollx = 0; widget.scrolly = 0; } // repeater only props if($ax.public.fn.IsRepeater(obj.type)) { widget.visibleitemcount = repeaterIdToItemIds[scriptId] ? repeaterIdToItemIds[scriptId].length : $ax.repeater.getVisibleDataCount(scriptId); widget.itemcount = $ax.repeater.getFilteredDataCount(scriptId); widget.datacount = $ax.repeater.getDataCount(scriptId); widget.pagecount = $ax.repeater.getPageCount(scriptId); widget.pageindex = $ax.repeater.getPageIndex(scriptId); } //widget.left = widget.leftfixed = widget.x; //widget.top = widget.topfixed = widget.y; //widget.right = widget.rightfixed = widget.x + widget.width; //widget.bottom = widget.bottomfixed = widget.y + widget.height; //if(elementQuery.css('position') == 'fixed') { // var windowScrollLeft = $(window).scrollLeft(); // var windowScrollTop = $(window).scrollTop(); // widget.leftfixed = widget.left - windowScrollLeft; // widget.topfixed = widget.top - windowScrollTop; // widget.rightfixed = widget.right - windowScrollLeft; // widget.bottomfixed = widget.bottom - windowScrollTop; //} // Get widget info funcs widget.elementAxQuery = function () { return this.elementAxQueryProp || (this.elementAxQueryProp = $ax('#' + this.elementId)); } widget.isFitToContent = function () { if (this.isFitToContentProp === undefined) { if (!this.stateQuery) this.isFitToContentProp = false; else this.isFitToContentProp = $ax.dynamicPanelManager.isIdFitToContent(this.elementId); } return this.isFitToContentProp; } widget.x = function () { return this.getProp('x'); } widget.y = function () { return this.getProp('y'); } widget.pagex = function () { return this.getProp('pagex'); } widget.pagey = function () { return this.getProp('pagey'); } widget.width = function () { return this.getProp('width'); } widget.height = function () { return this.getProp('height'); } widget.left = function () { return this.x(); } widget.top = function () { return this.y(); } widget.right = function () { return this.x() + this.width(); } widget.bottom = function () { return this.y() + this.height(); } widget.getProp = function (prop) { var propName = prop + 'Prop'; if (typeof (this[propName]) != 'undefined') return this[propName]; return this[propName] = this.cacheProp(prop); }; widget.cacheProp = function (prop) { // I'm keeping the returned undefineds the same as before, but really I could probably return undefined right away if elementQuery is empty if (this.isLayer) { if (prop == 'pagex' || prop == 'pagey') { if (this.elementQuery.length > 0) { if (prop == 'pagex') return this.elementAxQuery().left(); else return this.elementAxQuery().top(); } return undefined; // Otherwise, it is undefined as there is no element } var boundingRect = $ax.public.fn.getWidgetBoundingRect(this.elementId); this.xProp = boundingRect.left; this.yProp = boundingRect.top; this.widthProp = boundingRect.width; this.heightProp = boundingRect.height; return this[prop + 'Prop']; } if (this.elementQuery.length 0) { optionsList.push('width=' + selectedOptions.width); width = selectedOptions.width; } var features = optionsList.join(','); if(selectedOptions.centerwindow) { var winl = (window.screen.width - width) / 2; var wint = (window.screen.height - height) / 2; features = features + ',left=' + winl + ',top=' + wint; } return features; }; /** Closes a window */ $ax.public.closeWindow = $ax.closeWindow = function() { parent.window.close(); }; /** Goes back */ $ax.public.back = $ax.back = function() { window.history.go(-1); }; /** Reloads the current page. # includeVariables: true if it should re-include the variables when the page is reloaded */ $ax.public.reload = $ax.reload = function(includeVariables) { var targetUrl = (includeVariables === false) ? $axure.utils.getReloadPath() + \"#\" + encodeURI($ax.pageData.url) : $axure.utils.getReloadPath() + \"#\" + encodeURI($ax.globalVariableProvider.getLinkUrl($ax.pageData.url)); window.location.href = targetUrl; }; /** Sets a variable. # name: The name of the global variable to set # value: The value that should be set */ $ax.public.setGlobalVariable = $ax.setGlobalVariable = function(name, value) { if(!name || !value) { return; } $ax.globalVariableProvider.setVariableValue(name, value); }; /** Gets the value of a global variable # name: The name of the global variable value to get */ $ax.public.getGlobalVariable = $ax.getGlobalVariable = function(name) { $ax.globalVariableProvider.getVariableValue(name); }; $ax.getObjectFromElementIdDisregardHex = function (elementId) { var elementIdInput = elementId.charAt(0) == '#' ? elementId.substring(1) : elementId; return this.getObjectFromElementId(elementIdInput); } $ax.getTypeFromElementId = function(elementId) { var obj = this.getObjectFromElementIdDisregardHex(elementId); return obj && obj.type; }; $ax.getNumFromPx = function(pxNum) { return Number(pxNum.replace('px', '')); } });"},{"title":"","date":"2023-02-27T14:44:57.224Z","updated":"2023-02-27T14:44:57.224Z","comments":true,"path":"imgs/axure/ÊàëÁöÑËÄÉËØï_files/prototypePost.js","permalink":"https://justsso1.github.io/imgs/axure/%E6%88%91%E7%9A%84%E8%80%83%E8%AF%95_files/prototypePost.js","excerpt":"","text":"// 8.0.0.3382. Generated 1/14/2019 10:26:32 PM UTC //***** messagecenter.js *****// if (typeof console == 'undefined') console = { log: function () { } }; // sniff chrome var CHROME_5_LOCAL = false; var CHROME = false; var SAFARI = false; var FIREFOX = false; var WEBKIT = false; var OS_MAC = false; var IOS = false; var ANDROID = false; var MOBILE_DEVICE = false; var IE = false; var IE_10_AND_BELOW = false; //ie 10 and lower var IE_11_AND_ABOVE = false; //ie 11 and above var BROWSER_VERSION = 5000; (function () { if(!window.$axure) window.$axure = function() {}; var useragent = window.navigator.userAgent; var edgeRegex = /Edge\\/([0-9]+)/g; var edgeMatch = edgeRegex.exec(useragent); $axure.browser = { isEdge: Boolean(edgeMatch) }; if(!$axure.browser.isEdge) { var chromeRegex = /Chrome\\/([0-9]+).([0-9]+)/g; var chromeMatch = chromeRegex.exec(useragent); CHROME = Boolean(chromeMatch); CHROME_5_LOCAL = chromeMatch && Number(chromeMatch[1]) >= 5 && location.href.indexOf('file://') >= 0; } var safariRegex = /Safari\\/([0-9]+)/g; var safariMatch = safariRegex.exec(useragent); SAFARI = Boolean(safariMatch) && !CHROME; //because chrome also inserts safari string into user agent var webkitRegex = /WebKit\\//g ; WEBKIT = Boolean(webkitRegex.exec(useragent)); FIREFOX = useragent.toLowerCase().indexOf('firefox') > -1; var macRegex = /Mac/g ; OS_MAC = Boolean(macRegex.exec(window.navigator.platform)); IOS = useragent.match(/iPhone/i) || useragent.match(/iPad/i) || useragent.match(/iPod/i); ANDROID = useragent.match(/Android/i); MOBILE_DEVICE = ANDROID || IOS || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Tablet PC/i) || navigator.userAgent.match(/Windows Phone/i); if($.browser) { if($.browser.msie) IE_10_AND_BELOW = true; else IE_11_AND_ABOVE = useragent.toLowerCase().indexOf('trident') > -1; BROWSER_VERSION = $.browser.version; } IE = IE_10_AND_BELOW || IE_11_AND_ABOVE; //Used by sitemap and variables.js getLinkUrl functions so that they know //whether to embed global variables in URL as query string or hash string //_shouldSendVars persists the value for sitemap instead of re-checking every time var _shouldSendVars; var _shouldSendVarsToServer = function(url) { if(typeof _shouldSendVars != 'undefined') { return _shouldSendVars; } if(SAFARI || (IE_10_AND_BELOW && BROWSER_VERSION < 10)) { var urlToCheck = typeof url != 'undefined' ? url : window.location.href; var serverRegex = /http:\\/\\/127\\.0\\.0\\.1:[0-9]{5}/g; var serverMatch = serverRegex.exec(urlToCheck); var previewRegex = /[0-9]{2}\\.[0-9]{2}\\.[0-9]{2}/g; var previewMatch = previewRegex.exec(urlToCheck); if(Boolean(serverMatch) && Boolean(previewMatch)) { _shouldSendVars = true; return _shouldSendVars; } } _shouldSendVars = false; return _shouldSendVars; }; $axure.shouldSendVarsToServer = _shouldSendVarsToServer; })(); (function() { var _topMessageCenter; var _messageCenter = {}; var _listeners = []; var _stateListeners = []; var _state = {}; var _eventObject = null; var _queuedMessages = []; var _initialized = false; // this is for the non Chrome 5 local scenarios. The \"top\" message center will dispatch to all the bottom ones var _childrenMessageCenters = []; // create $axure if it hasn't been created if (!window.$axure) window.$axure = function() {}; $axure.messageCenter = _messageCenter; // isolate scope, and initialize _topMessageCenter. (function() { if (!CHROME_5_LOCAL) { var topAxureWindow = window; try { while(topAxureWindow.parent && topAxureWindow.parent !== topAxureWindow && topAxureWindow.parent.$axure) topAxureWindow = topAxureWindow.parent; } catch(e) {} _topMessageCenter = topAxureWindow.$axure.messageCenter; } })(); $(window.document).ready(function() { if (CHROME_5_LOCAL) { $('body').append(\"\" + \"\"); _eventObject = window.document.createEvent('Event'); _eventObject.initEvent('axureMessageSenderEvent', true, true); $('#axureEventReceiverDiv').bind('axureMessageReceiverEvent', function () { var request = JSON.parse($(this).text()); _handleRequest(request); }); } else { if (_topMessageCenter != _messageCenter) { _topMessageCenter.addChildMessageCenter(_messageCenter); console.log('adding from ' + window.location.toString()); } } }); var _handleRequest = function (request) { // route the request to all the listeners for(var i = 0; i < _listeners.length; i++) _listeners[i](request.message, request.data); // now handle the queued messages if we're initializing if (request.message == 'initialize') { _initialized = true; // send all the queued messages and return for (var i = 0; i < _queuedMessages.length; i++) { var qRequest = _queuedMessages[i]; _messageCenter.postMessage(qRequest.message, qRequest.data); } _queuedMessages = []; } // and then handle the set state messages, if necessary if (request.message == 'setState') { _state[request.data.key] = request.data.value; for (var i = 0; i < _stateListeners.length; i++) { var keyListener = _stateListeners[i]; // if thep passed a null or empty value, always post the message if (!keyListener.key || keyListener.key == request.data.key) { keyListener.listener(request.data.key, request.data.value); } } } }; // ----------------------------------------------------------------------------------------- // This method allows for dispatching messages in the non-chromelocal scenario. // Each child calls this on _topMessageCenter // ----------------------------------------------------------------------------------------- _messageCenter.addChildMessageCenter = function(messageCenter) { _childrenMessageCenters[_childrenMessageCenters.length] = messageCenter; }; // ----------------------------------------------------------------------------------------- // This method allows for dispatching messages in the non-chromelocal scenario. // Each child calls this on _topMessageCenter // ----------------------------------------------------------------------------------------- _messageCenter.dispatchMessage = function(message, data) { _handleRequest({ message: message, data: data }); }; // ----------------------------------------------------------------------------------------- // ----------------------------------------------------------------------------------------- _messageCenter.dispatchMessageRecursively = function(message, data) { console.log(\"dispatched to \" + window.location.toString()); // dispatch to the top center first _messageCenter.dispatchMessage(message, data); $('iframe').each(function(index, frame) { //try,catch to handle permissions error in FF when loading pages from another domain try { if (frame.contentWindow.$axure && frame.contentWindow.$axure.messageCenter) { frame.contentWindow.$axure.messageCenter.dispatchMessageRecursively(message, data); } }catch(e) {} }); }; var _combineEventMessages = false; var _compositeEventMessageData = []; _messageCenter.startCombineEventMessages = function() { _combineEventMessages = true; } _messageCenter.endCombineEventMessages = function () { _messageCenter.sendCompositeEventMessage(); _combineEventMessages = false; } _messageCenter.sendCompositeEventMessage = function () { _messageCenter.postMessage('axCompositeEventMessage', _compositeEventMessageData); _compositeEventMessageData = []; } _messageCenter.postMessage = function (message, data) { if(_combineEventMessages) { if(message == 'axEvent' || message == 'axCase' || message == 'axAction' || message == 'axEventComplete') { _compositeEventMessageData.push({ 'message': message, 'data': data }); if(_compositeEventMessageData.length >= 10) _messageCenter.sendCompositeEventMessage(); return; } } if(!CHROME_5_LOCAL) { _topMessageCenter.dispatchMessageRecursively(message, data); } else { var request = { message: message, data: data }; if(_initialized) { var senderDiv = window.document.getElementById('axureEventSenderDiv'); var messageText = JSON.stringify(request); // console.log('sending event: ' + messageText); senderDiv.innerText = messageText; senderDiv.dispatchEvent(_eventObject); // console.log('event sent'); } else { _queuedMessages[_queuedMessages.length] = request; } } }; _messageCenter.setState = function(key, value) { var data = { key: key, value: value }; _messageCenter.postMessage('setState', data); }; _messageCenter.getState = function(key) { return _state[key]; }; _messageCenter.addMessageListener = function(listener) { _listeners[_listeners.length] = listener; }; _messageCenter.addStateListener = function(key, listener) { _stateListeners[_stateListeners.length] = { key: key, listener: listener }; }; })(); //***** events.js *****// // ******* Features MANAGER ******** // $axure.internal(function($ax) { var _features = $ax.features = {}; var _supports = _features.supports = {}; _supports.touchstart = typeof window.ontouchstart !== 'undefined'; _supports.touchmove = typeof window.ontouchmove !== 'undefined'; _supports.touchend = typeof window.ontouchend !== 'undefined'; _supports.mobile = _supports.touchstart && _supports.touchend && _supports.touchmove; // Got this from http://stackoverflow.com/questions/11381673/javascript-solution-to-detect-mobile-browser var check = navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Tablet PC/i) || navigator.userAgent.match(/Windows Phone/i); _supports.windowsMobile = navigator.userAgent.match(/Tablet PC/i) || navigator.userAgent.match(/Windows Phone/i); if(!check && _supports.mobile) { _supports.touchstart = false; _supports.touchmove = false; _supports.touchend = false; _supports.mobile = false; } var _eventNames = _features.eventNames = {}; _eventNames.mouseDownName = _supports.touchstart ? 'touchstart' : 'mousedown'; _eventNames.mouseUpName = _supports.touchend ? 'touchend' : 'mouseup'; _eventNames.mouseMoveName = _supports.touchmove ? 'touchmove' : 'mousemove'; }); // ******* EVENT MANAGER ******** // $axure.internal(function($ax) { var _objectIdToEventHandlers = {}; var _jBrowserEvent = undefined; $ax.setjBrowserEvent = function(event) { _jBrowserEvent = event; }; $ax.getjBrowserEvent = function() { return _jBrowserEvent; }; var _event = {}; $ax.event = _event; //initilize state _event.mouseOverObjectId = ''; _event.mouseDownObjectId = ''; _event.mouseOverIds = []; var EVENT_NAMES = ['mouseenter', 'mouseleave', 'contextmenu', 'change', 'focus', 'blur']; // Tap, double tap, and touch move, or synthetic. if(!$ax.features.supports.mobile) { EVENT_NAMES[EVENT_NAMES.length] = 'click'; EVENT_NAMES[EVENT_NAMES.length] = 'dblclick'; EVENT_NAMES[EVENT_NAMES.length] = 'mousemove'; } // add the event names for the touch events EVENT_NAMES[EVENT_NAMES.length] = $ax.features.eventNames.mouseDownName; EVENT_NAMES[EVENT_NAMES.length] = $ax.features.eventNames.mouseUpName; for(var i = 0; i < EVENT_NAMES.length; i++) { var eventName = EVENT_NAMES[i]; //we need the function here to circumvent closure modifying eventName _event[eventName] = (function(event_Name) { return function(elementId, fn) { var elementIdQuery = $jobj(elementId); var type = $ax.getTypeFromElementId(elementId); //we need specially track link events so we can enable and disable them along with //their parent widgets if(elementIdQuery.is('a')) _attachCustomObjectEvent(elementId, event_Name, fn); //see notes below else if($ax.IsTreeNodeObject(type)) _attachTreeNodeEvent(elementId, event_Name, fn); else if ($ax.IsImageFocusable(type) && (event_Name == 'focus' || event_Name == 'blur')) { var suitableChild; var imgChild = $ax.repeater.applySuffixToElementId(elementId, '_img'); var divChild = $ax.repeater.applySuffixToElementId(elementId, '_div'); for (var j = 0; j < elementIdQuery[0].children.length; j++) { if (elementIdQuery[0].children[j].id == imgChild) suitableChild = imgChild; if (!suitableChild && elementIdQuery[0].children[j].id == divChild) suitableChild = divChild; } if(!suitableChild) suitableChild = imgChild; _attachDefaultObjectEvent($jobj(suitableChild), elementId, event_Name, fn); } else { var inputId = $ax.INPUT(elementId); var isInput = $jobj(inputId).length != 0; var id = isInput && (event_Name == 'focus' || event_Name == 'blur') ? inputId : elementId; _attachDefaultObjectEvent($jobj(id), elementId, event_Name, fn); } }; })(eventName); } var AXURE_TO_JQUERY_EVENT_NAMES = { 'onMouseOver': 'mouseenter', 'onMouseOut': 'mouseleave', 'onContextMenu': 'contextmenu', 'onChange': 'change', 'onFocus': 'focus', 'onLostFocus': 'blur' }; // Tap, double tap, and touch move, or synthetic. if(!$ax.features.supports.mobile) { AXURE_TO_JQUERY_EVENT_NAMES.onClick = 'click'; AXURE_TO_JQUERY_EVENT_NAMES.onDoubleClick = 'dblclick'; AXURE_TO_JQUERY_EVENT_NAMES.onMouseMove = 'mousemove'; } AXURE_TO_JQUERY_EVENT_NAMES.onMouseDown = $ax.features.eventNames.mouseDownName; AXURE_TO_JQUERY_EVENT_NAMES.onMouseUp = $ax.features.eventNames.mouseUpName; //for dp, if mouse entered without leaving, don't fire mouse enter again var mouseEnterGuard = {}; var _attachEvents = function (diagramObject, elementId, doMouseEnterGuard) { var inputId = $ax.repeater.applySuffixToElementId(elementId, '_input'); var id = $jobj(inputId).length ? inputId : elementId; for(var eventName in diagramObject.interactionMap) { var jQueryEventName = AXURE_TO_JQUERY_EVENT_NAMES[eventName]; if(!jQueryEventName) continue; _event[jQueryEventName](id, //this is needed to escape closure (function(axEventObject) { return function (e) { if(e.type == 'mouseenter' && doMouseEnterGuard) { if(mouseEnterGuard[elementId]) return; else mouseEnterGuard[elementId] = true; } $ax.setjBrowserEvent(e); // console.log(axEventObject.description); var eventInfo = $ax.getEventInfoFromEvent($ax.getjBrowserEvent(), false, elementId); _handleEvent(elementId, eventInfo, axEventObject); }; })(diagramObject.interactionMap[eventName]) ); if(jQueryEventName.toLowerCase() == 'mouseenter' && doMouseEnterGuard) { $jobj(elementId).on('mouseleave touchend', function() { mouseEnterGuard[elementId] = false; }); } } }; var _descriptionToKey = { 'OnFocus': 'onFocus', 'OnLostFocus': 'onLostFocus' }; var _createProxies = function(diagramObject, elementId) { var createFocus = _needsProxy(diagramObject, elementId, 'onFocus'); var createLostFocus = _needsProxy(diagramObject, elementId, 'onLostFocus'); if(!createFocus && !createLostFocus) return; if(!diagramObject.interactionMap) diagramObject.interactionMap = {}; if(createFocus) diagramObject.interactionMap.onFocus = { proxy: true, description: 'OnFocus' }; if(createLostFocus) diagramObject.interactionMap.onLostFocus = { proxy: true, description: 'OnLostFocus' }; } var preventDefaultEvents = ['OnContextMenu', 'OnKeyUp', 'OnKeyDown']; var allowBubble = ['OnFocus', 'OnResize', 'OnMouseOut', 'OnMouseOver']; var _canClick = true; var _startScroll = []; var _setCanClick = function(canClick) { _canClick = canClick; if(_canClick) _startScroll = [$(window).scrollLeft(), $(window).scrollTop()]; }; var _getCanClick = function() { if(!$ax.features.supports.mobile) return true; var endScroll = [$(window).scrollLeft(), $(window).scrollTop()]; return _canClick && _startScroll[0] == endScroll[0] && _startScroll[1] == endScroll[1]; }; //var _notAllowedInvisible = function (type) { // $ax.getTypeFromElementId(elementId); // return !$ax.public.fn.IsReferenceDiagramObject(type) && !$ax.public.fn.IsLayer(type); //} var _notAllowedInvisible = function (id) { var type = $ax.getTypeFromElementId(id); if ($ax.public.fn.IsReferenceDiagramObject(type) || $ax.public.fn.IsLayer(type)) return false; return !($ax.public.fn.IsVector(type) && _hasCompoundImage(id)); } var _hasCompoundImage = function (id) { var query = $jobj(id); return $ax.public.fn.isCompoundVectorHtml(query[0]); } var _suppressedEvents = {}; // Suppressed for next occurance. var _blockedEvents = {}; // Blocked until unblocked. _event.addSuppressedEvent = function(id, event) { if(!_suppressedEvents[id]) _suppressedEvents[id] = []; var events = _suppressedEvents[id]; if(events.indexOf(event) != -1) return; events.push(event); } _event.blockEvent = function(id, event) { if(!_blockedEvents[id]) _blockedEvents[id] = {}; var events = _blockedEvents[id]; if(events[event]) ++events[event]; else events[event] = 1; return function() { _unblockEvent(id, event); }; } var _isSuppressedEvent = function(id, event) { var suppressedEvents = _suppressedEvents[id]; var blockedEvents = _blockedEvents[id]; return (suppressedEvents && suppressedEvents.indexOf(event) != -1) || (blockedEvents && blockedEvents[event]); } var _removeSuppressedEvent = function(id, event) { var events = _suppressedEvents[id]; if(!events) return; if(events.length == 1) { delete _suppressedEvents[id]; } else { var eventIndex = events.indexOf(event); for(var i = eventIndex + 1; i < events.length; i++) events[i - 1] = events[i]; events.pop(); } } var _unblockEvent = function(id, event) { var events = _blockedEvents[id]; if(events) { if(--events[event] > 0) return; } _removeSuppressedEvent(id, event); } var _unblockEvent = function(id, event) { var events = _blockedEvents[id]; if(events) { if(--events[event] > 0) return; } _removeSuppressedEvent(id, event); } var eventNesting = 0; var eventNestingTime = new Date().getTime(); var _handleEvent = $ax.event.handleEvent = function (elementId, eventInfo, axEventObject, skipShowDescriptions, synthetic) { var eventDescription = axEventObject.description; if(_enteredWidgets[elementId] && eventDescription == 'OnMouseEnter') return; // Suppress entering a widget when already in widget (ie only) if(_isSuppressedEvent(elementId, eventDescription)) { _removeSuppressedEvent(elementId, eventDescription); return; } if(axEventObject.proxy) { var firingId = _widgetToFocusParent[elementId]; if(firingId) { var firingObj = $obj(firingId); var nextEventObj = firingObj.interactionMap && firingObj.interactionMap[_descriptionToKey[eventDescription]]; if(!nextEventObj) nextEventObj = axEventObject; _handleEvent(firingId, eventInfo, nextEventObj, skipShowDescriptions, synthetic); } return; } // var x = JSON.stringify(eventInfo); // var y = JSON.stringify(axEventObject); var fireTime = new Date().getTime(); if(fireTime - eventNestingTime > 100) { eventNestingTime = fireTime; eventNesting = 0; } if(eventNesting === 0) { $ax.recording.maybeRecordEvent(elementId, eventInfo, axEventObject, fireTime); } eventNesting += 1; if(!_getCanClick() && (eventDescription == 'OnClick' || eventDescription == 'OnPageClick')) return; // If you are supposed to suppress, do that right away. if(suppressedEventStatus[eventDescription]) { return; } var currentEvent = $ax.getjBrowserEvent(); if(!synthetic && currentEvent && currentEvent.originalEvent && currentEvent.originalEvent.handled && !eventInfo.isMasterEvent) return; if(!synthetic && elementId && !$ax.style.getObjVisible(elementId) && _notAllowedInvisible(elementId)) return; //if debug var axObj = $obj(elementId); var axObjLabel = axObj ? axObj.label : eventInfo.label; var axObjType = axObj ? axObj.friendlyType : eventInfo.friendlyType; if(!skipShowDescriptions || eventDescription == 'OnPageLoad') $ax.messageCenter.postMessage('axEvent', { 'label': axObjLabel, 'type': axObjType, 'event': axEventObject }); var bubble = true; var showCaseDescriptions = !skipShowDescriptions && _shouldShowCaseDescriptions(axEventObject); if(!showCaseDescriptions) { //handle case descriptions var caseGroups = []; var currentCaseGroup = []; caseGroups[0] = currentCaseGroup; // Those refreshes not after a wait var guaranteedRefreshes = {}; var caseGroupIndex = 0; for(var i = 0; i < axEventObject.cases.length; i++) { var currentCase = axEventObject.cases[i]; if(currentCase.isNewIfGroup && i != 0) { caseGroupIndex++; currentCaseGroup = []; caseGroups[caseGroups.length] = currentCaseGroup; // Joon: Isn't caseGroups.length always equal to caseGroupIndex? } currentCaseGroup[currentCaseGroup.length] = currentCase; for(var j = 0; j < currentCase.actions.length; j++) { var action = currentCase.actions[j]; if(action.action == 'wait') break; if(action.action != 'refreshRepeater') continue; for(var k = 0; k < action.repeatersToRefresh.length; k++) { var id = $ax.getElementIdsFromPath(action.repeatersToRefresh[k], eventInfo)[0]; if(id) guaranteedRefreshes[id] = caseGroupIndex; } } } for(var i = 0; i < caseGroups.length; i++) { var groupRefreshes = []; for(var key in guaranteedRefreshes) { if(guaranteedRefreshes[key] == i) groupRefreshes[groupRefreshes.length] = key; } bubble = _handleCaseGroup(eventInfo, caseGroups[i], groupRefreshes) && bubble; } } else { _showCaseDescriptions(elementId, eventInfo, axEventObject, synthetic); bubble = false; } // If not handled, synthetically bubble if you can if(bubble && _widgetToFocusParent[elementId]) { firingId = _widgetToFocusParent[elementId]; if(firingId) { firingObj = $obj(firingId); nextEventObj = firingObj.interactionMap && firingObj.interactionMap[_descriptionToKey[axEventObject.description]]; if(!nextEventObj) nextEventObj = axEventObject; _handleEvent(firingId, eventInfo, nextEventObj, skipShowDescriptions, synthetic); } return; } // Only trigger a supression if it handled this event if(!bubble && suppressingEvents[eventDescription]) { suppressedEventStatus[suppressingEvents[eventDescription]] = true; } $ax.action.flushAllResizeMoveActions(eventInfo); // This should not be needed anymore. All refreshes should be inserted, or handled earlier. var repeaters = $ax.deepCopy($ax.action.repeatersToRefresh); while($ax.action.repeatersToRefresh.length) $ax.action.repeatersToRefresh.pop(); for(i = 0; i < repeaters.length; i++) $ax.repeater.refreshRepeater(repeaters[i], eventInfo); if(currentEvent && currentEvent.originalEvent) { currentEvent.originalEvent.handled = !synthetic && !bubble && allowBubble.indexOf(eventDescription) == -1; //currentEvent.originalEvent.donotdrag = currentEvent.donotdrag || (!bubble && eventDescription == 'OnMouseDown'); // Prevent default if necessary if(currentEvent.originalEvent.handled && preventDefaultEvents.indexOf(eventDescription) != -1) { currentEvent.preventDefault(); } } eventNesting -= 1; if(!showCaseDescriptions) $ax.messageCenter.postMessage('axEventComplete'); }; var _handleScrollEvent = function (elementId, eventInfo, originalEvent, scrolledUp, scrolledDown, interactionMap, skipShowDescription, synthetic) { if (!interactionMap) return; if (interactionMap.onScroll) _handleEvent(elementId, eventInfo, interactionMap.onScroll, skipShowDescription, synthetic); var wasHandled = originalEvent.handled; if (interactionMap.onScrollUp && scrolledUp) { originalEvent.handled = false; _handleEvent(elementId, eventInfo, interactionMap.onScrollUp, skipShowDescription, synthetic); } else if (interactionMap.onScrollDown && scrolledDown) { originalEvent.handled = false; _handleEvent(elementId, eventInfo, interactionMap.onScrollDown, skipShowDescription, synthetic); } originalEvent.handled |= wasHandled; } var _showCaseDescriptions = function(elementId, eventInfo, axEventObject, synthetic) { if(axEventObject.cases.length == 0) return true; var linksId = elementId + \"linkBox\"; $('#' + linksId).remove(); var $container = $(\"\"); if(!_isEventSimulating(axEventObject)) { var copy = $ax.eventCopy(eventInfo); for(var i = 0; i < axEventObject.cases.length; i++) { var $link = $(\"\" + axEventObject.cases[i].description + \"\"); $link.click(function(j) { return function () { var currentCase = axEventObject.cases[j]; $ax.messageCenter.postMessage('axCase', { 'description': currentCase.description }); for(var k = 0; k < currentCase.actions.length; k++) { $ax.messageCenter.postMessage('axAction', { 'description': currentCase.actions[k].description }); } $ax.messageCenter.postMessage('axEventComplete'); var bubble = $ax.action.dispatchAction(copy, axEventObject.cases[j].actions); $ax.action.flushAllResizeMoveActions(copy); $('#' + linksId).remove(); return bubble; }; } (i) ); $container.append($link); } } else { var fullDescription = axEventObject.description + \":\"; for(var i = 0; i < axEventObject.cases.length; i++) { var currentCase = axEventObject.cases[i]; fullDescription += \"&nbsp;&nbsp;\" + currentCase.description.replace(//g, '&nbsp;&nbsp;') + \":\"; for(var j = 0; j < currentCase.actions.length; j++) { fullDescription += \"&nbsp;&nbsp;&nbsp;&nbsp;\" + currentCase.actions[j].description.replace(//g, '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;') + \"\"; } } fullDescription = fullDescription.substring(0, fullDescription.length - 4); var $link = $(\"\" + fullDescription + \"\"); $link.click(function() { _handleEvent(elementId, eventInfo, axEventObject, true, synthetic); $ax.messageCenter.postMessage('axEventComplete'); $('#' + linksId).remove(); return; }); $container.append($link); } $container.mouseleave(function(e) { $ax.legacy.SuppressBubble(e); }); $('body').append($container); _showCaseLinks(eventInfo, linksId); }; var _showCaseLinks = function(eventInfo, linksId) { var links = window.document.getElementById(linksId); links.style.top = eventInfo.pageY; var left = eventInfo.pageX; links.style.left = left; $ax.visibility.SetVisible(links, true); $ax.legacy.BringToFront(linksId, true); // Switch to using jquery if this is still needed. Really old legacy code, likely for a browser no longer supported. //$ax.legacy.RefreshScreen(); }; var _shouldShowCaseDescriptions = function(axEventObject) { if($ax.document.configuration.linkStyle == \"alwaysDisplayTargets\") return true; if($ax.document.configuration.linkStyle == \"neverDisplayTargets\") return false; if(axEventObject.cases.length == 0) return false; if(_isEventSimulating(axEventObject)) return false; if(axEventObject.cases.length >= 2) return true; return false; }; var _isEventSimulating = function(axEventObject) { for(var i = 0; i < axEventObject.cases.length; i++) { if(axEventObject.cases[i].condition) return true; } return false; }; var _handleCaseGroup = function(eventInfo, caseGroup, groupRefreshes) { for(var i = 0; i < caseGroup.length; i++) { var currentCase = caseGroup[i]; if(!currentCase.condition || _processCondition(currentCase.condition, eventInfo)) { $ax.messageCenter.postMessage('axCase', { 'description': currentCase.description }); for(var j = 0; j < currentCase.actions.length; j++) { if(currentCase.actions[j].action != 'refreshRepeater') $ax.messageCenter.postMessage('axAction', { 'description': currentCase.actions[j].description }); } for(var j = 0; j < currentCase.actions.length; j++) { var action = currentCase.actions[j]; if(action.action == 'wait') break; if(action.action != 'refreshRepeater') continue; for(var k = 0; k < action.repeatersToRefresh.length; k++) { var id = $ax.getElementIdsFromPath(action.repeatersToRefresh[i], eventInfo)[i]; if(id) { var index = groupRefreshes.indexOf(id); if(index != -1) $ax.splice(groupRefreshes, index); } } } // Any guaranteed refreshes that aren't accounted for must be run still. $ax.action.tryRefreshRepeaters(groupRefreshes, eventInfo); $ax.action.dispatchAction(eventInfo, currentCase.actions); return false; } } // Any guaranteed refreshes that aren't accounted for must be run still. $ax.action.tryRefreshRepeaters(groupRefreshes, eventInfo); return true; }; var _processCondition = function(expr, eventInfo) { return $ax.expr.evaluateExpr(expr, eventInfo); }; var _attachTreeNodeEvent = function(elementId, eventName, fn) { //we need to set the cursor here because we want to make sure that every tree node has the default //cursor set and then it's overridden if it has a click if(eventName == 'click') window.document.getElementById(elementId).style.cursor = 'pointer'; _attachCustomObjectEvent(elementId, eventName, fn); }; var _attachDefaultObjectEvent = function(elementIdQuery, elementId, eventName, fn) { var func = function() { if(!$ax.style.IsWidgetDisabled(elementId)) return fn.apply(this, arguments); return true; }; var bind = !elementIdQuery[eventName]; if(bind) elementIdQuery.bind(eventName, func); else elementIdQuery[eventName](func); }; var _attachCustomObjectEvent = function(elementId, eventName, fn) { var handlers = _objectIdToEventHandlers[elementId]; if(!handlers) _objectIdToEventHandlers[elementId] = handlers = {}; var fnList = handlers[eventName]; if(!fnList) handlers[eventName] = fnList = []; fnList[fnList.length] = fn; }; var _fireObjectEvent = function(elementId, event, originalArgs) { var element = window.document.getElementById(elementId); var handlerList = _objectIdToEventHandlers[elementId] && _objectIdToEventHandlers[elementId][event]; if(handlerList) { for(var i = 0; i < handlerList.length; i++) handlerList[i].apply(element, originalArgs); } eventNesting -= 1; }; var _layerToFocusableWidget = {}; var _widgetToFocusParent = {}; _event.layerMapFocus = function(layer, elementId) { var mainObj = layer.objs[0]; // If first child non existant return if (!mainObj) return; var mainId = $ax.getElementIdFromPath([mainObj.id], { relativeTo: elementId }); _widgetToFocusParent[mainId] = elementId; // If first child is a layer, call recursively if ($ax.public.fn.IsLayer(mainObj.type)) { _event.layerMapFocus(mainObj, mainId); var baseId = _layerToFocusableWidget[mainId]; if(baseId) _layerToFocusableWidget[elementId] = baseId; return; } _layerToFocusableWidget[elementId] = mainId; } var _needsProxy = function(obj, id, proxyName) { // layers don't need on focus ever, proxies will handle them if ($ax.public.fn.IsLayer(obj.type)) return false; // If you already focus you don't need to force yourself to proxy. if(obj.interactionMap && obj.interactionMap[proxyName]) return false; var parentId = _widgetToFocusParent[id]; if(parentId) return _needsProxyHelper(parentId, proxyName); return false; } var _needsProxyHelper = function(id, proxyName) { var obj = $obj(id); if(obj.interactionMap && obj.interactionMap[proxyName]) return true; var parentId = _widgetToFocusParent[id]; if(parentId) return _needsProxyHelper(parentId, proxyName); return false; } //for button shapes and images the img is focusable instead of the div to get better outlines // For layers, we remember who their proxy is. $ax.event.getFocusableWidgetOrChildId = function (elementId) { var mappedId = _layerToFocusableWidget[elementId]; if (mappedId) elementId = mappedId; var inputId = $ax.repeater.applySuffixToElementId(elementId, '_input'); var inputQuery = $jobj(inputId); if(inputQuery.length > 0) return inputId; var imgId = $ax.repeater.applySuffixToElementId(elementId, '_img'); var imgQuery = $jobj(imgId); if (imgQuery.length > 0) return imgId; var divId = $ax.repeater.applySuffixToElementId(elementId, '_div'); var divQuery = $jobj(divId); if (divQuery.length > 0) return divId; return elementId; }; var _enteredWidgets = {}; // key is the suppressing event, and the value is the event that is supressed var suppressingEvents = {}; // key is the event that will cancel the suppression, and value is the event that was being suppressed var cancelSuppressions = {}; // suppressed event maps to true if it is supressed var suppressedEventStatus = {}; var initSuppressingEvents = function () { suppressingEvents['OnLongClick'] = 'OnClick'; cancelSuppressions['onMouseDown'] = 'OnClick'; // Have to cancel suppressed event here. Only works for non-synthetic events currently for(var key in cancelSuppressions) { var jEventName = AXURE_TO_JQUERY_EVENT_NAMES[key]; if(!jEventName) continue; $('body').bind(jEventName, function () { suppressedEventStatus[cancelSuppressions[key]] = false; }); } }; // TODO: It may be a good idea to split this into multiple functions, or at least pull out more similar functions into private methods var _initializeObjectEvents = function(query, refreshType) { query.each(function(dObj, elementId) { var $element = $jobj(elementId); var itemId = $ax.repeater.getItemIdFromElementId(elementId); // Focus has to be done before on focus fires // Set up focus if ($ax.public.fn.IsTextArea(dObj.type) || $ax.public.fn.IsTextBox(dObj.type) || $ax.public.fn.IsCheckBox(dObj.type) || $ax.public.fn.IsRadioButton(dObj.type) || $ax.public.fn.IsListBox(dObj.type) || $ax.public.fn.IsComboBox(dObj.type) || $ax.public.fn.IsButton(dObj.type) || (dObj.tabbable && ($ax.public.fn.IsImageBox(dObj.type) || $ax.public.fn.IsVector(dObj.type) || $ax.IsTreeNodeObject(dObj.type) || $ax.public.fn.IsTableCell(dObj.type)))) { var focusObj = $jobj($ax.event.getFocusableWidgetOrChildId(elementId)); focusObj.focus(function() { window.lastFocusedControl = elementId; }); } // [MAS: Supressing events were here] _createProxies(dObj, elementId); var isDynamicPanel = $ax.public.fn.IsDynamicPanel(dObj.type); if(dObj.interactionMap) { _attachEvents(dObj, elementId, isDynamicPanel); }; if (IE || $axure.browser.isEdge) { $element.mouseenter(function() { _enteredWidgets[elementId] = true; }).mouseleave(function() { _enteredWidgets[elementId] = false; }); } _attachIxStyleEvents(dObj, elementId, $element); var $axElement = $ax('#' + elementId); // Base case is set up selected disabled based on the default in the axobj, for non, repeaters and resetting repeaters var itemReset = refreshType == $ax.repeater.refreshType.reset; if(!itemId || itemReset) { //initialize disabled elements, do this first before selected, cause if a widget is disabled, we don't want to apply selected style anymore if($ax.public.fn.IsVector(dObj.type) || $ax.public.fn.IsImageBox(dObj.type) || isDynamicPanel || $ax.public.fn.IsLayer(dObj.type)) { if(dObj.disabled) $axElement.enabled(false); // Initialize selected elements if(dObj.selected) $axElement.selected(true); } } else if(refreshType == $ax.repeater.refreshType.preEval) { // Otherwise everything should be set up correctly by pre-eval, want to set up selected disabled dictionaries (and disabled status) // Disabled layer/dynamic panel don't have the disabled class, but they do have the disabled attr written out, so use that in that case if ($element.hasClass('disabled') || (($ax.IsLayer(dObj.type) || $ax.IsDynamicPanel(dObj.type)) && $element.attr('disabled'))) $axElement.enabled(false); if($element.hasClass('selected')) $axElement.selected(true); } else { // Persist means we want to leave it as is, but we want to make sure we use selected based off of the backing data, and not some class that exists because of the reset $element.removeClass('selected'); } if(OS_MAC && WEBKIT) { if ($ax.public.fn.IsComboBox(dObj.type) && dObj.disabled) { $jobj($ax.INPUT(elementId)).css('color', 'grayText'); } }; // Initialize Placeholders. Right now this is text boxes and text areas. // Also, the assuption is being made that these widgets with the placeholder, have no other styles (this may change...) var hasPlaceholder = dObj.placeholderText == '' ? true : Boolean(dObj.placeholderText); if(($ax.public.fn.IsTextArea(dObj.type) || $ax.public.fn.IsTextBox(dObj.type)) && hasPlaceholder) { // This is needed to initialize the placeholder state var inputJobj = $jobj($ax.INPUT(elementId)); inputJobj.bind('focus', function () { if(dObj.HideHintOnFocused) { var id = this.id; var inputIndex = id.indexOf('_input'); if (inputIndex == -1) return; var inputId = id.substring(0, inputIndex); if (!$ax.placeholderManager.isActive(inputId)) return; $ax.placeholderManager.updatePlaceholder(inputId, false, true); } $ax.placeholderManager.moveCaret(this.id); }).bind('mouseup', function() { $ax.placeholderManager.moveCaret(this.id); }).bind('blur', function() { var id = this.id; var inputIndex = id.indexOf('_input'); if(inputIndex == -1) return; var inputId = id.substring(0, inputIndex); if($jobj(id).val()) return; $ax.placeholderManager.updatePlaceholder(inputId, true); }); if(ANDROID) { //input fires before keyup, to avoid flicker, supported in ie9 and above inputJobj.bind('input', function() { if(!dObj.HideHintOnFocused) { //hide on type var id = this.id; var inputIndex = id.indexOf('_input'); if(inputIndex == -1) return; var inputId = id.substring(0, inputIndex); if($ax.placeholderManager.isActive(inputId)) { $ax.placeholderManager.updatePlaceholder(inputId, false, true); } else if(!$jobj(id).val()) { $ax.placeholderManager.updatePlaceholder(inputId, true, false); $ax.placeholderManager.moveCaret(id, 0); } } }); } else { inputJobj.bind('keydown', function() { if(!dObj.HideHintOnFocused) { var id = this.id; var inputIndex = id.indexOf('_input'); if(inputIndex == -1) return; var inputId = id.substring(0, inputIndex); if(!$ax.placeholderManager.isActive(inputId)) return; $ax.placeholderManager.updatePlaceholder(inputId, false, true); } }).bind('keyup', function() { var id = this.id; var inputIndex = id.indexOf('_input'); if(inputIndex == -1) return; var inputId = id.substring(0, inputIndex); if($ax.placeholderManager.isActive(inputId)) return; if(!dObj.HideHintOnFocused && !$jobj(id).val()) { $ax.placeholderManager.updatePlaceholder(inputId, true); $ax.placeholderManager.moveCaret(id, 0); } }); } $ax.placeholderManager.registerPlaceholder(elementId, dObj.placeholderText, inputJobj.attr('type') == 'password'); $ax.placeholderManager.updatePlaceholder(elementId, !($jobj($ax.repeater.applySuffixToElementId(elementId, '_input')).val())); } // Initialize assigned submit buttons if(dObj.submitButton) { $element.keyup(function(e) { if(e.keyCode == '13') { var scriptId = $ax.repeater.getScriptIdFromElementId(elementId); var path = $ax.deepCopy(dObj.submitButton.path); path[path.length] = dObj.submitButton.id; var itemNum = $ax.repeater.getItemIdFromElementId(elementId); var submitId = $ax.getScriptIdFromPath(path, scriptId); if(itemNum && $ax.getParentRepeaterFromScriptId(submitId) == $ax.getParentRepeaterFromScriptId(scriptId)) { submitId = $ax.repeater.createElementId(submitId, itemNum); } var inputId = $ax.INPUT(submitId); if($jobj(inputId).length) submitId = inputId; $ax.setjBrowserEvent(e); $ax.event.fireClick(submitId); } }).keydown(function(e) { if(e.keyCode == '13') { e.preventDefault(); } }); } // Don't drag after mousing down on a plain text object if ($ax.public.fn.IsTextArea(dObj.type) || $ax.public.fn.IsTextBox(dObj.type) || $ax.public.fn.IsListBox(dObj.type) || $ax.public.fn.IsComboBox(dObj.type) || $ax.public.fn.IsCheckBox(dObj.type) || $ax.public.fn.IsRadioButton(dObj.type)) { $element.bind($ax.features.eventNames.mouseDownName, function(event) { event.originalEvent.donotdrag = true; }); } if($ax.features.supports.mobile) { $element.bind($ax.features.eventNames.mouseDownName, function() { _setCanClick(true); }); if (isDynamicPanel) { $element.scroll(function() { _setCanClick(false); }); } } //initialize tree node cursors to default so they will override their parent if ($ax.public.fn.IsTreeNodeObject(dObj.type) && !(dObj.interactionMap && dObj.interactionMap.onClick)) { $element.css('cursor', 'default'); } //initialize widgets that are clickable to have the pointer over them when hovering if($ax.event.HasClick(dObj)) { if($element) $element.css('cursor', 'pointer'); } // TODO: not sure if we need this. It appears to be working without //initialize panels for DynamicPanels if (isDynamicPanel) { $element.children().each(function() { var parts = this.id.split('_'); var state = parts[parts.length - 1].substring(5); if(state != 0) $ax.visibility.SetVisible(this, false); }); } //initialize TreeNodes if ($ax.public.fn.IsTreeNodeObject(dObj.type)) { if($element.hasClass('treeroot')) return; var childrenId = elementId + '_children'; var children = $element.children('[id=\"' + childrenId + '\"]:first'); if(children.length > 0) { var plusMinusId = 'u' + (parseInt($ax.repeater.getScriptIdFromElementId(elementId).substring(1)) + 1); if(itemId) plusMinusId = $ax.repeater.createElementId(plusMinusId, itemId); if(!$jobj(plusMinusId).children().first().is('img')) plusMinusId = ''; $ax.tree.InitializeTreeNode(elementId, plusMinusId, childrenId); } $element.click(function() { $ax.tree.SelectTreeNode(elementId, true); }); } //initialize submenus if ($ax.public.fn.IsMenuObject(dObj.type)) { if($element.hasClass('sub_menu')) { var tableCellElementId = $ax.getElementIdFromPath([dObj.parentCellId], { relativeTo: elementId }); $ax.menu.InitializeSubmenu(elementId, tableCellElementId); } } // Attach handles for dynamic panels that propagate styles to inner items. if ((isDynamicPanel || $ax.public.fn.IsLayer(dObj.type)) && dObj.propagate) { $element.mouseenter(function() { dynamicPanelMouseOver(this.id); }).mouseleave(function() { dynamicPanelMouseLeave(this.id); }).bind($ax.features.eventNames.mouseDownName, function() { dynamicPanelMouseDown(this.id); }).bind($ax.features.eventNames.mouseUpName, function() { dynamicPanelMouseUp(this.id); }); } // These are the dynamic panel functions for propagating rollover styles and mouse down styles to inner objects var dynamicPanelMouseOver = function(elementId, fromChild) { var parent = $ax.dynamicPanelManager.parentHandlesStyles(elementId); if(parent) { dynamicPanelMouseOver(parent.id, true); if(parent.direct) return; } if($.inArray(elementId, _event.mouseOverIds) != -1) return; // If this event is coming from a child, don't mark that it's actually entered. // Only mark that this has been entered if this event has naturally been triggered. (For reason see mouseleave) if(!fromChild) _event.mouseOverIds[_event.mouseOverIds.length] = elementId; if(elementId == _event.mouseOverObjectId) return; _event.mouseOverObjectId = elementId; $ax.dynamicPanelManager.propagateMouseOver(elementId, true); }; var dynamicPanelMouseLeave = function(elementId, fromChild) { var parent = $ax.dynamicPanelManager.parentHandlesStyles(elementId); if(parent) { dynamicPanelMouseLeave(parent.id, true); if(parent.direct) return; } var index = $.inArray(elementId, _event.mouseOverIds); // If index != -1, this has been natuarally entered. If naturally entered, then leaving child should not trigger leaving, // but instead wait for natural mouse leave. If natural mouse enter never triggered, natural mouse leave won't so do this now. if((index != -1) && fromChild) return; $ax.splice(_event.mouseOverIds, index, 1); if(elementId == _event.mouseOverObjectId) { _event.mouseOverObjectId = ''; } $ax.dynamicPanelManager.propagateMouseOver(elementId, false); }; //attach handlers for button shape and tree node mouse over styles // TODO: Can this really be removed? Trees seem to work with out (the generic hover case works for it). // query.filter(function(obj) { // return $ax.public.fn.IsVector(obj.type) && $ax.public.fn.IsTreeNodeObject(obj.parent.type) && // obj.parent.style && obj.parent.style.stateStyles && // obj.parent.style.stateStyles.mouseOver; // }).mouseenter(function() { // $ax.style.SetWidgetHover(this.id, true); // }).mouseleave(function() { // $ax.style.SetWidgetHover(this.id, false); // }); //handle treeNodeObject events and prevent them from bubbling up. this is necessary because otherwise //both a sub menu and it's parent would get a click if ($ax.public.fn.IsTreeNodeObject(dObj.type)) { $element.click(function() { //todo -- this was bubbling, but then selecting a child tree node would bubble and select the parent (don't know if there is a better way) _fireObjectEvent(this.id, 'click', arguments); return false; }).each(function() { if(!this.style.cursor) { this.style.cursor = 'default'; } }); } // Synthetic events var map = dObj.interactionMap; // Attach dynamic panel synthetic drag and swipe events if(dObj.type == \"dynamicPanel\" && map && ( map.onDragStart || map.onDrag || map.onDragDrop || map.onSwipeLeft || map.onSwipeRight || map.onSwipeUp || map.onSwipeDown)) { $element.bind($ax.features.eventNames.mouseDownName, function(e) { $ax.drag.StartDragWidget(e.originalEvent, elementId); }); } // Attach dynamic panel synthetic scroll event if (isDynamicPanel && map && (map.onScroll || map.onScrollUp || map.onScrollDown)) { var diagrams = dObj.diagrams; for(var i = 0; i < diagrams.length; i++) { var panelId = $ax.repeater.applySuffixToElementId(elementId, '_state' + i); (function(id) { if ($('#' + id).data('lastScrollTop') == undefined) $('#' + id).data('lastScrollTop', '0'); _attachDefaultObjectEvent($('#' + id), elementId, 'scroll', function(e) { $ax.setjBrowserEvent(e); var currentEvent = $ax.getjBrowserEvent(); var eventInfoFromEvent = $ax.getEventInfoFromEvent(currentEvent, false, elementId); var currentTop = $('#' + id).scrollTop(); var lastTop = $('#' + id).data('lastScrollTop'); _handleScrollEvent(elementId, eventInfoFromEvent, currentEvent.originalEvent, currentTop < lastTop, currentTop > lastTop, map); $('#' + id).data('lastScrollTop', currentTop); }); })(panelId); } } // Attach synthetic hover event if (map && map.onMouseHover) { var MIN_HOVER_HOLD_TIME = 1000; // So when the timeout fires, you know whether it is the same mouseenter that is active or not. var hoverMouseCount = 0; // Update eventInfo regularly, so position is accurate. var hoverEventInfo; $element.mouseenter(function(e) { $ax.setjBrowserEvent(e); hoverEventInfo = $ax.getEventInfoFromEvent($ax.getjBrowserEvent(), false, elementId); (function(currCount) { window.setTimeout(function() { if(currCount == hoverMouseCount) _raiseSyntheticEvent(elementId, 'onMouseHover', false, hoverEventInfo, true); }, MIN_HOVER_HOLD_TIME); })(hoverMouseCount); }).mouseleave(function(e) { $ax.setjBrowserEvent(e); hoverMouseCount++; }).mousemove(function(e) { $ax.setjBrowserEvent(e); hoverEventInfo = $ax.getEventInfoFromEvent($ax.getjBrowserEvent(), false, elementId); }); } // Attach synthetic tap and hold event. if (map && map.onLongClick) { var MIN_LONG_CLICK_HOLD_TIME = 750; // So when the timeout fires, you know whether it is the same mousedown that is active or not. var longClickMouseCount = 0; $element.bind($ax.features.eventNames.mouseDownName, function(e) { (function(currCount) { $ax.setjBrowserEvent(e); var eventInfo = $ax.getEventInfoFromEvent($ax.getjBrowserEvent(), false, elementId); window.setTimeout(function() { if(currCount == longClickMouseCount) _raiseSyntheticEvent(elementId, 'onLongClick', false, eventInfo, true); }, MIN_LONG_CLICK_HOLD_TIME); if(e.preventDefault) e.preventDefault(); })(longClickMouseCount); }).bind($ax.features.eventNames.mouseUpName, function(e) { $ax.setjBrowserEvent(e); longClickMouseCount++; }); }; // Attach synthetic onSelectionChange event to droplist and listbox elements if ($ax.event.HasSelectionChanged(dObj)) { $element.bind('change', function(e) { $ax.setjBrowserEvent(e); _raiseSyntheticEvent(elementId, 'onSelectionChange'); }); }; // Highjack key up and key down to keep track of state of keyboard. if($ax.event.HasKeyUpOrDown(dObj)) _event.initKeyEvents($element); // Attach synthetic onTextChange event to textbox and textarea elements if ($ax.event.HasTextChanged(dObj)) { var element = $jobj($ax.INPUT(elementId)); $ax.updateElementText(elementId, element.val()); //Key down needed because when holding a key down, key up only fires once, but keydown fires repeatedly. //Key up because last mouse down will only show the state before the last character. element.bind('keydown', function(e) { $ax.setjBrowserEvent(e); $ax.event.TryFireTextChanged(elementId); }).bind('keyup', function(e) { $ax.setjBrowserEvent(e); $ax.event.TryFireTextChanged(elementId); }); }; // Attach synthetic onCheckedChange event to radiobutton and checkbox elements if ($ax.public.fn.IsCheckBox(dObj.type) || $ax.public.fn.IsRadioButton(dObj.type)) { var input = $jobj($ax.INPUT(elementId)); if ($ax.public.fn.IsRadioButton(dObj.type) && input.prop('checked')) { $ax.updateRadioButtonSelected(input.attr('name'), elementId); } $element.bind('change', function(e) { $ax.setjBrowserEvent(e); var eTarget = e.target || e.srcElement; _tryFireCheckedChanged(elementId, eTarget.checked); }); }; var hasTap = map && (map.onClick || map.onDoubleClick); var hasMove = map && map.onMouseMove; _event.initMobileEvents(hasTap ? $element : $(), hasMove ? $element : $(), elementId); //attach link alternate styles if(dObj.type == 'hyperlink') { $element.mouseenter(function() { var linkId = this.id; if(_event.mouseOverIds.indexOf(linkId) != -1) return true; _event.mouseOverIds[_event.mouseOverIds.length] = linkId; var mouseOverObjectId = _event.mouseOverObjectId; if(mouseOverObjectId && $ax.style.IsWidgetDisabled(mouseOverObjectId)) return true; $ax.style.SetLinkHover(linkId); var bubble = _fireObjectEvent(linkId, 'mouseenter', arguments); $ax.annotation.updateLinkLocations($ax.GetParentIdFromLink(linkId)); return bubble; }).mouseleave(function() { var linkId = this.id; $ax.splice(_event.mouseOverIds, _event.mouseOverIds.indexOf(linkId), 1); var mouseOverObjectId = _event.mouseOverObjectId; if(mouseOverObjectId && $ax.style.IsWidgetDisabled(mouseOverObjectId)) return true; $ax.style.SetLinkNotHover(linkId); var bubble = _fireObjectEvent(linkId, 'mouseleave', arguments); $ax.annotation.updateLinkLocations($ax.GetParentIdFromLink(linkId)); return bubble; }).bind($ax.features.eventNames.mouseDownName, function() { var linkId = this.id; var mouseOverObjectId = _event.mouseOverObjectId; if($ax.style.IsWidgetDisabled(mouseOverObjectId)) return undefined; if(mouseOverObjectId) $ax.style.SetWidgetMouseDown(mouseOverObjectId, true); $ax.style.SetLinkMouseDown(linkId); $ax.annotation.updateLinkLocations($ax.GetParentIdFromLink(linkId)); return false; }).bind($ax.features.eventNames.mouseUpName, function() { var linkId = this.id; var mouseOverObjectId = _event.mouseOverObjectId; if(mouseOverObjectId && $ax.style.IsWidgetDisabled(mouseOverObjectId)) return; if(mouseOverObjectId) $ax.style.SetWidgetMouseDown(mouseOverObjectId, false); $ax.style.SetLinkNotMouseDown(linkId); $ax.annotation.updateLinkLocations($ax.GetParentIdFromLink(linkId)); }).click(function() { var elementId = this.id; var mouseOverObjectId = _event.mouseOverObjectId; if(mouseOverObjectId && $ax.style.IsWidgetDisabled(mouseOverObjectId)) return undefined; return _fireObjectEvent(elementId, 'click', arguments); }); } // Init inline frames if (dObj.type == 'inlineFrame') { var target = dObj.target; var url = ''; if(target.includeVariables && target.url) { var origSrc = target.url; url = origSrc.toLowerCase().indexOf('http://') == -1 ? $ax.globalVariableProvider.getLinkUrl(origSrc) : origSrc; } else if(target.urlLiteral) { url = $ax.expr.evaluateExpr(target.urlLiteral, $ax.getEventInfoFromEvent(undefined, true, elementId), true); } if(url) $jobj($ax.INPUT(elementId)).attr('src', url); }; }); } $ax.initializeObjectEvents = _initializeObjectEvents; $ax.event.updateIxStyleEvents = function(elementId) { _dettachIxStyleEvents(elementId); _attachIxStyleEvents($ax.getObjectFromElementId(elementId), elementId, $jobj(elementId), true); } function clearMouseDownIxStyle(e) { if(_event.mouseDownObjectId) { $('#' + _event.mouseDownObjectId).trigger( { type: \"mouseup\", checkMouseOver: e.data && e.data.checkMouseOver } ); } } var _dettachIxStyleEvents = function(elementId) { var $element = $jobj(elementId); $element.off('mouseenter.ixStyle') .off('mouseleave.ixStyle') .off($ax.features.eventNames.mouseDownName + '.ixStyle') .off($ax.features.eventNames.mouseUpName + '.ixStyle'); } var _attachIxStyleEvents = function(dObj, elementId, $element, ignoreHasIxStyles) { //attach button shape alternate styles var isDynamicPanel = $ax.public.fn.IsDynamicPanel(dObj.type); var needsMouseFilter = (ignoreHasIxStyles || $ax.event.HasIxStyles(dObj)) && dObj.type != 'hyperlink' && !$ax.public.fn.IsLayer(dObj.type) && !isDynamicPanel && dObj.type != $ax.constants.TEXT_TYPE && !$ax.public.fn.IsRepeater(dObj.type) && !$ax.public.fn.IsCheckBox(dObj.type) && !$ax.public.fn.IsRadioButton(dObj.type) && !$ax.public.fn.IsTreeNodeObject(dObj.type); if(needsMouseFilter) { //$element.mouseenter(function () { $element.on('mouseenter.ixStyle', function () { var elementId = this.id; var parent = $ax.dynamicPanelManager.parentHandlesStyles(elementId); if(parent && parent.direct) return; if($.inArray(elementId, _event.mouseOverIds) != -1) return; _event.mouseOverIds[_event.mouseOverIds.length] = elementId; if(elementId == _event.mouseOverObjectId) return; _event.mouseOverObjectId = elementId; $ax.style.SetWidgetHover(elementId, true); $ax.annotation.updateLinkLocations(elementId); //}).mouseleave(function () { }).on('mouseleave.ixStyle', function () { var elementId = this.id; var parent = $ax.dynamicPanelManager.parentHandlesStyles(elementId); if(parent && parent.direct) return; $ax.splice(_event.mouseOverIds, $.inArray(elementId, _event.mouseOverIds), 1); if(elementId == _event.mouseOverObjectId) { _event.mouseOverObjectId = ''; } $ax.style.SetWidgetHover(elementId, false); $ax.annotation.updateLinkLocations(elementId); }); //$element.bind($ax.features.eventNames.mouseDownName, function () { $element.on($ax.features.eventNames.mouseDownName + '.ixStyle', function () { var elementId = this.id; var parent = $ax.dynamicPanelManager.parentHandlesStyles(elementId); if(parent) { dynamicPanelMouseDown(parent.id); if(parent.direct) return; } _event.mouseDownObjectId = elementId; //since we don't do mouse capture, it's possible that the mouseup not get triggered later //in that case, detect the mouseup on document and dragend $(document).one(\"mouseup\", {checkMouseOver: true}, clearMouseDownIxStyle); $(\"#\" + elementId).one(\"dragend\", clearMouseDownIxStyle); $ax.style.SetWidgetMouseDown(this.id, true); $ax.annotation.updateLinkLocations(elementId); //}).bind($ax.features.eventNames.mouseUpName, function () { }).on($ax.features.eventNames.mouseUpName + '.ixStyle', function (e) { var elementId = this.id; var parent = $ax.dynamicPanelManager.parentHandlesStyles(elementId); if(parent) { dynamicPanelMouseUp(parent.id); if(parent.direct) return; } $(document).off(\"mouseup\", clearMouseDownIxStyle); $(\"#\" + _event.mouseDownObjectId).off(\"dragend\", clearMouseDownIxStyle); _event.mouseDownObjectId = ''; if(!$ax.style.ObjHasMouseDown(elementId)) return; $ax.style.SetWidgetMouseDown(elementId, false, e.checkMouseOver); $ax.annotation.updateLinkLocations(elementId); //there used to be something we needed to make images click, because swapping out the images prevents the click // this is a note that we can eventually delete. }); } }; var dynamicPanelMouseDown = function (elementId) { var parent = $ax.dynamicPanelManager.parentHandlesStyles(elementId); if(parent) { dynamicPanelMouseDown(parent.id); if(parent.direct) return; } _event.mouseDownObjectId = elementId; $ax.dynamicPanelManager.propagateMouseDown(elementId, true); }; var dynamicPanelMouseUp = function (elementId) { var parent = $ax.dynamicPanelManager.parentHandlesStyles(elementId); if(parent) { dynamicPanelMouseUp(parent.id); if(parent.direct) return; } _event.mouseDownObjectId = ''; $ax.dynamicPanelManager.propagateMouseDown(elementId, false); }; // Handle key up and key down events (function() { var _keyState = {}; _keyState.ctrl = false; _keyState.alt = false; _keyState.shift = false; _keyState.keyCode = 0; $ax.event.keyState = function() { return $ax.deepCopy(_keyState); }; var modifierCodes = [16, 17, 18]; var clearKeyCode = false; $ax.event.initKeyEvents = function($query) { $query.keydown(function (e) { if(clearKeyCode) { clearKeyCode = false; _keyState.keyCode = 0; } var elementId = this.id; _keyState.ctrl = e.ctrlKey; _keyState.alt = e.altKey; _keyState.shift = e.shiftKey; // If a modifier was pressed, then don't set the keyCode; if(modifierCodes.indexOf(e.keyCode) == -1) _keyState.keyCode = e.keyCode; $ax.setjBrowserEvent(e); if (!elementId) fireEventThroughContainers('onKeyDown', undefined, false, [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE, $ax.constants.DYNAMIC_PANEL_TYPE, $ax.constants.REPEATER], [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE, $ax.constants.LAYER_TYPE]); else _raiseSyntheticEvent(elementId, 'onKeyDown', false, undefined, true); }); $query.keyup(function(e) { var elementId = this.id; if (modifierCodes.indexOf(e.keyCode) == -1) clearKeyCode = true; else if (clearKeyCode) { clearKeyCode = false; _keyState.keyCode = 0; } $ax.setjBrowserEvent(e); // Fire event before updating modifiers. if (!elementId) fireEventThroughContainers('onKeyUp', undefined, false, [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE, $ax.constants.DYNAMIC_PANEL_TYPE, $ax.constants.REPEATER], [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE, $ax.constants.LAYER_TYPE]); else _raiseSyntheticEvent(elementId, 'onKeyUp', false, undefined, true); //_keyState.ctrl = e.ctrlKey; //_keyState.alt = e.altKey; //_keyState.shift = e.shiftKey; //// If a non-modifier was lifted, clear the keycode ///if(modifierCodes.indexOf(e.keyCode) == -1) _keyState.keyCode = 0; }); }; })(); // Handle adding mobile events (function() { // NOTE: Multi touch is NOT handled currently. var CLICK_THRESHOLD_PX = 25; var CLICK_THRESHOLD_PX_SQ = CLICK_THRESHOLD_PX * CLICK_THRESHOLD_PX; var DBLCLICK_THRESHOLD_MS = 500; // Location in page cooridinates var tapDownLoc; var lastClickEventTime; _event.initMobileEvents = function($tapQuery, $moveQuery, elementId) { if(!$ax.features.supports.mobile) return; // Handle touch start $tapQuery.bind('touchstart', function(e) { // We do NOT support multiple touches. This isn't necessarily the touch we want. var touch = e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches[0]; if(!touch) return; tapDownLoc = [touch.pageX, touch.pageY]; var time = (new Date()).getTime(); if(time - lastClickEventTime < DBLCLICK_THRESHOLD_MS) { var dObj = elementId === '' ? $ax.pageData.page : $ax.getObjectFromElementId(elementId); var axEventObject = dObj && dObj.interactionMap && dObj.interactionMap['onDoubleClick']; if(axEventObject) e.preventDefault(); //for Chrome on Android } }).bind('touchend', function(e) { var touch = e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches[0]; if(!touch || !tapDownLoc || $ax.style.IsWidgetDisabled(elementId)) return; var tapUpLoc = [touch.pageX, touch.pageY]; var xDiff = tapUpLoc[0] - tapDownLoc[0]; var yDiff = tapUpLoc[1] - tapDownLoc[1]; if((xDiff * xDiff + yDiff * yDiff) < CLICK_THRESHOLD_PX_SQ) { $ax.setjBrowserEvent(e); _raiseSyntheticEvent(elementId, 'onClick', false, undefined, true); var time = (new Date()).getTime(); if(time - lastClickEventTime < DBLCLICK_THRESHOLD_MS) { _raiseSyntheticEvent(elementId, 'onDoubleClick', false, undefined, true); if(e.originalEvent && e.originalEvent.handled) e.preventDefault(); //for iOS } lastClickEventTime = time; } }); // Handles touch move $moveQuery.bind('touchmove', function(e) { $ax.setjBrowserEvent(e); _raiseSyntheticEvent(elementId, 'onMouseMove', false, undefined, true); if(e.originalEvent && e.originalEvent.handled) e.preventDefault(); }); }; })(); // Handle adding device independent click events to non-widgets (function() { var CLICK_THRESHOLD_PX = 25; var CLICK_THRESHOLD_PX_SQ = CLICK_THRESHOLD_PX * CLICK_THRESHOLD_PX; // Location in page cooridinates var tapDownLoc; _event.attachClick = function(query, clickHandler) { if(!$ax.features.supports.mobile) { query.click(clickHandler); return; } $(query).bind('touchstart', function(e) { // We do NOT support multiple touches. This isn't necessarily the touch we want. var touch = e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches[0]; if(!touch) return; tapDownLoc = [touch.pageX, touch.pageY]; }); $(query).bind('touchend', function(e) { var touch = e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches[0]; if(!touch) return; var tapUpLoc = [touch.pageX, touch.pageY]; var xDiff = tapUpLoc[0] - tapDownLoc[0]; var yDiff = tapUpLoc[1] - tapDownLoc[1]; if((xDiff * xDiff + yDiff * yDiff) < CLICK_THRESHOLD_PX_SQ) { clickHandler(); } }); }; })(); // Handle firing device independent click events on widgets (function() { _event.fireClick = function(elementId) { if(!$ax.features.supports.mobile) { $('#' + elementId).click(); return; } _raiseSyntheticEvent(elementId, 'onClick', false, undefined, true); }; })(); var _mouseLocation = $ax.mouseLocation = { x: 0, y: 0 }; var _lastmouseLocation = $ax.lastMouseLocation = { x: 0, y: 0 }; var _updateMouseLocation = function(e, end) { if(!e) return; if(IE_10_AND_BELOW && typeof (e.type) == 'unknown') return; if(e.type != 'mousemove' && e.type != 'touchstart' && e.type != 'touchmove' && e.type != 'touchend') return; var newX; var newY; if(IE_10_AND_BELOW) { newX = e.clientX + $('html').scrollLeft(); newY = e.clientY + $('html').scrollTop(); } else { newX = e.pageX; newY = e.pageY; } //var body = $('body'); //if(body.css('position') == 'relative') newX = Math.round(newX - Number(body.css('left').replace('px', '')) - Math.max(0, ($(window).width() - body.width()) / 2)); if(_mouseLocation.x == newX && _mouseLocation.y == newY) return; _lastmouseLocation.x = _mouseLocation.x; _lastmouseLocation.y = _mouseLocation.y; _mouseLocation.x = newX; _mouseLocation.y = newY; $ax.geometry.tick(_mouseLocation.x, _mouseLocation.y, end); }; _event.updateMouseLocation = _updateMouseLocation; var _leavingState = function(stateId) { var mouseOverIds = _event.mouseOverIds; if(mouseOverIds.length == 0) return; var stateQuery = $jobj(stateId); for(var i = mouseOverIds.length - 1; i >= 0; i--) { var id = mouseOverIds[i]; if(stateQuery.find('#' + id).length) { $ax.splice(mouseOverIds, $.inArray(id, mouseOverIds), 1); $ax.style.SetWidgetMouseDown(id, false); $ax.style.SetWidgetHover(id, false); } } }; _event.leavingState = _leavingState; var _raiseSelectedEvents = function(elementId, value) { $ax.event.raiseSyntheticEvent(elementId, 'onSelectedChange'); if(value) $ax.event.raiseSyntheticEvent(elementId, 'onSelect'); else $ax.event.raiseSyntheticEvent(elementId, 'onUnselect'); }; $ax.event.raiseSelectedEvents = _raiseSelectedEvents; var _raiseSyntheticEvent = function(elementId, eventName, skipShowDescription, eventInfo, nonSynthetic) { // Empty string used when this is an event directly on the page. var dObj = elementId === '' ? $ax.pageData.page : $ax.getObjectFromElementId(elementId); var axEventObject = dObj && dObj.interactionMap && dObj.interactionMap[eventName]; if(!axEventObject) return; eventInfo = eventInfo || $ax.getEventInfoFromEvent($ax.getjBrowserEvent(), skipShowDescription, elementId); // $ax.recording.maybeRecordEvent(elementId, eventInfo, axEventObject, new Date().getTime()); _handleEvent(elementId, eventInfo, axEventObject, false, !nonSynthetic); }; $ax.event.raiseSyntheticEvent = _raiseSyntheticEvent; var _hasSyntheticEvent = function(scriptId, eventName) { var dObj = $ax.getObjectFromScriptId(scriptId); var axEventObject = dObj && dObj.interactionMap && dObj.interactionMap[eventName]; return Boolean(axEventObject); }; $ax.event.hasSyntheticEvent = _hasSyntheticEvent; var _addEvent = function (target, eventType, handler, useCapture) { //this return value is only for debug purpose var succeed = undefined; if(target.attachEvent) { if($ax.features.supports.windowsMobile) { succeed = target.attachEvent(eventType, handler); } else { succeed = target.attachEvent('on' + eventType, handler); } } else if(target.addEventListener) { target.addEventListener(eventType, handler, useCapture); succeed = true; } return succeed; } $ax.event.addEvent = _addEvent; var _removeEvent = function(target, eventType, handler, useCapture, skipCheckingWindowsMobile) { //this return value is only for debug purpose var succeed = undefined; if(target.detachEvent) { if(!skipCheckingWindowsMobile && $ax.features.supports.windowsMobile) { succeed = target.detachEvent(eventType, handler); } else { succeed = target.detachEvent('on' + eventType, handler); } } else if(target.removeEventListener) { target.removeEventListener(eventType, handler, useCapture); succeed = true; } return succeed; } $ax.event.removeEvent = _removeEvent; var _initialize = function() { $ax.repeater.load(); // Make sure key events for page are initialized first. That way they will update the value of key pressed before any other events occur. _event.initKeyEvents($(window)); initSuppressingEvents(); // Anything with an item id is in a repeater and should be handled by that repeater. _initializeObjectEvents($ax(function(obj, elementId) { return !$ax.repeater.getItemIdFromElementId(elementId); })); //finally, process the pageload _pageLoad(); // _loadDynamicPanelsAndMasters(); // $ax.repeater.init(); // and wipe out the basic links. $('.basiclink').click(function() { return false; }); }; _event.initialize = _initialize; $ax.event.HasIxStyles = function(diagramObject) { if(diagramObject.style.stateStyles) return true; if(diagramObject.adaptiveStyles) { for(var viewId in diagramObject.adaptiveStyles) { if(diagramObject.adaptiveStyles[viewId].stateStyles) return true; } } return false; }; $ax.event.HasTextChanged = function(diagramObject) { if (!$ax.public.fn.IsTextBox(diagramObject.type) && !$ax.public.fn.IsTextArea(diagramObject.type)) return false; var map = diagramObject.interactionMap; return map && map.onTextChange; }; $ax.event.TryFireTextChanged = function(elementId) { var query = $jobj($ax.repeater.applySuffixToElementId(elementId, '_input')); if(!$ax.hasElementTextChanged(elementId, query.val())) return; $ax.updateElementText(elementId, query.val()); $ax.event.raiseSyntheticEvent(elementId, 'onTextChange'); }; $ax.event.HasSelectionChanged = function(diagramObject) { if (!$ax.public.fn.IsListBox(diagramObject.type) && !$ax.public.fn.IsComboBox(diagramObject.type)) return false; var map = diagramObject.interactionMap; return map && map.onSelectionChange; }; $ax.event.HasKeyUpOrDown = function (diagramObject) { if($ax.public.fn.IsTextBox(diagramObject.type) || $ax.public.fn.IsTextArea(diagramObject.type)) return true; var map = diagramObject.interactionMap; return map && (map.onKeyUp || map.onKeyDown); }; $ax.event.HasCheckedChanged = function(diagramObject) { if (!$ax.public.fn.IsCheckBox(diagramObject.type) && !$ax.public.fn.IsRadioButton(diagramObject.type)) return false; var map = diagramObject.interactionMap; return map && map.onSelectedChange; }; $ax.event.HasClick = function (diagramObject) { var map = diagramObject.interactionMap; return map && map.onClick; }; var _tryFireCheckedChanged = $ax.event.TryFireCheckChanged = function(elementId, value) { var isRadio = $ax.public.fn.IsRadioButton($obj(elementId).type); if(isRadio) { if(!value) { $ax.updateRadioButtonSelected($jobj($ax.INPUT(elementId)).attr('name'), undefined); } else { var last = $ax.updateRadioButtonSelected($jobj($ax.INPUT(elementId)).attr('name'), elementId); // If no change, this should not fire if(last == elementId) return; // Initially selecting one, last may be undefined if(last) { //here last is the previouse selected elementid $ax.event.raiseSelectedEvents(last, false); } } } $ax.event.raiseSelectedEvents(elementId, value); }; //onload everything now, not only dp and master var _loadDynamicPanelsAndMasters = function(objects, path, itemId) { fireEventThroughContainers('onLoad', objects, true, [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE, $ax.constants.DYNAMIC_PANEL_TYPE], [$ax.constants.ALL_TYPE], path, itemId); }; $ax.loadDynamicPanelsAndMasters = _loadDynamicPanelsAndMasters; var _viewChangePageAndMasters = function(forceSwitchTo) { fireEventThroughContainers('onAdaptiveViewChange', undefined, true, [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE, $ax.constants.DYNAMIC_PANEL_TYPE], [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE]); _postAdaptiveViewChanged(forceSwitchTo); }; $ax.viewChangePageAndMasters = _viewChangePageAndMasters; //if forceSwitchTo is true, we will also update the checkmark in sitemap.js var _postAdaptiveViewChanged = function(forceSwitchTo) { //only trigger adaptive view changed if the window is on the mainframe. Also triggered on init, even if default. try { if(window.name == 'mainFrame' || (!CHROME_5_LOCAL && window.parent.$ && window.parent.$('#mainFrame').length > 0)) { var data = { viewId: $ax.adaptive.currentViewId, forceSwitchTo: forceSwitchTo }; $axure.messageCenter.postMessage('adaptiveViewChange', data); } } catch(e) { } }; $ax.postAdaptiveViewChanged = _postAdaptiveViewChanged; var _postResize = $ax.postResize = function(e) { $ax.setjBrowserEvent(e); return fireEventThroughContainers('onResize', undefined, false, [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE, $ax.constants.DYNAMIC_PANEL_TYPE, $ax.constants.REPEATER], [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE]); }; //fire events for table, menu and tree, including its sub items var _fireEventsForTableMenuAndTree = function (object, event, skipShowDescription, eventInfo, path, synthetic) { if (!path) path = []; var pathCopy = path.slice(); pathCopy[path.length] = object.id; var scriptId = $ax.getScriptIdFromPath(pathCopy); $ax.event.raiseSyntheticEvent(scriptId, event, skipShowDescription, eventInfo, !synthetic); if(object.objects) { for(var index = 0; index < object.objects.length; index++) { var subObj = object.objects[index]; if ($ax.public.fn.IsTableCell(subObj.type)) { pathCopy[path.length] = subObj.id; scriptId = $ax.getScriptIdFromPath(pathCopy); $ax.event.raiseSyntheticEvent(scriptId, event, skipShowDescription, eventInfo, !synthetic); } else if ($ax.public.fn.IsTable(object.type) || $ax.public.fn.IsMenuObject(object.type) || $ax.public.fn.IsTreeNodeObject(object.type)) { _fireEventsForTableMenuAndTree(subObj, event, skipShowDescription, eventInfo, path, synthetic); } } } } //remember the scroll bar position, so we can detect scroll up/down var lastScrollTop; var fireEventForPageOrMaster = function (elementId, eventName, interactionMap, isPage, skipShowDescription, synthetic) { if(!interactionMap) return; var axEvent = interactionMap[eventName]; var scrolling = eventName === \"onScroll\"; if (scrolling && !axEvent) axEvent = interactionMap.onScrollUp || interactionMap.onScrollDown; if (axEvent) { var currentEvent = $ax.getjBrowserEvent(); var eventInfo = $ax.getEventInfoFromEvent(currentEvent, skipShowDescription, elementId); if(isPage) { eventInfo.label = $ax.pageData.page.name; eventInfo.friendlyType = 'Page'; } else eventInfo.isMasterEvent = true; if(scrolling) _handleScrollEvent(elementId, eventInfo, currentEvent.originalEvent, _event.windowScrollingUp, _event.windowScrollingDown, interactionMap, skipShowDescription, synthetic); else _handleEvent(elementId, eventInfo, axEvent, skipShowDescription, synthetic); } } // Filters include page, referenceDiagramObject, dynamicPanel, and repeater. var _callFilterCheck = function(callFilter, type) { for(var index = 0; index < callFilter.length; index++) { var currentType = callFilter[index]; if(currentType === $ax.constants.ALL_TYPE || currentType === type) return true; } return false; }; var fireEventThroughContainers = function(eventName, objects, synthetic, searchFilter, callFilter, path, itemId) { // TODO: may want to pass in this as a parameter. At that point, may want to convert some of them to an option parameter. For now this is the only case var skipShowDescription = eventName == 'onLoad'; // If objects undefined, load page if(!objects) { if(_callFilterCheck(callFilter, $ax.constants.PAGE_TYPE)) { //if scrolling, set direction, later master will know if(eventName === \"onScroll\") { var currentScrollTop = $(window).scrollTop(); _event.windowScrollingUp = currentScrollTop < lastScrollTop; _event.windowScrollingDown = currentScrollTop > lastScrollTop; } fireEventForPageOrMaster('', eventName, $ax.pageData.page.interactionMap, true, skipShowDescription, synthetic); } if(searchFilter.indexOf($ax.constants.PAGE_TYPE) != -1) fireEventThroughContainers(eventName, $ax.pageData.page.diagram.objects, synthetic, searchFilter, callFilter); //reset and save scrolling info at the end if(currentScrollTop) { lastScrollTop = currentScrollTop; _event.windowScrollingUp = undefined; _event.windowScrollingDown = undefined; } return; } if(!path) path = []; var pathCopy = []; for(var j = 0; j < path.length; j++) pathCopy[j] = path[j]; for(var i = 0; i < objects.length; i++) { var obj = objects[i]; pathCopy[path.length] = obj.id; if (!$ax.public.fn.IsReferenceDiagramObject(obj.type) && !$ax.public.fn.IsDynamicPanel(obj.type) && !$ax.public.fn.IsRepeater(obj.type) && !$ax.public.fn.IsLayer(obj.type)) { if(_callFilterCheck(callFilter)) { //fire current event for all types if ($ax.public.fn.IsTable(obj.type) || $ax.public.fn.IsMenuObject(obj.type) || $ax.public.fn.IsTreeNodeObject(obj.type)) { _fireEventsForTableMenuAndTree(obj, eventName, skipShowDescription, undefined, path, !synthetic); } else { var scriptId = $ax.getScriptIdFromPath(pathCopy); if(scriptId && itemId) scriptId = $ax.repeater.createElementId(scriptId, itemId); $ax.event.raiseSyntheticEvent(scriptId, eventName, skipShowDescription, undefined, !synthetic); } } continue; } var objId = $ax.getScriptIdFromPath(pathCopy); // If limboed, move on to next item if(!objId) continue; if(itemId) objId = $ax.repeater.createElementId(objId, itemId); if($ax.public.fn.IsReferenceDiagramObject(obj.type)) { if(_callFilterCheck(callFilter, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE)) { fireEventForPageOrMaster(objId, eventName, $ax.pageData.masters[obj.masterId].interactionMap, false, skipShowDescription, synthetic); } if(searchFilter.indexOf($ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE) != -1) fireEventThroughContainers(eventName, $ax.pageData.masters[obj.masterId].diagram.objects, synthetic, searchFilter, callFilter, pathCopy, itemId); } else if($ax.public.fn.IsDynamicPanel(obj.type)) { if(_callFilterCheck(callFilter, $ax.constants.DYNAMIC_PANEL_TYPE)) $ax.event.raiseSyntheticEvent(objId, eventName, skipShowDescription, undefined, !synthetic); if(searchFilter.indexOf($ax.constants.DYNAMIC_PANEL_TYPE) != -1) { var diagrams = obj.diagrams; for(var j = 0; j < diagrams.length; j++) { fireEventThroughContainers(eventName, diagrams[j].objects, synthetic, searchFilter, callFilter, path, itemId); } } } else if($ax.public.fn.IsRepeater(obj.type)) { // TODO: possible an option for repeater item? Now fires overall for the repeater if(_callFilterCheck(callFilter, $ax.constants.REPEATER)) $ax.event.raiseSyntheticEvent(objId, eventName, skipShowDescription, undefined, !synthetic); if(searchFilter.indexOf($ax.constants.REPEATER) != -1) { var itemIds = $ax.getItemIdsForRepeater(objId); for(var j = 0; j < itemIds.length; j++) { fireEventThroughContainers(eventName, obj.objects, synthetic, searchFilter, callFilter, path, itemIds[j]); } } } else if($ax.public.fn.IsLayer(obj.type)) { if(_callFilterCheck(callFilter, $ax.constants.LAYER_TYPE)) $ax.event.raiseSyntheticEvent(objId, eventName, skipShowDescription, undefined, !synthetic); if(obj.objs && obj.objs.length > 0) { fireEventThroughContainers(eventName, obj.objs, synthetic, searchFilter, callFilter, path, itemId); } } } eventNesting -= 1; }; // FOCUS stuff (function() { })(); var _pageLoad = function() { // Map of axure event names to pair of what it should attach to, and what the jquery event name is. var PAGE_AXURE_TO_JQUERY_EVENT_NAMES = { 'onScroll': [window, 'scroll'], 'onScrollUp': [window, 'scrollup'], 'onScrollDown': [window, 'scrolldown'], //'onResize': [window, 'resize'], 'onContextMenu': [window, 'contextmenu'] }; var $win = $(window); if(!$ax.features.supports.mobile) { PAGE_AXURE_TO_JQUERY_EVENT_NAMES.onClick = ['html', 'click']; PAGE_AXURE_TO_JQUERY_EVENT_NAMES.onDoubleClick = ['html', 'dblclick']; PAGE_AXURE_TO_JQUERY_EVENT_NAMES.onMouseMove = ['html', 'mousemove']; } else { _event.initMobileEvents($win, $win, ''); $win.bind($ax.features.eventNames.mouseDownName, _updateMouseLocation); $win.bind($ax.features.eventNames.mouseUpName, function(e) { _updateMouseLocation(e, true); }); $win.scroll(function() { _setCanClick(false); }); $win.bind($ax.features.eventNames.mouseDownName, (function() { _setCanClick(true); })); } $win.bind($ax.features.eventNames.mouseMoveName, _updateMouseLocation); $win.scroll($ax.flyoutManager.reregisterAllFlyouts); for(key in PAGE_AXURE_TO_JQUERY_EVENT_NAMES) { if(!PAGE_AXURE_TO_JQUERY_EVENT_NAMES.hasOwnProperty(key)) continue; (function(axureName) { var jqueryEventNamePair = PAGE_AXURE_TO_JQUERY_EVENT_NAMES[axureName]; var actionName = jqueryEventNamePair[1]; if(actionName == \"scrollup\" || actionName == \"scrolldown\") return; $(jqueryEventNamePair[0])[actionName](function (e) { $ax.setjBrowserEvent(e); return fireEventThroughContainers(axureName, undefined, false, [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE, $ax.constants.DYNAMIC_PANEL_TYPE, $ax.constants.REPEATER], [$ax.constants.PAGE_TYPE, $ax.constants.REFERENCE_DIAGRAM_OBJECT_TYPE]); }); })(key); } eventNesting -= 1; lastScrollTop = 0; }; _event.pageLoad = _pageLoad; }); //***** recording.js *****// // ******* Recording MANAGER ******** // $axure.internal(function($ax) { var _recording = $ax.recording = {}; $ax.recording.recordEvent = function(element, eventInfo, axEventObject, timeStamp) { var elementHtml = $jobj(element); var className = elementHtml.attr('class'); var inputValue; if(className === 'ax_checkbox') { inputValue = elementHtml.find('#' + element + '_input')[0].checked; eventInfo.inputType = className; eventInfo.inputValue = inputValue; } if(className === 'ax_text_field') { inputValue = elementHtml.find('#' + element + '_input').val(); eventInfo.inputType = className; eventInfo.inputValue = inputValue; } var scriptId = $ax.repeater.getScriptIdFromElementId(element); var diagramObjectPath = $ax.getPathFromScriptId(scriptId); var form = { recordingId: $ax.recording.recordingId, elementID: element, eventType: axEventObject.description, 'eventInfo': eventInfo, // eventObject: axEventObject, 'timeStamp': timeStamp, 'path': diagramObjectPath // , // 'trigger': function() { // $ax.event.handleEvent(element, eventInfo, axEventObject); // return false; // } }; $ax.messageCenter.postMessage('logEvent', form); }; $ax.recording.maybeRecordEvent = function(element, eventInfo, axEventObject, timeStamp) { }; $ax.recording.recordingId = \"\"; $ax.recording.recordingName = \"\"; $ax.messageCenter.addMessageListener(function(message, data) { if(message === 'startRecording') { $ax.recording.maybeRecordEvent = $ax.recording.recordEvent; $ax.recording.recordingId = data.recordingId; $ax.recording.recordingName = data.recordingName; } else if(message === 'stopRecording') { $ax.recording.maybeRecordEvent = function(element, eventInfo, axEventObject, timeStamp) { }; } else if(message === 'playEvent') { var eventType = makeFirstLetterLower(data.eventType); var inputElement; var dObj = data.element === '' ? $ax.pageData.page : $ax.getObjectFromElementId(data.element); if(!data.axEventObject) { data.axEventObject = dObj && dObj.interactionMap && dObj.interactionMap[eventType]; } data.eventInfo.thiswidget = $ax.getWidgetInfo(data.element); data.eventInfo.item = $ax.getItemInfo(data.element); if(data.eventInfo.inputType && data.eventInfo.inputType === 'ax_checkbox') { inputElement = $jobj(data.element + '_input'); inputElement[0].checked = data.eventInfo.inputValue; } if(data.eventInfo.inputType && data.eventInfo.inputType === 'ax_text_field') { inputElement = $jobj(data.element + '_input'); inputElement.val(data.eventInfo.inputValue); } $ax.event.handleEvent(data.element, data.eventInfo, data.axEventObject, false, true); } }); var makeFirstLetterLower = function(eventName) { return eventName.substr(0, 1).toLowerCase() + eventName.substr(1); }; }); //***** action.js *****// $axure.internal(function($ax) { var _actionHandlers = {}; var _action = $ax.action = {}; var queueTypes = _action.queueTypes = { none: 0, move: 1, setState: 2, fade: 3, resize: 4, rotate: 5 }; var animationQueue = {}; // using array as the key doesn't play nice var nextAnimationId = 1; var animationsToCount = {}; var actionToActionGroups = {}; var getAnimation = function(id, type) { return animationQueue[id] && animationQueue[id][type] && animationQueue[id][type][0]; }; var _addAnimation = _action.addAnimation = function (id, type, func, suppressFire) { var wasEmpty = !getAnimation(id, type); // Add the func to the queue. Create the queue if necessary. var idQueue = animationQueue[id]; if(!idQueue) animationQueue[id] = idQueue = {}; var queue = idQueue[type]; if(!queue) idQueue[type] = queue = []; queue[queue.length] = func; // If it was empty, there isn't a callback waiting to be called on this. You have to fire it manually. // If this is waiting on something, suppress it, and it will fire when it's ready if(wasEmpty && !suppressFire) func(); }; var _addAnimations = function (animations) { if(animations.length == 1) { _addAnimation(animations[0].id, animations[0].type, animations[0].func); return; } var allReady = true; var readyCount = 0; for(var i = 0; i < animations.length; i++) { var animation = animations[i]; var thisReady = !getAnimation(animation.id, animation.type); allReady = allReady && thisReady; if (thisReady) readyCount++; else { var typeToGroups = actionToActionGroups[animation.id]; if (!typeToGroups) actionToActionGroups[animation.id] = typeToGroups = {}; var groups = typeToGroups[animation.type]; if (!groups) typeToGroups[animation.type] = groups = []; groups[groups.length] = animations; } } for(i = 0; i < animations.length; i++) { animation = animations[i]; _addAnimation(animation.id, animation.type, animation.func, true); } if (allReady) { for (i = 0; i < animations.length; i++) animations[i].func(); } else { animations.id = nextAnimationId++; animationsToCount[animations.id] = readyCount; } } var _fireAnimationFromQueue = _action.fireAnimationFromQueue = function (id, type) { // Remove the function that was just fired if (animationQueue[id] && animationQueue[id][type]) $ax.splice(animationQueue[id][type], 0, 1); // Fire the next func if there is one var func = getAnimation(id, type); if(func && !_checkFireActionGroup(id, type, func)) func(); }; var _checkFireActionGroup = function(id, type, func) { var group = actionToActionGroups[id]; group = group && group[type]; if (!group || group.length == 0) return false; var animations = group[0]; var found = false; for (var i = 0; i < animations.length; i++) { var animation = animations[i]; if (animation.id == id && animation.type == type) { found = func == animation.func; break; } } // if found then update this action group, otherwise, keep waiting for right action to fire if(!found) return false; $ax.splice(group, 0, 1); var count = animationsToCount[animations.id] + 1; if(count != animations.length) { animationsToCount[animations.id] = count; return true; } delete animationsToCount[animations.id]; // Funcs is needed because an earlier func can try to cascade right away (when no animation for example) and will kill this func and move on to the // next one (which may not even exist). If we get all funcs before calling any, then we know they are all the func we want. var funcs = []; for(i = 0; i < animations.length; i++) { animation = animations[i]; funcs.push(getAnimation(animation.id, animation.type)); } for(i = 0; i < funcs.length; i++) { funcs[i](); } return true; } var _refreshing = []; _action.refreshStart = function(repeaterId) { _refreshing.push(repeaterId); }; _action.refreshEnd = function() { _refreshing.pop(); }; // TODO: [ben] Consider moving this to repeater.js var _repeatersToRefresh = _action.repeatersToRefresh = []; var _ignoreAction = function(repeaterId) { for(var i = 0; i < _refreshing.length; i++) if(_refreshing[i] == repeaterId) return true; return false; }; var _addRefresh = function(repeaterId) { if(_repeatersToRefresh.indexOf(repeaterId) == -1) _repeatersToRefresh.push(repeaterId); }; var _getIdToResizeMoveState = function(eventInfo) { if(!eventInfo.idToResizeMoveState) eventInfo.idToResizeMoveState = {}; return eventInfo.idToResizeMoveState; } var _queueResizeMove = function (id, type, eventInfo, actionInfo) { if (type == queueTypes.resize || type == queueTypes.rotate) $ax.public.fn.convertToSingleImage($jobj(id)); var idToResizeMoveState = _getIdToResizeMoveState(eventInfo); if(!idToResizeMoveState[id]) { idToResizeMoveState[id] = {}; idToResizeMoveState[id][queueTypes.move] = { queue: [], used: 0 }; idToResizeMoveState[id][queueTypes.resize] = { queue: [], used: 0 }; idToResizeMoveState[id][queueTypes.rotate] = { queue: [], used: 0 }; } var state = idToResizeMoveState[id]; // If this is not a type being queued (no action of it's type waiting already) then if it is an instant, fire right away. var myOptions = type == queueTypes.resize ? actionInfo : actionInfo.options; if(!state[type].queue.length && (!myOptions.easing || myOptions.easing == 'none' || !myOptions.duration)) { var func = type == queueTypes.resize ? _addResize : type == queueTypes.rotate ? _addRotate : _addMove; func(id, eventInfo, actionInfo, { easing: 'none', duration: 0, stop: { instant: true } }); return; } // Check other 2 types to see if either is empty, if so, we can't do anything, so just queue it up var otherType1 = type == queueTypes.move ? queueTypes.resize : queueTypes.move; var otherType2 = type == queueTypes.rotate ? queueTypes.resize : queueTypes.rotate; if (!state[otherType1].queue.length || !state[otherType2].queue.length) { state[type].queue.push({ eventInfo: eventInfo, actionInfo: actionInfo }); } else { var duration = myOptions.duration; var used1 = state[otherType1].used; var used2 = state[otherType2].used; while(state[otherType1].queue.length && state[otherType2].queue.length && duration != 0) { var other1 = state[otherType1].queue[0]; var otherOptions1 = otherType1 == queueTypes.resize ? other1.actionInfo : other1.actionInfo.options; // If queue up action is a non animation, then don't combo it, just queue it and move on if(!otherOptions1.easing || otherOptions1.easing == 'none' || !otherOptions1.duration) { func = otherType1 == queueTypes.resize ? _addResize : otherType1 == queueTypes.rotate ? _addRotate : _addMove; func(id, eventInfo, actionInfo, { easing: 'none', duration: 0, stop: { instant: true } }); continue; } var other2 = state[otherType2].queue[0]; var otherOptions2 = otherType2 == queueTypes.resize ? other2.actionInfo : other2.actionInfo.options; // If queue up action is a non animation, then don't combo it, just queue it and move on if(!otherOptions2.easing || otherOptions2.easing == 'none' || !otherOptions2.duration) { func = otherType2 == queueTypes.resize ? _addResize : otherType2 == queueTypes.rotate ? _addRotate : _addMove; func(id, eventInfo, actionInfo, { easing: 'none', duration: 0, stop: { instant: true } }); continue; } // Other duration is what is left over. When in queue it may be partly finished already var otherDuration1 = otherOptions1.duration - used1; var otherDuration2 = otherOptions2.duration - used2; var resizeInfo = type == queueTypes.resize ? actionInfo : otherType1 == queueTypes.resize ? other1.actionInfo : other2.actionInfo; var rotateInfo = type == queueTypes.rotate ? actionInfo : otherType1 == queueTypes.rotate ? other1.actionInfo : other2.actionInfo; var moveInfo = type == queueTypes.move ? actionInfo : otherType1 == queueTypes.move ? other1.actionInfo : other2.actionInfo; var options = { easing: moveInfo.options.easing, duration: Math.min(duration, otherDuration1, otherDuration2) }; // Start for self is whole duration - duration left, end is start plus duration of combo to be queued, length is duration var stop = { start: myOptions.duration - duration, len: myOptions.duration }; stop.end = stop.start + options.duration; // Start for other is used (will be 0 after 1st round), end is start plus length is duration of combo to be queued, length is other duration var otherStop1 = { start: used1, end: options.duration + used1, len: otherOptions1.duration }; var otherStop2 = { start: used2, end: options.duration + used2, len: otherOptions2.duration }; options.stop = type == queueTypes.resize ? stop : otherType1 == queueTypes.resize ? otherStop1 : otherStop2; options.moveStop = type == queueTypes.move ? stop : otherType1 == queueTypes.move ? otherStop1 : otherStop2; options.rotateStop = type == queueTypes.rotate ? stop : otherType1 == queueTypes.rotate ? otherStop1 : otherStop2; _addResize(id, eventInfo, resizeInfo, options, moveInfo, rotateInfo); // Update duration for this animation duration -= options.duration; // For others update used and remove from queue if necessary if(otherDuration1 == options.duration) { $ax.splice(state[otherType1].queue, 0, 1); used1 = 0; } else used1 += options.duration; if(otherDuration2 == options.duration) { $ax.splice(state[otherType2].queue, 0, 1); used2 = 0; } else used2 += options.duration; } // Start queue for new type if necessary if(duration) { state[type].queue.push({ eventInfo: eventInfo, actionInfo: actionInfo }); state[type].used = myOptions.duration - duration; } // Update used for others state[otherType1].used = used1; state[otherType2].used = used2; } }; _action.flushAllResizeMoveActions = function (eventInfo) { var idToResizeMoveState = _getIdToResizeMoveState(eventInfo); for(var id in idToResizeMoveState) _flushResizeMoveActions(id, idToResizeMoveState); }; var _flushResizeMoveActions = function(id, idToResizeMoveState) { var state = idToResizeMoveState[id]; var move = state[queueTypes.move]; var moveInfo = move.queue[0]; var resize = state[queueTypes.resize]; var resizeInfo = resize.queue[0]; var rotate = state[queueTypes.rotate]; var rotateInfo = rotate.queue[0]; while (moveInfo || resizeInfo || rotateInfo) { var eventInfo = moveInfo ? moveInfo.eventInfo : resizeInfo ? resizeInfo.eventInfo : rotateInfo.eventInfo; moveInfo = moveInfo && moveInfo.actionInfo; resizeInfo = resizeInfo && resizeInfo.actionInfo; rotateInfo = rotateInfo && rotateInfo.actionInfo; // Resize is used by default, then rotate if(resizeInfo) { // Check for instant resize if(!resizeInfo.duration || resizeInfo.easing == 'none') { _addResize(id, resize.queue[0].eventInfo, resizeInfo, { easing: 'none', duration: 0, stop: { instant: true } }); _updateResizeMoveUsed(id, queueTypes.resize, 0, idToResizeMoveState); resizeInfo = resize.queue[0]; continue; } var duration = resizeInfo.duration - resize.used; if(moveInfo) duration = Math.min(duration, moveInfo.options.duration - move.used); if(rotateInfo) duration = Math.min(duration, rotateInfo.options.duration - rotate.used); var baseOptions = moveInfo ? moveInfo.options : resizeInfo; var options = { easing: baseOptions.easing, duration: duration }; options.stop = { start: resize.used, end: resize.used + duration, len: resizeInfo.duration }; if(moveInfo) options.moveStop = { start: move.used, end: move.used + duration, len: moveInfo.options.duration }; if(rotateInfo) options.rotateStop = { start: rotate.used, end: rotate.used + duration, len: rotateInfo.options.duration }; _addResize(id, eventInfo, resizeInfo, options, moveInfo, rotateInfo); _updateResizeMoveUsed(id, queueTypes.resize, duration, idToResizeMoveState); resizeInfo = resize.queue[0]; if(rotateInfo) { _updateResizeMoveUsed(id, queueTypes.rotate, duration, idToResizeMoveState); rotateInfo = rotate.queue[0]; } if(moveInfo) { _updateResizeMoveUsed(id, queueTypes.move, duration, idToResizeMoveState); moveInfo = move.queue[0]; } } else if (rotateInfo) { // Check for instant rotate if(!rotateInfo.options.duration || rotateInfo.options.easing == 'none') { _addRotate(id, rotate.queue[0].eventInfo, rotateInfo, { easing: 'none', duration: 0, stop: { instant: true } }); _updateResizeMoveUsed(id, queueTypes.rotate, 0, idToResizeMoveState); rotateInfo = rotate.queue[0]; continue; } duration = rotateInfo.options.duration - rotate.used; if(moveInfo) duration = Math.min(duration, moveInfo.options.duration - move.used); baseOptions = moveInfo ? moveInfo.options : rotateInfo.options; options = { easing: baseOptions.easing, duration: duration }; options.stop = { start: rotate.used, end: rotate.used + duration, len: rotateInfo.options.duration }; if(moveInfo) options.moveStop = { start: move.used, end: move.used + duration, len: moveInfo.options.duration }; _addRotate(id, eventInfo, rotateInfo, options, moveInfo); _updateResizeMoveUsed(id, queueTypes.rotate, duration, idToResizeMoveState); rotateInfo = rotate.queue[0]; if(moveInfo) { _updateResizeMoveUsed(id, queueTypes.move, duration, idToResizeMoveState); moveInfo = move.queue[0]; } } else { if(!moveInfo.options.duration || moveInfo.options.easing == 'none') { _addMove(id, eventInfo, moveInfo, { easing: 'none', duration: 0, stop: { instant: true } }); _updateResizeMoveUsed(id, queueTypes.move, 0, idToResizeMoveState); moveInfo = move.queue[0]; continue; } duration = moveInfo.options.duration - move.used; options = { easing: moveInfo.options.easing, duration: duration }; options.stop = { start: move.used, end: moveInfo.options.duration, len: moveInfo.options.duration }; _addMove(id, eventInfo, moveInfo, options); _updateResizeMoveUsed(id, queueTypes.move, duration, idToResizeMoveState); moveInfo = move.queue[0]; } } }; var _updateResizeMoveUsed = function(id, type, duration, idToResizeMoveState) { var state = idToResizeMoveState[id][type]; state.used += duration; var options = state.queue[0].actionInfo; if(options.options) options = options.options; var optionDur = (options.easing && options.easing != 'none' && options.duration) || 0; if(optionDur = actions.length) return; //actions are responsible for doing their own dispatching _actionHandlers[actions[currentIndex].action](eventInfo, actions, currentIndex); }; _actionHandlers.wait = function(eventInfo, actions, index) { var action = actions[index]; var infoCopy = $ax.eventCopy(eventInfo); window.setTimeout(function() { infoCopy.now = new Date(); infoCopy.idToResizeMoveState = undefined; _dispatchAction(infoCopy, actions, index + 1); _action.flushAllResizeMoveActions(infoCopy); }, action.waitTime); }; _actionHandlers.expr = function(eventInfo, actions, index) { var action = actions[index]; $ax.expr.evaluateExpr(action.expr, eventInfo); //this should be a block _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.setFunction = _actionHandlers.expr; _actionHandlers.linkWindow = function(eventInfo, actions, index) { linkActionHelper(eventInfo, actions, index); }; _actionHandlers.closeCurrent = function(eventInfo, actions, index) { $ax.closeWindow(); _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.linkFrame = function(eventInfo, actions, index) { linkActionHelper(eventInfo, actions, index); }; _actionHandlers.setAdaptiveView = function(eventInfo, actions, index) { var action = actions[index]; var view = action.setAdaptiveViewTo; if(view) $ax.adaptive.setAdaptiveView(view); }; var linkActionHelper = function(eventInfo, actions, index) { var action = actions[index]; eventInfo.link = true; if(action.linkType != 'frame') { var includeVars = _includeVars(action.target, eventInfo); if(action.target.targetType == \"reloadPage\") { $ax.reload(action.target.includeVariables); } else if(action.target.targetType == \"backUrl\") { $ax.back(); } var url = action.target.url; if(!url && action.target.urlLiteral) { url = $ax.expr.evaluateExpr(action.target.urlLiteral, eventInfo, true); } if(url) { if(action.linkType == \"popup\") { $ax.navigate({ url: url, target: action.linkType, includeVariables: includeVars, popupOptions: action.popup }); } else { $ax.navigate({ url: url, target: action.linkType, includeVariables: includeVars }); } } } else linkFrame(eventInfo, action); eventInfo.link = false; _dispatchAction(eventInfo, actions, index + 1); }; var _includeVars = function(target, eventInfo) { if(target.includeVariables) return true; // If it is a url literal, that is a string literal, that has only 1 sto, that is an item that is a page, include vars. if(target.urlLiteral) { var literal = target.urlLiteral; var sto = literal.stos[0]; if(literal.exprType == 'stringLiteral' && literal.value.indexOf('[[') == 0 && literal.value.indexOf(']]' == literal.value.length - 2) && literal.stos.length == 1 && sto.sto == 'item' && eventInfo.item) { var data = $ax.repeater.getData(eventInfo, eventInfo.item.repeater.elementId, eventInfo.item.index, sto.name, 'data'); if (data && $ax.public.fn.IsPage(data.type)) return true; } } return false; }; var linkFrame = function(eventInfo, action) { for(var i = 0; i < action.framesToTargets.length; i++) { var framePath = action.framesToTargets[i].framePath; var target = action.framesToTargets[i].target; var includeVars = _includeVars(target, eventInfo); var url = target.url; if(!url && target.urlLiteral) { url = $ax.expr.evaluateExpr(target.urlLiteral, eventInfo, true); } var id = $ax.getElementIdsFromPath(framePath, eventInfo)[0]; if(id) $ax('#' + $ax.INPUT(id)).openLink(url, includeVars); } }; var _repeatPanelMap = {}; _actionHandlers.setPanelState = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.panelsToStates.length; i++) { var panelToState = action.panelsToStates[i]; var stateInfo = panelToState.stateInfo; var elementIds = $ax.getElementIdsFromPath(panelToState.panelPath, eventInfo); for(var j = 0; j < elementIds.length; j++) { var elementId = elementIds[j]; // Need new scope for elementId and info (function(elementId, stateInfo) { _addAnimation(elementId, queueTypes.setState, function() { var stateNumber = stateInfo.stateNumber; if(stateInfo.setStateType == \"value\") { var oldTarget = eventInfo.targetElement; eventInfo.targetElement = elementId; var stateName = $ax.expr.evaluateExpr(stateInfo.stateValue, eventInfo); eventInfo.targetElement = oldTarget; // Try for state name first var states = $ax.getObjectFromElementId(elementId).diagrams; var stateNameFound = false; for(var k = 0; k < states.length; k++) { if(states[k].label == stateName) { stateNumber = k + 1; stateNameFound = true; } } // Now check for index if(!stateNameFound) { stateNumber = Number(stateName); var panelCount = $('#' + elementId).children().length; // Make sure number is not NaN, is in range, and is a whole number. // Wasn't a state name or number, so return if(isNaN(stateNumber) || stateNumber panelCount || Math.round(stateNumber) != stateNumber) return _fireAnimationFromQueue(elementId, queueTypes.setState); } } else if(stateInfo.setStateType == 'next' || stateInfo.setStateType == 'previous') { var info = $ax.deepCopy(stateInfo); var repeat = info.repeat; // Only map it, if repeat exists. if(typeof (repeat) == 'number') _repeatPanelMap[elementId] = info; return _progessPanelState(elementId, info, info.repeatSkipFirst); } delete _repeatPanelMap[elementId]; // If setting to current (to stop repeat) break here if(stateInfo.setStateType == 'current') return _fireAnimationFromQueue(elementId, queueTypes.setState); $ax('#' + elementId).SetPanelState(stateNumber, stateInfo.options, stateInfo.showWhenSet); }); })(elementId, stateInfo); } } _dispatchAction(eventInfo, actions, index + 1); }; var _progessPanelState = function(id, info, skipFirst) { var direction = info.setStateType; var loop = info.loop; var repeat = info.repeat; var options = info.options; var hasRepeat = typeof (repeat) == 'number'; var currentStateId = $ax.visibility.GetPanelState(id); var stateNumber = ''; if(currentStateId != '') { currentStateId = $ax.repeater.getScriptIdFromElementId(currentStateId); var currentStateNumber = Number(currentStateId.substr(currentStateId.indexOf('state') + 5)); if(direction == \"next\") { stateNumber = currentStateNumber + 2; if(stateNumber > $ax.visibility.GetPanelStateCount(id)) { if(loop) stateNumber = 1; else { delete _repeatPanelMap[id]; return _fireAnimationFromQueue(id, queueTypes.setState); } } } else if(direction == \"previous\") { stateNumber = currentStateNumber; if(stateNumber repeat) repeat = animate.duration; animate = options && options.animateOut; if(animate && animate.easing && animate.easing != 'none' && animate.duration > repeat) repeat = animate.duration; window.setTimeout(function() { // Either new repeat, or no repeat anymore. if(_repeatPanelMap[id] != info) return; _addAnimation(id, queueTypes.setState, function() { _progessPanelState(id, info, false); }); }, repeat); } else delete _repeatPanelMap[id]; } }; _actionHandlers.fadeWidget = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.objectsToFades.length; i++) { var fadeInfo = action.objectsToFades[i].fadeInfo; var elementIds = $ax.getElementIdsFromPath(action.objectsToFades[i].objectPath, eventInfo); for(var j = 0; j < elementIds.length; j++) { var elementId = elementIds[j]; // Need new scope for elementId and info (function(elementId, fadeInfo) { _addAnimation(elementId, queueTypes.fade, function() { if(fadeInfo.fadeType == \"hide\") { $ax('#' + elementId).hide(fadeInfo.options); } else if(fadeInfo.fadeType == \"show\") { $ax('#' + elementId).show(fadeInfo.options, eventInfo); } else if(fadeInfo.fadeType == \"toggle\") { $ax('#' + elementId).toggleVisibility(fadeInfo.options); } }); })(elementId, fadeInfo); } } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.setOpacity = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.objectsToSetOpacity.length; i++) { var opacityInfo = action.objectsToSetOpacity[i].opacityInfo; var elementIds = $ax.getElementIdsFromPath(action.objectsToSetOpacity[i].objectPath, eventInfo); for(var j = 0; j < elementIds.length; j++) { var elementId = elementIds[j]; (function(elementId, opacityInfo) { _addAnimation(elementId, queueTypes.fade, function () { var oldTarget = eventInfo.targetElement; eventInfo.targetElement = elementId; var opacity = $ax.expr.evaluateExpr(opacityInfo.opacity, eventInfo); eventInfo.targetElement = oldTarget; opacity = Math.min(100, Math.max(0, opacity)); $ax('#' + elementId).setOpacity(opacity/100, opacityInfo.easing, opacityInfo.duration); }) })(elementId, opacityInfo); } } _dispatchAction(eventInfo, actions, index + 1); } _actionHandlers.moveWidget = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.objectsToMoves.length; i++) { var moveInfo = action.objectsToMoves[i].moveInfo; var elementIds = $ax.getElementIdsFromPath(action.objectsToMoves[i].objectPath, eventInfo); for(var j = 0; j < elementIds.length; j++) { var elementId = elementIds[j]; _queueResizeMove(elementId, queueTypes.move, eventInfo, moveInfo); //_addMove(eventInfo, elementId, moveInfo, eventInfo.dragInfo); } } _dispatchAction(eventInfo, actions, index + 1); }; var _compoundChildrenShallow = function (id) { var deep = []; var children = $ax('#' + id).getChildren()[0].children; var piecePrefix = id + 'p'; for (var i = 0; i < children.length; i++) { if(children[i].substring(0, id.length + 1) == piecePrefix) { deep.push(children[i]); } } return deep; }; var _addMove = function (elementId, eventInfo, moveInfo, optionsOverride) { var eventInfoCopy = $ax.eventCopy(eventInfo); var idToResizeMoveState = _getIdToResizeMoveState(eventInfoCopy); eventInfoCopy.targetElement = elementId; var options = $ax.deepCopy(moveInfo.options); options.easing = optionsOverride.easing; options.duration = optionsOverride.duration; options.dragInfo = eventInfo.dragInfo; if($ax.public.fn.IsLayer($obj(elementId).type)) { var childrenIds = $ax.public.fn.getLayerChildrenDeep(elementId, true); if(childrenIds.length == 0) return; var animations = []; // Get move delta once, then apply to all children animations.push({ id: elementId, type: queueTypes.move, func: function() { var layerInfo = $ax.public.fn.getWidgetBoundingRect(elementId); var deltaLoc = _getMoveLoc(elementId, moveInfo, eventInfoCopy, optionsOverride.stop, idToResizeMoveState[elementId], options, layerInfo); // $ax.event.raiseSyntheticEvent(elementId, \"onMove\"); $ax.visibility.pushContainer(elementId, false); options.onComplete = function () { _fireAnimationFromQueue(elementId, queueTypes.move); $ax.visibility.popContainer(elementId, false); }; $ax('#' + elementId).moveBy(deltaLoc.x, deltaLoc.y, options); } }); //for(var i = 0; i < childrenIds.length; i++) { // (function(childId) { // animations.push({ // id: childId, // type: queueTypes.move, // func: function () { // // Nop, while trying to move as container // //$ax.event.raiseSyntheticEvent(childId, \"onMove\"); // //if($ax.public.fn.IsLayer($obj(childId).type)) _fireAnimationFromQueue(childId, queueTypes.move); // //else $ax('#' + childId).moveBy(deltaLoc.x, deltaLoc.y, moveInfo.options); // } // }); // })(childrenIds[i]); //} _addAnimations(animations); } else { _addAnimation(elementId, queueTypes.move, function() { var loc = _getMoveLoc(elementId, moveInfo, eventInfoCopy, optionsOverride.stop, idToResizeMoveState[elementId], options); // $ax.event.raiseSyntheticEvent(elementId, \"onMove\"); if(loc.moveTo) $ax('#' + elementId).moveTo(loc.x, loc.y, options); else $ax('#' + elementId).moveBy(loc.x, loc.y, options); }); } }; var _moveSingleWidget = function (elementId, delta, options, onComplete) { if(!delta.x && !delta.y) { $ax.action.fireAnimationFromQueue(elementId, $ax.action.queueTypes.move); return; } var fixedInfo = $ax.dynamicPanelManager.getFixedInfo(elementId); var xProp = 'left'; var xDiff = '+='; if(fixedInfo) { if(fixedInfo.horizontal == 'right') { xProp = 'right'; xDiff = '-='; } else if(fixedInfo.horizontal == 'center') { xProp = 'margin-left'; } } var yProp = 'top'; var yDiff = '+='; if(fixedInfo) { if(fixedInfo.vertical == 'bottom') { yProp = 'bottom'; yDiff = '-='; } else if(fixedInfo.vertical == 'middle') { yProp = 'margin-top'; } } var css = {}; css[xProp] = xDiff + delta.x; css[yProp] = yDiff + delta.y; var moveInfo = $ax.move.PrepareForMove(elementId, delta.x, delta.y,false, options); $jobjAll(elementId).animate(css, { duration: options.duration, easing: options.easing, queue: false, complete: function () { if(onComplete) onComplete(); if(moveInfo.rootLayer) $ax.visibility.popContainer(moveInfo.rootLayer, false); $ax.action.fireAnimationFromQueue(elementId, $ax.action.queueTypes.move); } }); } var _getMoveLoc = function (elementId, moveInfo, eventInfoCopy, stopInfo, comboState, options, layerInfo) { var moveTo = false; var moveWithThis = false; var xValue = 0; var yValue = 0; var moveResult = comboState.moveResult; var widgetDragInfo = eventInfoCopy.dragInfo; var jobj = $jobj(elementId); var startX; var startY; switch(moveInfo.moveType) { case \"location\": // toRatio is ignoring anything before start since that has already taken effect we just know whe have from start to len to finish // getting to the location we want to get to. var toRatio = stopInfo.instant ? 1 : (stopInfo.end - stopInfo.start) / (stopInfo.len - stopInfo.start); // If result already caluculated, don't recalculate again, other calculate and save if (moveResult) { xValue = moveResult.x; yValue = moveResult.y; } else { comboState.moveResult = moveResult = { x: $ax.expr.evaluateExpr(moveInfo.xValue, eventInfoCopy), y: $ax.expr.evaluateExpr(moveInfo.yValue, eventInfoCopy) }; xValue = moveResult.x; yValue = moveResult.y; } // If this is final stop for this move, then clear out the result so next move won't use it if(stopInfo.instant || stopInfo.end == stopInfo.len) comboState.moveResult = undefined; if (layerInfo) { startX = layerInfo.left; startY = layerInfo.top; //} else if ($ax.public.fn.isCompoundVectorHtml(jobj[0])) { // var dimensions = $ax.public.fn.compoundWidgetDimensions(jobj); // startX = dimensions.left; // startY = dimensions.top; } else { startX = $ax('#' + elementId).locRelativeIgnoreLayer(false); startY = $ax('#' + elementId).locRelativeIgnoreLayer(true); if(jobj.css('position') == 'fixed') { startX -= $(window).scrollLeft(); startY -= $(window).scrollTop(); } } xValue = xValue == '' ? 0 : (xValue - startX) * toRatio; yValue = yValue == '' ? 0 : (yValue - startY) * toRatio; break; case \"delta\": var ratio = stopInfo.instant ? 1 : (stopInfo.end - stopInfo.start) / stopInfo.len; // See case location above if(moveResult) { xValue = moveResult.x * ratio; yValue = moveResult.y * ratio; } else { comboState.moveResult = moveResult = { x: $ax.expr.evaluateExpr(moveInfo.xValue, eventInfoCopy), y: $ax.expr.evaluateExpr(moveInfo.yValue, eventInfoCopy) }; xValue = moveResult.x * ratio; yValue = moveResult.y * ratio; } if (stopInfo.instant || stopInfo.end == stopInfo.len) comboState.moveResult = undefined; break; case \"drag\": xValue = widgetDragInfo.xDelta; yValue = widgetDragInfo.yDelta; break; case \"dragX\": xValue = widgetDragInfo.xDelta; yValue = 0; break; case \"dragY\": xValue = 0; yValue = widgetDragInfo.yDelta; break; case \"locationBeforeDrag\": var location = widgetDragInfo.movedWidgets[eventInfoCopy.targetElement]; if (location) { var axObj = $ax('#' + eventInfoCopy.targetElement); xValue = location.x - axObj.left(); yValue = location.y - axObj.top(); } else { _fireAnimationFromQueue(eventInfoCopy.srcElement, queueTypes.move); return { x: 0, y: 0 }; } //moveTo = true; break; case \"withThis\": moveWithThis = true; var widgetMoveInfo = $ax.move.GetWidgetMoveInfo(); var srcElementId = $ax.getElementIdsFromEventAndScriptId(eventInfoCopy, eventInfoCopy.srcElement)[0]; var delta = widgetMoveInfo[srcElementId]; options.easing = delta.options.easing; options.duration = delta.options.duration; xValue = delta.x; yValue = delta.y; break; } if (options && options.boundaryExpr) { //$ax.public.fn.removeCompound(jobj); if(jobj.css('position') == 'fixed') { //swap page coordinates with fixed coordinates options.boundaryExpr.leftExpr.value = options.boundaryExpr.leftExpr.value.replace('.top', '.topfixed').replace('.left', '.leftfixed').replace('.bottom', '.bottomfixed').replace('.right', '.rightfixed'); options.boundaryExpr.leftExpr.stos[0].leftSTO.prop = options.boundaryExpr.leftExpr.stos[0].leftSTO.prop + 'fixed'; options.boundaryStos.boundaryScope.direcval0.value = options.boundaryStos.boundaryScope.direcval0.value.replace('.top', '.topfixed').replace('.left', '.leftfixed').replace('.bottom', '.bottomfixed').replace('.right', '.rightfixed'); options.boundaryStos.boundaryScope.direcval0.stos[0].leftSTO.prop = options.boundaryStos.boundaryScope.direcval0.stos[0].leftSTO.prop + 'fixed'; } if(moveWithThis && (xValue || yValue)) { _updateLeftExprVariable(options.boundaryExpr, xValue.toString(), yValue.toString()); } if(!$ax.expr.evaluateExpr(options.boundaryExpr, eventInfoCopy)) { var boundaryStoInfo = options.boundaryStos; if(boundaryStoInfo) { if(moveWithThis) { var stoScopes = boundaryStoInfo.boundaryScope; if(stoScopes) { for(var s in stoScopes) { var boundaryScope = stoScopes[s]; if(!boundaryScope.localVariables) continue; if(boundaryScope.localVariables.withx) boundaryScope.localVariables.withx.value = xValue.toString(); if(boundaryScope.localVariables.withy) boundaryScope.localVariables.withy.value = yValue.toString(); } } } if(layerInfo) { startX = layerInfo.left; startY = layerInfo.top; } else { startX = $ax('#' + elementId).locRelativeIgnoreLayer(false); startY = $ax('#' + elementId).locRelativeIgnoreLayer(true); if(jobj.css('position') == 'fixed') { startX -= $(window).scrollLeft(); startY -= $(window).scrollTop(); } } if(boundaryStoInfo.ySto) { var currentTop = layerInfo ? layerInfo.top : startY; var newTop = $ax.evaluateSTO(boundaryStoInfo.ySto, boundaryStoInfo.boundaryScope, eventInfoCopy); if(moveTo) yValue = newTop; else yValue = newTop - currentTop; } if(boundaryStoInfo.xSto) { var currentLeft = layerInfo ? layerInfo.left : startX; var newLeft = $ax.evaluateSTO(boundaryStoInfo.xSto, boundaryStoInfo.boundaryScope, eventInfoCopy); if(moveTo) xValue = newLeft; else xValue = newLeft - currentLeft; } } } //$ax.public.fn.restoreCompound(jobj); } return { x: Number(xValue), y: Number(yValue), moveTo: moveTo }; }; //we will have something like [[Target.right + withX]] for leftExpr, and this function set the value of withX var _updateLeftExprVariable = function (exprTree, xValue, yValue) { if(exprTree.leftExpr && !exprTree.leftExpr.op) { var localVars = exprTree.leftExpr.localVariables; if(localVars) { if(localVars.withx) localVars.withx.value = xValue; if(localVars.withy) localVars.withy.value = yValue; } } //traversal if(exprTree.op) { if(exprTree.leftExpr) _updateLeftExprVariable(exprTree.leftExpr, xValue, yValue); if(exprTree.rightExpr) _updateLeftExprVariable(exprTree.rightExpr, xValue, yValue); } } var widgetRotationFilter = [ $ax.constants.IMAGE_BOX_TYPE, $ax.constants.IMAGE_MAP_REGION_TYPE, $ax.constants.DYNAMIC_PANEL_TYPE, $ax.constants.VECTOR_SHAPE_TYPE, $ax.constants.VERTICAL_LINE_TYPE, $ax.constants.HORIZONTAL_LINE_TYPE ]; _actionHandlers.rotateWidget = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.objectsToRotate.length; i++) { var rotateInfo = action.objectsToRotate[i].rotateInfo; var elementIds = $ax.getElementIdsFromPath(action.objectsToRotate[i].objectPath, eventInfo); for(var j = 0; j < elementIds.length; j++) { var elementId = elementIds[j]; _queueResizeMove(elementId, queueTypes.rotate, eventInfo, rotateInfo); } } _dispatchAction(eventInfo, actions, index + 1); }; var _addRotate = function (elementId, eventInfo, rotateInfo, options, moveInfo) { var idToResizeMoveState = _getIdToResizeMoveState(eventInfo); rotateInfo = $ax.deepCopy(rotateInfo); rotateInfo.options.easing = options.easing; rotateInfo.options.duration = options.duration; var eventInfoCopy = $ax.eventCopy(eventInfo); eventInfoCopy.targetElement = elementId; //calculate degree value at start of animation var rotateDegree; var offset = {}; var eval = function(boundingRect) { rotateDegree = parseFloat($ax.expr.evaluateExpr(rotateInfo.degree, eventInfoCopy)); offset.x = Number($ax.expr.evaluateExpr(rotateInfo.offsetX, eventInfoCopy)); offset.y = Number($ax.expr.evaluateExpr(rotateInfo.offsetY, eventInfoCopy)); if(!rotateInfo.options.clockwise) rotateDegree = -rotateDegree; _updateOffset(offset, rotateInfo.anchor, boundingRect); } if(moveInfo) { var moveOptions = { dragInfo: eventInfoCopy.dragInfo, duration: options.duration, easing: options.easing, boundaryExpr: moveInfo.options.boundaryExpr, boundaryStos: moveInfo.options.boundaryStos }; } var obj = $obj(elementId); if($ax.public.fn.IsLayer(obj.type)) { var childrenIds = $ax.public.fn.getLayerChildrenDeep(elementId, true, true); if(childrenIds.length == 0) return; var animations = []; //get center point of the group, and degree delta var centerPoint, degreeDelta, moveDelta; animations.push({ id: elementId, type: queueTypes.rotate, func: function () { var boundingRect = $axure.fn.getWidgetBoundingRect(elementId); eval(boundingRect); centerPoint = boundingRect.centerPoint; centerPoint.x += offset.x; centerPoint.y += offset.y; degreeDelta = _initRotateLayer(elementId, rotateInfo, rotateDegree, options, options.stop); _fireAnimationFromQueue(elementId, queueTypes.rotate); moveDelta = { x: 0, y: 0 }; if (moveInfo) { moveDelta = _getMoveLoc(elementId, moveInfo, eventInfoCopy, options.moveStop, idToResizeMoveState[elementId], moveOptions, boundingRect); if (moveDelta.moveTo) { moveDelta.x -= $ax.getNumFromPx($jobj(elementId).css('left')); moveDelta.y -= $ax.getNumFromPx($jobj(elementId).css('top')); } $ax.event.raiseSyntheticEvent(elementId, 'onMove'); } } }); for(var idIndex = 0; idIndex < childrenIds.length; idIndex++) { var childId = childrenIds[idIndex]; (function(id) { var childObj = $obj(id); var rotate = $.inArray(childObj.type, widgetRotationFilter) != -1; var isLayer = $ax.public.fn.IsLayer(childObj.type); animations.push({ id: id, type: queueTypes.rotate, func: function() { $ax.event.raiseSyntheticEvent(id, \"onRotate\"); if(isLayer) _fireAnimationFromQueue(id, queueTypes.rotate); else $ax('#' + id).circularMoveAndRotate(degreeDelta, options, centerPoint.x, centerPoint.y, rotate, moveDelta); } }); if(!isLayer) animations.push({ id: id, type: queueTypes.move, func: function() {} }); })(childId); } _addAnimations(animations); } else { animations = []; animations.push({ id: elementId, type: queueTypes.rotate, func: function () { var jobj = $jobj(elementId); var unrotatedDim = { width: $ax.getNumFromPx(jobj.css('width')), height: $ax.getNumFromPx(jobj.css('height')) }; eval(unrotatedDim); var delta = { x: 0, y: 0 }; if(moveInfo) { delta = _getMoveLoc(elementId, moveInfo, eventInfoCopy, options.moveStop, idToResizeMoveState[elementId], moveOptions); if(delta.moveTo) { delta.x -= $ax.getNumFromPx($jobj(elementId).css('left')); delta.y -= $ax.getNumFromPx($jobj(elementId).css('top')); } } $ax.event.raiseSyntheticEvent(elementId, 'onRotate'); if(offset.x == 0 && offset.y == 0) _rotateSingle(elementId, rotateDegree, rotateInfo.rotateType == 'location', delta, options, options.stop, true); else _rotateSingleOffset(elementId, rotateDegree, rotateInfo.rotateType == 'location', delta, { x: offset.x, y: offset.y }, options, options.stop); if(moveInfo) $ax.event.raiseSyntheticEvent(elementId, 'onMove'); } }); animations.push({ id: elementId, type: queueTypes.move, func: function () { } }); _addAnimations(animations); } } var _updateOffset = function(offset, anchor, boundingRect) { if (anchor.indexOf('left') != -1) offset.x -= boundingRect.width / 2; if (anchor.indexOf('right') != -1) offset.x += boundingRect.width / 2; if (anchor.indexOf('top') != -1) offset.y -= boundingRect.height / 2; if (anchor.indexOf('bottom') != -1) offset.y += boundingRect.height / 2; } var _rotateSingle = function(elementId, rotateDegree, rotateTo, delta, options, stop, handleMove) { var degreeDelta = _applyRotateStop(rotateDegree, $ax.move.getRotationDegree(elementId), rotateTo, stop); $ax('#' + elementId).rotate(degreeDelta, options.easing, options.duration, false, true); if(handleMove) { if (delta.x || delta.y) _moveSingleWidget(elementId, delta, options); else $ax.action.fireAnimationFromQueue(elementId, $ax.action.queueTypes.move); } }; var _rotateSingleOffset = function (elementId, rotateDegree, rotateTo, delta, offset, options, stop, resizeOffset) { var obj = $obj(elementId); var currRotation = $ax.move.getRotationDegree(elementId); // Need to fix offset. Want to to stay same place on widget after rotation, so need to take the offset and rotate it to where it should be. if(currRotation) { offset = $axure.fn.getPointAfterRotate(currRotation, offset, { x: 0, y: 0 }); } var degreeDelta = _applyRotateStop(rotateDegree, currRotation, rotateTo, stop); var widgetCenter = $axure.fn.getWidgetBoundingRect(elementId).centerPoint; var rotate = $.inArray(obj.type, widgetRotationFilter) != -1; $ax('#' + elementId).circularMoveAndRotate(degreeDelta, options, widgetCenter.x + offset.x, widgetCenter.y + offset.y, rotate, delta, resizeOffset); } var _applyRotateStop = function(rotateDegree, currRotation, to, stop) { var degreeDelta; var ratio; if(to) { degreeDelta = rotateDegree - currRotation; ratio = stop.instant ? 1 : (stop.end - stop.start) / (stop.len - stop.start); } else { degreeDelta = rotateDegree; ratio = stop.instant ? 1 : (stop.end - stop.start) / stop.len; } return degreeDelta * ratio; } var _initRotateLayer = function(elementId, rotateInfo, rotateDegree, options, stop) { var layerDegree = $jobj(elementId).data('layerDegree'); if (layerDegree === undefined) layerDegree = 0; else layerDegree = parseFloat(layerDegree); var to = rotateInfo.rotateType == 'location'; var newDegree = to ? rotateDegree : layerDegree + rotateDegree; var degreeDelta = newDegree - layerDegree; var ratio = stop.instant ? 1 : (stop.end - stop.start) / (stop.len - stop.start); degreeDelta *= ratio; $jobj(elementId).data('layerDegree', newDegree); $ax.event.raiseSyntheticEvent(elementId, \"onRotate\"); return degreeDelta; } _actionHandlers.setWidgetSize = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.objectsToResize.length; i++) { var resizeInfo = action.objectsToResize[i].sizeInfo; var objPath = action.objectsToResize[i].objectPath; if(objPath == 'thisItem') { var thisId = eventInfo.srcElement; var repeaterId = $ax.getParentRepeaterFromElementId(thisId); var itemId = $ax.repeater.getItemIdFromElementId(thisId); var currSize = $ax.repeater.getItemSize(repeaterId, itemId); var newSize = _getSizeFromInfo(resizeInfo, eventInfo, currSize.width, currSize.height); $ax.repeater.setItemSize(repeaterId, itemId, newSize.width, newSize.height); continue; } var elementIds = $ax.getElementIdsFromPath(objPath, eventInfo); for(var j = 0; j < elementIds.length; j++) { var elementId = elementIds[j]; _queueResizeMove(elementId, queueTypes.resize, eventInfo, resizeInfo); //_addResize(elementId, resizeInfo); } } _dispatchAction(eventInfo, actions, index + 1); }; // Move info undefined unless this move/resize actions are being merged var _addResize = function(elementId, eventInfo, resizeInfo, options, moveInfo, rotateInfo) { var axObject = $obj(elementId); resizeInfo = $ax.deepCopy(resizeInfo); resizeInfo.easing = options.easing; resizeInfo.duration = options.duration; var eventInfoCopy = $ax.eventCopy(eventInfo); eventInfoCopy.targetElement = elementId; var moves = moveInfo || resizeInfo.anchor != \"top left\" || ($ax.public.fn.IsDynamicPanel(axObject.type) && ((axObject.fixedHorizontal && axObject.fixedHorizontal == 'center') || (axObject.fixedVertical && axObject.fixedVertical == 'middle'))) || (rotateInfo && (rotateInfo.offsetX || rotateInfo.offsetY)); if(moveInfo) { var moveOptions = { dragInfo: eventInfoCopy.dragInfo, duration: options.duration, easing: options.easing, boundaryExpr: moveInfo.options.boundaryExpr, boundaryStos: moveInfo.options.boundaryStos }; } var idToResizeMoveState = _getIdToResizeMoveState(eventInfoCopy); var animations = []; if($ax.public.fn.IsLayer(axObject.type)) { moves = true; // Assume widgets will move will layer, even though not all widgets may move var childrenIds = $ax.public.fn.getLayerChildrenDeep(elementId, true, true); if(childrenIds.length === 0) return; // Need to wait to calculate new size, until time to animate, but animates are in separate queues // best option seems to be to calculate in a \"animate\" for the layer itself and all children will use that. // May just have to be redundant if this doesn't work well. var boundingRect, widthChangedPercent, heightChangedPercent, unchanged, deltaLoc, degreeDelta, resizeOffset; animations.push({ id: elementId, type: queueTypes.resize, func: function () { $ax.visibility.pushContainer(elementId, false); boundingRect = $ax.public.fn.getWidgetBoundingRect(elementId); var size = _getSizeFromInfo(resizeInfo, eventInfoCopy, boundingRect.width, boundingRect.height, elementId); deltaLoc = { x: 0, y: 0 }; var stop = options.stop; var ratio = stop.instant ? 1 : (stop.end - stop.start) / (stop.len - stop.start); widthChangedPercent = Math.round(size.width - boundingRect.width) / boundingRect.width * ratio; heightChangedPercent = Math.round(size.height - boundingRect.height) / boundingRect.height * ratio; resizeOffset = _applyAnchorToResizeOffset(widthChangedPercent * boundingRect.width, heightChangedPercent * boundingRect.height, resizeInfo.anchor); if(stop.instant || stop.end == stop.len) idToResizeMoveState[elementId].resizeResult = undefined; unchanged = widthChangedPercent === 0 && heightChangedPercent === 0; $ax.event.raiseSyntheticEvent(elementId, 'onResize'); _fireAnimationFromQueue(elementId, queueTypes.resize); } }); if(moveInfo) animations.push({ id: elementId, type: queueTypes.move, func: function() { deltaLoc = _getMoveLoc(elementId, moveInfo, eventInfoCopy, options.moveStop, idToResizeMoveState[elementId], moveOptions, boundingRect); $ax.visibility.pushContainer(elementId, false); _fireAnimationFromQueue(elementId, queueTypes.move); $ax.event.raiseSyntheticEvent(elementId, 'onMove'); } }); if (rotateInfo) animations.push({ id: elementId, type: queueTypes.rotate, func: function () { resizeOffset = _applyAnchorToResizeOffset(widthChangedPercent * boundingRect.width, heightChangedPercent * boundingRect.height, resizeInfo.anchor); var rotateDegree = parseFloat($ax.expr.evaluateExpr(rotateInfo.degree, eventInfoCopy)); degreeDelta = _initRotateLayer(elementId, rotateInfo, rotateDegree, options, options.rotateStop); _fireAnimationFromQueue(elementId, queueTypes.rotate); $ax.event.raiseSyntheticEvent(elementId, 'onRotate'); } }); var completeCount = childrenIds.length*2; // Because there is a resize and move complete, it needs to be doubled for(var idIndex = 0; idIndex < childrenIds.length; idIndex++) { // Need to use scoping trick here to make sure childId doesn't change on next loop (function(childId) { //use ax obj to get width and height, jquery css give us the value without border var isLayer = $ax.public.fn.IsLayer($obj(childId).type); var rotate = $.inArray($obj(childId).type, widgetRotationFilter) != -1; animations.push({ id: childId, type: queueTypes.resize, func: function() { //$ax.event.raiseSyntheticEvent(childId, 'onResize'); if(isLayer) { completeCount -= 2; _fireAnimationFromQueue(childId, queueTypes.resize); $ax.event.raiseSyntheticEvent(childId, 'onResize'); } else { var currDeltaLoc = { x: deltaLoc.x, y: deltaLoc.y }; var resizeDeltaMove = { x: 0, y: 0 }; var css = _getCssForResizingLayerChild(childId, resizeInfo.anchor, boundingRect, widthChangedPercent, heightChangedPercent, resizeDeltaMove); var onComplete = function() { if(--completeCount == 0) $ax.visibility.popContainer(elementId, false); }; $ax('#' + childId).resize(css, resizeInfo, true, moves, onComplete); if(rotateInfo) { var offset = { x: Number($ax.expr.evaluateExpr(rotateInfo.offsetX, eventInfoCopy)), y: Number($ax.expr.evaluateExpr(rotateInfo.offsetY, eventInfo)) }; _updateOffset(offset, resizeInfo.anchor, boundingRect); var centerPoint = { x: boundingRect.centerPoint.x + offset.x, y: boundingRect.centerPoint.y + offset.y }; $ax('#' + childId).circularMoveAndRotate(degreeDelta, options, centerPoint.x, centerPoint.y, rotate, currDeltaLoc, resizeOffset, resizeDeltaMove, onComplete); } else { currDeltaLoc.x += resizeDeltaMove.x; currDeltaLoc.y += resizeDeltaMove.y; _moveSingleWidget(childId, currDeltaLoc, options, onComplete); } } } }); if(!isLayer) animations.push({ id: childId, type: queueTypes.move, func: function () {} }); if(!isLayer && rotateInfo) animations.push({ id: childId, type: queueTypes.rotate, func: function () {} }); })(childrenIds[idIndex]); } } else { // Not func, obj with func animations.push({ id: elementId, type: queueTypes.resize, func: function() { //textarea can be resized manully by the user, but doesn't update div size yet, so doing this for now. //alternatively axquery get for size can account for this var sizeId = $ax.public.fn.IsTextArea(axObject.type) ? $jobj(elementId).children('textarea').attr('id') : elementId; var oldSize = $ax('#' + sizeId).size(); var oldWidth = oldSize.width; var oldHeight = oldSize.height; var stop = options.stop; var ratio = stop.instant ? 1 : (stop.end - stop.start) / (stop.len - stop.start); var size = _getSizeFromInfo(resizeInfo, eventInfoCopy, oldWidth, oldHeight, elementId); var newWidth = size.width; var newHeight = size.height; var deltaWidth = Math.round(newWidth - oldWidth) * ratio; var deltaHeight = Math.round(newHeight - oldHeight) * ratio; newWidth = oldWidth + deltaWidth; newHeight = oldHeight + deltaHeight; var delta = { x: 0, y: 0 }; if(moveInfo) { delta = _getMoveLoc(elementId, moveInfo, eventInfoCopy, options.moveStop, idToResizeMoveState[elementId], moveOptions); if (delta.moveTo) { delta.x -= $ax.getNumFromPx($jobj(elementId).css('left')); delta.y -= $ax.getNumFromPx($jobj(elementId).css('top')); } } var rotateHandlesMove = false; var offset = { x: 0, y: 0 }; if(rotateInfo) { offset.x = Number($ax.expr.evaluateExpr(rotateInfo.offsetX, eventInfoCopy)); offset.y = Number($ax.expr.evaluateExpr(rotateInfo.offsetY, eventInfoCopy)); _updateOffset(offset, rotateInfo.anchor, $axure.fn.getWidgetBoundingRect(elementId)); rotateHandlesMove = Boolean(rotateInfo && (offset.x || offset.y || rotateInfo.anchor != 'center')); $ax.event.raiseSyntheticEvent(elementId, 'onRotate'); } var css = null; var rootLayer = null; if(deltaHeight != 0 || deltaWidth != 0) { rootLayer = $ax.move.getRootLayer(elementId); if(rootLayer) $ax.visibility.pushContainer(rootLayer, false); css = _getCssForResizingWidget(elementId, eventInfoCopy, resizeInfo.anchor, newWidth, newHeight, oldWidth, oldHeight, delta, options.stop, !rotateHandlesMove); idToResizeMoveState[elementId].resizeResult = undefined; } if(rotateInfo) { var rotateDegree = parseFloat($ax.expr.evaluateExpr(rotateInfo.degree, eventInfoCopy)); if(rotateHandlesMove) { var resizeOffset = _applyAnchorToResizeOffset(deltaWidth, deltaHeight, rotateInfo.anchor); _rotateSingleOffset(elementId, rotateDegree, rotateInfo.rotateType == 'location', delta, offset, options, options.rotateStop, resizeOffset); } else { // Not handling move so pass in nop delta _rotateSingle(elementId, rotateDegree, rotateInfo.rotateType == 'location', { x: 0, y: 0 }, options, options.rotateStop); if (moves) _fireAnimationFromQueue(elementId, queueTypes.move); } } else if(!css && moves) _moveSingleWidget(elementId, delta, options); // Have to do it down here to make sure move info is registered if(moveInfo) $ax.event.raiseSyntheticEvent(elementId, 'onMove'); //$ax.event.raiseSyntheticEvent(elementId, 'onResize'); if (css) { $ax('#' + elementId).resize(css, resizeInfo, true, moves, function () { if(rootLayer) $ax.visibility.popContainer(rootLayer, false); }); } else { _fireAnimationFromQueue(elementId, queueTypes.resize); $ax.event.raiseSyntheticEvent(elementId, 'onResize'); } } }); // Nop move (move handled by resize) if(rotateInfo) animations.push({ id: elementId, type: queueTypes.rotate, func: function () { } }); if(moves) animations.push({ id: elementId, type: queueTypes.move, func: function () { } }); } _addAnimations(animations); }; var _applyAnchorToResizeOffset = function (deltaWidth, deltaHeight, anchor) { var offset = {}; if (anchor.indexOf('left') != -1) offset.x = -deltaWidth / 2; else if (anchor.indexOf('right') != -1) offset.x = deltaWidth / 2; if (anchor.indexOf('top') != -1) offset.y = -deltaHeight / 2; else if (anchor.indexOf('bottom') != -1) offset.y = deltaHeight / 2; return offset; } //var _getOldAndNewSize = function (resizeInfo, eventInfo, targetElement) { // var axObject = $obj(targetElement); // var oldWidth, oldHeight; // //textarea can be resized manully by the user, use the textarea child to get the current size // //because this new size may not be reflected on its parents yet // if ($ax.public.fn.IsTextArea(axObject.type)) { // var jObject = $jobj(elementId); // var textObj = $ax('#' + jObject.children('textarea').attr('id')); // //maybe we shouldn't use ax obj to get width and height here anymore... // oldWidth = textObj.width(); // oldHeight = textObj.height(); // } else { // oldWidth = $ax('#' + elementId).width(); // oldHeight = $ax('#' + elementId).height(); // } // var size = _getSizeFromInfo(resizeInfo, eventInfo, oldHeight, oldWidth, elementId); // return { oldWidth: oldWidth, oldHeight: oldHeight, newWidth: size.width, newHeight: size.height, change: oldWidth != size.width || oldHeight != size.height }; //} var _getSizeFromInfo = function(resizeInfo, eventInfo, oldWidth, oldHeight, targetElement) { var oldTarget = eventInfo.targetElement; eventInfo.targetElement = targetElement; var state = _getIdToResizeMoveState(eventInfo)[targetElement]; if(state && state.resizeResult) return state.resizeResult; var width = $ax.expr.evaluateExpr(resizeInfo.width, eventInfo); var height = $ax.expr.evaluateExpr(resizeInfo.height, eventInfo); eventInfo.targetElement = oldTarget; // If either one is not a number, use the old value width = width != \"\" ? Number(width) : oldWidth; height = height != \"\" ? Number(height) : oldHeight; width = isNaN(width) ? oldWidth : width; height = isNaN(height) ? oldHeight : height; // can't be negative var result = { width: Math.max(width, 0), height: Math.max(height, 0) }; if(state) state.resizeResult = result; return result; } //var _queueResize = function (elementId, css, resizeInfo) { // var resizeFunc = function() { // $ax('#' + elementId).resize(css, resizeInfo, true); // //$ax.public.fn.resize(elementId, css, resizeInfo, true); // }; // var obj = $obj(elementId); // var moves = resizeInfo.anchor != \"top left\" || ($ax.public.fn.IsDynamicPanel(obj.type) && ((obj.fixedHorizontal && obj.fixedHorizontal == 'center') || (obj.fixedVertical && obj.fixedVertical == 'middle'))) // if(!moves) { // _addAnimation(elementId, queueTypes.resize, resizeFunc); // } else { // var animations = []; // animations[0] = { id: elementId, type: queueTypes.resize, func: resizeFunc }; // animations[1] = { id: elementId, type: queueTypes.move, func: function() {}}; // Nop func - resize handles move and firing from queue // _addAnimations(animations); // } //}; //should clean this function and var _getCssForResizingWidget = function (elementId, eventInfo, anchor, newWidth, newHeight, oldWidth, oldHeight, delta, stop, handleMove) { var ratio = stop.instant ? 1 : (stop.end - stop.start) / (stop.len - stop.start); var deltaWidth = (newWidth - oldWidth) * ratio; var deltaHeight = (newHeight - oldHeight) * ratio; if(stop.instant || stop.end == stop.len) { var idToResizeMoveState = _getIdToResizeMoveState(eventInfo); if(idToResizeMoveState[elementId]) idToResizeMoveState[elementId].resizeResult = undefined; } var css = {}; css.height = oldHeight + deltaHeight; var obj = $obj(elementId); //if it's 100% width, don't change its width if($ax.dynamicPanelManager.isPercentWidthPanel(obj)) var is100Dp = true; else css.width = oldWidth + deltaWidth; var jobj = $jobj(elementId); //if this is pinned dp, we will mantain the pin, no matter how you resize it; so no need changes left or top //NOTE: currently only pinned DP has position == fixed if(jobj.css('position') == 'fixed') { if(obj.fixedHorizontal && obj.fixedHorizontal == 'center') css['margin-left'] = '+=' + delta.x; if(obj.fixedVertical && obj.fixedVertical == 'middle') css['margin-top'] = '+=' + delta.y; return css; } // If it is pinned, but temporarily not fixed because it is wrappen in a container, then just make sure to anchor it correctly if(obj.fixedVertical) { if(obj.fixedVertical == 'middle') anchor = obj.fixedHorizontal; else anchor = obj.fixedVertical + (obj.fixedHorizontal == 'center' ? '' : ' ' + obj.fixedHorizontal); } //use position relative to parents //var position = obj.generateCompound ? $ax.public.fn.getWidgetBoundingRect(elementId) : $ax.public.fn.getPositionRelativeToParent(elementId); var locationShift; switch(anchor) { case \"top left\": locationShift = { x: 0, y: 0 }; break; case \"top\": locationShift = { x: -deltaWidth / 2.0, y: 0.0 }; break; case \"top right\": locationShift = { x: -deltaWidth, y: 0.0 }; break; case \"left\": locationShift = { x: 0.0, y: -deltaHeight / 2.0 }; break; case \"center\": locationShift = { x: -deltaWidth / 2.0, y: -deltaHeight / 2.0 }; break; case \"right\": locationShift = { x: -deltaWidth, y: -deltaHeight / 2.0 }; break; case \"bottom left\": locationShift = { x: 0.0, y: -deltaHeight }; break; case \"bottom\": locationShift = { x: -deltaWidth/2.0, y: -deltaHeight }; break; case \"bottom right\": locationShift = { x: -deltaWidth, y: -deltaHeight }; break; } if(handleMove) { if(jobj.css('position') === 'absolute') { css.left = $ax.getNumFromPx(jobj.css('left')) + locationShift.x + delta.x; css.top = $ax.getNumFromPx(jobj.css('top')) + locationShift.y + delta.y; } else { var axQuery = $ax('#' + elementId); css.left = axQuery.left(true) + locationShift.x + delta.x; css.top = axQuery.top(true) + locationShift.y + delta.y; } } else { delta.x += locationShift.x; delta.y += locationShift.y; } return css; }; var _getCssForResizingLayerChild = function (elementId, anchor, layerBoundingRect, widthChangedPercent, heightChangedPercent, deltaLoc) { var boundingRect = $ax.public.fn.getWidgetBoundingRect(elementId); var childCenterPoint = boundingRect.centerPoint; var currentSize = $ax('#' + elementId).size(); var newWidth = currentSize.width + currentSize.width * widthChangedPercent; var newHeight = currentSize.height + currentSize.height * heightChangedPercent; var css = {}; css.height = newHeight; var obj = $obj(elementId); //if it's 100% width, don't change its width and left var changeLeft = true; if($ax.dynamicPanelManager.isPercentWidthPanel(obj)) changeLeft = false; else css.width = newWidth; var jobj = $jobj(elementId); //if this is pinned dp, we will mantain the pin, no matter how you resize it; so no need changes left or top //NOTE: currently only pinned DP has position == fixed if(jobj.css('position') == 'fixed') return css; //use bounding rect position relative to parents to calculate delta var axObj = $ax('#' + elementId); // This will be absolute world coordinates, but we want body coordinates. var currentLeft = axObj.locRelativeIgnoreLayer(false); var currentTop = axObj.locRelativeIgnoreLayer(true); var resizable = $ax.public.fn.IsResizable(obj.type); if(anchor.indexOf(\"top\") > -1) { var topDelta = (currentTop - layerBoundingRect.top) * heightChangedPercent; if(!resizable && Math.round(topDelta)) topDelta += currentSize.height * heightChangedPercent; } else if(anchor.indexOf(\"bottom\") > -1) { if(resizable) topDelta = (currentTop - layerBoundingRect.bottom) * heightChangedPercent; else { var bottomDelta = Math.round(currentTop + currentSize.height - layerBoundingRect.bottom) * heightChangedPercent; if(bottomDelta) topDelta = bottomDelta - currentSize.height * heightChangedPercent; else topDelta = 0; } } else { //center vertical if(resizable) topDelta = (childCenterPoint.y - layerBoundingRect.centerPoint.y)*heightChangedPercent - currentSize.height*heightChangedPercent/2; else { var centerTopChange = Math.round(childCenterPoint.y - layerBoundingRect.centerPoint.y)*heightChangedPercent; if(centerTopChange > 0) topDelta = centerTopChange + Math.abs(currentSize.height * heightChangedPercent / 2); else if(centerTopChange < 0) topDelta = centerTopChange - Math.abs(currentSize.height * heightChangedPercent / 2); else topDelta = 0; } } if(changeLeft) { if(anchor.indexOf(\"left\") > -1) { var leftDelta = (currentLeft - layerBoundingRect.left) * widthChangedPercent; if(!resizable && Math.round(leftDelta)) leftDelta += currentSize.width * widthChangedPercent; } else if(anchor.indexOf(\"right\") > -1) { if(resizable) leftDelta = (currentLeft - layerBoundingRect.right) * widthChangedPercent; else { var rightDelta = Math.round(currentLeft + currentSize.width - layerBoundingRect.right) * widthChangedPercent; if(rightDelta) leftDelta = rightDelta - currentSize.width * widthChangedPercent; else leftDelta = 0; } } else { //center horizontal if(resizable) leftDelta = (childCenterPoint.x - layerBoundingRect.centerPoint.x)*widthChangedPercent - currentSize.width*widthChangedPercent/2; else { var centerLeftChange = Math.round(childCenterPoint.x - layerBoundingRect.centerPoint.x) * widthChangedPercent; if(centerLeftChange > 0) leftDelta = centerLeftChange + Math.abs(currentSize.width * widthChangedPercent / 2); else if(centerLeftChange < 0) leftDelta = centerLeftChange - Math.abs(currentSize.width * widthChangedPercent / 2); else leftDelta = 0; } } } if(topDelta) deltaLoc.y += topDelta; if(leftDelta && changeLeft) deltaLoc.x += leftDelta; return css; }; _actionHandlers.setPanelOrder = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.panelPaths.length; i++) { var func = action.panelPaths[i].setOrderInfo.bringToFront ? 'bringToFront' : 'sendToBack'; var elementIds = $ax.getElementIdsFromPath(action.panelPaths[i].panelPath, eventInfo); for(var j = 0; j < elementIds.length; j++) $ax('#' + elementIds[j])[func](); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.modifyDataSetEditItems = function(eventInfo, actions, index) { var action = actions[index]; var add = action.repeatersToAddTo; var repeaters = add || action.repeatersToRemoveFrom; var itemId; for(var i = 0; i < repeaters.length; i++) { var data = repeaters[i]; // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(data.path, eventInfo)[0]; if(!id) continue; if(data.addType == 'this') { var scriptId = $ax.repeater.getScriptIdFromElementId(eventInfo.srcElement); itemId = $ax.repeater.getItemIdFromElementId(eventInfo.srcElement); var repeaterId = $ax.getParentRepeaterFromScriptId(scriptId); if(add) $ax.repeater.addEditItems(repeaterId, [itemId]); else $ax.repeater.removeEditItems(repeaterId, [itemId]); } else if(data.addType == 'all') { var allItems = $ax.repeater.getAllItemIds(id); if(add) $ax.repeater.addEditItems(id, allItems); else $ax.repeater.removeEditItems(id, allItems); } else { var oldTarget = eventInfo.targetElement; var itemIds = $ax.repeater.getAllItemIds(id); var itemIdsToAdd = []; for(var j = 0; j < itemIds.length; j++) { itemId = itemIds[j]; eventInfo.targetElement = $ax.repeater.createElementId(id, itemId); if($ax.expr.evaluateExpr(data.query, eventInfo) == \"true\") { itemIdsToAdd[itemIdsToAdd.length] = String(itemId); } eventInfo.targetElement = oldTarget; } if(add) $ax.repeater.addEditItems(id, itemIdsToAdd); else $ax.repeater.removeEditItems(id, itemIdsToAdd); } } _dispatchAction(eventInfo, actions, index + 1); }; _action.repeaterInfoNames = { addItemsToDataSet: 'dataSetsToAddTo', deleteItemsFromDataSet: 'dataSetItemsToRemove', updateItemsInDataSet: 'dataSetsToUpdate', addFilterToRepeater: 'repeatersToAddFilter', removeFilterFromRepeater: 'repeatersToRemoveFilter', addSortToRepeater: 'repeaterToAddSort', removeSortFromRepeater: 'repeaterToRemoveSort', setRepeaterToPage: 'repeatersToSetPage', setItemsPerRepeaterPage: 'repeatersToSetItemCount' }; _actionHandlers.addItemsToDataSet = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.dataSetsToAddTo.length; i++) { var datasetInfo = action.dataSetsToAddTo[i]; // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(datasetInfo.path, eventInfo)[0]; if(!id || _ignoreAction(id)) continue; var dataset = datasetInfo.data; for(var j = 0; j < dataset.length; j++) $ax.repeater.addItem(id, $ax.deepCopy(dataset[j]), eventInfo); if(dataset.length) _addRefresh(id); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.deleteItemsFromDataSet = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.dataSetItemsToRemove.length; i++) { // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var deleteInfo = action.dataSetItemsToRemove[i]; var id = $ax.getElementIdsFromPath(deleteInfo.path, eventInfo)[0]; if(!id || _ignoreAction(id)) continue; $ax.repeater.deleteItems(id, eventInfo, deleteInfo.type, deleteInfo.rule); _addRefresh(id); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.updateItemsInDataSet = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.dataSetsToUpdate.length; i++) { var dataSet = action.dataSetsToUpdate[i]; // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(dataSet.path, eventInfo)[0]; if(!id || _ignoreAction(id)) continue; $ax.repeater.updateEditItems(id, dataSet.props, eventInfo, dataSet.type, dataSet.rule); _addRefresh(id); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.setRepeaterToDataSet = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.repeatersToSet.length; i++) { var setRepeaterInfo = action.repeatersToSet[i]; // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(setRepeaterInfo.path, eventInfo)[0]; if(!id) continue; $ax.repeater.setDataSet(id, setRepeaterInfo.localDataSetId); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.addFilterToRepeater = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.repeatersToAddFilter.length; i++) { var addFilterInfo = action.repeatersToAddFilter[i]; // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(addFilterInfo.path, eventInfo)[0]; if(!id || _ignoreAction(id)) continue; $ax.repeater.addFilter(id, addFilterInfo.removeOtherFilters, addFilterInfo.label, addFilterInfo.filter, eventInfo.srcElement); _addRefresh(id); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.removeFilterFromRepeater = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.repeatersToRemoveFilter.length; i++) { var removeFilterInfo = action.repeatersToRemoveFilter[i]; // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(removeFilterInfo.path, eventInfo)[0]; if(!id || _ignoreAction(id)) continue; if(removeFilterInfo.removeAll) $ax.repeater.removeFilter(id); else if(removeFilterInfo.filterName != '') { $ax.repeater.removeFilter(id, removeFilterInfo.filterName); } _addRefresh(id); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.addSortToRepeater = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.repeatersToAddSort.length; i++) { var addSortInfo = action.repeatersToAddSort[i]; // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(addSortInfo.path, eventInfo)[0]; if(!id || _ignoreAction(id)) continue; $ax.repeater.addSort(id, addSortInfo.label, addSortInfo.columnName, addSortInfo.ascending, addSortInfo.toggle, addSortInfo.sortType); _addRefresh(id); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.removeSortFromRepeater = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.repeatersToRemoveSort.length; i++) { var removeSortInfo = action.repeatersToRemoveSort[i]; // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(removeSortInfo.path, eventInfo)[0]; if(!id || _ignoreAction(id)) continue; if(removeSortInfo.removeAll) $ax.repeater.removeSort(id); else if(removeSortInfo.sortName != '') $ax.repeater.removeSort(id, removeSortInfo.sortName); _addRefresh(id); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.setRepeaterToPage = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.repeatersToSetPage.length; i++) { var setPageInfo = action.repeatersToSetPage[i]; // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(setPageInfo.path, eventInfo)[0]; if(!id || _ignoreAction(id)) continue; var oldTarget = eventInfo.targetElement; eventInfo.targetElement = id; $ax.repeater.setRepeaterToPage(id, setPageInfo.pageType, setPageInfo.pageValue, eventInfo); eventInfo.targetElement = oldTarget; _addRefresh(id); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.setItemsPerRepeaterPage = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.repeatersToSetItemCount.length; i++) { var setItemCountInfo = action.repeatersToSetItemCount[i]; // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(setItemCountInfo.path, eventInfo)[0]; if(!id || _ignoreAction(id)) continue; if(setItemCountInfo.noLimit) $ax.repeater.setNoItemLimit(id); else $ax.repeater.setItemLimit(id, setItemCountInfo.itemCountValue, eventInfo); _addRefresh(id); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.refreshRepeater = function(eventInfo, actions, index) { // We use this as a psudo action now. var action = actions[index]; for (var i = 0; i < action.repeatersToRefresh.length; i++) { // Grab the first one because repeaters must have only element id, as they cannot be inside repeaters // or none if unplaced var id = $ax.getElementIdsFromPath(action.repeatersToRefresh[i], eventInfo)[0]; if(id) _tryRefreshRepeater(id, eventInfo); } _dispatchAction(eventInfo, actions, index + 1); }; var _tryRefreshRepeater = function(id, eventInfo) { var idIndex = _repeatersToRefresh.indexOf(id); if(idIndex == -1) return; $ax.splice(_repeatersToRefresh, idIndex, 1); $ax.repeater.refreshRepeater(id, eventInfo); }; _action.tryRefreshRepeaters = function(ids, eventInfo) { for(var i = 0; i < ids.length; i++) _tryRefreshRepeater(ids[i], eventInfo); }; _actionHandlers.scrollToWidget = function(eventInfo, actions, index) { var action = actions[index]; var elementIds = $ax.getElementIdsFromPath(action.objectPath, eventInfo); if(elementIds.length > 0) $ax('#' + elementIds[0]).scroll(action.options); _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.enableDisableWidgets = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.pathToInfo.length; i++) { var elementIds = $ax.getElementIdsFromPath(action.pathToInfo[i].objectPath, eventInfo); var enable = action.pathToInfo[i].enableDisableInfo.enable; for(var j = 0; j < elementIds.length; j++) $ax('#' + elementIds[j]).enabled(enable); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.setImage = function(eventInfo, actions, index) { var oldTarget = eventInfo.targetElement; var action = actions[index]; var view = $ax.adaptive.currentViewId; eventInfo.image = true; for(var i = 0; i < action.imagesToSet.length; i++) { var imgInfo = action.imagesToSet[i]; imgInfo = view ? imgInfo.adaptive[view] : imgInfo.base; var elementIds = $ax.getElementIdsFromPath(action.imagesToSet[i].objectPath, eventInfo); for(var j = 0; j < elementIds.length; j++) { var elementId = elementIds[j]; eventInfo.targetElement = elementId; var evaluatedImgs = _evaluateImages(imgInfo, eventInfo); var img = evaluatedImgs.normal; if($ax.style.IsWidgetDisabled(elementId)) { if(imgInfo.disabled) img = evaluatedImgs.disabled; } else if($ax.style.IsWidgetSelected(elementId)) { if(imgInfo.selected) img = evaluatedImgs.selected; } else if($ax.event.mouseDownObjectId == elementId && imgInfo.mouseDown) img = evaluatedImgs.mouseDown; else if($ax.event.mouseOverIds.indexOf(elementId) != -1 && imgInfo.mouseOver) { img = evaluatedImgs.mouseOver; //Update mouseOverObjectId var currIndex = $ax.event.mouseOverIds.indexOf($ax.event.mouseOverObjectId); var imgIndex = $ax.event.mouseOverIds.indexOf(elementId); if(currIndex < imgIndex) $ax.event.mouseOverObjectId = elementId; } else if(imgInfo.mouseOver && elementId == eventInfo.srcElement) { img = evaluatedImgs.mouseOver; } // $('#' + $ax.repeater.applySuffixToElementId(elementId, '_img')).attr('src', img); $jobj($ax.GetImageIdFromShape(elementId)).attr('src', img); //Set up overrides $ax.style.mapElementIdToImageOverrides(elementId, evaluatedImgs); $ax.style.updateElementIdImageStyle(elementId); if(evaluatedImgs.mouseOver || evaluatedImgs.mouseDown) $ax.event.updateIxStyleEvents(elementId); } } eventInfo.targetElement = oldTarget; eventInfo.image = false; _dispatchAction(eventInfo, actions, index + 1); }; var _evaluateImages = function(imgInfo, eventInfo) { var retVal = {}; for(var state in imgInfo) { if(!imgInfo.hasOwnProperty(state)) continue; var img = imgInfo[state][$ax.adaptive.getSketchKey()] || $ax.expr.evaluateExpr(imgInfo[state].literal, eventInfo); if(!img) img = $axure.utils.getTransparentGifPath(); retVal[state] = img; } return retVal; }; $ax.clearRepeaterImageOverrides = function(repeaterId) { var childIds = $ax.getChildElementIdsForRepeater(repeaterId); for(var i = childIds; i < childIds.length; i++) $ax.style.deleteElementIdToImageOverride(childIds[i]); }; _actionHandlers.setFocusOnWidget = function(eventInfo, actions, index) { var action = actions[index]; if(action.objectPaths.length > 0) { var elementIds = $ax.getElementIdsFromPath(action.objectPaths[0], eventInfo); if(elementIds.length > 0) { $ax('#' + elementIds[0]).focus(); //if select text and not in placeholder mode, then select all text if(action.selectText && !$ax.placeholderManager.isActive(elementIds[0])) { var elementChildren = document.getElementById(elementIds[0]).children; //find the input or textarea element for(var i = 0; i < elementChildren.length; i++) { if (elementChildren[i].id.indexOf('_input') == -1) continue; var elementTagName = elementChildren[i].tagName; if(elementTagName && (elementTagName.toLowerCase() == \"input\" || elementTagName.toLowerCase() == \"textarea\")) { elementChildren[i].select(); } } } } } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.expandCollapseTree = function(eventInfo, actions, index) { var action = actions[index]; for(var i = 0; i < action.pathToInfo.length; i++) { var pair = action.pathToInfo[i]; var elementIds = $ax.getElementIdsFromPath(pair.treeNodePath, eventInfo); for(var j = 0; j < elementIds.length; j++) $ax('#' + elementIds[j]).expanded(pair.expandCollapseInfo.expand); } _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.other = function(eventInfo, actions, index) { var action = actions[index]; $ax.navigate({ url: $axure.utils.getOtherPath() + \"#other=\" + encodeURI(action.otherDescription), target: \"popup\", includeVariables: false, popupOptions: action.popup }); _dispatchAction(eventInfo, actions, index + 1); }; _actionHandlers.fireEvents = function(eventInfo, actions, index) { var action = actions[index]; //look for the nearest element id var objId = eventInfo.srcElement; var thisWidget = eventInfo.thiswidget; var obj = $ax.getObjectFromElementId(objId); var rdoId = obj ? $ax.getRdoParentFromElementId(objId) : \"\"; var rdo = $ax.getObjectFromElementId(rdoId); var page = rdo ? $ax.pageData.masters[rdo.masterId] : $ax.pageData.page; // Check if rdo should be this var oldIsMasterEvent = eventInfo.isMasterEvent; if (obj && $ax.public.fn.IsReferenceDiagramObject(obj.type) && eventInfo.isMasterEvent) { rdoId = objId; rdo = obj; page = $ax.pageData.masters[rdo.masterId]; } for(var i = 0; i < action.firedEvents.length; i++) { var firedEvent = action.firedEvents[i]; var isPage = firedEvent.objectPath.length == 0; var targetObjIds = isPage ? [rdoId] : $ax.getElementIdsFromPath(firedEvent.objectPath, eventInfo); for (var j = 0; j < targetObjIds.length; j++) { var targetObjId = targetObjIds[j]; var targetObj = isPage ? rdo : $ax.getObjectFromElementId(targetObjId); eventInfo.srcElement = targetObjId || ''; eventInfo.thiswidget = $ax.getWidgetInfo(eventInfo.srcElement); eventInfo.isMasterEvent = false; var raisedEvents = firedEvent.raisedEventIds; if(raisedEvents) { for(var k = 0; k < raisedEvents.length; k++) { var event = targetObj.interactionMap && targetObj.interactionMap.raised && targetObj.interactionMap.raised[raisedEvents[k]]; if(event) $ax.event.handleEvent(targetObjId, eventInfo, event, false, true); } } if(isPage) { eventInfo.isMasterEvent = true; eventInfo.label = $ax.pageData.page.name; eventInfo.friendlyType = 'Page'; } var firedTarget = isPage ? page : targetObj; var firedEventNames = firedEvent.firedEventNames; if(firedEventNames) { for(k = 0; k < firedEventNames.length; k++) { event = firedTarget.interactionMap && firedTarget.interactionMap[firedEventNames[k]]; if(event) $ax.event.handleEvent(isPage ? '' : targetObjId, eventInfo, event, false, true); } } if(isPage) eventInfo.isMasterEvent = oldIsMasterEvent; } eventInfo.srcElement = objId; eventInfo.thiswidget = thisWidget; eventInfo.isMasterEvent = oldIsMasterEvent; } _dispatchAction(eventInfo, actions, index + 1); }; }); //***** expr.js *****// // ******* Expr MANAGER ******** // $axure.internal(function($ax) { var _expr = $ax.expr = {}; var _binOpHandlers = { '&&': function(left, right) { return _binOpOverride(left, right, function(left) { return $ax.getBool(left) && $ax.getBool(right()); }); }, '||': function(left, right) { return _binOpOverride(left, right, function(left) { return $ax.getBool(left) || $ax.getBool(right()); }); }, '==': function(left, right) { return isEqual(left, right, true); }, '!=': function(left, right) { return !isEqual(left, right, true); }, '>': function(left, right) { return _binOpNum(left, right, function(left, right) { return left > right; }); }, '=': function(left, right) { return _binOpNum(left, right, function(left, right) { return left >= right; }); }, '"}],"posts":[{"title":"ËÅäËÅäreact fiberÊû∂ÊûÑ","slug":"ËÅäËÅäreact fiberÊû∂ÊûÑ","date":"2021-05-01T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2021/05/02/ËÅäËÅäreact fiberÊû∂ÊûÑ/","permalink":"https://justsso1.github.io/2021/05/02/%E8%81%8A%E8%81%8Areact%20fiber%E6%9E%B6%E6%9E%84/","excerpt":"","text":"Êú¨ÁØáÊñáÁ´†ÁöÑÂ§ßÁ∫≤‰πüÂ∞±ÊòØÂÜô‰ΩúÁöÑÊÄùË∑ØÂ¶Ç‰∏ãÔºö react fiberÊû∂ÊûÑÊòØ‰ªÄ‰πàÔºü react fiberÂá∫Áé∞ÁöÑÊó∂Èó¥ËäÇÁÇπ ‰∏∫‰ªÄ‰πàË¶ÅÊúâfiberÊû∂ÊûÑÔºåËß£ÂÜ≥‰∫Ü‰ªÄ‰πàÈóÆÈ¢òÔºü react fiberÊû∂ÊûÑÊòØÊÄé‰πàÂÅöÁöÑÔºüÂÆûÁé∞ÂéüÁêÜ react fiberÊòØ‰∏ÄÁßçË°®Á§∫reactËäÇÁÇπÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÁé∞Âú®Êàë‰ª¨ÊâÄËØ¥ÁöÑreact fiberÈÄöÂ∏∏ÊòØÊåá‰∏ÄÁßçÊû∂ÊûÑÔºåreactÂú®16ÁâàÊú¨‰ª•ÂêéÈááÁî®fiberÊû∂ÊûÑ react fiberÊòØÂú®v16Âá∫Áé∞ÁöÑÔºåÈáçÂÜô‰∫Üv15‰∏≠ÁöÑÂ∫ïÂ±ÇÔºåÂπ∂‰∏îÂØπÂ§ñËæìÂá∫ÁöÑapi‰øùÊåÅ‰∏çÂèò„ÄÇ ÈÇ£‰πàv15Êúâ‰ªÄ‰πàÈóÆÈ¢òÂë¢ÔºåÊâç‰ºöË¢´Êé®ÁøªÔºåË¢´fiberÊû∂ÊûÑÂèñ‰ª£„ÄÇ v15‰∏≠ÁöÑrenderÊ∏≤ÊüìÊòØÊ†àË∞ÉÂíåÁöÑÔºåÂü∫‰∫éÊ†àÂíåÊ∑±Â∫¶ÈÄíÂΩíÔºå‰∏ÄÁõ¥ÈÄíÂΩíÂà∞ÊúÄÂ∫ïÂ±ÇÊâç‰ºöËøîÂõûÔºåÂ¶ÇÊûúÊâßË°åÁöÑÊó∂Èó¥Ë∂ÖËøá16ms(ÊµèËßàÂô®1s60Â∏ß)ÔºåÂ∞±‰ºöÂá∫Áé∞Âç°È°øÁé∞Ë±°„ÄÇÊâÄ‰ª•ÂøÖÈ°ªË¶ÅËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇÊàë‰ª¨Â∏åÊúõreactË∞ÉÂíåÊòØÊÄéÊ†∑ÁöÑÂë¢ÔºåÊàë‰ª¨Â∏åÊúõÂÆÉÂèØ‰ª•ÊöÇÂÅúÔºåÂú®ÂΩìÂâçÂèØÁî®Êó∂Èó¥Â∞è‰∫é‰∏ÄÂ∏ßÁöÑÊÉÖÂÜµ‰∏ãÔºåÊöÇÂÅúÔºåÁÑ∂ÂêéËøòËÉΩÁªßÁª≠ÊÅ¢Â§ç„ÄÇÁÑ∂ÂêéËøòÊúâÂú®ÊúâÊõ¥È´ò‰ºòÂÖàÁ∫ßÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Â∏åÊúõÂÆÉÂèØ‰ª•ÂÖàÂéªÂ§ÑÁêÜÊõ¥È´ò‰ºòÂÖàÁ∫ßÔºåÂ§ÑÁêÜÂÆå‰∫Ü‰πãÂêéÂÜçÊù•Êé•ÁùÄÂ§ÑÁêÜËøô‰∏™ÈóÆÈ¢ò„ÄÇÂü∫‰∫éÊàë‰ª¨ÊÉ≥Ë¶ÅÂÆûÁé∞ÁöÑÊïàÊûúÔºåreactÈááÁî®‰∫ÜÊõ¥ÂÖàËøõÁöÑÁêÜÂøµÔºåÁ∫§Á®ãÔºàÊØîÁ∫øÁ®ãÊõ¥Â∞èÁöÑÂçï‰ΩçÔºâÔºåËá™Â∑±ÂÆûÁé∞Á∫§Á®ãÔºåÂÅöÂà∞ÂèØ‰ª•ÊöÇÂÅúÔºåÂèØ‰ª•ÁªßÁª≠ÁöÑÊû∂ÊûÑÔºåËøôÂ∫ïÂ±ÇÁöÑÁªìÊûÑÂ∞±Âè´fiber ÈÇ£‰πàfiberÊòØÊÄé‰πàÂÅöÁöÑÂë¢ÔºåÂèØ‰ª•ÂÆûÁé∞ÂèØ‰∏≠Êñ≠„ÄÅÂèØÁªßÁª≠„ÄÇfiberÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜ renderÂíåcommitÈò∂ÊÆµÔºårenderÈò∂ÊÆµÊòØÂèØ‰ª•ÂÅú‰∏ãÊù•ÔºåÂÜçÊé•ÁùÄÊâßË°åÁöÑÔºåÊâÄ‰ª•ÂèØËÉΩ‰ºöË¢´ÊâßË°åÂ§öÊ¨°ÔºåËÄåcommit‰ºöÂíåÂ∫ïÂ±ÇÁöÑdomÊìç‰ΩúÊúâÂÖ≥ÔºåÊòØ‰∏çËÉΩË¢´ÂÅú‰∏ãÊù•ÁöÑ„ÄÇ ÈöèÁùÄfiberÊû∂ÊûÑÊÄùÊÉ≥ÁöÑÂá∫Áé∞ÔºåfiberËøòÂ∏¶Êù•‚ÄùÂë®Ëæπ‚ÄúÁöÑÂèòÂåñÔºåÈÇ£Â∞±ÊòØÁîüÂëΩÂë®ÊúüÁöÑÂèòÂåñÔºåÁõ¥Êé•ËØ¥ÊòØ react 15‰∏≠ÁöÑcompomentWillDidMount componentWillUpdate componentWillRecivedProps Âõ†‰∏∫Ëøô‰∏â‰∏™ÁîüÂëΩÂë®ÊúüÊòØÂú®renderÈò∂ÊÆµÔºåÂèàÂèØËÉΩ‰ºöË¢´ÈáçÂ§çÊâßË°åÔºåËÄåÂºÄÂèëËÄÖÂèàÊúâÊó∂‰ºöÊª•Áî®ÔºåÊää‰∏Ä‰∫õÂâØ‰ΩúÁî®ÁöÑ‰ª£Á†ÅÂÜôÂú®Ëøô‰∏â‰∏™ÁîüÂëΩÂë®Êúü‰∏≠„ÄÇÊâÄ‰ª•reactÂõ¢ÈòüÂéªÊéâ‰∫ÜËøô‰∏â‰∏™ÁîüÂëΩÂë®ÊúüÔºåÂä†ÂÖ•‰∫ÜgetDerivedStateFromProps getSnapshotBeforUpdate Ëøô‰∏§‰∏™ÈùôÊÄÅÊñπÊ≥ïÔºåÂú®ÈùôÊÄÅÊñπÊ≥ï‰∏≠ÊòØÊãø‰∏çÂà∞thisÁöÑ react hooksÁöÑËÆæËÆ°Âä®Êú∫‰∏éÂ∑•‰ΩúÊ®°Âºè hooksÊòØÂè™ËÉΩÂú®functionÁªÑ‰ª∂‰∏≠‰ΩøÁî®ÔºåÂà∞Áé∞Âú®react Âõ¢ÈòüÈÉΩÊòØÂú®Êé®Â¥á‰ΩøÁî®functionÁªÑ‰ª∂ÁöÑ„ÄÇÈÇ£‰πà‰∏∫‰ªÄ‰πàÊòØfunction ÁªÑ‰ª∂‰∫ÜÂë¢ÔºüÂõ†‰∏∫functionÁªÑ‰ª∂Êõ¥Âä†Á¨¶ÂêàreactÁöÑÁêÜÂøµÔºåÈÇ£Â∞±ÊòØ UI &#x3D; f(data)ÔºåÂú®function ‰∏≠Ê∏≤ÊüìÂèØ‰ª•ËØªÂèñÂà∞data„ÄÇÂáΩÊï∞ÁªÑ‰ª∂‰ºöÊçïËé∑renderÂÜÖÈÉ®ÁöÑÁä∂ÊÄÅÔºåËøôÊòØÂíåclassÁªÑ‰ª∂ÊúÄÂ§ßÁöÑ‰∏çÂêå„ÄÇ HooksÊú¨Ë¥®:‰∏ÄÂ•óËÉΩÂ§ü‰ΩøÂáΩÊï∞ÁªÑ‰ª∂Êõ¥Âº∫Â§ß„ÄÅÊõ¥ÁÅµÊ¥ªÁöÑ‚ÄùÈí©Â≠ê‚Äú ÂáΩÊï∞ÁªÑ‰ª∂ÊØîËµ∑Á±ªÁªÑ‰ª∂‚ÄùÂ∞ë‚Äù‰∫ÜÂæàÂ§ö‰∏úË•øÔºåÊØîÂ¶ÇÁîüÂëΩÂë®Êúü„ÄÅÂØπstateÁöÑÁÆ°ÁêÜ„ÄÇReact-HooksÁöÑÂá∫Áé∞ÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÂ∏ÆÂä©ÂáΩÊï∞ÁªÑ‰ª∂Ë°•ÈΩêËøô‰∫õÔºàÁõ∏ÂØπ‰∫éÁ±ªÁªÑ‰ª∂Êù•ËØ¥Ôºå‰ΩÜÁîüÂëΩÂë®ÊúüËøô‰∫õ‰πü‰∏çÊòØÂøÖÈ°ªÔºåÂè™ÊòØÂÆåÊàê‰∏Ä‰ª∂‰∫ãÊÉÖÁöÑÊ≠•È™§‰ª£Âè∑ËÄåÂ∑≤Ôºâ","categories":[],"tags":[]},{"title":"„ÄêËΩ¨ËΩΩ„ÄëJavaScriptÊ®°ÂùóÁÆÄÂè≤","slug":"„ÄêËΩ¨ËΩΩ„ÄëJavaScriptÊ®°ÂùóÁÆÄÂè≤","date":"2020-08-08T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2020/08/09/„ÄêËΩ¨ËΩΩ„ÄëJavaScriptÊ®°ÂùóÁÆÄÂè≤/","permalink":"https://justsso1.github.io/2020/08/09/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91JavaScript%E6%A8%A1%E5%9D%97%E7%AE%80%E5%8F%B2/","excerpt":"","text":"‰Ω†ÊòØÂê¶ÊòØ JavaScript Êñ∞ÊâãÔºüÂπ∂‰∏îÂØπÊ®°ÂùóÔºåÊ®°ÂùóÂä†ËΩΩÂô®ÂíåÊ®°ÂùóÊâìÂåÖÂô®ÊÑüÂà∞Âõ∞ÊÉëÂêóÔºüÊàñËÄÖ‰Ω†Â∑≤ÁªèÁºñÂÜô‰∫Ü‰∏ÄÊÆµÊó∂Èó¥ÁöÑ JavaScript Ôºå‰ΩÜÊòØÊ≤°Ê≥ïÊéåÊè°Ê®°ÂùóÁöÑ‰∏Ä‰∫õÊúØËØ≠Ôºü‰Ω†ÊòØÂê¶Âê¨Ëøá CommonJS„ÄÅAMD„ÄÅBrowserify„ÄÅSystemJS„ÄÅWebpack„ÄÅJSPM Á≠âÁ≠âÊúØËØ≠Ôºå‰ΩÜÊòØ‰∏çÁêÜËß£Êàë‰ª¨‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂÆÉ‰ª¨Ôºü Êàë‰ºöËØïÁùÄËß£Èáä‰ªñ‰ª¨ÊòØ‰ªÄ‰πàÔºå‰ªñ‰ª¨ËØïÂõæËß£ÂÜ≥‰ªÄ‰πàÈóÆÈ¢òÔºå‰ª•Âèä‰ªñ‰ª¨Â¶Ç‰ΩïËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ Á§∫‰æãÂ∫îÁî®Á®ãÂ∫è (ËØ•Âõæ‰∏∫Â∫îÁî®Á®ãÂ∫èËøêË°åÁïåÈù¢) Âú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàëÂ∞Ü‰ΩøÁî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑ web Â∫îÁî®Á®ãÂ∫èÊù•ÊºîÁ§∫Ê®°ÂùóÁöÑÊ¶ÇÂøµ„ÄÇÂ∫îÁî®Á®ãÂ∫èÂú®ÊµèËßàÂô®‰∏≠ÊòæÁ§∫Êï∞ÁªÑÁöÑÂíå„ÄÇËØ•Â∫îÁî®Á®ãÂ∫èÁî±4‰∏™ÂáΩÊï∞Âíå‰∏Ä‰∏™ index.htmlÊñá‰ª∂ÁªÑÊàê„ÄÇ(ËØ•Âõæ‰∏∫ÂáΩÊï∞ÁöÑ‰æùËµñÁ§∫ÊÑèÂõæ) main ÂáΩÊï∞ËÆ°ÁÆóÊï∞ÁªÑ‰∏≠Êï∞Â≠óÁöÑÂíåÔºåÁÑ∂ÂêéÊääÁ≠îÊ°àÊòæÁ§∫Âú® span#answer ‰∏≠„ÄÇsum ÂáΩÊï∞‰æùËµñ‰∫é‰∏§‰∏™ÂáΩÊï∞Ôºöadd Âíå reduce„ÄÇadd ÂáΩÊï∞ÂÅöÂÆÉÂêçÂ≠óÊâÄÂÅöÁöÑÊìç‰ΩúÔºõÊää‰∏§‰∏™Êï∞Áõ∏Âä†„ÄÇreduce ÂáΩÊï∞ÈÅçÂéÜÊï∞ÁªÑÔºåÂπ∂‰∏îË∞ÉÁî® iteratee ÂõûË∞ÉÂáΩÊï∞„ÄÇ Ëä±ÁÇπÊó∂Èó¥ÁêÜËß£‰∏ãÈù¢ÁöÑ‰ª£Á†Å„ÄÇÊàëÂ∞Ü‰ºöÈáçÂ§çÂ§öÊ¨°‰ΩøÁî®Áõ∏ÂêåÁöÑÂáΩÊï∞„ÄÇ HTML ‰ª£Á†Å: 12345678910111213&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;JS Modules&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt; The Answer is &lt;span id=&quot;answer&quot;&gt;&lt;/span&gt; &lt;/h1&gt; &lt;/body&gt;&lt;/html&gt; JavaScript ‰ª£Á†Å: 1234// 1-main.js var values = [ 1, 2, 4, 5, 6, 7, 8, 9 ];var answer = sum(values)document.getElementById(&quot;answer&quot;).innerHTML = answer; JavaScript ‰ª£Á†Å: 1234// 2-sum.js function sum(arr)&#123; return reduce(arr, add);&#125; JavaScript ‰ª£Á†Å: 12345// 3-add.js function add(a, b) &#123; return a + b;&#125; JavaScript ‰ª£Á†Å: 12345678910// 4-reduce.js function reduce(arr, iteratee) &#123; var index = 0, length = arr.length, memo = arr[index]; for(index += 1; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]) &#125; return memo;&#125; Êàë‰ª¨Êù•ÁúãÁúãÂ¶Ç‰ΩïÊääËøô‰∫õ‰ª£Á†ÅÁâáÊÆµÊï¥ÂêàÂú®‰∏ÄËµ∑ÔºåÊù•ÊûÑÂª∫‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫è„ÄÇ ‰ΩøÁî®ÂÜÖÂµåËÑöÊú¨ÂÜÖÂµåËÑöÊú¨Â∞±ÊòØÂú® Ê†áËÆ∞‰πãÈó¥Ê∑ªÂä† JavaScript ‰ª£Á†Å„ÄÇËøôÊòØÊàëÂºÄÂßãÂ≠¶ JavaScript Êó∂ÁöÑÂÅöÊ≥ï„ÄÇÊàëÁõ∏‰ø°Â§ßÂ§öÊï∞ JavaScript ÂºÄÂèëËÄÖÂú®ÂÖ∂ÁîüÂëΩ‰∏≠Ëá≥Â∞ëÂÅöËøá‰∏ÄÊ¨°ËøôÊ†∑ÁöÑ‰∫ãÊÉÖ„ÄÇ ËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÂÖ•Èó®ÂäûÊ≥ï„ÄÇÊ≤°ÊúâÂ§ñÈÉ®Êñá‰ª∂Êàñ‰æùËµñÂÖ≥Á≥ªÈúÄË¶ÅÊãÖÂøÉ„ÄÇ‰ΩÜÊòØËøô‰πüÂØºËá¥‰∫Ü‰∏çÂèØÁª¥Êä§ÁöÑ‰ª£Á†ÅÔºåÂõ†‰∏∫Ôºö Áº∫‰πè‰ª£Á†ÅÂèØÈáçÁî®ÊÄßÔºöÂ¶ÇÊûúÈúÄË¶ÅÊ∑ªÂä†Âè¶‰∏Ä‰∏™È°µÈù¢ÔºåÈúÄË¶Å‰ªéËøô‰∏™È°µÈù¢‰∏≠Ëé∑Âæó‰∏Ä‰∫õÂáΩÊï∞ÔºåÊàë‰ª¨Â∞±‰∏çÂæó‰∏çÂ§çÂà∂Á≤òË¥¥‰ª£Á†Å„ÄÇÁº∫‰πè‰æùËµñËß£ÊûêÔºö‰Ω†ÂøÖÈ°ª‰øùËØÅ main ÂáΩÊï∞‰πãÂâçÂ∑≤ÁªèÊ∑ªÂä†‰∫Ü add„ÄÅreduce Âíå sum ÂáΩÊï∞„ÄÇÂÖ®Â±ÄÂëΩÂêçÁ©∫Èó¥Ê±°ÊüìÔºöÊâÄÊúâÁöÑÂáΩÊï∞ÂíåÂèòÈáèÂ∞ÜÈÉΩÂ∞ÜÈ©ªÁïôÂú®ÂÖ®Â±Ä‰ΩúÁî®Âüü‰∏≠„ÄÇ HTML ‰ª£Á†Å: 123456789101112131415161718192021222324252627282930313233343536&lt;!-- index.html --&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;JS Modules&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt; The Answer is &lt;span id=&quot;answer&quot;&gt;&lt;/span&gt; &lt;/h1&gt; &lt;script type=&quot;text/javascript&quot;&gt; function add(a, b) &#123; return a + b; &#125; function reduce(arr, iteratee) &#123; var index = 0, length = arr.length, memo = arr[index]; for(index += 1; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]) &#125; return memo; &#125; function sum(arr)&#123; return reduce(arr, add); &#125; /* Main Function */ var values = [ 1, 2, 4, 5, 6, 7, 8, 9 ]; var answer = sum(values) document.getElementById(&quot;answer&quot;).innerHTML = answer; &lt;/script&gt; &lt;/body&gt;&lt;/html&gt; Script Ê†áÁ≠æÂºïÂÖ• JavaScript Êñá‰ª∂ËøôÊòØ‰ªéÂµåÂÖ•ËÑöÊú¨ÁöÑ‰∏Ä‰∏™Ëá™ÁÑ∂ËøáÊ∏°„ÄÇÁé∞Âú®Êàë‰ª¨Â∞ÜÂ§ßÊÆµÁöÑ JavaScript ÂàÜÊàêÊõ¥Â∞èÁöÑ‰ª£Á†ÅÁâáÊÆµÔºåÂπ∂Áî® Ê†áÁ≠æÂä†ËΩΩÂÆÉ‰ª¨„ÄÇ ÈÄöËøáÂ∞ÜÊñá‰ª∂ÂàÜÊàêÂ§ö‰∏™ JavaScript Êñá‰ª∂ÔºåÊàë‰ª¨ÂèØ‰ª•ÈáçÁî®Ëøô‰∫õ‰ª£Á†Å„ÄÇÊàë‰ª¨‰∏çÂÜçÈúÄË¶ÅÂú®‰∏çÂêåÁöÑ html È°µÈù¢‰πãÈó¥Â§çÂà∂ÂíåÁ≤òË¥¥‰ª£Á†Å„ÄÇÊàë‰ª¨Âè™ÈúÄË¶ÅÂ∞ÜËØ•Êñá‰ª∂Áî® script Ê†áÁ≠æÂä†ËΩΩÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÂ∞ΩÁÆ°ËøôÊòØÊõ¥Â•ΩÁöÑÊñπÊ≥ïÔºå‰ΩÜ‰ªçÁÑ∂Êúâ‰ª•‰∏ãÈóÆÈ¢òÔºö Áº∫‰πè‰æùËµñËß£ÊûêÔºöÊñá‰ª∂ÁöÑÈ°∫Â∫èÂæàÈáçË¶Å„ÄÇ‰Ω†ÂøÖÈ°ª‰øùËØÅÂú®Âä†ËΩΩ main.js Êñá‰ª∂‰πãÂâçÂ∑≤Áªè\bÂä†ËΩΩ‰∫Ü add.js„ÄÅreduce.js Âíå sum.js Êñá‰ª∂„ÄÇ ÂÖ®Â±ÄÂëΩ‰ª§Á©∫Èó¥Ê±°ÊüìÔºöÊâÄÊúâÁöÑÂáΩÊï∞ÂíåÂèòÈáè‰æùÁÑ∂Âú®ÂÖ®Â±Ä‰ΩúÁî®Âüü‰∏≠„ÄÇ HTML ‰ª£Á†Å: 12345678910111213141516171819&lt;!-- 0-index.html --&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;JS Modules&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt; The Answer is &lt;span id=&quot;answer&quot;&gt;&lt;/span&gt; &lt;/h1&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;./add.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;./reduce.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;./sum.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;./main.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; JavaScript ‰ª£Á†Å: 12//add.jsfunction add(a, b) &#123; return a + b;&#125; JavaScript ‰ª£Á†Å: 123456789101112//reduce.jsfunction reduce(arr, iteratee) &#123; var index = 0, length = arr.length, memo = arr[index]; index += 1; for(; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]) &#125; return memo;&#125; JavaScript ‰ª£Á†Å: 1234//sum.jsfunction sum(arr)&#123; return reduce(arr, add);&#125; JavaScript ‰ª£Á†Å: 1234// main.jsvar values = [ 1, 2, 4, 5, 6, 7, 8, 9 ];var answer = sum(values)document.getElementById(&quot;answer&quot;).innerHTML = answer; Ê®°ÂùóÂØπË±°Âíå IIFE(Ê®°ÂùóÊ®°Âºè)ÈÄöËøá‰ΩøÁî®Ê®°ÂùóÂØπË±°Âíå Á´ãÂç≥Ë∞ÉÁî®ÁöÑÂáΩÊï∞Ë°®ËææÂºè(IIFE) ÔºåÊàë‰ª¨ÂèØ‰ª•ÂáèÂ∞ëÂØπÂÖ®Â±Ä‰ΩúÁî®ÂüüÁöÑÊ±°Êüì„ÄÇÂú®ËøôÁßçÊñπÊ≥ï‰∏≠ÔºåÊàë‰ª¨Âè™ÂêëÂÖ®Â±Ä‰ΩúÁî®ÂüüÂÖ¨ÂºÄ‰∏Ä‰∏™ÂØπË±°„ÄÇËØ•ÂØπË±°ÂåÖÂê´‰∫ÜÊàë‰ª¨Âú®Â∫îÁî®Á®ãÂ∫è‰∏≠ÈúÄË¶ÅÁöÑÊâÄÊúâÊñπÊ≥ïÂíåÂÄº„ÄÇÂú®Êú¨‰æã‰∏≠ÔºåÊàë‰ª¨Âè™ÂêëÂÖ®Â±Ä‰ΩúÁî®ÂüüÂÖ¨ÂºÄ‰∫Ü myApp ÂØπË±°„ÄÇÊâÄÊúâÁöÑÂáΩÊï∞ÈÉΩÂ∞ÜË¢´‰øùÂ≠òÂú® myApp ÂØπË±°‰∏≠„ÄÇ JavaScript ‰ª£Á†Å: 12// 01-my-app.js var myApp = &#123;&#125;; JavaScript ‰ª£Á†Å: 123456// 02-add.js(function()&#123; myApp.add = function(a, b) &#123; return a + b; &#125; &#125;)(); JavaScript ‰ª£Á†Å: 1234567891011121314// 03-reduce.js (function()&#123; myApp.reduce = function(arr, iteratee) &#123; var index = 0, length = arr.length, memo = arr[index]; index += 1; for(; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]) &#125; return memo; &#125; &#125;)(); JavaScript ‰ª£Á†Å: 123456// 04-sum.js(function()&#123; myApp.sum = function(arr)&#123; return myApp.reduce(arr, myUtil.add); &#125; &#125;)(); JavaScript ‰ª£Á†Å: 123456// 05-main.js(function(app)&#123; var values = [ 1, 2, 4, 5, 6, 7, 8, 9 ]; var answer = app.sum(values) document.getElementById(&quot;answer&quot;).innerHTML = answer;&#125;)(myApp); HTML ‰ª£Á†Å: 1234567891011121314151617181920&lt;!-- 06-index.html --&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;JS Modules&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt; The Answer is &lt;span id=&quot;answer&quot;&gt;&lt;/span&gt; &lt;/h1&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;./my-app.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;./add.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;./reduce.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;./sum.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;./main.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; ËØ∑Ê≥®ÊÑèÔºåÈô§‰∫Ü my-app.js ‰πãÂ§ñÔºåÂÖ∂ÂÆÉÊØè‰∏™Êñá‰ª∂ÈÉΩË¢´Â∞ÅË£ÖÊàê‰∫Ü IIFE Ê†ºÂºè„ÄÇ JavaScript ‰ª£Á†Å: 12// Á´ãÂç≥Ë∞ÉÁî®ÁöÑÂáΩÊï∞Ë°®ËææÂºè(IIFE) Ê†ºÂºè(function()&#123; /*... your code goes here ...*/ &#125;)(); ÈÄöËøáÂ∞ÜÊØè‰∏™Êñá‰ª∂Â∞ÅË£ÖÂà∞ IIFE ‰∏≠ÔºåÊâÄÊúâÁöÑÊú¨Âú∞ÂèòÈáèÈÉΩ‰øùÁïôÂú®ÂáΩÊï∞‰ΩúÁî®ÂüüÂÜÖ„ÄÇÂõ†Ê≠§ÔºåÂáΩÊï∞‰∏≠ÁöÑÊâÄÊúâÂèòÈáèÈÉΩÂ∞Ü‰øùÊåÅÂú®ÂáΩÊï∞‰ΩúÁî®ÂüüÂÜÖÔºåËÄå‰∏ç‰ºöÊ±°ÊüìÂÖ®Â±Ä‰ΩúÁî®Âüü„ÄÇ Êàë‰ª¨ÈÄöËøáÂ∞ÜÂÆÉ‰ª¨ÈôÑÂä†Âà∞myAppÂØπË±°Êù•ÂÖ¨ÂºÄÊ∑ªÂä†„ÄÅÂáèÂ∞ëÂíåsumÂáΩÊï∞„ÄÇÊàë‰ª¨ÈÄöËøáÂºïÁî®myAppÂØπË±°Êù•ËÆøÈóÆËøô‰∫õÂáΩÊï∞ Êàë‰ª¨ÈÄöËøáÂ∞Ü add„ÄÅreduce Âíå sum ÂáΩÊï∞ÈôÑÂä†Âú® myApp ÂØπË±°‰∏äÔºå‰ªéËÄåÂØπÂ§ñÂÖ¨ÂºÄÂÆÉ‰ª¨„ÄÇÊàë‰ª¨ÈÄöËøáÂºïÁî® myApp ÂØπË±°Êù•ËÆøÈóÆËøô‰∫õÂáΩÊï∞Ôºö JavaScript ‰ª£Á†Å: 123myApp.add(1,2);myApp.sum([1,2,3,4]);myApp.reduce(add, value); Êàë‰ª¨ËøòÂèØ‰ª•ÈÄöËøá IIFE ÁöÑÂèÇÊï∞Ôºå‰º†ÈÄí myApp ÂÖ®Â±ÄÂØπË±°ÔºåÂ∞±ÂÉè main.js Êñá‰ª∂‰∏≠ÊâÄÁ§∫‰∏ÄÊ†∑„ÄÇÈÄöËøáÂ∞ÜËØ•ÂØπË±°‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíÁªô IIFE ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•‰∏∫ËØ•ÂØπË±°ÈÄâÊã©‰∏Ä‰∏™ËæÉÁü≠ÁöÑÂà´Âêç„ÄÇËÄåÊàë‰ª¨ÁöÑ‰ª£Á†Å‰ºöÊõ¥ÁÆÄÊ¥Å‰∏Ä‰∫õ„ÄÇ JavaScript ‰ª£Á†Å: 123(function(obj)&#123; // obj is new veryLongNameOfGlobalObject&#125;)(veryLongNameOfGloablObject); ‰∏éÂâçÈù¢ÁöÑ‰æãÂ≠êÁõ∏ÊØîÔºåIIFE ÊòØ‰∏Ä‰∏™Â∑®Â§ßÁöÑÊîπËøõ„ÄÇÂ§ßÂ§öÊï∞ÊµÅË°åÁöÑ JavaScript Â∫ìÔºåÂ¶Ç jQuery ÔºåÈÉΩ‰ΩøÁî®ËøôÁßçÊ®°Âºè„ÄÇÂÆÉÂÖ¨ÂºÄ‰∫Ü‰∏Ä‰∏™ÂÖ®Â±ÄÂØπË±° $ÔºåÊâÄÊúâÁöÑÂáΩÊï∞ÈÉΩÂú® $ ÂØπË±°‰∏≠„ÄÇ ÁÑ∂ËÄåÔºåËøôÂπ∂‰∏çËÉΩÁÆóÊòØ‰∏Ä‰∏™ÂÆåÁæéÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇËøôÁßçÊñπÊ≥ï‰ªçÁÑ∂Èù¢‰∏¥‰∏é‰∏ä‰∏ÄËäÇÁõ∏ÂêåÁöÑÈóÆÈ¢ò„ÄÇ Áº∫‰πè‰æùËµñËß£ÊûêÔºöÊñá‰ª∂ÁöÑÈ°∫Â∫è‰æùÁÑ∂ÈáçË¶ÅÔºåmyApp.js ÂøÖÈ°ªÂá∫Áé∞Âú®ÊâÄÊúâÂÖ∂ÂÆÉÊñá‰ª∂‰πãÂâçÂä†ËΩΩÔºåmain.js ÂøÖÈ°ªÂ§ÑÂú®ÊâÄÊúâÂÖ∂ÂÆÉÂ∫ìÊñá‰ª∂‰πãÂêé„ÄÇ ÂÖ®Â±ÄÂëΩ‰ª§Á©∫Èó¥Ê±°ÊüìÔºöÁé∞Âú®ÂÖ®Â±ÄÂèòÈáèÁöÑÊï∞ÈáèÂèòÊàê‰∫Ü 1Ôºå‰ΩÜÊòØËøò‰∏çÊòØ 0 „ÄÇ CommonJS2009Âπ¥ÔºåÊúâ‰∫∫ËÆ®ËÆ∫Â∞Ü JavaScript ÂºïÂÖ•ÊúçÂä°Âô®Á´Ø„ÄÇÂõ†Ê≠§ ServerJS ËØûÁîü‰∫Ü„ÄÇÈöèÂêéÔºåServerJS Â∞ÜÂÖ∂ÂêçÁß∞Êîπ‰∏∫ CommonJS „ÄÇ CommonJS ‰∏çÊòØ‰∏Ä‰∏™ JavaScript Â∫ì„ÄÇÂÆÉÊòØ‰∏Ä‰∏™Ê†áÂáÜÂåñÁªÑÁªá„ÄÇÂÆÉÂ∞±ÂÉè ECMA Êàñ W3C ‰∏ÄÊ†∑„ÄÇECMA ÂÆö‰πâ‰∫Ü JavaScript ÁöÑËØ≠Ë®ÄËßÑËåÉ„ÄÇW3CÂÆö‰πâ‰∫Ü JavaScript web API ÔºåÊØîÂ¶Ç DOM Êàñ DOM ‰∫ã‰ª∂„ÄÇ CommonJS ÁöÑÁõÆÊ†áÊòØ‰∏∫ web ÊúçÂä°Âô®„ÄÅÊ°åÈù¢ÂíåÂëΩ‰ª§Ë°åÂ∫îÁî®Á®ãÂ∫èÂÆö‰πâ‰∏ÄÂ•óÈÄöÁî®ÁöÑ API „ÄÇ CommonJS ËøòÂÆö‰πâ‰∫ÜÊ®°Âùó API „ÄÇÂõ†‰∏∫Âú®ÊúçÂä°Âô®Â∫îÁî®Á®ãÂ∫è‰∏≠Ê≤°Êúâ HTML È°µÈù¢Âíå Ê†áÁ≠æÔºåÊâÄ‰ª•‰∏∫Ê®°ÂùóÊèê‰æõ‰∏Ä‰∫õÊ∏ÖÊô∞ÁöÑ API ÊòØÂæàÊúâÊÑè‰πâÁöÑ„ÄÇÊ®°ÂùóÈúÄË¶ÅË¢´ÂÖ¨ÂºÄ(export)‰ª•‰æõÂÖ∂ÂÆÉÊ®°Âùó‰ΩøÁî®ÔºåÂπ∂‰∏îÂèØ‰ª•ËÆøÈóÆ(import)„ÄÇÂÆÉÁöÑÂØºÂá∫Ê®°ÂùóËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö JavaScript ‰ª£Á†Å: 1234// add.jsmodule.exports = function add(a, b)&#123; return a+b;&#125; ‰∏äËø∞‰ª£Á†ÅÂÆö‰πâÂíåËæìÂá∫‰∫Ü‰∏Ä‰∏™Ê®°Âùó„ÄÇ‰ª£Á†Å‰øùÂ≠òÂú® add.js Êñá‰ª∂‰∏≠„ÄÇ Ë¶Å‰ΩøÁî®ÊàñÂØºÂÖ• add Ê®°ÂùóÔºåÊÇ®ÈúÄË¶Å require ÂáΩÊï∞Ôºå‰ΩøÁî®Êñá‰ª∂ÂêçÊàñÊ®°ÂùóÂêç‰Ωú‰∏∫ÂèÇÊï∞„ÄÇ‰∏ãÈù¢ÁöÑËØ≠Ê≥ïÊèèËø∞‰∫ÜÂ¶Ç‰ΩïÂ∞Ü‰∏Ä‰∏™Ê®°ÂùóÂØºÂÖ•Âà∞‰ª£Á†Å‰∏≠Ôºö JavaScript ‰ª£Á†Å: 1var add = require(&#x27;./add&#x27;); Â¶ÇÊûúÊÇ®Âú® NodeJS ‰∏äÁºñÂÜô‰∫Ü‰ª£Á†ÅÔºåÈÇ£‰πàËøôÁßçËØ≠Ê≥ïÂèØËÉΩÁúãËµ∑Êù•ÂæàÁÜüÊÇâ„ÄÇËøôÊòØÂõ†‰∏∫ NodeJS ÂÆûÁé∞‰∫Ü CommonJS È£éÊ†ºÁöÑÊ®°ÂùóAPI„ÄÇ ÂºÇÊ≠•Ê®°ÂùóÂÆö‰πâ(AMD)CommonJs È£éÊ†ºÁöÑÊ®°ÂùóÂÆö‰πâÁöÑÈóÆÈ¢òÂú®‰∫éÂÆÉÊòØÂêåÊ≠•ÁöÑ„ÄÇÂΩì‰Ω†Ë∞ÉÁî® var add=require('add'); Êó∂ÔºåÁ≥ªÁªüÂ∞ÜÊöÇÂÅúÔºåÁõ¥Âà∞Ê®°Âùó ÂáÜÂ§á(ready) ÂÆåÊàê„ÄÇËøôÊÑèÂë≥ÁùÄÂΩìÊâÄÊúâÁöÑÊ®°ÂùóÈÉΩÂä†ËΩΩÊó∂ÔºåËøô‰∏ÄË°å‰ª£Á†ÅÂ∞ÜÂÜªÁªìÊµèËßàÂô®(Ê≥®ÔºöÊÑèÊÄù‰∏∫Èô§‰∫ÜÂä†ËΩΩËØ•Êñá‰ª∂ÔºåÊµèËßàÂô®‰ªÄ‰πà‰∫ãÊÉÖ‰πü‰∏çÂÅö)„ÄÇÂõ†Ê≠§ÔºåËøôÂèØËÉΩ‰∏çÊòØ‰∏∫ÊµèËßàÂô®Á´ØÂ∫îÁî®Á®ãÂ∫èÂÆö‰πâÊ®°ÂùóÁöÑÊúÄ‰Ω≥ÊñπÂºè„ÄÇ ‰∏∫‰∫ÜÊääÊúçÂä°Âô®Á´ØÁî®ÁöÑÊ®°ÂùóËØ≠Ê≥ïËΩ¨Êç¢ÁªôÊµèËßàÂô®‰ΩøÁî®ÔºåCommonJS ÊèêÂá∫‰∫ÜÂá†ÁßçÊ®°ÂùóÊ†ºÂºèÔºå‚ÄúModule/Transfer‚Äù „ÄÇÂÖ∂‰∏≠‰πã‰∏ÄÔºåÂç≥ ‚ÄúModule/Transfer/C‚ÄúÔºåÂêéÊù•Êàê‰∏∫ ÂºÇÊ≠•Ê®°ÂùóÂÆö‰πâ(AMD) „ÄÇ AMDÂÖ∑Êúâ‰ª•‰∏ãÊ†ºÂºèÔºö JavaScript ‰ª£Á†Å: 123define([‚Äòadd‚Äô, ‚Äòreduce‚Äô], function(add, reduce)&#123; return function()&#123;...&#125;;&#125;); define ÂáΩÊï∞(ÊàñÂÖ≥ÈîÆÂ≠ó)Â∞Ü‰æùËµñÈ°πÂàóË°®ÂíåÂõûË∞ÉÂáΩÊï∞‰Ωú‰∏∫ÂèÇÊï∞„ÄÇÂõûË∞ÉÂáΩÊï∞ÁöÑÂèÇÊï∞‰∏éÊï∞ÁªÑ‰∏≠ÁöÑ‰æùËµñÊòØÁõ∏ÂêåÁöÑÈ°∫Â∫è„ÄÇËøôÁõ∏ÂΩì‰∫éÂØºÂÖ•Ê®°Âùó„ÄÇÂπ∂‰∏îÂõûË∞ÉÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™ÂÄºÔºåÂç≥ÊòØ‰Ω†ÂØºÂá∫ÁöÑÂÄº„ÄÇ CommonJS Âíå AMD Ëß£ÂÜ≥‰∫ÜÊ®°ÂùóÊ®°Âºè‰∏≠Ââ©‰∏ãÁöÑ‰∏§‰∏™ÈóÆÈ¢òÔºö‰æùËµñËß£Êûê Âíå ÂÖ®Â±Ä‰ΩúÁî®ÂüüÊ±°Êüì „ÄÇÊàë‰ª¨Âè™ÈúÄË¶ÅÂ§ÑÁêÜÊØè‰∏™Ê®°ÂùóÊàñÊØè‰∏™Êñá‰ª∂ÁöÑ‰æùËµñÂÖ≥Á≥ªÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÂπ∂‰∏î‰∏çÂÜçÊúâÂÖ®Â±Ä‰ΩúÁî®ÂüüÊ±°Êüì„ÄÇ RequireJSÂú®Êàë‰ª¨ÁöÑÊµèËßàÂô®Â∫îÁî®Á®ãÂ∫è‰∏≠ÔºåAMD ÂèØ‰ª•ÊääÊàë‰ª¨‰ªé script Ê†áÁ≠æÂíåÂÖ®Â±ÄÊ±°Êüì‰∏≠Ëß£ÊïëÂá∫Êù•„ÄÇÈÇ£‰πàÔºåÊàë‰ª¨ËØ•Â¶Ç‰Ωï‰ΩøÁî®ÂÆÉÂë¢ÔºüËøôÈáå RequireJS Â∞±ÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨‰∫Ü„ÄÇRequireJS ÊòØ‰∏Ä‰∏™ JavaScript Ê®°ÂùóÂä†ËΩΩÂô®(module loader) „ÄÇÂÆÉÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÂºÇÊ≠•Âä†ËΩΩÊ®°Âùó„ÄÇ Â∞ΩÁÆ° RequireJS ÁöÑÂêçÂ≠ó‰∏≠Âê´Êúâ requireÔºå‰ΩÜÊòØÂÆÉÁöÑÁõÆÊ†áÂç¥Âπ∂ÈùûË¶ÅÂéªÊîØÊåÅ CommonJS ÁöÑ require ËØ≠Ê≥ï„ÄÇ‰ΩøÁî® RequireJSÔºåÊÇ®ÂèØ‰ª•ÁºñÂÜô AMD È£éÊ†ºÁöÑÊ®°Âùó„ÄÇ Âú®ÁºñÂÜôËá™Â∑±ÁöÑÂ∫îÁî®Á®ãÂ∫è‰πãÂâçÔºå‰Ω†Â∞Ü‰∏çÂæó‰∏ç‰ªé RequireJS ÁΩëÁ´ô ‰∏ãËΩΩ require.js Êñá‰ª∂„ÄÇÂ¶Ç‰∏ã‰ª£Á†ÅÊòØÁî® RequireJS ÁºñÂÜôÁöÑÁ§∫‰æãÂ∫îÁî®Á®ãÂ∫è„ÄÇ ‰∏ãÈù¢ÊòØ AMD È£éÊ†ºÁöÑÂ∫îÁî®Á®ãÂ∫èÁ§∫‰æãHTML ‰ª£Á†Å: 12345678910111213141516&lt;!-- 0-index.html --&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;JS Modules&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt; The Answer is &lt;span id=&quot;answer&quot;&gt;&lt;/span&gt; &lt;/h1&gt; &lt;script data-main=&quot;main&quot; src=&quot;require.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; JavaScript ‰ª£Á†Å: 123456// main.jsdefine([&#x27;sum&#x27;], function(sum)&#123; var values = [ 1, 2, 4, 5, 6, 7, 8, 9 ]; var answer = sum(values) document.getElementById(&quot;answer&quot;).innerHTML = answer;&#125;) JavaScript ‰ª£Á†Å: 12345678// sum.jsdefine([&#x27;add&#x27;, &#x27;reduce&#x27;], function(add, reduce)&#123; var sum = function(arr)&#123; return reduce(arr, add); &#125;; return sum;&#125;) JavaScript ‰ª£Á†Å: 12345678// add.jsdefine([], function()&#123; var add = function(a, b)&#123; return a + b; &#125;; return add;&#125;); JavaScript ‰ª£Á†Å: 12345678910111213141516// reduce.jsdefine([], function()&#123; var reduce = function(arr, iteratee) &#123; var index = 0, length = arr.length, memo = arr[index]; index += 1; for(; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]) &#125; return memo; &#125; return reduce;&#125;) Ê≥®ÊÑèÂú® index.html ‰∏≠Âè™Êúâ‰∏Ä‰∏™ script Ê†áÁ≠æ„ÄÇHTML ‰ª£Á†Å: 1&lt;script data-main=‚Äùmain‚Äù src=‚Äùrequire.js‚Äù&gt;&lt;/script&gt; Ëøô‰∏™Ê†áÁ≠æÂä†ËΩΩ require.js Â∫ìÂà∞È°µÈù¢Ôºådata-main Â±ûÊÄßÂëäËØâ RequieJS Â∫îÁî®Á®ãÂ∫èÁöÑÂÖ•Âè£ÁÇπÂú®Âì™Èáå„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂÆÉÂÅáÂÆöÊâÄÊúâÊñá‰ª∂ÈÉΩÊúâ .js Êñá‰ª∂Êâ©Â±ïÂêçÔºåÊâÄ‰ª•ÁúÅÁï• .js Êñá‰ª∂Êâ©Â±ïÂêçÊòØÂèØ‰ª•ÁöÑ„ÄÇÂú® RequireJS Âä†ËΩΩ‰∫Ü main.js Êñá‰ª∂‰πãÂêéÔºåÂ∞±‰ºöÂä†ËΩΩËØ•Êñá‰ª∂ÁöÑ‰æùËµñÔºå‰ª•Âèä‰æùËµñÁöÑ‰æùËµñÔºåÁ≠âÁ≠â„ÄÇÊµèËßàÂô®ÁöÑÂºÄÂèëËÄÖÂ∑•ÂÖ∑‰ºöÊòæÁ§∫ÊâÄÊúâÊñá‰ª∂‰ª•Â¶Ç‰∏ãÈ°∫Â∫èÂä†ËΩΩ(Â¶ÇÂõæ)Ôºö ÊµèËßàÂô®Âä†ËΩΩ index.htmlÔºåËÄå index.html ÂèàÂä†ËΩΩ require.js „ÄÇÂâ©‰∏ãÁöÑÊñá‰ª∂ÂèäÂÖ∂‰æùËµñÈÉΩÊòØÁî± require.js Ë¥üË¥£Âä†ËΩΩ„ÄÇ RequireJS Âíå AMD Ëß£ÂÜ≥‰∫ÜÊàë‰ª¨‰ª•ÂâçÊâÄÈÅáÂà∞ÁöÑÊâÄÊúâÈóÆÈ¢ò„ÄÇÁÑ∂ËÄåÔºåÂÆÉ‰πüÂ∏¶Êù•‰∫Ü‰∏Ä‰∫õ‰∏çÈÇ£‰πà‰∏•ÈáçÁöÑÈóÆÈ¢ò„ÄÇ AMD ÁöÑËØ≠Ê≥ïËøá‰∫éÂÜó‰Ωô„ÄÇÂõ†‰∏∫ÊâÄÊúâ‰∏úË•øÈÉΩÂ∞ÅË£ÖÂú® define ÂáΩÊï∞‰∏≠ÔºåÊâÄ‰ª•Êàë‰ª¨ÁöÑ‰ª£Á†ÅÊúâ‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÁº©Ëøõ„ÄÇÂØπ‰∫é‰∏Ä‰∏™Â∞èÊñá‰ª∂Êù•ËØ¥ÔºåËøô‰∏çÊòØ‰ªÄ‰πàÂ§ßÈóÆÈ¢òÔºå‰ΩÜÊòØÂØπ‰∫é‰∏Ä‰∏™Â§ßÂûãÁöÑ‰ª£Á†ÅÂ∫ìÊù•ËØ¥ÔºåËøôÂèØËÉΩÊòØ‰∏ÄÁßçÁ≤æÁ•û‰∏äÁöÑË¥üÊãÖ„ÄÇ Êï∞ÁªÑ‰∏≠ÁöÑ‰æùËµñÂàóË°®ÂøÖÈ°ª‰∏éÂáΩÊï∞ÁöÑÂèÇÊï∞ÂàóË°®ÂåπÈÖç„ÄÇÂ¶ÇÊûúÂ≠òÂú®ËÆ∏Â§ö‰æùËµñÈ°πÔºåÂàôÂæàÈöæÁª¥Êä§‰æùËµñÈ°πÁöÑÈ°∫Â∫è„ÄÇÂ¶ÇÊûúÊÇ®ÁöÑÊ®°Âùó‰∏≠ÊúâÂá†ÂçÅ‰∏™‰æùËµñÈ°πÔºåÂπ∂‰∏îÂ¶ÇÊûú‰Ω†‰∏çÂæó‰∏çÂú®‰∏≠Èó¥Âà†Èô§Êüê‰∏™‰æùËµñÔºåÈÇ£‰πàÂ∞±ÂæàÈöæÊâæÂà∞ÂåπÈÖçÁöÑÊ®°ÂùóÂíåÂèÇÊï∞„ÄÇ Âú®ÂΩìÂâçÊµèËßàÂô®‰∏ãÔºàHTTP 1.1ÔºâÔºåÂä†ËΩΩÂæàÂ§öÂ∞èÊñá‰ª∂‰ºöÈôç‰ΩéÊÄßËÉΩ„ÄÇ BrowserifyÁî±‰∫é‰∏äËø∞Ëøô‰∫õÂéüÂõ†ÔºåÊúâ‰∫õ‰∫∫ÊÉ≥Ë¶Å‰ΩøÁî® CommonJS ËØ≠Ê≥ïÊù•ÊõøÊç¢„ÄÇ‰ΩÜ CommonJS ËØ≠Ê≥ïÊòØÁî®‰∫éÊúçÂä°Á´ØÔºåÂπ∂‰∏îÊòØÂêåÊ≠•ÁöÑÔºåÂØπÂêóÔºüËøôÊó∂ Browserify Â∞±Êù•Ëß£ÊïëÊàë‰ª¨‰∫ÜÔºÅÈÄöËøá Browserify Ôºå‰Ω†ÂèØ‰ª•Âú®ÊµèËßàÂô®Â∫îÁî®Á®ãÂ∫è‰∏≠‰ΩøÁî® CommonJS Ê®°Âùó„ÄÇBrowserify ÊòØ‰∏Ä‰∏™ Ê®°ÂùóÊâìÂåÖÂô®(module bundler) „ÄÇBrowserify ÈÅçÂéÜ‰ª£Á†ÅÁöÑ‰æùËµñÊ†ëÔºåÂπ∂Â∞Ü‰æùËµñÊ†ë‰∏≠ÁöÑÊâÄÊúâÊ®°ÂùóÊâìÂåÖÊàê‰∏Ä‰∏™Êñá‰ª∂„ÄÇ ‰∏çÂêå‰∫é RequireJS Ôºå‰ΩÜÊòØ Browserify ÊòØ‰∏Ä‰∏™ÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ÔºåÈúÄË¶Å NodeJS Âíå NPM Êù•ÂÆâË£ÖÂÆÉ„ÄÇÂ¶ÇÊûúÁ≥ªÁªü‰∏≠ÂÆâË£Ö‰∫Ü NodeJS ÔºåÂ∞±ÂèØ‰ª•Áî®Â¶Ç‰∏ãÂëΩ‰ª§Êù•ÂÆâË£Ö BrowserifyÔºö CommandLine ‰ª£Á†Å: 1npm install -g browserify ËÆ©Êàë‰ª¨Áúã‰∏Ä‰∏ãÊàë‰ª¨Áî® CommonJS ËØ≠Ê≥ïÁºñÂÜôÁöÑÁ§∫‰æãÂ∫îÁî®Á®ãÂ∫è„ÄÇ HTML ‰ª£Á†Å: 12345678910111213141516&lt;!-- 0-index.html --&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;JS Modules&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt; The Answer is &lt;span id=&quot;answer&quot;&gt;&lt;/span&gt; &lt;/h1&gt; &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; JavaScript ‰ª£Á†Å: 123456//main.jsvar sum = require(&#x27;./sum&#x27;);var values = [ 1, 2, 4, 5, 6, 7, 8, 9 ];var answer = sum(values) document.getElementById(&quot;answer&quot;).innerHTML = answer; JavaScript ‰ª£Á†Å: 1234567//sum.jsvar reduce = require(&#x27;./reduce&#x27;);var add = require(&#x27;./add&#x27;); module.exports = function(arr)&#123; return reduce(arr, add);&#125;; JavaScript ‰ª£Á†Å: 12345Javascript//add.jsmodule.exports = function add(a,b)&#123; return a + b;&#125;; JavaScript ‰ª£Á†Å: 123456789101112//reduce.jsmodule.exports = function reduce(arr, iteratee) &#123; var index = 0, length = arr.length, memo = arr[index]; index += 1; for(; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]) &#125; return memo;&#125;; ‰Ω†ÂèØËÉΩÂ∑≤ÁªèÊ≥®ÊÑèÂà∞ÔºåÂú® index.html Êñá‰ª∂‰∏≠Ôºåscript Ê†áËÆ∞Âä†ËΩΩ‰∫Ü bundle.jsÔºå‰ΩÜÊòØ bundle.js Êñá‰ª∂Âú®Âì™ÈáåÔºü‰∏ÄÊó¶Êàë‰ª¨ÊâßË°å‰∫ÜÂ¶Ç‰∏ãÂëΩ‰ª§ÔºåBrowserify Â∞±‰ºö‰∏∫Êàë‰ª¨ÁîüÊàêËøô‰∏™Êñá‰ª∂Ôºö CommandLine ‰ª£Á†Å: 1$ browserify main.js -o bundle.js Browserify Ëß£Êûê main.js ‰∏≠ÁöÑ require() ÂáΩÊï∞Ë∞ÉÁî®ÔºåÂπ∂ÈÅçÂéÜÈ°πÁõÆ‰∏≠ÁöÑ‰æùËµñÊ†ë„ÄÇÁÑ∂ÂêéÂ∞Ü‰æùËµñÊ†ëÊâìÂåÖÂà∞‰∏Ä‰∏™Êñá‰ª∂‰∏≠„ÄÇ Browserify ÁîüÊàêÂ¶Ç‰∏ã bundle.js Êñá‰ª∂ÁöÑ‰ª£Á†ÅÔºö JavaScript ‰ª£Á†Å: 12345678910111213141516171819202122232425262728293031323334function e(t,n,r)&#123;function s(o,u)&#123;if(!n[o])&#123;if(!t[o])&#123;var a=typeof require==&quot;function&quot;&amp;&amp;require;if(!u&amp;&amp;a)return a(o,!0);if(i)return i(o,!0);var f=new Error(&quot;Cannot find module &#x27;&quot;+o+&quot;&#x27;&quot;);throw f.code=&quot;MODULE_NOT_FOUND&quot;,f&#125;var l=n[o]=&#123;exports:&#123;&#125;&#125;;t[o][0].call(l.exports,function(e)&#123;var n=t[o][1][e];return s(n?n:e)&#125;,l,l.exports,e,t,n,r)&#125;return n[o].exports&#125;var i=typeof require==&quot;function&quot;&amp;&amp;require;for(var o=0;o&lt;r.length;o++)s(r[o]);return s&#125;)(&#123;1:[function(require,module,exports)&#123;module.exports = function add(a,b)&#123; return a + b;&#125;; &#125;,&#123;&#125;],2:[function(require,module,exports)&#123;var sum = require(&#x27;./sum&#x27;);var values = [ 1, 2, 4, 5, 6, 7, 8, 9 ];var answer = sum(values) document.getElementById(&quot;answer&quot;).innerHTML = answer; &#125;,&#123;&quot;./sum&quot;:4&#125;],3:[function(require,module,exports)&#123;module.exports = function reduce(arr, iteratee) &#123; var index = 0, length = arr.length, memo = arr[index]; index += 1; for(; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]) &#125; return memo;&#125;; &#125;,&#123;&#125;],4:[function(require,module,exports)&#123;var reduce = require(&#x27;./reduce&#x27;);var add = require(&#x27;./add&#x27;); module.exports = function(arr)&#123; return reduce(arr, add);&#125;; &#125;,&#123;&quot;./add&quot;:1,&quot;./reduce&quot;:3&#125;]&#125;,&#123;&#125;,[2]); ÊÇ®‰∏çÈúÄË¶ÅÈÄêË°åÂú∞ÁêÜËß£Ëøô‰∏™ÊâìÂåÖÊñá‰ª∂„ÄÇ‰ΩÜÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåÊâÄÊúâÁÜüÊÇâÁöÑ‰ª£Á†Å„ÄÅmain.js Êñá‰ª∂ÂíåÊâÄÊúâ‰æùËµñÈ°πÈÉΩÂåÖÂê´Âú®Ëøô‰∏™Êñá‰ª∂‰∏≠„ÄÇ UMD ‚Äì Âè™ÊòØ‰∏∫‰∫ÜËÆ©‰Ω†Êõ¥Âõ∞ÊÉëÁé∞Âú®Êàë‰ª¨Â∑≤ÁªèÂ≠¶‰π†‰∫Ü ÂÖ®Â±ÄÂØπË±°(Global Object)ÔºåCommonJS Âíå AMD È£éÊ†ºÁöÑÊ®°Âùó„ÄÇ‰πüÊúâ‰∏Ä‰∫õÂ∫ìÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Áõ¥Êé•‰ΩøÁî® CommonJS ÊàñËÄÖ AMD „ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊÇ®Ê≠£Âú®ÁºñÂÜô‰∏Ä‰∏™Ê®°ÂùóÔºåÂπ∂ÈÉ®ÁΩ≤Âà∞‰∫íËÅîÁΩë‰∏äÔºåËØ•ÊÄé‰πàÂäûÂë¢Ôºü‰Ω†ÈúÄË¶ÅÁºñÂÜôÂì™ÁßçÊ®°ÂùóÈ£éÊ†ºÂë¢Ôºü ÁºñÂÜô‰∏âÁßç‰∏çÂêåÁöÑÊ®°ÂùóÁ±ªÂûãÔºåÂç≥ ÂÖ®Â±ÄÊ®°ÂùóÂØπË±° „ÄÅCommonJS Âíå AMD „ÄÇ‰ΩÜÊòØ‰Ω†ÂøÖÈ°ªÁª¥Êä§‰∏â‰∏™‰∏çÂêåÁöÑÊñá‰ª∂„ÄÇÁî®Êà∑Â∞Ü‰∏çÂæó‰∏çËØÜÂà´‰ªñ‰ª¨Ê≠£Âú®‰∏ãËΩΩÁöÑÊ®°ÂùóÁöÑÁ±ªÂûã„ÄÇ ÈÄöÁî®Ê®°ÂùóÂÆö‰πâ(Universal Module Definition) ÔºåÂç≥Êàë‰ª¨ÈÄöÂ∏∏ËØ¥ÁöÑ UMD ÔºåÂ∞±ÊòØÁî®Êù•Ëß£ÂÜ≥Ëøô‰∏™ÁâπÊÆäÈóÆÈ¢òÁöÑ„ÄÇÊú¨Ë¥®‰∏äÔºåUMD ÊòØ‰∏ÄÂ•óÁî®Êù•ËØÜÂà´ÂΩìÂâçÁéØÂ¢ÉÊîØÊåÅÁöÑÊ®°ÂùóÈ£éÊ†ºÁöÑ if/else ËØ≠Âè•„ÄÇ JavaScript ‰ª£Á†Å: 123456789101112131415161718192021// UMD È£éÊ†ºÁºñÂÜôÁöÑ sum Ê®°Âùó//sum.umd.js(function (root, factory) &#123; if (typeof define === &#x27;function&#x27; &amp;&amp; define.amd) &#123; // AMD define([&#x27;add&#x27;, &#x27;reduce&#x27;], factory); &#125; else if (typeof exports === &#x27;object&#x27;) &#123; // Node, CommonJS-like module.exports = factory(require(&#x27;add&#x27;), require(&#x27;reduce&#x27;)); &#125; else &#123; // Browser globals (root is window) root.sum = factory(root.add, root.reduce); &#125;&#125;(this, function (add, reduce) &#123; // private methods // exposed public methods return function(arr) &#123; return reduce(arr, add); &#125;&#125;)); ES6 Ê®°ÂùóËØ≠Ê≥ï Ê≥®Ôºö‰∫ÜËß£Êõ¥Â§öÂÖ≥‰∫é ES6 Ê®°ÂùóÁöÑ‰ø°ÊÅØÔºåÂª∫ËÆÆÈòÖËØª ECMAScript 6 Modules(Ê®°Âùó)Á≥ªÁªüÂèäËØ≠Ê≥ïËØ¶Ëß£„ÄÇ JavaScript ÂÖ®Â±ÄÊ®°ÂùóÂØπË±°„ÄÅCommonJS„ÄÅAMD Âíå UMDÔºåÊàë‰ª¨ÊúâÂ§™Â§öÁöÑÈÄâÈ°π‰∫Ü„ÄÇÁé∞Âú®ÊàñËÆ∏‰Ω†‰ºöÈóÆÔºå‰∏ã‰∏Ä‰∏™È°πÁõÆÊàëËØ•Áî®Âì™‰∏Ä‰∏™Âë¢ÔºüÁ≠îÊ°àÊòØ‰∏Ä‰∏™ÈÉΩ‰∏çÁî®„ÄÇ JavaScript ËØ≠Ë®Ä‰∏≠Âπ∂Ê≤°ÊúâÂÜÖÁΩÆÊ®°ÂùóÁ≥ªÁªü„ÄÇËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàÊàë‰ª¨ÊúâËøô‰πàÂ§ö‰∏çÂêåÁöÑÂØºÂÖ•ÂíåÂØºÂá∫Ê®°ÂùóÁöÑÂéüÂõ†„ÄÇ‰ΩÜËøôÁßçÊÉÖÂÜµÊúÄËøëÂèëÁîü‰∫ÜÂèòÂåñ„ÄÇ ES6 ËØ≠Ë®ÄËßÑËåÉ‰∏≠ÔºåÊ®°ÂùóÊòØ JavaScript ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÊâÄ‰ª•Ëøô‰∏™ÈóÆÈ¢òÁöÑÁ≠îÊ°àÊòØÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ËÆ©‰Ω†ÁöÑÈ°πÁõÆÊÉ≥\bÂÖºÂÆπÊú™Êù•Ôºå‰Ω†ÈúÄË¶Å‰ΩøÁî® ES6 Ê®°ÂùóËØ≠Ê≥ï„ÄÇ ES6 Áî® import Âíå export ÂÖ≥ÈîÆÂ≠óÊù•ÂØºÂÖ•ÂíåÂØºÂá∫Ê®°Âùó„ÄÇÂ¶Ç‰∏ãÊòØÁî® ES6 Ê®°ÂùóËØ≠Ê≥ïÁºñÂÜôÁöÑÁ§∫‰æãÂ∫îÁî®Á®ãÂ∫è„ÄÇ JavaScript ‰ª£Á†Å: 1234567// main.jsimport sum from &quot;./sum&quot;;var values = [ 1, 2, 4, 5, 6, 7, 8, 9 ];var answer = sum(values);document.getElementById(&quot;answer&quot;).innerHTML = answer; JavaScript ‰ª£Á†Å: 1234567// sum.jsimport add from &#x27;./add&#x27;;import reduce from &#x27;./reduce&#x27;;export default function sum(arr)&#123; return reduce(arr, add);&#125; JavaScript ‰ª£Á†Å: 1234// add.jsexport default function add(a,b)&#123; return a + b;&#125; JavaScript ‰ª£Á†Å: 123456789//reduce.jsexport default function reduce(arr, iteratee) &#123; let index = 0, length = arr.length, memo = arr[index]; index += 1; for(; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]); &#125; return memo;&#125; ÊúâÂæàÂ§öÂÖ≥‰∫é ES6 Ê®°ÂùóÁöÑÊµÅË°åËØ≠ÔºöES6 Ê®°ÂùóËØ≠Ê≥ïÊòØÁÆÄÊ¥ÅÁöÑ„ÄÇES6 Ê®°ÂùóÂ∞ÜÁªüÊ≤ª JavaScript ‰∏ñÁïå„ÄÇÂÆÉÊòØÊú™Êù•„ÄÇ‰ΩÜ‰∏çÂπ∏ÁöÑÊòØÔºåÊúâ‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇÊµèËßàÂô®ËøòÊ≤°Êúâ‰∏∫ËøôÁßçÊñ∞ËØ≠Ê≥ïÂÅöÂ•ΩÂáÜÂ§á„ÄÇÂú®Êí∞ÂÜôÊñáÁ´†ÁöÑÊó∂ÂÄôÔºåÂè™Êúâ Chrome ÊµèËßàÂô®ÊîØÊåÅ import ËØ≠Âè•„ÄÇÂç≥‰ΩøÂ§ßÂ§öÊï∞ÊµèËßàÂô®ÊîØÊåÅ import Âíå export ÔºåÂ¶ÇÊûúÊÇ®ÁöÑÂ∫îÁî®Á®ãÂ∫èÂøÖÈ°ªÊîØÊåÅËæÉËÄÅÁöÑÊµèËßàÂô®ÔºåÈÇ£‰πàÊÇ®ÂèØËÉΩ‰ºöÈÅáÂà∞ÈóÆÈ¢ò„ÄÇ Âπ∏ËøêÁöÑÊòØÔºåÁé∞Âú®Â∑≤ÁªèÊúâÂæàÂ§öÂ∑•ÂÖ∑ÂèØ‰ª•Áî®‰∫ÜÔºåËøô‰∫õÂ∑•ÂÖ∑ËÆ©Êàë‰ª¨Áé∞Âú®Â∞±ÂèØ‰ª•Áî® ES6 Ê®°ÂùóËØ≠Ê≥ï„ÄÇ WebpackWebpack ÊòØ‰∏Ä‰∏™ Ê®°ÂùóÊâìÂåÖÂô®(module bundler) „ÄÇÂ∞±ÂÉè Browserify ‰∏ÄÊ†∑ÔºåÂÆÉ‰ºöÈÅçÂéÜ‰æùËµñÊ†ëÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂ÊâìÂåÖÂà∞‰∏ÄÂà∞Â§ö‰∏™Êñá‰ª∂„ÄÇÈÇ£‰πàÈóÆÈ¢òÊù•‰∫ÜÔºåÂ¶ÇÊûúÂÆÉÂíå Browserify ‰∏ÄÊ†∑Ôºå‰∏∫‰ªÄ‰πàÊàë‰ª¨ÈúÄË¶ÅÂè¶‰∏Ä‰∏™Ê®°ÂùóÊâìÂåÖÂô®Âë¢ÔºüWebpack ÂèØ‰ª•Â§ÑÁêÜ CommonJS „ÄÅ AMD Âíå ES6 Ê®°Âùó„ÄÇÂπ∂‰∏î Webpack ËøòÊúâÊõ¥Â§öÁöÑÁÅµÊ¥ªÊÄßÂíå‰∏Ä‰∫õÂæàÈÖ∑ÁöÑÂäüËÉΩÁâπÊÄßÔºåÊØîÂ¶ÇÔºö ‰ª£Á†ÅÂàÜÁ¶ªÔºöÂΩìÊÇ®ÊúâÂ§ö‰∏™Â∫îÁî®Á®ãÂ∫èÂÖ±‰∫´Áõ∏ÂêåÁöÑÊ®°ÂùóÊó∂„ÄÇWebpack ÂèØ‰ª•Â∞ÜÊÇ®ÁöÑ‰ª£Á†ÅÊâìÂåÖÂà∞‰∏§‰∏™ÊàñÊõ¥Â§öÁöÑÊñá‰ª∂‰∏≠„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûúÊÇ®Êúâ‰∏§‰∏™Â∫îÁî®Á®ãÂ∫è app1 Âíå app2 ÔºåÂπ∂‰∏îÈÉΩÂÖ±‰∫´ËÆ∏Â§öÊ®°Âùó„ÄÇ ‰ΩøÁî® Browserify Ôºå‰Ω†‰ºöÊúâ app1.js Âíå app2.js „ÄÇÂπ∂‰∏îÈÉΩÂåÖÂê´ÊâÄÊúâ‰æùËµñÂÖ≥Á≥ªÊ®°Âùó„ÄÇ‰ΩÜÊòØ‰ΩøÁî® Webpack ÔºåÊÇ®ÂèØ‰ª•ÂàõÂª∫ app1.js Ôºåapp2.js Âíå shared-lib.js„ÄÇÊòØÁöÑÔºåÊÇ®ÂøÖÈ°ª‰ªé html È°µÈù¢Âä†ËΩΩ 2 ‰∏™Êñá‰ª∂„ÄÇ‰ΩÜÊòØ‰ΩøÁî®ÂìàÂ∏åÊñá‰ª∂ÂêçÔºåÊµèËßàÂô®ÁºìÂ≠òÂíå CDN ÔºåÂèØ‰ª•ÂáèÂ∞ëÂàùÂßãÂä†ËΩΩÊó∂Èó¥„ÄÇ Âä†ËΩΩÂô®ÔºöÁî®Ëá™ÂÆö‰πâÂä†ËΩΩÂô®ÔºåÂèØ‰ª•Âä†ËΩΩ‰ªª‰ΩïÊñá‰ª∂Âà∞Ê∫êÊñá‰ª∂‰∏≠„ÄÇÁî® require() ËØ≠Ê≥ïÔºå‰∏ç‰ªÖ‰ªÖÂèØ‰ª•Âä†ËΩΩ JavaScript Êñá‰ª∂ÔºåËøòÂèØ‰ª•Âä†ËΩΩ CSS„ÄÅCoffeeScript„ÄÅSass„ÄÅLess„ÄÅHTMLÊ®°Êùø„ÄÅÂõæÂÉèÔºåÁ≠âÁ≠â„ÄÇ Êèí‰ª∂ÔºöWebpack Êèí‰ª∂ÂèØ‰ª•Âú®ÊâìÂåÖÂÜôÂÖ•Âà∞ÊâìÂåÖÊñá‰ª∂‰πãÂâçÂØπÂÖ∂ËøõË°åÊìç‰Ωú„ÄÇÊúâÂæàÂ§öÁ§æÂå∫ÂàõÂª∫ÁöÑÊèí‰ª∂„ÄÇ‰æãÂ¶ÇÔºåÁªôÊâìÂåÖ‰ª£Á†ÅÊ∑ªÂä†Ê≥®ÈáäÔºåÊ∑ªÂä† Source mapÔºåÂ∞ÜÊâìÂåÖÊñá‰ª∂ÂàÜÁ¶ªÊàêÂùóÁ≠âÁ≠â„ÄÇ WebpackDevServer ÊòØ‰∏Ä‰∏™ÂºÄÂèëÊúçÂä°Âô®ÔºåÂÆÉÂèØ‰ª•Âú®Ê∫ê‰ª£Á†ÅÊîπÂèòË¢´Ê£ÄÊµãÂà∞Êó∂Ëá™Âä®ÊâìÂåÖÊ∫ê‰ª£Á†ÅÔºåÂπ∂Âà∑Êñ∞ÊµèËßàÂô®„ÄÇÂÆÉÈÄöËøáÊèê‰æõ‰ª£Á†ÅÁöÑÂç≥Êó∂ÂèçÈ¶àÔºå‰ªéËÄåÂä†Âø´ÂºÄÂèëËøáÁ®ã„ÄÇ ËÆ©Êàë‰ª¨Êù•ÁúãÁúãÊàë‰ª¨Â¶Ç‰ΩïÁî® Webpack Êù•ÊûÑÂª∫Á§∫‰æãÂ∫îÁî®Á®ãÂ∫è„ÄÇWebpack ÈúÄË¶Å‰∏ÄÁÇπÂºïÂØºÂíåÈÖçÁΩÆ„ÄÇ Âõ†‰∏∫ Webpack ÊòØ JavaScript ÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ÔºåÊâÄ‰ª•ÈúÄË¶ÅÂÖàÂÆâË£Ö‰∏ä NodeJS Âíå NPM „ÄÇË£ÖÂ•Ω NPM ÂêéÔºåÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§ÂàùÂßãÂåñÈ°πÁõÆÔºö CommandLine ‰ª£Á†Å: 123$ mkdir project; cd project$ npm init -y$ npm install -D webpack webpack-dev-server ÊÇ®ÈúÄË¶Å‰∏Ä‰∏™ webpack ÁöÑÈÖçÁΩÆÊñá‰ª∂„ÄÇ‰Ω†ÁöÑÈÖçÁΩÆ‰∏≠Ëá≥Â∞ëÈúÄË¶Å entry Âíå output ‰∏§‰∏™Â≠óÊÆµ„ÄÇÂú® webpack.config.js ‰∏≠‰øùÂ≠ò‰ª•‰∏ãÂÜÖÂÆπ„ÄÇ JavaScript ‰ª£Á†Å: 1234567// webpack.config.js webpack ÁöÑÈÖçÁΩÆÊñá‰ª∂module.exports = &#123; entry: ‚Äò./app/main.js‚Äô, output: &#123; filename: ‚Äòbundle.js‚Äô &#125;&#125; ÊâìÂºÄ package.json Êñá‰ª∂ÔºåÂú® script Â≠óÊÆµÂêéÊ∑ªÂä†Â¶Ç‰∏ãË°åÔºö JavaScript ‰ª£Á†Å: 1234&quot;scripts&quot;: &#123; &quot;start&quot;: &quot;webpack-dev-server -progress -colors&quot;, &quot;build&quot;: &quot;webpack&quot; &#125;, Áé∞Âú®Âú® project/app ÁõÆÂΩï‰∏ãÊ∑ªÂä†ÊâÄÊúâ JavaScript Ê®°ÂùóÔºåÂú® project ÁõÆÂΩï‰∏ãÊ∑ªÂä† index.html„ÄÇ HTML ‰ª£Á†Å: 123456789101112131415&lt;!-- 0-index.html --&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;JS Modules&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt; The Answer is &lt;span id=&quot;answer&quot;&gt;&lt;/span&gt; &lt;/h1&gt; &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; JavaScript ‰ª£Á†Å: 123456789101112131415161718// 03-package.json ÁâπÂà´Ê≥®ÊÑèÔºåËøôË°åÊ≥®Èáä‰∏çË¶ÅÂ§çÂà∂Ôºå\bÂê¶Âàô\bjsonÊñá‰ª∂‰ºöÊä•Èîô&#123; &quot;name&quot;: &quot;jsmodules&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;&quot;, &quot;main&quot;: &quot;main.js&quot;, &quot;scripts&quot;: &#123; &quot;start&quot;: &quot;webpack-dev-server --progress --colors&quot;, &quot;build&quot;: &quot;webpack&quot; &#125;, &quot;keywords&quot;: [], &quot;author&quot;: &quot;&quot;, &quot;license&quot;: &quot;ISC&quot;, &quot;devDependencies&quot;: &#123; &quot;webpack&quot;: &quot;^1.12.14&quot;, &quot;webpack-dev-server&quot;: &quot;^1.14.1&quot; &#125;&#125; JavaScript ‰ª£Á†Å: 1234// app/add.jsmodule.exports = function add(a,b)&#123; return a + b;&#125;; JavaScript ‰ª£Á†Å: 123456789101112// app/reduce.jsmodule.exports = function reduce(arr, iteratee) &#123; var index = 0, length = arr.length, memo = arr[index]; index += 1; for(; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]) &#125; return memo;&#125;; JavaScript ‰ª£Á†Å: 12345678// app/sum.jsdefine([&#x27;./reduce&#x27;, &#x27;./add&#x27;], function(reduce, add)&#123; sum = function(arr)&#123; return reduce(arr, add); &#125; return sum;&#125;); JavaScript ‰ª£Á†Å: 123456// app/main.jsvar sum = require(&#x27;./sum&#x27;);var values = [ 1, 2, 4, 5, 6, 7, 8, 9 ];var answer = sum(values) document.getElementById(&quot;answer&quot;).innerHTML = answer; Ê≥®ÊÑè add.js Âíå reduce.js ÊòØÁî® CommonJS È£éÊ†ºÂÜôÁöÑÔºåËÄå sum.js ÊòØÁî® AMD È£éÊ†ºÂÜôÁöÑ„ÄÇ Webpack ÈªòËÆ§ÊòØÂèØ‰ª•Â§ÑÁêÜ CommonJS Âíå AMD„ÄÇÂ¶ÇÊûú‰Ω†Áî®ÁöÑÊòØ ES6 Ê®°ÂùóÔºåÈÇ£Â∞±ÈúÄË¶ÅÂÆâË£ÖÂíåÈÖçÁΩÆ babel loader„ÄÇ ‰∏ÄÊó¶‰Ω†ÂáÜÂ§áÂ•ΩÊâÄÊúâÁöÑÊñá‰ª∂Ôºå‰Ω†ÂèØ‰ª•ËøêË°å‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫è„ÄÇ CommandLine ‰ª£Á†Å: 1$ npm start ÊâìÂºÄÊµèËßàÂô®ÔºåÊää URL ÊåáÂêë http://localhost:8080/webpack-dev-server/ÔºåÂ¶ÇÂõæÔºö Ê≠§Êó∂Ôºå‰Ω†ÂèØ‰ª•ÊâìÂºÄ‰Ω†ÂñúÊ¨¢ÁöÑÁºñËæëÂô®ÁºñËæë‰ª£Á†Å„ÄÇ‰øùÂ≠òÊñá‰ª∂Êó∂ÔºåÊµèËßàÂô®‰ºöËá™Âä®Âà∑Êñ∞‰ª•ÊòæÁ§∫‰øÆÊîπÂêéÁöÑÁªìÊûú„ÄÇ ËøôÈáå‰Ω†ÂèØËÉΩ‰ºöÊ≥®ÊÑèÂà∞‰∏Ä‰ª∂‰∫ãÊÉÖÔºåÂ∞±ÊòØÊâæ‰∏çÂà∞ dist/bundle.js Êñá‰ª∂„ÄÇËøôÊòØÂõ†‰∏∫ Webpack Dev Server ‰ºöÂàõÂª∫ÊâìÂåÖÊñá‰ª∂Ôºå‰ΩÜÊòØ‰∏ç‰ºöÂÜôÂÖ•Âà∞Êñá‰ª∂Á≥ªÁªü‰∏≠ÔºåËÄåÊòØÊîæÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇ Â¶ÇÊûúË¶ÅÈÉ®ÁΩ≤ÔºåÂ∞±ÂæóÂàõÂª∫ÊâìÂåÖÊñá‰ª∂„ÄÇÂèØ‰ª•ÈÄöËøáÈîÆÂÖ•Â¶Ç‰∏ãÂëΩ‰ª§ÂàõÂª∫ bundle.js Êñá‰ª∂Ôºö CommandLine ‰ª£Á†Å: 1$ npm run build Â¶ÇÊûúÊúâÂÖ¥Ë∂£Â≠¶‰π†Êõ¥Â§öÁöÑ Webpack Áü•ËØÜÔºåËØ∑ÂèÇËÄÉ Webpack ÊñáÊ°£È°µ „ÄÇ Rollup (2015 Âπ¥ 5 Êúà) Ê≥®ÔºöRollup ÊôÆÂèä‰∫Ü JavaScript ÂúàÂÜÖ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÁâπÊÄßÔºöTree shakingÔºåÂç≥ÊòØÊåáÊ∂àÈô§JavaScript‰∏ä‰∏ãÊñá‰∏≠Êó†Áî®‰ª£Á†ÅÔºåÊàñÊõ¥Á≤æÁ°ÆÂú∞ËØ¥ÔºåÂè™‰øùÁïôÊúâÁî®ÁöÑ‰ª£Á†Å„ÄÇÂÆÉ‰æùËµñ‰∫éES6Ê®°Âùó import / export Ê®°ÂùóÁ≥ªÁªüÁöÑÈùôÊÄÅÁªìÊûÑ(static structure)Êù•Ê£ÄÊµãÂì™‰∏Ä‰∏™Ê®°ÂùóÊ≤°ÊúâË¢´‰ΩøÁî®ÔºåÂõ†‰∏∫Ôºåimport Âíå export ‰∏ç‰ºöÂú®ËøêË°åÊó∂ÊîπÂèò„ÄÇËØ¥ÁöÑÂÜçÁõ¥ÁôΩ‰∏ÄÁÇπÂ∞±ÊòØ Tree shaking ‰ªéÊ®°ÂùóÂåÖ‰∏≠ÊéíÈô§Êú™‰ΩøÁî®ÁöÑ exports È°π„ÄÇ webpack 2 ÂÜÖÁΩÆÂºïÂÖ•ÁöÑ Tree-shaking ‰ª£Á†Å‰ºòÂåñÊäÄÊúØ„ÄÇ ËØ¶ÊÉÖÈòÖËØª webpack 2 ‰∏≠ÁöÑ Tree Shaking Â∞Ü‰∏Ä‰∏™Â§ßÁöÑ JavaScript Â∫ìÂåÖÂê´ËøõÊù•ÔºåÂè™ÊòØ‰∏∫‰∫ÜÁî®ÂÆÉÂá†‰∏™ÂáΩÊï∞Ôºå‰Ω†ÊòØÂê¶ÊúâËøôÊ†∑ÁöÑÁªèÂéÜÔºüRollup ÊòØÂè¶‰∏Ä‰∏™ JavaScript ES6 Ê®°ÂùóÊâìÂåÖÂô®„ÄÇ‰∏é Browserify Âíå Webpak ‰∏çÂêåÔºårollup Âè™ÂåÖÂê´Âú®È°πÁõÆ‰∏≠Áî®Âà∞ÁöÑ‰ª£Á†Å„ÄÇÂ¶ÇÊûúÊúâÂ§ßÊ®°ÂùóÔºåÂ∏¶ÊúâÂæàÂ§öÂáΩÊï∞Ôºå‰ΩÜÊòØ‰Ω†Âè™ÊòØÁî®Âà∞Â∞ëÊï∞Âá†‰∏™Ôºårollup Âè™‰ºöÂ∞ÜÈúÄË¶ÅÁöÑÂáΩÊï∞ÂåÖÂê´Âà∞ÊâìÂåÖÊñá‰ª∂‰∏≠Ôºå‰ªéËÄåÊòæËëóÂáèÂ∞ëÊâìÂåÖÊñá‰ª∂Â§ßÂ∞è„ÄÇ Rollup ÂèØ‰ª•Ë¢´Áî®‰Ωú‰∏∫ÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑„ÄÇÂ¶ÇÊûúÊúâ NodeJS Âíå NPMÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•Áî®Â¶Ç‰∏ãÂëΩ‰ª§ÂÆâË£Ö rollupÔºö CommandLine ‰ª£Á†Å: 1$ npm install -g rollup Rollup ÂèØ‰ª•‰∏é‰ªª‰ΩïÁ±ªÂûãÁöÑÊ®°ÂùóÈ£éÊ†º‰∏ÄËµ∑Â∑•‰Ωú„ÄÇ‰ΩÜÊòØÔºåÊé®Ëçê‰ΩøÁî® ES6 Ê®°ÂùóÈ£éÊ†ºÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Âà©Áî® tree-shaking ÂäüËÉΩ„ÄÇÂ¶Ç‰∏ãÊòØÁî® ES6 ÁºñÂÜôÁöÑÁ§∫‰æãÂ∫îÁî®Á®ãÂ∫è‰ª£Á†ÅÔºö JavaScript ‰ª£Á†Å: 12345// 01-add.js let add = (a,b) =&gt; a + b;let sub = (a,b) =&gt; a - b; export &#123; add, sub &#125;; JavaScript ‰ª£Á†Å: 123456789101112// reduce.jsexport default (arr, iteratee) =&gt; &#123; let index = 0, length = arr.length, memo = arr[index]; index += 1; for(; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]); &#125; return memo;&#125; JavaScript ‰ª£Á†Å: 12345// sum.jsimport &#123; add &#125; from &#x27;./add&#x27;;import reduce from &#x27;./reduce&#x27;; export default (arr) =&gt; reduce(arr, add); JavaScript ‰ª£Á†Å: 1234567// main.jsimport sum from &quot;./sum&quot;; var values = [ 1, 2, 4, 5, 6, 7, 8, 9 ];var answer = sum(values); document.getElementById(&quot;answer&quot;).innerHTML = answer; Ê≥®ÊÑèÔºåÂú® add Ê®°Âùó‰∏≠ÔºåÊàëÂºïÂÖ•‰∫ÜÂè¶‰∏Ä‰∏™ÂáΩÊï∞ sub()„ÄÇ‰ΩÜÊòØËØ•ÂáΩÊï∞Âú®Â∫îÁî®Á®ãÂ∫è‰∏≠Âπ∂Ê≤°ÊúâÁî®Âà∞„ÄÇ Áé∞Âú®Êàë‰ª¨Áî® rollup Â∞ÜËøô‰∫õ‰ª£Á†ÅÊâìÂåÖÔºö CommandLine ‰ª£Á†Å: 1$ rollup main.js -o bundle.js Ëøô‰ºöÁîüÊàêÂÉèÂ¶Ç‰∏ãÁöÑ bundle.js Êñá‰ª∂ÔºöJavaScript ‰ª£Á†Å: 123456789101112131415161718192021// bundle.jslet add = (a,b) =&gt; a + b; var reduce = (arr, iteratee) =&gt; &#123; let index = 0, length = arr.length, memo = arr[index]; index += 1; for(; index &lt; length; index += 1)&#123; memo = iteratee(memo, arr[index]); &#125; return memo;&#125; var sum = (arr) =&gt; reduce(arr, add); var values = [ 1, 2, 4, 5, 6, 7, 8, 9 ];var answer = sum(values); document.getElementById(&quot;answer&quot;).innerHTML = answer; ËøôÈáåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ sub() ÂáΩÊï∞Âπ∂Ê≤°ÊúâÂåÖÂê´Âú®Ëøô‰∏™ÊâìÂåÖÊñá‰ª∂‰∏≠„ÄÇ SystemJSSystemJS ÊòØ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÊ®°ÂùóÂä†ËΩΩÂô®ÔºåÂÆÉËÉΩÂú®ÊµèËßàÂô®ÊàñËÄÖ NodeJS ‰∏äÂä®ÊÄÅÂä†ËΩΩÊ®°ÂùóÔºåÂπ∂‰∏îÊîØÊåÅ CommonJS„ÄÅAMD„ÄÅÂÖ®Â±ÄÊ®°ÂùóÂØπË±°Âíå ES6 Ê®°Âùó„ÄÇÈÄöËøá‰ΩøÁî®Êèí‰ª∂ÔºåÂÆÉ‰∏ç‰ªÖÂèØ‰ª•Âä†ËΩΩ JavaScriptÔºåËøòÂèØ‰ª•Âä†ËΩΩ CoffeeScript Âíå TypeScript„ÄÇ SystemJS ÁöÑÂè¶‰∏Ä‰∏™‰ºòÁÇπÊòØÔºåÂÆÉÂª∫Á´ãÂú® ES6 Ê®°ÂùóÂä†ËΩΩÂô®‰πã‰∏äÔºåÊâÄ‰ª•ÂÆÉÁöÑËØ≠Ê≥ïÂíå API Âú®Â∞ÜÊù•ÂæàÂèØËÉΩÊòØËØ≠Ë®ÄÁöÑ‰∏ÄÈÉ®ÂàÜÔºåËøô‰ºöËÆ©Êàë‰ª¨ÁöÑ‰ª£Á†ÅÊõ¥‰∏ç‰ºöËøáÊó∂„ÄÇË¶ÅÂºÇÊ≠•ËæìÂÖ•‰∏Ä‰∏™Ê®°ÂùóÔºåÂèØ‰ª•Áî®Â¶Ç‰∏ãËØ≠Ê≥ïÔºö JavaScript ‰ª£Á†Å: 1System.import(‚Äòmodule-name‚Äô); ÁÑ∂ÂêéÊàë‰ª¨ÂèØ‰ª•Áî®ÈÖçÁΩÆ API Êù•ÈÖçÁΩÆ SystemJS ÁöÑË°å‰∏∫Ôºö JavaScript ‰ª£Á†Å: 1234System.config(&#123; transplier: ‚Äòbabel‚Äô, baseURL: ‚Äò/app‚Äô&#125;); ‰∏äÈù¢ÁöÑÈÖçÁΩÆ‰ºöËÆ© SystemJS ‰ΩøÁî® babel ‰Ωú‰∏∫ ES6 Ê®°ÂùóÁöÑÁºñËØëÂô®ÔºåÂπ∂‰∏î‰ªé /app ÁõÆÂΩïÂä†ËΩΩÊ®°Âùó„ÄÇ ÈöèÁùÄÁé∞‰ª£ JavaScript Â∫îÁî®Á®ãÂ∫èÂèòÂæóË∂äÊù•Ë∂äÂ§ßÔºåË∂äÊù•Ë∂äÂ§çÊùÇÔºåÂºÄÂèëÂ∑•‰ΩúÊµÅ‰πüÊòØÂ¶ÇÊ≠§„ÄÇÊâÄ‰ª•Êàë‰ª¨‰∏ç‰ªÖ‰ªÖÊ®°ÂùóÂä†ËΩΩÂô®ÔºåËøòÂæóÂéªÂØªÊâæÂºÄÂèëÊúçÂä°Âô®„ÄÅÁîü‰∫ßÁöÑÊ®°ÂùóÊâìÂåÖÂô®‰ª•ÂèäÁ¨¨‰∏âÊñπÊ®°ÂùóÁöÑÂåÖÁÆ°ÁêÜÂô®„ÄÇ JSPMJSPM ÊòØ JavaScript ÂºÄÂèëÂ∑•ÂÖ∑ÁöÑÁëûÂ£´ÂÜõÂàÄÔºåÂÆÉÊòØÊó¢ÊòØÂåÖÁÆ°ÁêÜÂô®ÔºåÂèàÊòØÊ®°ÂùóÂä†ËΩΩÂô®ÔºåÂèàÊòØÊ®°ÂùóÊâìÂåÖÂô®„ÄÇ Áé∞‰ª£ JavaScript ÂºÄÂèëÂæàÂ∞ëÂè™ÊòØÈúÄË¶ÅËá™Â∑±ÁöÑÊ®°ÂùóÔºåÁªùÂ§ßÈÉ®ÂàÜÊó∂ÂÄôÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÁ¨¨‰∏âÊñπÊ®°Âùó„ÄÇ‰ΩøÁî® JSPMÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Â¶Ç‰∏ãÁöÑÂëΩ‰ª§Ôºå‰ªé NPM ÊàñËÄÖ Github ÂÆâË£ÖÁ¨¨‰∏âÊñπÊ®°ÂùóÔºö CommandLine ‰ª£Á†Å: 1jspm install npm:package-name or github:package/name ‰∏äËø∞ÂëΩ‰ª§‰ºö‰ªé npm ÊàñËÄÖ github ‰∏ãËΩΩÂåÖÔºåÂπ∂Â∞ÜÂåÖÂÆâË£ÖÂà∞ jspm_packages ÁõÆÂΩï„ÄÇ Âú®ÂºÄÂèëÊ®°Âºè‰∏ãÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® jspm-server „ÄÇÂÉè Webpack Dev Server ‰∏ÄÊ†∑ÔºåÂÆÉ‰ºöÊ£ÄÊµã‰ª£Á†ÅÊîπÂèòÔºåÈáçÊñ∞Âä†ËΩΩÊµèËßàÂô®Êù•ÊòæÁ§∫ÊîπÂèò„ÄÇ‰∏é Webpack Dev Server ‰∏çÂêåÁöÑÊòØÔºåjspm-server Áî®ÁöÑÊòØ SystemJS Ê®°ÂùóÂä†ËΩΩÂô®„ÄÇÊâÄ‰ª•ÔºåÊØèÊ¨°ÂÆÉÊ£ÄÊµã‰∫ÜÊñá‰ª∂ÁöÑÊîπÂèòÊó∂Ôºå‰∏ç‰ºöÂ∞ÜÊâÄÊúâÊñá‰ª∂ËØªÂèñÊù•ÊâìÂåÖÔºåËÄåÊòØÂè™Âä†ËΩΩÈ°µÈù¢ÊâÄÈúÄË¶ÅÁöÑÊ®°Âùó„ÄÇ Âú®ÈÉ®ÁΩ≤Êó∂ÔºåËÇØÂÆöË¶ÅÊâìÂåÖ‰ª£Á†Å„ÄÇJSPM Â∏¶ÊúâÊâìÂåÖÂô®ÔºåÂèØ‰ª•Áî®Â¶Ç‰∏ãÂëΩ‰ª§ÂØπ‰ª£Á†ÅÊâìÂåÖÔºö CommandLine ‰ª£Á†Å: 1jspm bundle main.js bundle.js Âú®ÂπïÂêéÔºåJSPM Áî® rollup ‰Ωú‰∏∫ÂÆÉÁöÑÊâìÂåÖÂô®„ÄÇ ÊÄªÁªìÊàëÂ∏åÊúõÊú¨ÊñáÁªô‰∫ÜË∂≥Â§üÁöÑ‰ø°ÊÅØÊù•ÁêÜËß£ JavaScript Ê®°ÂùóÁöÑËØçÊ±á„ÄÇÁé∞Âú®‰Ω†‰πüËÆ∏‰ºöÈóÆÔºå‰∏ã‰∏Ä‰∏™È°πÁõÆÊàëÂ∫îËØ•Áî®‰ªÄ‰πàÂë¢Ôºü‰∏çÂπ∏ÁöÑÊòØÔºåÊàëÂõûÁ≠î‰∏ç‰∫ÜËøô‰∏™ÈóÆÈ¢ò„ÄÇÁé∞Âú®‰Ω†ÊúâËÉΩÂäõÂºÄÂßãËá™Â∑±ÁöÑÊé¢Á¥¢„ÄÇÂ∏åÊúõÊú¨ÊñáËÉΩËÆ©‰Ω†Êõ¥ÂÆπÊòìÁêÜËß£ÊàëÊèêÂà∞ÁöÑÊúâÂÖ≥Â∑•ÂÖ∑ÁöÑÊñáÊ°£ÂíåÊñáÁ´†„ÄÇ Êú¨ÊñáÊâÄÊúâÁöÑ‰ª£Á†ÅÁ§∫‰æãÈÉΩÂèØ‰ª•Âú® Ëøô‰∏™ Github ‰ªìÂ∫ì ‰∏≠ÊâæÂà∞„ÄÇÂ¶ÇÊúâ‰ªª‰ΩïÁñëÈóÆÔºåËØ∑Âú®‰∏ãÈù¢ÁïôË®Ä„ÄÇ ÂéüÊñáÈìæÊé•Ôºöhttps://medium.com/@sungyeol.choi/javascript-module-module-loader-module-bundler-es6-module-confused-yet-6343510e7bde","categories":[{"name":"ÂâçÁ´ØÂ∑•Á®ãÂåñ","slug":"ÂâçÁ´ØÂ∑•Á®ãÂåñ","permalink":"https://justsso1.github.io/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"Ê®°ÂùóÂåñ","slug":"Ê®°ÂùóÂåñ","permalink":"https://justsso1.github.io/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/"}]},{"title":"Áî±ÊµÖÂÖ•Ê∑±ËÆ≤Ëß£Êï∞ÁªÑÁöÑreduceÁî®Ê≥ï","slug":"Áî±ÊµÖÂÖ•Ê∑±ËÆ≤Ëß£Êï∞ÁªÑÁöÑreduceÁî®Ê≥ï","date":"2020-07-12T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/07/13/Áî±ÊµÖÂÖ•Ê∑±ËÆ≤Ëß£Êï∞ÁªÑÁöÑreduceÁî®Ê≥ï/","permalink":"https://justsso1.github.io/2020/07/13/%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1%E8%AE%B2%E8%A7%A3%E6%95%B0%E7%BB%84%E7%9A%84reduce%E7%94%A8%E6%B3%95/","excerpt":"","text":"Êï∞ÁªÑ‰∏≠ÁöÑreduceÁäπÂ¶Ç‰∏ÄÂè™È≠îÊ≥ïÊ£íÔºåÈÄöËøáÂÆÉÂèØ‰ª•ÂÅö‰∏Ä‰∫õÈªëÁßëÊäÄ‰∏ÄÊ†∑ÁöÑ‰∫ãÊÉÖ„ÄÇÊú¨Êñá‰ªéapiËÆ≤Ëß£Âà∞‰∏ÄËà¨Áî®Ê≥ïÂÜçÂà∞È´òÁ∫ßÁî®Ê≥ïÔºåÁî±ÊµÖÂÖ•Ê∑±ÁöÑËÆ≤‰∏ÄËÆ≤Êï∞ÁªÑ‰∏≠ÁöÑreduce„ÄÇMDNÈìæÊé• Array.prototype.reducereduceÁöÑapiÊòØËøôÊ†∑ÁöÑÔºå reduce(callback(accumulator, currentValue[, index, array])[,initialValue]) Callback accumulator ÁßØÁ¥ØÁöÑÂÄº currentValue ÂΩìÂâçÂÄº -index ÂΩìÂâç‰∏ãÊ†á array ÂΩìÂâçÊï∞ÁªÑ initialValue ÂàùÂßãÂÄº reduceÊé•Âèó‰∏§‰∏™ÂèÇÊï∞ÔºåÂõûË∞ÉÂáΩÊï∞ÂíåÂàùËØÜÂÄºÔºåÂàùÂßãÂÄºÊòØÂèØÈÄâÁöÑ„ÄÇÂõûË∞ÉÂáΩÊï∞Êé•Âèó4‰∏™ÂèÇÊï∞ÔºöÁßØÁ¥ØÂÄº„ÄÅÂΩìÂâçÂÄº„ÄÅÂΩìÂâç‰∏ãÊ†á„ÄÅÂΩìÂâçÊï∞ÁªÑ„ÄÇÂ¶ÇÊûúreduceÁöÑÂèÇÊï∞Âè™Êúâ‰∏Ä‰∏™ÔºåÈÇ£‰πàÁßØÁ¥ØÂÄº‰∏ÄÂºÄÂßãÊòØÊï∞ÁªÑ‰∏≠Á¨¨‰∏Ä‰∏™ÂÄºÔºåÂ¶ÇÊûúreduceÁöÑÂèÇÊï∞Êúâ‰∏§‰∏™ÔºåÈÇ£‰πàÁßØÁ¥ØÂÄº‰∏ÄÂºÄÂßãÊòØÂá∫ÂÖ•ÁöÑinitialValueÂàùÂßãÂÄº„ÄÇÁÑ∂ÂêéÂú®ÊØè‰∏ÄÊ¨°Ëø≠‰ª£Êó∂ÔºåËøîÂõûÁöÑÂÄº‰Ωú‰∏∫‰∏ã‰∏ÄÊ¨°Ëø≠‰ª£ÁöÑaccumulator ÁßØÁ¥ØÂÄº„ÄÇ ÈáçË¶ÅËØ¥ÊòéÔºöÂ¶ÇÊûúÊú™ËÆæÁΩÆinitialValueÔºåÈÇ£‰πàreduceÂ∞Ü‰ΩøÁî®ÊÇ®ÁöÑÁ¨¨‰∏Ä‰∏™Êï∞ÁªÑÂÄº‰Ωú‰∏∫Á¨¨‰∏ÄÊ¨°Ëø≠‰ª£ÁöÑaccumulatorÔºå‰ªéÁ¨¨‰∫å‰∏™Êï∞ÁªÑÂÖÉÁ¥†‰∏äÂºÄÂßãÂæ™ÁéØÔºå‰ªéindex&#x3D;1ÂºÄÂßãÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ ‰ª•‰∏ãÊòØreduceÁöÑÂá†ÁßçÂÆûÈôÖÂ∫îÁî®„ÄÇ Â∞ÜÊï∞ÁªÑËΩ¨Âåñ‰∏∫ÂØπË±° Â∞Ü‰∏ãÈù¢ÁöÑÊï∞ÁªÑËΩ¨Êàê‰ª•id‰∏∫keyÁöÑÂØπË±°„ÄÇ 1234567891011121314151617181920212223242526272829303132333435const userList = [ &#123; id: 1, username: &#x27;john&#x27;, sex: 1, email: &#x27;john@163.com&#x27; &#125;, &#123; id: 2, username: &#x27;jerry&#x27;, sex: 1, email: &#x27;jerry@163.com&#x27; &#125;, &#123; id: 3, username: &#x27;nancy&#x27;, sex: 0, email: &#x27;&#x27; &#125;];let objUserList = userList.reduce(keyByUserNameReducer, &#123;&#125;)function keyByUserNameReducer(acculumator, currentValue, currentIndex, array) &#123; return &#123;...acculumator, [currentValue.id]: currentValue&#125;&#125;console.log(objUserList)// &#123;// &#x27;1&#x27;: &#123; id: 1, username: &#x27;john&#x27;, sex: 1, email: &#x27;john@163.com&#x27; &#125;,// &#x27;2&#x27;: &#123; id: 2, username: &#x27;jerry&#x27;, sex: 1, email: &#x27;jerry@163.com&#x27; &#125;,// &#x27;3&#x27;: &#123; id: 3, username: &#x27;nancy&#x27;, sex: 0, email: &#x27;&#x27; &#125;// &#125; Â∞ÜÂ∞èÊï∞ÁªÑÂ±ïÂºÄÊàêÂ§ßÊï∞ÁªÑÂ∞Ü‰∏ãÈù¢Êï∞ÁªÑÊåâÁÖßÈÄóÂè∑ÂàÜÂâ≤. 1234567891011121314151617181920212223242526272829303132const fileLines = [ &#x27;Inspector Algar,Inspector Bardle,Mr. Barker,Inspector Barton&#x27;, &#x27;Inspector Baynes,Inspector Bradstreet,Inspector Sam Brown&#x27;, &#x27;Monsieur Dubugue,Birdy Edwards,Inspector Forbes,Inspector Forrester&#x27;, &#x27;Inspector Gregory,Inspector Tobias Gregson,Inspector Hill&#x27;, &#x27;Inspector Stanley Hopkins,Inspector Athelney Jones&#x27;];let commaArray = fileLines.reduce(function (acculumator, currentValue, currentIndex, array) &#123; return acculumator.concat(currentValue.split(/,/g))&#125;, [])console.log(commaArray)/*[ &#x27;Inspector Algar&#x27;, &#x27;Inspector Bardle&#x27;, &#x27;Mr. Barker&#x27;, &#x27;Inspector Barton&#x27;, &#x27;Inspector Baynes&#x27;, &#x27;Inspector Bradstreet&#x27;, &#x27;Inspector Sam Brown&#x27;, &#x27;Monsieur Dubugue&#x27;, &#x27;Birdy Edwards&#x27;, &#x27;Inspector Forbes&#x27;, &#x27;Inspector Forrester&#x27;, &#x27;Inspector Gregory&#x27;, &#x27;Inspector Tobias Gregson&#x27;, &#x27;Inspector Hill&#x27;, &#x27;Inspector Stanley Hopkins&#x27;, &#x27;Inspector Athelney Jones&#x27; ]*/ Áî®reduceÂÆûÁé∞flatMap 1234567891011121314// Êï∞ÁªÑÁöÑflatMap// flatMapÁöÑÂ∫ïÂ±ÇÁöÑÊìç‰ΩúÔºöÂÖà‰ΩøÁî®mapÊìç‰ΩúÔºåÁÑ∂ÂêéÂØπÂæóÂà∞ÁöÑÊï∞ÁªÑ‰ªÖÂ±ïÂºÄ‰∏ÄÂ±ÇÂÜçÂæóÂà∞‰∏Ä‰∏™Êï∞ÁªÑconst arr = [&quot;‰ªäÂ§©Â§©Ê∞î‰∏çÈîô&quot;, &quot;&quot;, &quot;Êó©‰∏äÂ•Ω&quot;];let flatMapArr = arr.flatMap((item, index) =&gt; &#123; return item.split(&quot;&quot;)&#125;)console.log(flatMapArr) // [&#x27;‰ªä&#x27;, &#x27;Â§©&#x27;, &#x27;Â§©&#x27;,&#x27;Ê∞î&#x27;, &#x27;‰∏ç&#x27;, &#x27;Èîô&#x27;,&#x27;Êó©&#x27;, &#x27;‰∏ä&#x27;, &#x27;Â•Ω&#x27;]// ‰ΩøÁî®Êï∞ÁªÑÁöÑreduceÂÆûÁé∞Êï∞ÁªÑÁöÑflatMaplet reduceFlatMap = arr.reduce(function (acculumator, currentValue, currentIndex, array) &#123; return [...acculumator, ...currentValue.split(&#x27;&#x27;)]&#125;, [])console.log(reduceFlatMap) // [&#x27;‰ªä&#x27;, &#x27;Â§©&#x27;, &#x27;Â§©&#x27;,&#x27;Ê∞î&#x27;, &#x27;‰∏ç&#x27;, &#x27;Èîô&#x27;,&#x27;Êó©&#x27;, &#x27;‰∏ä&#x27;, &#x27;Â•Ω&#x27;] ÊåâÈ°∫Â∫èÊâßË°åÂºÇÊ≠•ÂáΩÊï∞ Ê†πÊçÆuserListÊï∞ÁªÑÁöÑnameÂ±ûÊÄßÂéª‰æùÊ¨°ËØ∑Ê±ÇÊï∞ÊçÆ„ÄÇ 123456789101112131415161718let asyncReducer = userList.reduce(async function (acculumator, currentValue, currentIndex, array) &#123; const obj = await acculumator.then() let re = await new Promise((resolve, reject) =&gt; &#123; // Áî® setTimeout Ê®°ÊãüËØ∑Ê±ÇÊï∞ÁªÑ setTimeout(() =&gt; &#123; resolve(`to=&gt;$&#123;currentValue.username&#125;`) &#125;, 1000) &#125;) return &#123;...obj, [currentValue.username]: re&#125;&#125;, Promise.resolve(&#123;&#125;))asyncReducer.then(res =&gt; &#123; console.log(res)&#125;)// 3s‰πãÂêéÊâìÂç∞Ôºö// &#123; john: &#x27;to=&gt;john&#x27;, jerry: &#x27;to=&gt;jerry&#x27;, nancy: &#x27;to=&gt;nancy&#x27; &#125; ÊÄªÁªìÔºö ËÆ∞‰ΩèÂú®Â§ÑÁêÜÂØπË±°Êï∞ÁªÑÊó∂Ë¶ÅÊåáÂÆö‰∏Ä‰∏™initialValue Êï∞Â≠óÊï∞ÁªÑ‰ΩøÁî®reduce‰ª£Á†ÅÂπ≤ÂáÄÔºåËØ∑Â∞ΩÈáè‰∏çË¶ÅÊääreduceÂáΩÊï∞Ëøá‰∫éÂ§çÊùÇ ‰∏çË¶ÅÂøòËÆ∞Âú®ÂõûË∞ÉÂáΩÊï∞‰∏≠ËøîÂõûÔºåÂê¶ÂàôÊúÄÂêéÂæóÂà∞ÁöÑÂÄºÂ∞ÜÂèØËÉΩÂá∫Áé∞ÈîôËØØ ÂõûË∞ÉÂáΩÊï∞ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞indexËÆøÈóÆËø≠‰ª£Ê¨°Êï∞ reduceÂ§ÑÁêÜÊó∂‰ºöË∑≥ËøáÊï∞ÁªÑÁ©∫ÂÄº","categories":[],"tags":[{"name":"Êï∞ÁªÑ","slug":"Êï∞ÁªÑ","permalink":"https://justsso1.github.io/tags/%E6%95%B0%E7%BB%84/"}]},{"title":"ÊµèËßàÂô®‰∏≠ÁöÑÂÆâÂÖ®","slug":"ÊµèËßàÂô®-ÂÆâÂÖ®","date":"2020-06-16T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/06/17/ÊµèËßàÂô®-ÂÆâÂÖ®/","permalink":"https://justsso1.github.io/2020/06/17/%E6%B5%8F%E8%A7%88%E5%99%A8-%E5%AE%89%E5%85%A8/","excerpt":"","text":"ÊµèËßàÂô®‰∏≠ÁöÑÂÆâÂÖ®ÊµèËßàÂô®‰∏≠ÁöÑÂÆâÂÖ®ÂàÜ‰∏∫‰∏âÂ§ßÂùó„ÄÇWebÁΩëÈ°µÂÆâÂÖ®ÔºåÊµèËßàÂô®ÁΩëÁªú ÂÆâÂÖ®ÂíåÊµèËßàÁ≥ªÁªüÂÆâÂÖ®„ÄÇ ÂÆâÂÖ®Á≠ñÁï•ÔºöÂêåÊ∫êÁ≠ñÁï•ÔºàSame-Origin policyÔºâ„ÄÇÂ¶ÇÊûú‰∏§‰∏™urlÔºåÂçèËÆÆÁõ∏Âêå„ÄÅÂüüÂêçÁõ∏Âêå„ÄÅÁ´ØÂè£Áõ∏ÂêåÔºåÈÇ£‰πàËøô‰∏§‰∏™urlÊòØÂêåÊ∫êÁöÑ„ÄÇÊµèËßàÂô®ËÆ§‰∏∫‰∏§‰∏™Áõ∏ÂêåÁöÑÊ∫ê‰πãÈó¥ÊòØÂèØ‰ª•‰∫íÁõ∏ËÆøÈóÆËµÑÊ∫êÂíåÊìç‰ΩúdomÁöÑ„ÄÇ‰∏§‰∏™‰∏çÂêåÁöÑÊ∫ê‰πãÈó¥ÊÉ≥Ë¶ÅËÆøÈóÆËµÑÊ∫êÊàñÊìç‰ΩúdomÔºåÈÇ£‰πà‰ºöÊúâ‰∏ÄÂ•óÂÆâÂÖ®Êú∫Âà∂Âà∂Á∫¶ÔºåÊàë‰ª¨ÊääËøôÂè´ÂÅöÂêåÊ∫êÁ≠ñÁï•„ÄÇ ÂêåÊ∫êÁ≠ñÁï•‰ºöÈöîÁ¶ª‰∏çÂêåÊ∫êÁöÑDOM„ÄÅÔºåÈ°µÈù¢Êï∞ÊçÆÂÆâÂÖ®ÂíåÁΩëÁªúÈÄö‰ø°ÔºåËøõËÄåÂÆûÁé∞webÈ°µÈù¢ÁöÑÂÆâÂÖ®ÊÄß„ÄÇ È°µÈù¢‰∏≠ÂèØ‰ª•ÂºïÁî®Á¨¨‰∏âÊñπËµÑÊ∫êÔºå‰∏çËøáËøô‰πüÊö¥Èú≤‰∫ÜÂæàÂ§öËØ∏Â§öXSSÁöÑÂÆâÂÖ®ÈóÆÈ¢òÔºåÊØîÂ¶ÇÈ°µÈù¢Âä†ËΩΩ‰∫Ü‰∏Ä‰∏™ÊÅ∂ÊÑèËÑöÊú¨ÔºåËØ•ËÑöÊú¨‰ºöÁ™ÉÂèñÁî®Êà∑ÁöÑcookie‰ø°ÊÅØ„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥XSSÊîªÂáªÔºåÊµèËßàÂô®‰∏≠Â¢ûÂä†‰∫ÜCSPÔºàÂÜÖÂÆπÂÆâÂÖ®Á≠ñÁï•ÔºâÔºåCSPÁöÑÊ†∏ÂøÉÊÄùÊÉ≥ÊòØËÆ©ÊúçÂä°Âô®ÂÜ≥ÂÆöÊµèËßàÂô®ËÉΩÂ§üÂä†ËΩΩÂì™‰∫õËµÑÊ∫êÔºåËÆ©ÊúçÂä°Âô®ÂÜ≥ÂÆöÊµèËßàÂô®ËÉΩÂ§üÊâßË°åÂì™‰∫õÂÜÖËÅîJavaScript‰ª£Á†Å„ÄÇ ‰ΩøÁî®XMLHttpRequestÂíåFetchÈÉΩÊòØÊó†Ê≥ïÁõ¥Êé•ËøõË°åË∑®ÂüüËØ∑Ê±ÇÁöÑÔºåÂõ†Ê≠§ÊµèËßàÂô®Âú®ËøôÁßç‰∏•Ê†ºÊ®°Âºè‰πã‰∏äÂºïÂÖ•‰∫ÜCORSÔºàË∑®ÂüüËµÑÊ∫êÂÖ±‰∫´ÔºâÔºåËÆ©ÂÖ∂ÂèØ‰ª•ÂÆâÂÖ®ÁöÑË∑®Âüü„ÄÇ ‰∏§‰∏™‰∏çÂêåÁöÑÊ∫êÁöÑDOMÊòØ‰∏çËÉΩ‰∫íÁõ∏Êìç‰ΩúÁöÑÔºåÂõ†Ê≠§ÊµèËßàÂô®‰∏≠Âá∫Áé∞‰∫ÜË∑®ÊñáÊ°£Ê∂àÊÅØÊú∫Âà∂ÔºåËÆ©ÂÖ∂ÂèØ‰ª•ÊØîËæÉÂÆâÂÖ®ÁöÑÈÄö‰ø°„ÄÇ Ë∑®Á´ôËÑöÊú¨ÊîªÂáª(XSS)XSS(Cross Site Scripting)Ë∑®Á´ôËÑöÊú¨ÊîªÂáªÔºå‰∏ªË¶ÅÊòØÁΩëÁ´ôÂä†ËΩΩ‰∫Ü‰∏Ä‰∫õÊÅ∂ÊÑèËÑöÊú¨„ÄÇÊÅ∂ÊÑèËÑöÊú¨‰ºöÂÅö‰ª•‰∏ãÊÅ∂‰∫ãÔºåÁ™ÉÂèñÁî®Êà∑ÁöÑcookie‰ø°ÊÅØÔºåÁõëÂê¨Áî®Êà∑Ë°å‰∏∫ÔºåÊØîÂ¶ÇËé∑ÂèñÁî®Êà∑ÁöÑËæìÂÖ•‰ø°ÊÅØÔºõÂú®È°µÈù¢ÁîüÊàêÂπøÂëä„ÄÇ ÊÅ∂ÊÑèËÑöÊú¨ÊòØÊÄé‰πàË¢´Ê≥®ÂÖ•ÁöÑ: Â≠òÂÇ®ÂûãXSS ÈªëÂÆ¢Â∞ÜÊÅ∂ÊÑèËÑöÊú¨Â≠òÂÇ®Âà∞Ê≠£Â∏∏ÊúçÂä°Âô®‰∏≠ÔºåÂΩìÁî®Êà∑ËØ∑Ê±ÇÂà∞ÂåÖÂê´ÊúâÊÅ∂ÊÑèËÑöÊú¨ÁöÑÁΩëÈ°µÊó∂ÔºåÁî®Êà∑ÁöÑÊµèËßàÂô®Â∞±‰ºöÊâßË°åÊÅ∂ÊÑèËÑöÊú¨ÔºåÊÅ∂ÊÑèËÑöÊú¨Á™ÉÂèñÁî®Êà∑cookieÂèëÈÄÅÂà∞ÈªëÂÆ¢ÊúçÂä°Âô® ‰ª•ÂñúÈ©¨ÊãâÈõÖ‰∏∫‰æãÔºåÈªëÂÆ¢Â∞Ü‰∏ÄÂº†‰∏ìËæëÁöÑÂêçÂ≠óÂëΩÂêç‰∏∫&lt;script src=&quot;aaa.com/b.js&quot;&gt;&lt;/script&gt;ÔºåÊúçÂä°Âô®Â∞ÜËøô‰∏™ÂêçÂ≠óÂ≠òÂÇ®Âà∞Êï∞ÊçÆÂ∫ì‰∫ÜÔºåÁÑ∂ÂêéÊôÆÈÄöÁî®Êà∑ÁúãËøô‰∏™‰∏ìËæëÊó∂ÔºåÊµèËßàÂô®Â∞±‰ºöËØ∑Ê±ÇÊÅ∂ÊÑèËÑöÊú¨ÔºåÊÅ∂ÊÑèËÑöÊú¨‰ºöËØªÂèñÁî®Êà∑ÁöÑcookieÔºåËøôÊ†∑Áî®Êà∑cookieË¢´ÁõóÁî®ÔºåÈªëÂÆ¢ÂèØ‰ª•ÂÜíÁî®Áî®Êà∑ÁôªÂΩïÂÅö‰∏Ä‰∫õÊÅ∂‰∫ã‰∫Ü„ÄÇ ÂèçÂ∞ÑÂûãXSS ÊÅ∂ÊÑèËÑöÊú¨Â±û‰∫éÁî®Êà∑ÂèëÈÄÅÁªôÊúçÂä°Âô®Á´ØËØ∑Ê±ÇÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁÑ∂ÂêéÊúçÂä°Âô®Á´ØÂÜçÂ∞ÜÊÅ∂ÊÑèËÑöÊú¨ËøîÂõûÁªôÊµèËßàÂô®Á´ØÔºåÂΩìÊÅ∂ÊÑèJavaScriptËÑöÊú¨Âú®Áî®Êà∑È°µÈù¢‰∏≠Ë¢´ÊâßË°åÊó∂ÔºåÈªëÂÆ¢Â∞±ÂèØ‰ª•Âà©Áî®ËØ•ÊÅ∂ÊÑèËÑöÊú¨ÂÅö‰∏Ä‰∫õ‰∫ãÊÉÖ„ÄÇÊØîÂ¶Ç‰∏Ä‰∏™‰∏çÊòéÈìæÊé•ÔºåËØ•ÈìæÊé•ÁöÑquery‰∏≠ÂåÖÂê´&lt;script&gt;alert(&quot;‰Ω†Ë¢´ÊîªÂáª‰∫Ü&quot;)&lt;/script&gt;ÔºåÈÇ£‰πàÂΩìÁî®Êà∑‰∏çÂ∞èÂøÉÁÇπ‰∫ÜËøô‰∏™ÈìæÊé•ÔºåÂèëÈÄÅÂà∞ÊúçÂä°Âô®ÔºåÊúçÂä°Âô®Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂèàÂ∞ÜÊÅ∂ÊÑè‰ª£Á†ÅÂèëÈÄÅÁªô‰∫ÜÊµèËßàÂô®Á´ØÔºåËøôÊ†∑ÊµèËßàÂô®Á´ØÂ∞±ËØªÂèñÂπ∂ÊâßË°å‰∫Ü&lt;script&gt;alert(&quot;‰Ω†Ë¢´ÊîªÂáª‰∫Ü&quot;)&lt;/script&gt; Âü∫‰∫éDOMÁöÑXSS Âü∫‰∫é DOM ÁöÑ XSS ÊîªÂáªÊòØ‰∏çÁâµÊ∂âÂà∞È°µÈù¢ Web ÊúçÂä°Âô®ÁöÑ„ÄÇÂÖ∑‰ΩìÊù•ËÆ≤ÔºåÈªëÂÆ¢ÈÄöËøáÂêÑÁßçÊâãÊÆµÂ∞ÜÊÅ∂ÊÑèËÑöÊú¨Ê≥®ÂÖ•Áî®Êà∑ÁöÑÈ°µÈù¢‰∏≠ÔºåÊØîÂ¶ÇÈÄöËøáÁΩëÁªúÂä´ÊåÅÂú®È°µÈù¢‰º†ËæìËøáÁ®ã‰∏≠‰øÆÊîπ HTML È°µÈù¢ÁöÑÂÜÖÂÆπÔºåËøôÁßçÂä´ÊåÅÁ±ªÂûãÂæàÂ§öÔºåÊúâÈÄöËøá WiFi Ë∑ØÁî±Âô®Âä´ÊåÅÁöÑÔºåÊúâÈÄöËøáÊú¨Âú∞ÊÅ∂ÊÑèËΩØ‰ª∂Êù•Âä´ÊåÅÁöÑÔºåÂÆÉ‰ª¨ÁöÑÂÖ±ÂêåÁÇπÊòØÂú® Web ËµÑÊ∫ê‰º†ËæìËøáÁ®ãÊàñËÄÖÂú®Áî®Êà∑‰ΩøÁî®È°µÈù¢ÁöÑËøáÁ®ã‰∏≠‰øÆÊîπ Web È°µÈù¢ÁöÑÊï∞ÊçÆ„ÄÇ Â≠òÂÇ®ÂûãXSSÂíåÂèçÂ∞ÑÊÄßXSSÊòØÊúçÂä°Âô®ÁöÑÂÆâÂÖ®ÊºèÊ¥ûÔºåÂü∫‰∫éDOMÁöÑXSSÊòØÊµèËßàÂô®ÁöÑÂÆâÂÖ®ÊºèÊ¥û„ÄÇ‰∏çËÆ∫Âì™ÁßçXSSÔºåÈÉΩÊòØË¶ÅÂÖàÂú®ÊµèËßàÂô®‰∏≠Ê≥®ÂÖ•ÊÅ∂ÊÑèËÑöÊú¨ÔºåÁÑ∂ÂêéÈÄöËøáÊÅ∂ÊÑèËÑöÊú¨ÂÜçÂ∞ÜÁî®Êà∑‰ø°ÊÅØÂèëÈÄÅÂà∞ÈªëÂÆ¢ÊúçÂä°Âô®‰∏ä„ÄÇÊâÄ‰ª•ÂÖ≥ÈîÆËøòÊòØÂæóÊµèËßàÂô®Á´ØÈòªÊ≠¢ÊÅ∂ÊÑèËÑöÊú¨ÁöÑÊ≥®ÂÖ•ÂíåÊÅ∂ÊÑèÊ∂àÊÅØÁöÑÂèëÈÄÅ„ÄÇ Âü∫‰∫éXSSÊîªÂáªÔºåÊàë‰ª¨Â∫îËØ•ÊÄé‰πàÈò≤ÊéßÂë¢Ôºü ÊúçÂä°Âô®ÂØπ‰∫éËæìÂÖ•ËÑöÊú¨ÂÅöËøáÊª§ÔºåËΩ¨Á†Å ÂâçÁ´ØÁ¨¶ÂêàCSPËßÑËåÉ cookie ‰∏≠Êúâ HttpOnlyÂ±ûÊÄßÔºåÈíàÂØπcookie ‰ΩøÁî®httponlyÔºåÁ¶ÅÊ≠¢JavaScriptÊìç‰Ωúcookie„ÄÇ ËØ¥ÈÅìCSPÔºåË¶Å‰ªîÁªÜËÅäËÅäÂÖ∑‰ΩìË¶ÅÊÄé‰πàÂÅöÔºåÊâçÂè´Á¨¶ÂêàCSPËßÑËåÉÂë¢Ôºühttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP CSRFÊîªÂáªCSRF(Cross Site Request Forgerys)Ë∑®Á´ôËØ∑Ê±Ç‰º™ÈÄ†ÔºåÂÖ≥ÈîÆÁöÑÁÇπÊúâÔºåÁõÆÊ†áÊúçÂä°Âô®Â≠òÂú®ÊºèÊ¥û„ÄÅÁî®Êà∑ÁôªÂΩïËøáÁΩëÁ´ôÂπ∂ÊúâÁôªÂΩïÊÄÅ„ÄÅÁî®Êà∑Ë¢´ËØ±ÂØºËøõÂÖ•ÈªëÂÆ¢ÁΩëÁ´ôÂπ∂Áî®Áî®Êà∑ÁöÑÁôªÂΩïÊÄÅÂèëÈÄÅ‰∫Ü‰º™ÈÄ†ËØ∑Ê±Ç CSSRFÊîªÂáªÔºå‰∏ªË¶ÅÊòØÂà©Áî®Áî®Êà∑ÁôªÂΩïÔºåËØ∑Ê±ÇÊúçÂä°Âô®ÁöÑÊºèÊ¥ûÊé•Âè£ÔºåÊâÄ‰ª•Êàë‰ª¨ÁöÑ‰∏ªÂäõÊîæÂú®Áî®Êà∑ÁôªÂΩïÊÄÅÂíåÊúçÂä°Âô®‰∏äÂÅö‰ª•‰∏ãÂá†ÁÇπÊù•Èò≤ËåÉÔºö ‰ªéÁî®Êà∑ÁôªÂΩïÊÄÅÁùÄÊâãÔºåÁî®Êà∑ÁöÑÁôªÂΩïÊÄÅÂíåcookieÊúâÁùÄÁ¥ßÂØÜÁöÑËÅîÁ≥ªÔºåÂ¶ÇÊûúÊàë‰ª¨ËÆ©Á¨¨‰∏âÊñπÁΩëÁ´ôËØªÂèñ‰∏çÂà∞Áî®Êà∑ÁöÑÁôªÂΩïÊÄÅÔºå‰πüÂ∞±ÊûÑ‰∏çÊàêÂç±ÂÆ≥Êìç‰Ωú‰∫Ü„ÄÇcookieÁöÑSamesiteÂèØ‰ª•ÂÅöÂà∞Á¶ÅÊ≠¢Êüê‰∫õcookieÂèëÈÄÅ„ÄÇ Samesite ÈÄâÈ°πÈÄöÂ∏∏ÊúâStrict Lax none ‰∏â‰∏™ÂÄº 1. StrictÊúÄ‰∏•Ê†ºÔºåÁ¶ÅÊ≠¢Á¨¨‰∏âÊñπCookie 2. Lax ÂÆΩÊùæÔºåÁ¨¨‰∏âÊñπÁ´ôÁÇπÁöÑgetÊñπÂºèÂèØ‰ª•Êê∫Â∏¶cookieÔºåÈÄöËøá img„ÄÅiframe Á≠âÊ†áÁ≠æÂä†ËΩΩÁöÑ URÁ¶ÅÊ≠¢Á¨¨‰∏âÊñπcookie 3. ËÄåÂ¶ÇÊûú‰ΩøÁî® None ÁöÑËØùÔºåÂú®‰ªª‰ΩïÊÉÖÂÜµ‰∏ãÈÉΩ‰ºöÂèëÈÄÅ Cookie Êï∞ÊçÆ„ÄÇ ÊúçÂä°Âô®Ê£ÄÊü•ÂèëËµ∑ËØ∑Ê±ÇÁöÑÁΩëÁ´ôÊù•Ê∫êÔºåÈÄöËøáhttpÂ§¥ÁöÑrefererÂíåorigin Ê£ÄÊü•ËØ∑Ê±ÇÊù•Ê∫êÁΩëÁ´ôÊòØ‰∏çÊòØÂèØÈù†ÁöÑÔºåËøõË°åËøáÊª§.OriginÂè™ÊúâÂüüÂêçÔºårefererÊúâÂüüÂêçÂíåÂÖ∑‰ΩìÂú∞ÂùÄ ÊúçÂä°Âô®Â¢ûÂä†CSRF tokenÔºåÊµèËßàÂô®ÂêëÊúçÂä°Âô®ÂèëËµ∑ËØ∑Ê±ÇÔºåÊúçÂä°Âô®Â∞Ücsrf tokenÊ≥®ÂÖ•Âà∞ÊµèËßàÂô®Á´ØÔºåÂ¶ÇÊûúÊµèËßàÂô®ÂèëÈÄÅÁöÑËØ∑Ê±Ç‰∏çÂåÖÂê´csrf tokenÁöÑËØùÔºåÈÇ£‰πàÊúçÂä°Âô®Â∞ÜÈ™åËØÅtoken‰∏çÂêàÊ≥ïÔºå‰ºöÊãíÁªùËØ∑Ê±Ç„ÄÇ","categories":[{"name":"ÊµèËßàÂô®","slug":"ÊµèËßàÂô®","permalink":"https://justsso1.github.io/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"}],"tags":[{"name":"ÂÆâÂÖ®","slug":"ÂÆâÂÖ®","permalink":"https://justsso1.github.io/tags/%E5%AE%89%E5%85%A8/"}]},{"title":"ChromeÂºÄÂèëËÄÖÂ∑•ÂÖ∑","slug":"ÊµèËßàÂô®-ChromeÂºÄÂèëËÄÖÂ∑•ÂÖ∑","date":"2020-06-03T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/06/04/ÊµèËßàÂô®-ChromeÂºÄÂèëËÄÖÂ∑•ÂÖ∑/","permalink":"https://justsso1.github.io/2020/06/04/%E6%B5%8F%E8%A7%88%E5%99%A8-Chrome%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7/","excerpt":"","text":"ChromeÂºÄÂèëËÄÖÂ∑•ÂÖ∑ÔºöÂà©Áî®ÁΩëÁªúÈù¢ÊùøÂÅöÊÄßËÉΩÂàÜÊûê Ê∏≤ÊüìÊµÅÊ∞¥Á∫øÔºöCSSÂ¶Ç‰ΩïÂΩ±ÂìçÈ¶ñÊ¨°Âä†ËΩΩÊó∂ÁöÑÁôΩÂ±èÊó∂Èó¥ Â¶Ç‰ΩïÁ≥ªÁªüÂú∞‰ºòÂåñÈ°µÈù¢Ôºü ËôöÊãüdom ÂΩìÈ°µÈù¢domËäÇÁÇπÂæàÂ§öÊó∂ÔºåjsÊìç‰ΩúÁúüÂÆûÁöÑdom‰ºöËß¶ÂèëÈáçÊéíÈáçÁªòÂêàÊàêÁ≠â‰∏ÄÁ≥ªÂàóÊìç‰ΩúÔºåÂæàÂΩ±ÂìçÈ°µÈù¢ÊÄßËÉΩ„ÄÇÊâÄ‰ª•ÈúÄË¶ÅËôöÊãüdomÊù•ÂÅöÁúüÂÆûdomÁöÑÁºìÂ≠òÂ±ÇÔºåÂΩìÈ°µÈù¢ÊúâÂèòÂåñÊó∂Ôºå‰ºöÊØîËæÉÂâçÂêé‰∏§È¢óËôöÊãüdomÔºåÊâæÂá∫ÁúüÊ≠£ÈúÄË¶ÅÂèòÂåñÁöÑÁÇπÔºåÁÑ∂ÂêéÊõ¥Êñ∞ÂÆÉÔºåÁÑ∂ÂêéÂÜçÊõ¥Êñ∞ÁúüÂÆûÁöÑdom,ËøôÊ†∑ÂèØ‰ª•ÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑÊ∏≤ÊüìÔºåÊèêÈ´òÊÄßËÉΩ„ÄÇ ‰∏§‰∏™ËôöÊãüdomÁöÑÊØîËæÉËøáÁ®ãÔºåÂú®react‰∏≠Êõ¥Êñ∞ÁöÑÊú∫Âà∂Âè´ÂÅöfilber reconciler„ÄÇ‰ª•ÂâçÁî®ÁöÑÊòØreconcilerÁÆóÊ≥ïÔºåreconcilerÁÆóÊ≥ï‰ΩøÁî®ÈÄíÂΩíÊØîËæÉÔºåÂΩìËôöÊãüdomÊØîËæÉÂ§çÊùÇÊó∂Ôºå‰ºöÂ∏¶Êù•ÈóÆÈ¢òÔºåÊØîËæÉÂáΩÊï∞‰ºöÂç†ÊçÆ‰∏ªÁ∫øÁ®ãËøá‰πÖÔºåÂØºËá¥ÂÖ∂‰ªñ‰ªªÂä°Á≠âÂæÖÔºåÈÄ†ÊàêÈ°µÈù¢Âç°È°ø„ÄÇÊâÄ‰ª•reactÂõ¢ÈòüÊõ¥Êñ∞‰∫ÜreconcilerÁÆóÊ≥ïÔºåÂè´ÂÅöfilber reconcilerÔºåÁ±ª‰ºº‰∫é‚ÄúÂçèÁ®ã‚ÄùÔºåÊâßË°å‰∏ÄÊÆµÊó∂Èó¥‰ºöÂá∫ËÆ©‰∏ªÁ∫øÁ®ãÔºå‰∏ç‰ºöÂç†Áî®‰∏ªÁ∫øÁ®ãËøá‰πÖ„ÄÇ ËôöÊãüdomÊõ¥Êñ∞‰ΩøÁî®ÁöÑÁÆóÊ≥ïÊòØdiffÁÆóÊ≥ï„ÄÇ mvc mvvm","categories":[{"name":"ÊµèËßàÂô®","slug":"ÊµèËßàÂô®","permalink":"https://justsso1.github.io/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"}],"tags":[{"name":"ÂºÄÂèëËÄÖÂ∑•ÂÖ∑","slug":"ÂºÄÂèëËÄÖÂ∑•ÂÖ∑","permalink":"https://justsso1.github.io/tags/%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7/"}]},{"title":"‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂[Node.js]ÁØá","slug":"Ê∑±ÂÖ•ÁêÜËß£js‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂[Node.jsÁØá]","date":"2020-05-31T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/06/01/Ê∑±ÂÖ•ÁêÜËß£js‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂[Node.jsÁØá]/","permalink":"https://justsso1.github.io/2020/06/01/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3js%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6[Node.js%E7%AF%87]/","excerpt":"","text":"Âú®ÊµèËßàÂô®ÁØáÂ∑≤ÁªèÂØπ‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂Âíå‰∏Ä‰∫õÁõ∏ÂÖ≥ÁöÑÊ¶ÇÂøµ‰Ωú‰∫ÜËØ¶ÁªÜ‰ªãÁªçÔºå‰ΩÜ‰∏ªË¶ÅÊòØÈíàÂØπÊµèËßàÂô®Á´ØÁöÑÁ†îÁ©∂ÔºåNodeÁéØÂ¢ÉÊòØÂê¶‰πü‰∏ÄÊ†∑Âë¢ÔºüÂÖàÁúã‰∏Ä‰∏™demoÔºö 123456789101112131415setTimeout(()=&gt;&#123; console.log(&#x27;timer1&#x27;) Promise.resolve().then(function() &#123; console.log(&#x27;promise1&#x27;) &#125;)&#125;, 0)setTimeout(()=&gt;&#123; console.log(&#x27;timer2&#x27;) Promise.resolve().then(function() &#123; console.log(&#x27;promise2&#x27;) &#125;)&#125;, 0) ËÇâÁúºÁºñËØëËøêË°å‰∏Ä‰∏ãÔºåËíΩÔºåÂú®ÊµèËßàÂô®ÁöÑÁªìÊûúÂ∞±ÊòØ‰∏ãÈù¢Ëøô‰∏™‰∫ÜÔºåÈÅìÁêÜÈÉΩÊáÇÔºåÂ∞±‰∏çÁ¥ØËø∞‰∫Ü„ÄÇ 1234timer1promise1timer2promise2 ÈÇ£‰πàNode‰∏ãÊâßË°åÁúãÁúãÔºåÂí¶„ÄÇ„ÄÇ„ÄÇÂ•áÊÄ™ÔºåË∑üÊµèËßàÂô®ÁöÑËøêË°åÁªìÊûúÂπ∂‰∏ç‰∏ÄÊ†∑~ 1234timer1timer2promise1promise2 ‰æãÂ≠êËØ¥ÊòéÔºåÊµèËßàÂô®Âíå Node.js ÁöÑ‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂ÊòØÊúâÂå∫Âà´ÁöÑÔºå‰∏ÄËµ∑Êù•Áúã‰∏™Á©∂Á´üÂêß~ Node.jsÁöÑ‰∫ã‰ª∂Â§ÑÁêÜNode.jsÈááÁî®V8‰Ωú‰∏∫jsÁöÑËß£ÊûêÂºïÊìéÔºåËÄåI&#x2F;OÂ§ÑÁêÜÊñπÈù¢‰ΩøÁî®‰∫ÜËá™Â∑±ËÆæËÆ°ÁöÑlibuvÔºålibuvÊòØ‰∏Ä‰∏™Âü∫‰∫é‰∫ã‰ª∂È©±Âä®ÁöÑË∑®Âπ≥Âè∞ÊäΩË±°Â±ÇÔºåÂ∞ÅË£Ö‰∫Ü‰∏çÂêåÊìç‰ΩúÁ≥ªÁªü‰∏Ä‰∫õÂ∫ïÂ±ÇÁâπÊÄßÔºåÂØπÂ§ñÊèê‰æõÁªü‰∏ÄÁöÑAPIÔºå‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂‰πüÊòØÂÆÉÈáåÈù¢ÁöÑÂÆûÁé∞ÔºåÊ†∏ÂøÉÊ∫êÁ†ÅÂèÇËÄÉÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445int uv_run(uv_loop_t* loop, uv_run_mode mode) &#123; int timeout; int r; int ran_pending; r = uv__loop_alive(loop); if (!r) uv__update_time(loop); while (r != 0 &amp;&amp; loop-&gt;stop_flag == 0) &#123; uv__update_time(loop); // timersÈò∂ÊÆµ uv__run_timers(loop); // I/O callbacksÈò∂ÊÆµ ran_pending = uv__run_pending(loop); // idleÈò∂ÊÆµ uv__run_idle(loop); // prepareÈò∂ÊÆµ uv__run_prepare(loop); timeout = 0; if ((mode == UV_RUN_ONCE &amp;&amp; !ran_pending) || mode == UV_RUN_DEFAULT) timeout = uv_backend_timeout(loop); // pollÈò∂ÊÆµ uv__io_poll(loop, timeout); // checkÈò∂ÊÆµ uv__run_check(loop); // close callbacksÈò∂ÊÆµ uv__run_closing_handles(loop); if (mode == UV_RUN_ONCE) &#123; uv__update_time(loop); uv__run_timers(loop); &#125; r = uv__loop_alive(loop); if (mode == UV_RUN_ONCE || mode == UV_RUN_NOWAIT) break; &#125; if (loop-&gt;stop_flag != 0) loop-&gt;stop_flag = 0; return r;&#125; Ê†πÊçÆNode.jsÂÆòÊñπ‰ªãÁªçÔºåÊØèÊ¨°‰∫ã‰ª∂Âæ™ÁéØÈÉΩÂåÖÂê´‰∫Ü6‰∏™Èò∂ÊÆµÔºåÂØπÂ∫îÂà∞ libuv Ê∫êÁ†Å‰∏≠ÁöÑÂÆûÁé∞ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ timers Èò∂ÊÆµÔºöËøô‰∏™Èò∂ÊÆµÊâßË°åtimerÔºàsetTimeout„ÄÅsetIntervalÔºâÁöÑÂõûË∞É I&#x2F;O callbacks Èò∂ÊÆµÔºöÊâßË°å‰∏Ä‰∫õÁ≥ªÁªüË∞ÉÁî®ÈîôËØØÔºåÊØîÂ¶ÇÁΩëÁªúÈÄö‰ø°ÁöÑÈîôËØØÂõûË∞É idle, prepare Èò∂ÊÆµÔºö‰ªÖnodeÂÜÖÈÉ®‰ΩøÁî® poll Èò∂ÊÆµÔºöËé∑ÂèñÊñ∞ÁöÑI&#x2F;O‰∫ã‰ª∂, ÈÄÇÂΩìÁöÑÊù°‰ª∂‰∏ãnodeÂ∞ÜÈòªÂ°ûÂú®ËøôÈáå check Èò∂ÊÆµÔºöÊâßË°å setImmediate() ÁöÑÂõûË∞É close callbacks Èò∂ÊÆµÔºöÊâßË°å socket ÁöÑ close ‰∫ã‰ª∂ÂõûË∞É Êàë‰ª¨ÈáçÁÇπÁúãtimers„ÄÅpoll„ÄÅcheckËøô3‰∏™Èò∂ÊÆµÂ∞±Â•ΩÔºåÂõ†‰∏∫Êó•Â∏∏ÂºÄÂèë‰∏≠ÁöÑÁªùÂ§ßÈÉ®ÂàÜÂºÇÊ≠•‰ªªÂä°ÈÉΩÊòØÂú®Ëøô3‰∏™Èò∂ÊÆµÂ§ÑÁêÜÁöÑ„ÄÇ timers Èò∂ÊÆµtimers ÊòØ‰∫ã‰ª∂Âæ™ÁéØÁöÑÁ¨¨‰∏Ä‰∏™Èò∂ÊÆµÔºåNode ‰ºöÂéªÊ£ÄÊü•ÊúâÊó†Â∑≤ËøáÊúüÁöÑtimerÔºåÂ¶ÇÊûúÊúâÂàôÊääÂÆÉÁöÑÂõûË∞ÉÂéãÂÖ•timerÁöÑ‰ªªÂä°ÈòüÂàó‰∏≠Á≠âÂæÖÊâßË°åÔºå‰∫ãÂÆû‰∏äÔºåNode Âπ∂‰∏çËÉΩ‰øùËØÅtimerÂú®È¢ÑËÆæÊó∂Èó¥Âà∞‰∫ÜÂ∞±‰ºöÁ´ãÂç≥ÊâßË°åÔºåÂõ†‰∏∫NodeÂØπtimerÁöÑËøáÊúüÊ£ÄÊü•‰∏ç‰∏ÄÂÆöÈù†Ë∞±ÔºåÂÆÉ‰ºöÂèóÊú∫Âô®‰∏äÂÖ∂ÂÆÉËøêË°åÁ®ãÂ∫èÂΩ±ÂìçÔºåÊàñËÄÖÈÇ£‰∏™Êó∂Èó¥ÁÇπ‰∏ªÁ∫øÁ®ã‰∏çÁ©∫Èó≤„ÄÇÊØîÂ¶Ç‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºåsetTimeout() Âíå setImmediate() ÁöÑÊâßË°åÈ°∫Â∫èÊòØ‰∏çÁ°ÆÂÆöÁöÑ„ÄÇ 1234567setTimeout(() =&gt; &#123; console.log(&#x27;timeout&#x27;)&#125;, 0)setImmediate(() =&gt; &#123; console.log(&#x27;immediate&#x27;)&#125;) ‰ΩÜÊòØÊääÂÆÉ‰ª¨ÊîæÂà∞‰∏Ä‰∏™I&#x2F;OÂõûË∞ÉÈáåÈù¢ÔºåÂ∞±‰∏ÄÂÆöÊòØ setImmediate() ÂÖàÊâßË°åÔºåÂõ†‰∏∫pollÈò∂ÊÆµÂêéÈù¢Â∞±ÊòØcheckÈò∂ÊÆµ„ÄÇ poll Èò∂ÊÆµpoll Èò∂ÊÆµ‰∏ªË¶ÅÊúâ2‰∏™ÂäüËÉΩÔºö Â§ÑÁêÜ poll ÈòüÂàóÁöÑ‰∫ã‰ª∂ ÂΩìÊúâÂ∑≤Ë∂ÖÊó∂ÁöÑ timerÔºåÊâßË°åÂÆÉÁöÑÂõûË∞ÉÂáΩÊï∞ even loopÂ∞ÜÂêåÊ≠•ÊâßË°åpollÈòüÂàóÈáåÁöÑÂõûË∞ÉÔºåÁõ¥Âà∞ÈòüÂàó‰∏∫Á©∫ÊàñÊâßË°åÁöÑÂõûË∞ÉËææÂà∞Á≥ªÁªü‰∏äÈôêÔºà‰∏äÈôêÂÖ∑‰ΩìÂ§öÂ∞ëÊú™ËØ¶ÔºâÔºåÊé•‰∏ãÊù•even loop‰ºöÂéªÊ£ÄÊü•ÊúâÊó†È¢ÑËÆæÁöÑsetImmediate()ÔºåÂàÜ‰∏§ÁßçÊÉÖÂÜµÔºö Ëã•ÊúâÈ¢ÑËÆæÁöÑsetImmediate(), event loopÂ∞ÜÁªìÊùüpollÈò∂ÊÆµËøõÂÖ•checkÈò∂ÊÆµÔºåÂπ∂ÊâßË°åcheckÈò∂ÊÆµÁöÑ‰ªªÂä°ÈòüÂàó Ëã•Ê≤°ÊúâÈ¢ÑËÆæÁöÑsetImmediate()Ôºåevent loopÂ∞ÜÈòªÂ°ûÂú®ËØ•Èò∂ÊÆµÁ≠âÂæÖ Ê≥®ÊÑè‰∏Ä‰∏™ÁªÜËäÇÔºåÊ≤°ÊúâsetImmediate()‰ºöÂØºËá¥event loopÈòªÂ°ûÂú®pollÈò∂ÊÆµÔºåËøôÊ†∑‰πãÂâçËÆæÁΩÆÁöÑtimerÂ≤Ç‰∏çÊòØÊâßË°å‰∏ç‰∫Ü‰∫ÜÔºüÊâÄ‰ª•ÂíßÔºåÂú®pollÈò∂ÊÆµevent loop‰ºöÊúâ‰∏Ä‰∏™Ê£ÄÊü•Êú∫Âà∂ÔºåÊ£ÄÊü•timerÈòüÂàóÊòØÂê¶‰∏∫Á©∫ÔºåÂ¶ÇÊûútimerÈòüÂàóÈùûÁ©∫Ôºåevent loopÂ∞±ÂºÄÂßã‰∏ã‰∏ÄËΩÆ‰∫ã‰ª∂Âæ™ÁéØÔºåÂç≥ÈáçÊñ∞ËøõÂÖ•Âà∞timerÈò∂ÊÆµ„ÄÇ check Èò∂ÊÆµsetImmediate()ÁöÑÂõûË∞É‰ºöË¢´Âä†ÂÖ•checkÈòüÂàó‰∏≠Ôºå ‰ªéevent loopÁöÑÈò∂ÊÆµÂõæÂèØ‰ª•Áü•ÈÅìÔºåcheckÈò∂ÊÆµÁöÑÊâßË°åÈ°∫Â∫èÂú®pollÈò∂ÊÆµ‰πãÂêé„ÄÇ Â∞èÁªì event loop ÁöÑÊØè‰∏™Èò∂ÊÆµÈÉΩÊúâ‰∏Ä‰∏™‰ªªÂä°ÈòüÂàó ÂΩì event loop Âà∞ËææÊüê‰∏™Èò∂ÊÆµÊó∂ÔºåÂ∞ÜÊâßË°åËØ•Èò∂ÊÆµÁöÑ‰ªªÂä°ÈòüÂàóÔºåÁõ¥Âà∞ÈòüÂàóÊ∏ÖÁ©∫ÊàñÊâßË°åÁöÑÂõûË∞ÉËææÂà∞Á≥ªÁªü‰∏äÈôêÂêéÔºåÊâç‰ºöËΩ¨ÂÖ•‰∏ã‰∏Ä‰∏™Èò∂ÊÆµ ÂΩìÊâÄÊúâÈò∂ÊÆµË¢´È°∫Â∫èÊâßË°å‰∏ÄÊ¨°ÂêéÔºåÁß∞ event loop ÂÆåÊàê‰∫Ü‰∏Ä‰∏™ tick ËÆ≤ÂæóÂ•ΩÊúâÈÅìÁêÜÔºåÂèØÊòØÊ≤°ÊúâdemoÊàëËøòÊòØÁêÜËß£‰∏çÂÖ®ÂïäÔºåÊÜãÊÄ•ÔºånowÔºÅ 1234567891011const fs = require(&#x27;fs&#x27;)fs.readFile(&#x27;test.txt&#x27;, () =&gt; &#123; console.log(&#x27;readFile&#x27;) setTimeout(() =&gt; &#123; console.log(&#x27;timeout&#x27;) &#125;, 0) setImmediate(() =&gt; &#123; console.log(&#x27;immediate&#x27;) &#125;)&#125;) ÊâßË°åÁªìÊûúÂ∫îËØ•ÈÉΩÊ≤°ÊúâÁñëÈóÆ‰∫Ü 123readFileimmediatetimeout Node.js ‰∏éÊµèËßàÂô®ÁöÑ Event Loop Â∑ÆÂºÇÂõûÈ°æ‰∏ä‰∏ÄÁØáÔºåÊµèËßàÂô®ÁéØÂ¢É‰∏ãÔºåmicrotaskÁöÑ‰ªªÂä°ÈòüÂàóÊòØÊØè‰∏™macrotaskÊâßË°åÂÆå‰πãÂêéÊâßË°å„ÄÇ ËÄåÂú®Node.js‰∏≠Ôºåmicrotask‰ºöÂú®‰∫ã‰ª∂Âæ™ÁéØÁöÑÂêÑ‰∏™Èò∂ÊÆµ‰πãÈó¥ÊâßË°åÔºå‰πüÂ∞±ÊòØ‰∏Ä‰∏™Èò∂ÊÆµÊâßË°åÂÆåÊØïÔºåÂ∞±‰ºöÂéªÊâßË°åmicrotaskÈòüÂàóÁöÑ‰ªªÂä°„ÄÇ demoÂõûÈ°æÂõûÈ°æÊñáÁ´†ÊúÄÂºÄÂßãÁöÑdemoÔºåÂÖ®Â±ÄËÑöÊú¨Ôºàmain()ÔºâÊâßË°åÔºåÂ∞Ü2‰∏™timer‰æùÊ¨°ÊîæÂÖ•timerÈòüÂàóÔºåmain()ÊâßË°åÂÆåÊØïÔºåË∞ÉÁî®Ê†àÁ©∫Èó≤Ôºå‰ªªÂä°ÈòüÂàóÂºÄÂßãÊâßË°åÔºõ È¶ñÂÖàËøõÂÖ•timersÈò∂ÊÆµÔºåÊâßË°åtimer1ÁöÑÂõûË∞ÉÂáΩÊï∞ÔºåÊâìÂç∞timer1ÔºåÂπ∂Â∞Üpromise1.thenÂõûË∞ÉÊîæÂÖ•microtaskÈòüÂàóÔºåÂêåÊ†∑ÁöÑÊ≠•È™§ÊâßË°åtimer2ÔºåÊâìÂç∞timer2Ôºõ Ëá≥Ê≠§ÔºåtimerÈò∂ÊÆµÊâßË°åÁªìÊùüÔºåevent loopËøõÂÖ•‰∏ã‰∏Ä‰∏™Èò∂ÊÆµ‰πãÂâçÔºåÊâßË°åmicrotaskÈòüÂàóÁöÑÊâÄÊúâ‰ªªÂä°Ôºå‰æùÊ¨°ÊâìÂç∞promise1„ÄÅpromise2„ÄÇ ÂØπÊØîÊµèËßàÂô®Á´ØÁöÑÂ§ÑÁêÜËøáÁ®ãÔºö process.nextTick() VS setImmediate() In essence, the names should be swapped. process.nextTick() fires more immediately than setImmediate() Êù•Ëá™ÂÆòÊñπÊñáÊ°£ÊúâÊÑèÊÄùÁöÑ‰∏ÄÂè•ËØùÔºå‰ªéËØ≠‰πâËßíÂ∫¶ÁúãÔºåsetImmediate() Â∫îËØ•ÊØî process.nextTick() ÂÖàÊâßË°åÊâçÂØπÔºåËÄå‰∫ãÂÆûÁõ∏ÂèçÔºåÂëΩÂêçÊòØÂéÜÂè≤ÂéüÂõ†‰πüÂæàÈöæÂÜçÂèò„ÄÇ process.nextTick() ‰ºöÂú®ÂêÑ‰∏™‰∫ã‰ª∂Èò∂ÊÆµ‰πãÈó¥ÊâßË°åÔºå‰∏ÄÊó¶ÊâßË°åÔºåË¶ÅÁõ¥Âà∞nextTickÈòüÂàóË¢´Ê∏ÖÁ©∫ÔºåÊâç‰ºöËøõÂÖ•Âà∞‰∏ã‰∏Ä‰∏™‰∫ã‰ª∂Èò∂ÊÆµÔºåÊâÄ‰ª•Â¶ÇÊûúÈÄíÂΩíË∞ÉÁî® process.nextTick()Ôºå‰ºöÂØºËá¥Âá∫Áé∞I&#x2F;O starvingÔºàÈ••È•øÔºâÁöÑÈóÆÈ¢òÔºåÊØîÂ¶Ç‰∏ãÈù¢‰æãÂ≠êÁöÑreadFileÂ∑≤ÁªèÂÆåÊàêÔºå‰ΩÜÂÆÉÁöÑÂõûË∞É‰∏ÄÁõ¥Êó†Ê≥ïÊâßË°åÔºö 1234567891011121314151617181920const fs = require(&#x27;fs&#x27;)const starttime = Date.now()let endtimefs.readFile(&#x27;text.txt&#x27;, () =&gt; &#123; endtime = Date.now() console.log(&#x27;finish reading time: &#x27;, endtime - starttime)&#125;)let index = 0function handler () &#123; if (index++ &gt;= 1000) return console.log(`nextTick $&#123;index&#125;`) process.nextTick(handler) // console.log(`setImmediate $&#123;index&#125;`) // setImmediate(handler)&#125;handler() process.nextTick()ÁöÑËøêË°åÁªìÊûúÔºö 123456nextTick 1nextTick 2......nextTick 999nextTick 1000finish reading time: 170 ÊõøÊç¢ÊàêsetImmediate()ÔºåËøêË°åÁªìÊûúÔºö 123456setImmediate 1setImmediate 2finish reading time: 80......setImmediate 999setImmediate 1000 ËøôÊòØÂõ†‰∏∫ÂµåÂ•óË∞ÉÁî®ÁöÑ setImmediate() ÂõûË∞ÉÔºåË¢´ÊéíÂà∞‰∫Ü‰∏ã‰∏ÄÊ¨°event loopÊâçÊâßË°åÔºåÊâÄ‰ª•‰∏ç‰ºöÂá∫Áé∞ÈòªÂ°û„ÄÇ ÊÄªÁªì Node.js ÁöÑ‰∫ã‰ª∂Âæ™ÁéØÂàÜ‰∏∫6‰∏™Èò∂ÊÆµ ÊµèËßàÂô®ÂíåNode ÁéØÂ¢É‰∏ãÔºå 1microtask ‰ªªÂä°ÈòüÂàóÁöÑÊâßË°åÊó∂Êú∫‰∏çÂêå Node.js‰∏≠Ôºåmicrotask Âú®‰∫ã‰ª∂Âæ™ÁéØÁöÑÂêÑ‰∏™Èò∂ÊÆµ‰πãÈó¥ÊâßË°å ÊµèËßàÂô®Á´ØÔºåmicrotask Âú®‰∫ã‰ª∂Âæ™ÁéØÁöÑ macrotask ÊâßË°åÂÆå‰πãÂêéÊâßË°å ÈÄíÂΩíÁöÑË∞ÉÁî®process.nextTick()‰ºöÂØºËá¥I&#x2F;O starvingÔºåÂÆòÊñπÊé®Ëçê‰ΩøÁî®setImmediate() [ÂèÇËÄÉËµÑÊñô] event-loop-timers-and-nexttick Node.js Event Loop ÁöÑÁêÜËß£ TimersÔºåprocess.nextTick() libuv&#x2F;core.c nodejs&#x2F;next_tick.js Ê∑±ÂÖ•ÁêÜËß£js‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂ÔºàÊµèËßàÂô®ÁØáÔºâ","categories":[],"tags":[]},{"title":"„ÄêËΩ¨ËΩΩ„ÄëÊ∑±ÂÖ•ÁêÜËß£js‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂[ÊµèËßàÂô®ÁØá]","slug":"Ê∑±ÂÖ•ÁêÜËß£js‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂[ÊµèËßàÂô®ÁØá]","date":"2020-05-30T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/05/31/Ê∑±ÂÖ•ÁêÜËß£js‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂[ÊµèËßàÂô®ÁØá]/","permalink":"https://justsso1.github.io/2020/05/31/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3js%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6[%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87]/","excerpt":"","text":"Ê∑±ÂÖ•ÁêÜËß£js‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂[ÊµèËßàÂô®ÁØá]‰∫ã‰ª∂Âæ™ÁéØÊòØJavaScriptËØ≠Ë®ÄÂú®Â§ÑÁêÜÂ§ö‰ªªÂä°Êó∂ÁöÑ‰∏ÄÁßçÊú∫Âà∂ÔºåÁî±‰∫éJavaScriptÊòØÂçïÁ∫øÁ®ãÔºåÊâÄ‰ª•ÂΩìÊúâÂºÇÊ≠•‰ªªÂä°ÂèëÁîüÊó∂ÔºåÈúÄË¶Å‰∏ÄÁßçÊú∫Âà∂Êù•ÂçèË∞É‰ªªÂä°Ëß¶ÂèëÔºåÈÅøÂÖçÁ≠âÂæÖÂ§™‰πÖÔºåÂ∞±Â•ΩÊØî‰∫§ÈÄöËßÑÂàô‰∏ÄÊ†∑„ÄÇJavaScriptËß£ÊûêÂºïÊìéÁªìÂêàÊâÄÂú®ÁöÑÂÆø‰∏ªÁéØÂ¢ÉÔºàÊú¨ÊñáËÆ≤ÊµèËßàÂô®‰ΩïNodeJSÔºâ‰∫ßÁîü‰∫ÜÂêÑËá™ÁöÑ‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂„ÄÇÊäõÂºÄÁéØÂ¢ÉË∞àËøêË°åÔºåÂíåÊäõÂºÄËÆ°ÈáèË∞àÊØíÊÄß‰∏ÄÊ†∑ÔºåÊâÄ‰ª•‰∏ÄÂÆöË¶ÅÂå∫ÂàÜÊ∏ÖÊ•öÊòØÂú®Âì™ÈáåËøêË°åÔºåÂú®ÊµèËßàÂô®ËøòÊòØNodeJS„ÄÇÊµèËßàÂô®‰∏≠ÁöÑ‰∫ã‰ª∂Âæ™ÁéØÁî±H5ËßÑËåÉÁ∫¶ÂÆö„ÄÅÁî±ÂêÑÊµèËßàÂô®ÂéÇÂïÜÂÆûÁé∞ÔºõËÄåNodeJS‰∏≠ÁöÑ‰∫ã‰ª∂Âæ™ÁéØÁî±libuvËá™Â∑±ÂÆûÁé∞ÁöÑ„ÄÇ Event LoopÂú®ÊµèËßàÂô®‰∏ãÂíåNode jsÁéØÂ¢É‰∏ãÂêÑÊúâ‰∏ÄÂ•óËßÑÂàô„ÄÇ ‰ºóÊâÄÂë®Áü•ÔºåjavascriptÊòØÂçïÁ∫øÁ®ãËØ≠Ë®Ä„ÄÇÂçïÁ∫øÁ®ãÊòØ‰ªÄ‰πàÔºüÂçïÁ∫øÁ®ãÊòØÊåájsÂºïÊìé‰∏≠Ë¥üË¥£Ëß£ÊûêÊâßË°åjs‰ª£Á†ÅÁöÑÁ∫øÁ®ãÂè™Êúâ‰∏Ä‰∏™Ôºà‰∏ªÁ∫øÁ®ãÔºâÂç≥ÊØèÊ¨°Âè™ËÉΩÂÅö‰∏Ä‰ª∂‰∫ã„ÄÇÈÇ£ÂçïÁ∫øÁ®ãÊòØÊÄé‰πàÂÅöÂà∞ÂºÇÊ≠•ÁöÑÂë¢Ôºü jsÁöÑ‰ªªÂä°ÂàÜ‰∏∫ ÂêåÊ≠• Âíå ÂºÇÊ≠• ‰∏§ÁßçÔºåÂÆÉ‰ª¨ÁöÑÂ§ÑÁêÜÊñπÂºè‰πü‰∏çÂêåÔºåÂêåÊ≠•‰ªªÂä°ÊòØÁõ¥Êé•Âú®‰∏ªÁ∫øÁ®ã‰∏äÊéíÈòüÊâßË°åÔºåÂºÇÊ≠•‰ªªÂä°Âàô‰ºöË¢´ÊîæÂà∞‰ªªÂä°ÈòüÂàó‰∏≠ÔºåËã•ÊúâÂ§ö‰∏™‰ªªÂä°ÔºàÂºÇÊ≠•‰ªªÂä°ÔºâÂàôË¶ÅÂú®‰ªªÂä°ÈòüÂàó‰∏≠ÊéíÈòüÁ≠âÂæÖÔºå‰ªªÂä°ÈòüÂàóÁ±ª‰ºº‰∏Ä‰∏™ÁºìÂÜ≤Âå∫Ôºå‰ªªÂä°‰∏ã‰∏ÄÊ≠•‰ºöË¢´ÁßªÂà∞Ë∞ÉÁî®Ê†àÔºàcall stackÔºâÔºåÁÑ∂Âêé‰∏ªÁ∫øÁ®ãÊâßË°åË∞ÉÁî®Ê†àÁöÑ‰ªªÂä°„ÄÇ ÂçïÁ∫øÁ®ãÊòØÊåájsÂºïÊìé‰∏≠Ë¥üË¥£Ëß£ÊûêÊâßË°åjs‰ª£Á†ÅÁöÑÁ∫øÁ®ãÂè™Êúâ‰∏Ä‰∏™Ôºà‰∏ªÁ∫øÁ®ãÔºâÔºåÂç≥ÊØèÊ¨°Âè™ËÉΩÂÅö‰∏Ä‰ª∂‰∫ãÔºåËÄåÊàë‰ª¨Áü•ÈÅì‰∏Ä‰∏™ajaxËØ∑Ê±ÇÔºå‰∏ªÁ∫øÁ®ãÂú®Á≠âÂæÖÂÆÉÂìçÂ∫îÁöÑÂêåÊó∂ÊòØ‰ºöÂéªÂÅöÂÖ∂ÂÆÉ‰∫ãÁöÑÔºåÊµèËßàÂô®ÂÖàÂú®‰∫ã‰ª∂Ë°®Ê≥®ÂÜåajaxÁöÑÂõûË∞ÉÂáΩÊï∞ÔºåÂìçÂ∫îÂõûÊù•ÂêéÂõûË∞ÉÂáΩÊï∞Ë¢´Ê∑ªÂä†Âà∞‰ªªÂä°ÈòüÂàó‰∏≠Á≠âÂæÖÊâßË°åÔºå‰∏ç‰ºöÈÄ†ÊàêÁ∫øÁ®ãÈòªÂ°ûÔºåÊâÄ‰ª•ËØ¥jsÂ§ÑÁêÜajaxËØ∑Ê±ÇÁöÑÊñπÂºèÊòØÂºÇÊ≠•ÁöÑ„ÄÇ ÊÄªËÄåË®Ä‰πãÔºåÊ£ÄÊü•Ë∞ÉÁî®Ê†àÊòØÂê¶‰∏∫Á©∫Ôºå‰ª•ÂèäÁ°ÆÂÆöÊääÂì™‰∏™taskÂä†ÂÖ•Ë∞ÉÁî®Ê†àÁöÑËøô‰∏™ËøáÁ®ãÂ∞±ÊòØ‰∫ã‰ª∂Âæ™ÁéØÔºåËÄåjsÂÆûÁé∞ÂºÇÊ≠•ÁöÑÊ†∏ÂøÉÂ∞±ÊòØ‰∫ã‰ª∂Âæ™ÁéØ„ÄÇ ‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂ÊòØ‰∏∫‰∫ÜÂ§ÑÁêÜÂºÇÊ≠•Êìç‰ΩúÁöÑË°å‰∏∫ÔºåÊâÄ‰ª•ËøôÈáåÊòØÁöÑ[‰ªªÂä°ÈòüÂàó]ÊòØÂ≠òÂÇ®ÂºÇÊ≠•Êìç‰ΩúÂÆåÊàê‰πãÂêéÁöÑÂõûË∞ÉÂáΩÊï∞ÁöÑÂú∞Êñπ„ÄÇ ÊåâÂºÇÊ≠•Êìç‰ΩúÁöÑÂÆåÊàêÂÖàÂêéÊèíÂÖ•ÈòüÂàó„ÄÇ Âõ†Ê≠§setTime(fn, 0)Â∞±‰ºöÂèäÊó∂ÊèíÂÖ•ÈòüÂàóÔºå‰ΩÜ‰∏ç‰ºöÁ´ãÂç≥ÊâßË°å„ÄÇ Ë∞ÉÁî®Ê†àÂíå‰ªªÂä°ÈòüÂàóÈ°æÂêçÊÄù‰πâÔºåË∞ÉÁî®Ê†àÊòØ‰∏Ä‰∏™Ê†àÁªìÊûÑÔºåÂáΩÊï∞Ë∞ÉÁî®‰ºöÂΩ¢Êàê‰∏Ä‰∏™Ê†àÂ∏ßÔºåÂ∏ß‰∏≠ÂåÖÂê´‰∫ÜÂΩìÂâçÊâßË°åÂáΩÊï∞ÁöÑÂèÇÊï∞ÂíåÂ±ÄÈÉ®ÂèòÈáèÁ≠â‰∏ä‰∏ãÊñá‰ø°ÊÅØÔºåÂáΩÊï∞ÊâßË°åÂÆåÂêéÔºåÂÆÉÁöÑÊâßË°å‰∏ä‰∏ãÊñá‰ºö‰ªéÊ†à‰∏≠ÂºπÂá∫„ÄÇ ‰∏ãÂõæÂ∞±ÊòØË∞ÉÁî®Ê†àÂíå‰ªªÂä°ÈòüÂàóÁöÑÂÖ≥Á≥ªÂõæ ‰∫ã‰ª∂Âæ™ÁéØÂÖ≥‰∫é‰∫ã‰ª∂Âæ™ÁéØÔºåHTMLËßÑËåÉÁöÑ‰ªãÁªç There must be at least one event loop per user agent, and at most one event loop per unit of related similar-origin browsing contexts.An event loop has one or more task queues.Each task is defined as coming from a specific task source. ‰ªéËßÑËåÉÁêÜËß£ÔºåÊµèËßàÂô®Ëá≥Â∞ëÊúâ‰∏Ä‰∏™‰∫ã‰ª∂Âæ™ÁéØÔºå‰∏Ä‰∏™‰∫ã‰ª∂Âæ™ÁéØËá≥Â∞ëÊúâ‰∏Ä‰∏™‰ªªÂä°ÈòüÂàóÔºàmacrotaskÔºâÔºåÊØè‰∏™Â§ñ‰ªªÂä°ÈÉΩÊúâËá™Â∑±ÁöÑÂàÜÁªÑÔºåÊµèËßàÂô®‰ºö‰∏∫‰∏çÂêåÁöÑ‰ªªÂä°ÁªÑËÆæÁΩÆ‰ºòÂÖàÁ∫ß„ÄÇ macrotask &amp; microtaskËßÑËåÉÊúâÊèêÂà∞‰∏§‰∏™Ê¶ÇÂøµÔºå‰ΩÜÊ≤°ÊúâËØ¶ÁªÜ‰ªãÁªçÔºåÊü•ÈòÖ‰∏Ä‰∫õËµÑÊñôÂ§ßÊ¶ÇÂèØÊÄªÁªìÂ¶Ç‰∏ãÔºö macrotaskÔºöÂåÖÂê´ÊâßË°åÊï¥‰ΩìÁöÑjs‰ª£Á†ÅÔºå‰∫ã‰ª∂ÂõûË∞ÉÔºåXHRÂõûË∞ÉÔºåÂÆöÊó∂Âô®ÔºàsetTimeout&#x2F;setInterval&#x2F;setImmediateÔºâÔºåIOÊìç‰ΩúÔºåUI render microtaskÔºöÊõ¥Êñ∞Â∫îÁî®Á®ãÂ∫èÁä∂ÊÄÅÁöÑ‰ªªÂä°ÔºåÂåÖÊã¨promiseÂõûË∞ÉÔºåMutationObserverÔºåprocess.nextTickÔºåObject.observe ÂÖ∂‰∏≠setImmediateÂíåprocess.nextTickÊòØnodejsÁöÑÂÆûÁé∞ÔºåÂú®nodejsÁØá‰ºöËØ¶ÁªÜ‰ªãÁªç„ÄÇ ‰∫ã‰ª∂Â§ÑÁêÜËøáÁ®ãÂÖ≥‰∫émacrotaskÂíåmicrotaskÁöÑÁêÜËß£ÔºåÂÖâËøôÊ†∑Áúã‰ºöÊúâ‰∫õÊô¶Ê∂©ÈöæÊáÇÔºåÁªìÂêà‰∫ã‰ª∂Âæ™ÂùèÁöÑÊú∫Âà∂ÁêÜËß£Ê∏ÖÊô∞ÂæàÂ§öÔºå‰∏ãÈù¢ËøôÂº†ÂõæÂèØ‰ª•ËØ¥ÊòØ‰ªãÁªçÂæóÈùûÂ∏∏Ê∏ÖÊ•ö‰∫Ü„ÄÇ ÊÄªÁªìËµ∑Êù•Ôºå‰∏ÄÊ¨°‰∫ã‰ª∂Âæ™ÁéØÁöÑÊ≠•È™§ÂåÖÊã¨Ôºö Ê£ÄÊü•macrotaskÈòüÂàóÊòØÂê¶‰∏∫Á©∫ÔºåÈùûÁ©∫ÂàôÂà∞2Ôºå‰∏∫Á©∫ÂàôÂà∞3 ÊâßË°åmacrotask‰∏≠ÁöÑ‰∏Ä‰∏™‰ªªÂä° ÁªßÁª≠Ê£ÄÊü•microtaskÈòüÂàóÊòØÂê¶‰∏∫Á©∫ÔºåËã•ÊúâÂàôÂà∞4ÔºåÂê¶ÂàôÂà∞5 ÂèñÂá∫microtask‰∏≠ÁöÑ‰ªªÂä°ÊâßË°åÔºåÊâßË°åÂÆåÊàêËøîÂõûÂà∞Ê≠•È™§3 ÊâßË°åËßÜÂõæÊõ¥Êñ∞ mactotask &amp; microtaskÁöÑÊâßË°åÈ°∫Â∫è ËØªÂÆåËøô‰πàÂ§öÂπ≤Â∑¥Â∑¥ÁöÑÊ¶ÇÂøµ‰ªãÁªçÔºåËøò‰∏çÂ¶ÇÁúã‰∏ÄÊÆµ‰ª£Á†ÅÊÑüÂèó‰∏ã 12345678910111213console.log(&#x27;start&#x27;)setTimeout(function() &#123; console.log(&#x27;setTimeout&#x27;)&#125;, 0)Promise.resolve().then(function() &#123; console.log(&#x27;promise1&#x27;)&#125;).then(function() &#123; console.log(&#x27;promise2&#x27;)&#125;)console.log(&#x27;end&#x27;) ÊâìÂç∞Âè∞ËæìÂá∫ÁöÑlogÈ°∫Â∫èÊòØ‰ªÄ‰πàÔºüÁªìÂêà‰∏äËø∞ÁöÑÊ≠•È™§ÂàÜÊûêÔºåÁ≥ª‰∏çÁ≥ªso easy~ È¶ñÂÖàÔºåÂÖ®Â±Ä‰ª£Á†ÅÔºàmain()ÔºâÂéãÂÖ•Ë∞ÉÁî®Ê†àÊâßË°åÔºåÊâìÂç∞startÔºõ Êé•‰∏ãÊù•setTimeoutÂéãÂÖ•macrotaskÈòüÂàóÔºåpromise.thenÂõûË∞ÉÊîæÂÖ•microtaskÈòüÂàóÔºåÊúÄÂêéÊâßË°åconsole.log(‚Äòend‚Äô)ÔºåÊâìÂç∞Âá∫endÔºõ Ëá≥Ê≠§ÔºåË∞ÉÁî®Ê†à‰∏≠ÁöÑ‰ª£Á†ÅË¢´ÊâßË°åÂÆåÊàêÔºåÂõûÈ°æmacrotaskÁöÑÂÆö‰πâÔºåÊàë‰ª¨Áü•ÈÅìÂÖ®Â±Ä‰ª£Á†ÅÂ±û‰∫émacrotaskÔºåmacrotaskÊâßË°åÂÆåÔºåÈÇ£Êé•‰∏ãÊù•Â∞±ÊòØÊâßË°åmicrotaskÈòüÂàóÁöÑ‰ªªÂä°‰∫ÜÔºåÊâßË°åpromiseÂõûË∞ÉÊâìÂç∞promise1Ôºõ promiseÂõûË∞ÉÂáΩÊï∞ÈªòËÆ§ËøîÂõûundefinedÔºåpromiseÁä∂ÊÄÅÂèò‰∏∫fullfillËß¶ÂèëÊé•‰∏ãÊù•ÁöÑthenÂõûË∞ÉÔºåÁªßÁª≠ÂéãÂÖ•microtaskÈòüÂàóÔºåevent loop‰ºöÊääÂΩìÂâçÁöÑmicrotaskÈòüÂàó‰∏ÄÁõ¥ÊâßË°åÂÆåÔºåÊ≠§Êó∂ÊâßË°åÁ¨¨‰∫å‰∏™promise.thenÂõûË∞ÉÊâìÂç∞Âá∫promise2Ôºõ ËøôÊó∂microtaskÈòüÂàóÂ∑≤Áªè‰∏∫Á©∫Ôºå‰ªé‰∏äÈù¢ÁöÑÊµÅÁ®ãÂõæÂèØ‰ª•Áü•ÈÅìÔºåÊé•‰∏ãÊù•‰∏ªÁ∫øÁ®ã‰ºöÂéªÂÅö‰∏Ä‰∫õUIÊ∏≤ÊüìÂ∑•‰ΩúÔºà‰∏ç‰∏ÄÂÆö‰ºöÂÅöÔºâÔºåÁÑ∂ÂêéÂºÄÂßã‰∏ã‰∏ÄËΩÆevent loopÔºåÊâßË°åsetTimeoutÁöÑÂõûË∞ÉÔºåÊâìÂç∞Âá∫setTimeoutÔºõ Ëøô‰∏™ËøáÁ®ã‰ºö‰∏çÊñ≠ÈáçÂ§çÔºå‰πüÂ∞±ÊòØÊâÄË∞ìÁöÑ‰∫ã‰ª∂Âæ™ÁéØ„ÄÇ ËßÜÂõæÊ∏≤ÊüìÁöÑÊó∂Êú∫ÂõûÈ°æ‰∏äÈù¢ÁöÑ‰∫ã‰ª∂Âæ™ÁéØÁ§∫ÊÑèÂõæÔºåupdate renderingÔºàËßÜÂõæÊ∏≤ÊüìÔºâÂèëÁîüÂú®Êú¨ËΩÆ‰∫ã‰ª∂Âæ™ÁéØÁöÑmicrotaskÈòüÂàóË¢´ÊâßË°åÂÆå‰πãÂêéÔºå‰πüÂ∞±ÊòØËØ¥ÊâßË°å‰ªªÂä°ÁöÑËÄóÊó∂‰ºöÂΩ±ÂìçËßÜÂõæÊ∏≤ÊüìÁöÑÊó∂Êú∫„ÄÇÈÄöÂ∏∏ÊµèËßàÂô®‰ª•ÊØèÁßí60Â∏ßÔºà60fpsÔºâÁöÑÈÄüÁéáÂà∑Êñ∞È°µÈù¢ÔºåÊçÆËØ¥Ëøô‰∏™Â∏ßÁéáÊúÄÈÄÇÂêà‰∫∫Áúº‰∫§‰∫íÔºåÂ§ßÊ¶Ç16.7msÊ∏≤Êüì‰∏ÄÂ∏ßÔºåÊâÄ‰ª•Â¶ÇÊûúË¶ÅËÆ©Áî®Êà∑ËßâÂæóÈ°∫ÁïÖÔºåÂçï‰∏™macrotaskÂèäÂÆÉÁõ∏ÂÖ≥ÁöÑÊâÄÊúâmicrotaskÊúÄÂ•ΩËÉΩÂú®16.7msÂÜÖÂÆåÊàê„ÄÇ ‰ΩÜ‰πü‰∏çÊòØÊØèËΩÆ‰∫ã‰ª∂Âæ™ÁéØÈÉΩ‰ºöÊâßË°åËßÜÂõæÊõ¥Êñ∞ÔºåÊµèËßàÂô®ÊúâËá™Â∑±ÁöÑ‰ºòÂåñÁ≠ñÁï•Ôºå‰æãÂ¶ÇÊääÂá†Ê¨°ÁöÑËßÜÂõæÊõ¥Êñ∞Á¥ØÁßØÂà∞‰∏ÄËµ∑ÈáçÁªòÔºåÈáçÁªò‰πãÂâç‰ºöÈÄöÁü•requestAnimationFrameÊâßË°åÂõûË∞ÉÂáΩÊï∞Ôºå‰πüÂ∞±ÊòØËØ¥requestAnimationFrameÂõûË∞ÉÁöÑÊâßË°åÊó∂Êú∫ÊòØÂú®‰∏ÄÊ¨°ÊàñÂ§öÊ¨°‰∫ã‰ª∂Âæ™ÁéØÁöÑUI renderÈò∂ÊÆµ„ÄÇ ‰ª•‰∏ã‰ª£Á†ÅÂèØ‰ª•È™åËØÅ 1234567891011121314151617setTimeout(function() &#123;console.log(&#x27;timer1&#x27;)&#125;, 0)requestAnimationFrame(function()&#123; console.log(&#x27;requestAnimationFrame&#x27;)&#125;)setTimeout(function() &#123;console.log(&#x27;timer2&#x27;)&#125;, 0)new Promise(function executor(resolve) &#123; console.log(&#x27;promise 1&#x27;) resolve() console.log(&#x27;promise 2&#x27;)&#125;).then(function() &#123; console.log(&#x27;promise then&#x27;)&#125;)console.log(&#x27;end&#x27;) ËøêË°åÁªìÊûúÊà™ÂõæÂ¶Ç‰∏ã: ÂèØ‰ª•ÁúãÂà∞ÔºåÁªìÊûú1‰∏≠requestAnimationFrame()ÊòØÂú®‰∏ÄÊ¨°‰∫ã‰ª∂Âæ™ÁéØÂêéÊâßË°åÔºåËÄåÂú®ÁªìÊûú2ÔºåÂÆÉÁöÑÊâßË°åÂàôÊòØÂú®‰∏âÊ¨°‰∫ã‰ª∂Âæ™ÁéØÁªìÊùüÂêé„ÄÇ ÊÄªÁªì ‰∫ã‰ª∂Âæ™ÁéØÊòØjsÂÆûÁé∞ÂºÇÊ≠•ÁöÑÊ†∏ÂøÉ ÊØèËΩÆ‰∫ã‰ª∂Âæ™ÁéØÂàÜ‰∏∫3‰∏™Ê≠•È™§Ôºö a) ÊâßË°åmacrotaskÈòüÂàóÁöÑ‰∏Ä‰∏™‰ªªÂä°b) ÊâßË°åÂÆåÂΩìÂâçmicrotaskÈòüÂàóÁöÑÊâÄÊúâ‰ªªÂä°c) UI render ÊµèËßàÂô®Âè™‰øùËØÅrequestAnimationFrameÁöÑÂõûË∞ÉÂú®ÈáçÁªò‰πãÂâçÊâßË°åÔºåÊ≤°ÊúâÁ°ÆÂÆöÁöÑÊó∂Èó¥Ôºå‰ΩïÊó∂ÈáçÁªòÁî±ÊµèËßàÂô®ÂÜ≥ÂÆö [ÂèÇËÄÉËµÑÊñô] event-loops sec-jobs-and-job-queues Promises&#x2F;A+ Tasks, microtasks, queues and schedules HTMLÁ≥ªÂàóÔºömacrotaskÂíåmicrotask http://www.ruanyifeng.com/blog/2014/10/event-loop.html","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[{"name":"‰∫ã‰ª∂Âæ™ÁéØ","slug":"‰∫ã‰ª∂Âæ™ÁéØ","permalink":"https://justsso1.github.io/tags/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"}]},{"title":"Koa2ÁöÑ‰∏≠Èó¥‰ª∂ÂéüÁêÜ","slug":"Koa2‰∏≠Èó¥‰ª∂ÂéüÁêÜ","date":"2020-05-28T16:00:00.000Z","updated":"2024-10-12T08:40:56.538Z","comments":true,"path":"2020/05/29/Koa2‰∏≠Èó¥‰ª∂ÂéüÁêÜ/","permalink":"https://justsso1.github.io/2020/05/29/Koa2%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%8E%9F%E7%90%86/","excerpt":"","text":"koa2‰∏≠Èó¥‰ª∑ÁöÑÁêÜËÆ∫Ê®°ÂûãÊòØÊ¥ãËë±Ê®°Âºè„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556async function fn1(next) &#123; console.log(&#x27;fn1 &#x27;) next &amp;&amp; await next() console.log(&#x27;fn1 end&#x27;)&#125;async function fn2(next) &#123; console.log(&#x27;fn2&#x27;) next &amp;&amp; await next() console.log(&#x27;fn2 end&#x27;)&#125;async function fn3(next) &#123; console.log(&#x27;fn3&#x27;) next &amp;&amp; await next() console.log(&#x27;fn3 end&#x27;)&#125;let middleware = [fn1, fn2, fn3]//‰∏≠Èó¥‰ª∂ÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÈÉΩÊòØnextÔºå‰∏îÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂáΩÊï∞Ë¶ÅËøîÂõûË¶Å‰º†ÈÄíÁöÑÂáΩÊï∞ÔºåËøôÊ†∑Êâç‰∏çËÉΩÂú®Á¨¨‰∫åÂ±Ç‰º†ÈÄíÊó∂ÊâßË°å„ÄÇ ËøòÊúâÂáΩÊï∞Á±ªÂûãË¶ÅÊòØ‰∏Ä‰∏™promiseÔºåÊâçÂèØ‰ª•Ë¢´awaitÔºõÊâÄ‰ª•‰ΩøÁî®‰∫ÜPromise.resolve()function compose2(middleware) &#123; return function () &#123; h(0) function h(index) &#123; let fn = middleware[index] if (!fn) &#123; return Promise.resolve() &#125; // return fn(function next() &#123; // return Promise.resolve(h(index + 1)) // &#125;) return Promise.resolve( fn(function next()&#123; return h(index+1) &#125;) ) &#125; &#125;&#125;let finalFn = compose2(middleware)finalFn()/*Â∏åÊúõÊâìÂç∞fn1fn2fn3fn3 endfn2 endfn1 end */","categories":[],"tags":[{"name":"koa2‰∏≠Èó¥‰ª∂","slug":"koa2‰∏≠Èó¥‰ª∂","permalink":"https://justsso1.github.io/tags/koa2%E4%B8%AD%E9%97%B4%E4%BB%B6/"}]},{"title":"Áî®npm scriptÊâìÈÄ†Ë∂ÖÊ∫úÁöÑÂâçÁ´ØÂ∑•‰ΩúÊµÅ2","slug":"Áî®npm scriptÊâìÈÄ†Ë∂ÖÊ∫úÁöÑÂâçÁ´ØÂ∑•‰ΩúÊµÅ2","date":"2020-05-13T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/05/14/Áî®npm scriptÊâìÈÄ†Ë∂ÖÊ∫úÁöÑÂâçÁ´ØÂ∑•‰ΩúÊµÅ2/","permalink":"https://justsso1.github.io/2020/05/14/%E7%94%A8npm%20script%E6%89%93%E9%80%A0%E8%B6%85%E6%BA%9C%E7%9A%84%E5%89%8D%E7%AB%AF%E5%B7%A5%E4%BD%9C%E6%B5%812/","excerpt":"","text":"^ÁâàÊú¨Âè∑Ôºö ‰ºöÂåπÈÖçÂà∞‰∏ªÁâàÊú¨Âè∑ÔºàÁ¨¨‰∏Ä‰ΩçÊï∞Â≠óÔºâ‰∏≠ÊúÄÊñ∞ÁöÑÁâàÊú¨„ÄÇ‰æãÂ¶ÇÔºö ^3.4.1 ‰ºöÂåπÈÖçÂà∞3.x.xÁöÑÊúÄÊñ∞ÁâàÊú¨Ôºå‰∏ç‰ºöÂåπÈÖçÂà∞4.0.0~ÁâàÊú¨Âè∑Ôºö‰ºöÂåπÈÖçÂà∞Á¨¨‰∫å‰ΩçÊï∞Â≠ó‰∏≠ÊúÄÊñ∞ÁöÑÁâàÊú¨„ÄÇ‰æãÂ¶ÇÔºö ÔΩû1.15.2‰ºöÂåπÈÖçÂà∞ 1.15.xÁöÑÊúÄÊñ∞ÁâàÊú¨Ôºå‰∏ç‰ºöÂåπÈÖçÂà∞1.16.0","categories":[],"tags":[{"name":"npm","slug":"npm","permalink":"https://justsso1.github.io/tags/npm/"}]},{"title":"Áî®npm scriptÊâìÈÄ†Ë∂ÖÊ∫úÁöÑÂâçÁ´ØÂ∑•‰ΩúÊµÅ1","slug":"Áî®npm script ÊâìÈÄ†Ë∂ÖÊ∫úÁöÑÂâçÁ´ØÂ∑•‰ΩúÊµÅ1","date":"2020-05-12T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/05/13/Áî®npm script ÊâìÈÄ†Ë∂ÖÊ∫úÁöÑÂâçÁ´ØÂ∑•‰ΩúÊµÅ1/","permalink":"https://justsso1.github.io/2020/05/13/%E7%94%A8npm%20script%20%E6%89%93%E9%80%A0%E8%B6%85%E6%BA%9C%E7%9A%84%E5%89%8D%E7%AB%AF%E5%B7%A5%E4%BD%9C%E6%B5%811/","excerpt":"","text":"1.1 ÂàùËØÜ npm scriptÈ¶ñÂÖà‰ªãÁªçÂàõÂª∫ package.json Êñá‰ª∂ÁöÑÁßëÂ≠¶ÊñπÊ≥ïÔºåÁõÆÊ†áÊòØÊéåÊè° npm init ÂëΩ‰ª§„ÄÇÁÑ∂ÂêéÔºåÈÄöËøáÂú®ÁªàÁ´Ø‰∏≠ËøêË°åËá™Âä®ÁîüÊàêÁöÑ test ÂëΩ‰ª§ÔºåËØ¶ÁªÜËÆ≤Ëß£ npm ËÑöÊú¨Âü∫Êú¨ÊâßË°åÊµÅÁ®ã„ÄÇ ÁÑ∂ÂêéÔºåÂä®ÊâãÁªôÈ°πÁõÆÂ¢ûÂä† eslint ÂëΩ‰ª§ÔºåÁÜüÊÇâÂàõÂª∫Ëá™ÂÆö‰πâÂëΩ‰ª§ÁöÑÂü∫Êú¨ÊµÅÁ®ã„ÄÇ Áî® npm init Âø´ÈÄüÂàõÂª∫È°πÁõÆÂºÄÂßãÊé¢Á¥¢ npm script ‰πãÂâçÔºåÊàë‰ª¨ÂÖàËÅäËÅäËøô‰∫õ scripts ÊâÄ‰æùËµñÁöÑÊñá‰ª∂ package.jsonÔºå‰ª•ÂÆÉ‰∏∫Âü∫Á°ÄÁöÑ npm ÂàôÊòØ node.js Á§æÂå∫Ëì¨ÂãÉÂèëÂ±ïÁöÑÈ°∂Ê¢ÅÊü±„ÄÇ npm ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÂø´ÈÄüÂàõÂª∫ package.json Êñá‰ª∂ÁöÑÂëΩ‰ª§ npm initÔºåÊâßË°åËØ•ÂëΩ‰ª§‰ºöÈóÆÂá†‰∏™Âü∫Êú¨ÈóÆÈ¢òÔºåÂ¶ÇÂåÖÂêçÁß∞„ÄÅÁâàÊú¨Âè∑„ÄÅ‰ΩúËÄÖ‰ø°ÊÅØ„ÄÅÂÖ•Âè£Êñá‰ª∂„ÄÅ‰ªìÂ∫ìÂú∞ÂùÄ„ÄÅËÆ∏ÂèØÂçèËÆÆÁ≠âÔºåÂ§öÊï∞ÈóÆÈ¢òÂ∑≤ÁªèÊèê‰æõ‰∫ÜÈªòËÆ§ÂÄºÔºå‰Ω†ÂèØ‰ª•Âú®ÈóÆÈ¢òÂêéÊï≤ÂõûËΩ¶Êé•ÂèóÈªòËÆ§ÂÄºÔºö 12345678package name: (hello-npm-script)version: (0.1.0)description: hello npm scriptentry point: (index.js)test command:git repository:keywords: npm, scriptlicense: (MIT) ‰∏äÈù¢ÁöÑ‰æãÂ≠êÊåáÂÆö‰∫ÜÊèèËø∞ÔºàdescriptionÔºâÂíåÂÖ≥ÈîÆÂ≠óÔºàkeywordsÔºâ‰∏§‰∏™Â≠óÊÆµÔºåÂü∫Êú¨ÈóÆÈ¢òÈóÆÂÆå‰πãÂêé npm ‰ºöÊää package.json Êñá‰ª∂ÂÜÖÂÆπÊâìÂá∫Êù•‰æõ‰Ω†Á°ÆËÆ§Ôºö 123456789101112131415&#123; &quot;name&quot;: &quot;hello-npm-script&quot;, &quot;version&quot;: &quot;0.1.0&quot;, &quot;description&quot;: &quot;hello npm script&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot; &#125;, &quot;keywords&quot;: [ &quot;npm&quot;, &quot;script&quot; ], &quot;author&quot;: &quot;wangshijun &lt;wangshijun2010@gmail.com&gt; (https://github.com/wangshijun)&quot;, &quot;license&quot;: &quot;MIT&quot;&#125; ÊåâÂõûËΩ¶Á°ÆËÆ§Â∞±ËÉΩÊääpackage.json ÁöÑÂÜÖÂÆπÂÜôÂà∞Êñá‰ª∂Á≥ªÁªüÔºåÂ¶ÇÊûúË¶Å‰øÆÊîπ package.jsonÔºåÂèØ‰ª•Áõ¥Êé•Áî®ÁºñËæëÂô®ÁºñËæëÔºåÊàñËÄÖÂÜçÊ¨°ËøêË°å npm initÔºånpm ÈªòËÆ§‰∏ç‰ºöË¶ÜÁõñ‰øÆÊîπÈáåÈù¢Â∑≤ÁªèÂ≠òÂú®ÁöÑ‰ø°ÊÅØ„ÄÇ TIP#1: Â´å‰∏äÈù¢ÁöÑÂàùÂßãÂåñÊñπÂºèÂ§™Âï∞Âó¶Ôºü‰Ω†ÂèØ‰ª•‰ΩøÁî® npm init -fÔºàÊÑèÊåá ‚ÄìforceÔºåÊàñËÄÖ‰ΩøÁî® ‚ÄìyesÔºâÂëäËØâ npm Áõ¥Êé•Ë∑≥ËøáÂèÇÊï∞ÈóÆÁ≠îÁéØËäÇÔºåÂø´ÈÄüÁîüÊàê package.json„ÄÇ ÂàùÂßãÂåñ package.json Êó∂ÁöÑÂ≠óÊÆµÈªòËÆ§ÂÄºÊòØÂèØ‰ª•Ëá™Â∑±ÈÖçÁΩÆÁöÑÔºåÁªÜÂøÉÁöÑÂêåÂ≠¶ÂèØËÉΩÂ∑≤ÁªèÂèëÁé∞ÔºåÊàë‰∏äÈù¢ÁöÑÈªòËÆ§ÁâàÊú¨Âè∑ÊòØ 0.1.0ÔºåËÄå npm ÈªòËÆ§ÁöÑÁâàÊú¨Âè∑ÊòØ 0.0.1ÔºåÂèØ‰ª•Áî®‰∏ãÈù¢ÁöÑÂëΩ‰ª§Âéª‰øÆÊîπÈªòËÆ§ÈÖçÁΩÆÔºö 12345npm config set init.author.email &quot;wangshijun2010@gmail.com&quot;npm config set init.author.name &quot;wangshijun&quot;npm config set init.author.url &quot;http://github.com/wangshijun&quot;npm config set init.license &quot;MIT&quot;npm config set init.version &quot;0.1.0&quot; TIP#2: Â∞ÜÈªòËÆ§ÈÖçÁΩÆÂíå -f ÂèÇÊï∞ÁªìÂêà‰ΩøÁî®ÔºåËÉΩËÆ©‰Ω†Áî®ÊúÄÁü≠ÁöÑÊó∂Èó¥ÂàõÂª∫ package.jsonÔºåÂø´ÂéªËá™Â∑±ËØïËØïÂêß„ÄÇ ‰∏•ËÇÉÁöÑÂ∑•Á®ãÂ∏àÈÉΩ‰ºö‰ΩøÁî® Git ÂØπÊ∫ê‰ª£Á†ÅËøõË°åÁâàÊú¨ÁÆ°ÁêÜÔºåÂú® npm init ÁöÑÂü∫Á°Ä‰∏äÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî® git init Êù•ÂàùÂßãÂåñ git ‰ªìÂ∫ìÔºå‰∏çÂÜçÂ±ïÂºÄ„ÄÇ Á∫∏‰∏äÂæóÊù•ÁªàËßâÊµÖÔºåÊÉ≥ÊéåÊè° npm scriptÔºåËØ∑ÊâìÂºÄÁªàÁ´ØÔºåÊâßË°å‰∏ãÂàóÂëΩ‰ª§Ôºö 1234cd ~mkdir hello-npm-script &amp;&amp; cd $_npm initnpm init -f Áî® npm run ÊâßË°å‰ªªÊÑèÂëΩ‰ª§npm ÊòØÂ¶Ç‰ΩïÁÆ°ÁêÜÂíåÊâßË°åÂêÑÁßç scripts ÁöÑÂë¢Ôºü‰Ωú‰∏∫ npm ÂÜÖÁΩÆÁöÑÊ†∏ÂøÉÂäüËÉΩ‰πã‰∏ÄÔºånpm run ÂÆûÈôÖ‰∏äÊòØ npm run-script ÂëΩ‰ª§ÁöÑÁÆÄÂÜô„ÄÇÂΩìÊàë‰ª¨ËøêË°å npm run xxx Êó∂ÔºåÂü∫Êú¨Ê≠•È™§Â¶Ç‰∏ãÔºö ‰ªé package.json Êñá‰ª∂‰∏≠ËØªÂèñ scripts ÂØπË±°ÈáåÈù¢ÁöÑÂÖ®ÈÉ®ÈÖçÁΩÆÔºõ ‰ª•‰º†Áªô npm run ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰Ωú‰∏∫ÈîÆÔºåÊú¨‰æã‰∏≠‰∏∫ xxxÔºåÂú® scripts ÂØπË±°ÈáåÈù¢Ëé∑ÂèñÂØπÂ∫îÁöÑÂÄº‰Ωú‰∏∫Êé•‰∏ãÊù•Ë¶ÅÊâßË°åÁöÑÂëΩ‰ª§ÔºåÂ¶ÇÊûúÊ≤°ÊâæÂà∞Áõ¥Êé•Êä•ÈîôÔºõ Âú®Á≥ªÁªüÈªòËÆ§ÁöÑ shell ‰∏≠ÊâßË°å‰∏äËø∞ÂëΩ‰ª§ÔºåÁ≥ªÁªüÈªòËÆ§ shell ÈÄöÂ∏∏ÊòØ bashÔºåwindows ÁéØÂ¢É‰∏ãÂèØËÉΩÁï•Êúâ‰∏çÂêåÔºåÁ®çÂêéÂÜçËÆ≤„ÄÇ Ê≥®ÊÑèÔºå‰∏äÈù¢ËøôÊòØÁÆÄÂåñÁöÑÊµÅÁ®ãÔºåÊõ¥Â§çÊùÇÁöÑÈí©Â≠êÊú∫Âà∂ÂêéÈù¢Á´†ËäÇÂçïÁã¨‰ªãÁªç„ÄÇ ‰∏æ‰æãÊù•ËØ¥ÔºåÂ¶ÇÊûú package.json Êñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 123456789&#123; &quot;name&quot;: &quot;hello-npm-script&quot;, &quot;devDependencies&quot;: &#123; &quot;eslint&quot;: &quot;latest&quot; &#125;, &quot;scripts&quot;: &#123; &quot;eslint&quot;: &quot;eslint **.js&quot; &#125;&#125; Â¶ÇÊûú‰∏çÂ∏¶‰ªª‰ΩïÂèÇÊï∞ÊâßË°å npm runÔºåÂÆÉ‰ºöÂàóÂá∫ÂèØÊâßË°åÁöÑÊâÄÊúâÂëΩ‰ª§ÔºåÊØîÂ¶Ç‰∏ãÈù¢ËøôÊ†∑Ôºö 123Available scripts in the myproject package: eslint eslint **.js Â¶ÇÊûúËøêË°å npm run eslintÔºånpm ‰ºöÂú® shell ‰∏≠ËøêË°å eslint **.js„ÄÇ ÊúâÊ≤°ÊúâÂ•ΩÂ•áËøá‰∏äÈù¢ÁöÑ eslint ÂëΩ‰ª§ÊòØ‰ªéÂì™ÈáåÊù•ÁöÑÔºüÂÖ∂ÂÆûÔºånpm Âú®ÊâßË°åÊåáÂÆö script ‰πãÂâç‰ºöÊää node_modules&#x2F;.bin Âä†Âà∞ÁéØÂ¢ÉÂèòÈáè $PATH ÁöÑÂâçÈù¢ÔºåËøôÊÑèÂë≥ÁùÄ‰ªª‰ΩïÂÜÖÂê´ÂèØÊâßË°åÊñá‰ª∂ÁöÑ npm ‰æùËµñÈÉΩÂèØ‰ª•Âú® npm script ‰∏≠Áõ¥Êé•Ë∞ÉÁî®ÔºåÊç¢Âè•ËØùËØ¥Ôºå‰Ω†‰∏çÈúÄË¶ÅÂú® npm script ‰∏≠Âä†‰∏äÂèØÊâßË°åÊñá‰ª∂ÁöÑÂÆåÊï¥Ë∑ØÂæÑÔºåÊØîÂ¶Ç .&#x2F;node_modules&#x2F;.bin&#x2F;eslint **.js„ÄÇ ÂàõÂª∫Ëá™ÂÆö‰πâ npm scriptÁü•ÈÅìÂ¶Ç‰ΩïËøêË°å npm script ‰πãÂêéÔºåÊé•‰∏ãÊù•Êàë‰ª¨Âú® hello-npm-script È°πÁõÆ‰∏≠Ê∑ªÂä†ÊúâÂÆûÈôÖÁî®ÈÄîÁöÑ eslint ËÑöÊú¨Ôºåeslint ÊòØÁ§æÂå∫‰∏≠Êé•ÂèóÂ∫¶ÊØîËæÉÈ´òÁöÑ javascript È£éÊ†ºÊ£ÄÊü•Â∑•ÂÖ∑ÔºåÊúâÂ§ßÊääÁé∞ÊàêÁöÑËßÑÂàôÈõÜÂèØ‰æõ‰Ω†ÈÄâÊã©ÔºåÊØîÂ¶Ç google„ÄÅ airbnb„ÄÇ Âú®Êñ∞È°πÁõÆÊàñËÄÖ‰ªª‰ΩïÁé∞ÊúâÈ°πÁõÆ‰∏≠Ê∑ªÂä† eslint Ëá™ÂÆö‰πâËÑöÊú¨ÁöÑÊ≠•È™§Â¶Ç‰∏ãÔºö ÂáÜÂ§áË¢´Ê£ÄÊü•ÁöÑ‰ª£Á†Å Ë¶ÅÂÅö‰ª£Á†ÅÊ£ÄÊü•ÔºåÊàë‰ª¨ÂøÖÈ°ªÊúâ‰ª£Á†ÅÔºåÂàõÂª∫ index.js Êñá‰ª∂ÔºåËæìÂÖ•Â¶Ç‰∏ãÂÜÖÂÆπÔºö 12345const str = &#x27;some value&#x27;;function fn()&#123; console.log(&#x27;some log&#x27;);&#125; Ê∑ªÂä† eslint ‰æùËµñ ÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Â∞Ü eslint Ê∑ªÂä†‰∏∫ devDependenciesÔºö 1npm install eslint -D ÂàùÂßãÂåñ eslint ÈÖçÁΩÆÁî® eslint ÂÅöÊ£ÄÊü•ÈúÄË¶ÅÈÖçÁΩÆËßÑÂàôÈõÜÔºåÂ≠òÊîæËßÑÂàôÈõÜÁöÑÊñá‰ª∂Â∞±ÊòØÈÖçÁΩÆÊñá‰ª∂Ôºå‰ΩøÁî®Â¶Ç‰∏ãÊñá‰ª∂ÁîüÊàêÈÖçÁΩÆÊñá‰ª∂Ôºö 1./node_modules/.bin/eslint --init TIP#3: Êää eslint ÂÆâË£Ö‰∏∫È°πÁõÆ‰æùËµñËÄåÈùûÂÖ®Â±ÄÂëΩ‰ª§ÔºåÈ°πÁõÆÂèØÁßªÊ§çÊÄßÊõ¥È´ò„ÄÇ Âú®ÂëΩ‰ª§Ë°åÊèêÁ§∫‰∏≠ÈÄâÊã© Answer questions about your styleÔºåÂ¶Ç‰∏ãÂõæÂõûÁ≠îÂá†‰∏™ÈóÆÈ¢òÔºåÁ≠îÊ°àÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÂÅèÂ•ΩÔºö ÂõûËΩ¶ÂêéÊ†πÁõÆÂΩï‰∏ãÂ∞±Êúâ‰∫Ü .eslintrc.js ÈÖçÁΩÆÊñá‰ª∂Ôºö 12345678910111213module.exports = &#123; env: &#123; es6: true, node: true, &#125;, extends: &#x27;eslint:recommended&#x27;, rules: &#123; indent: [&#x27;error&#x27;, 4], &#x27;linebreak-style&#x27;: [&#x27;error&#x27;, &#x27;unix&#x27;], quotes: [&#x27;error&#x27;, &#x27;single&#x27;], semi: [&#x27;error&#x27;, &#x27;always&#x27;], &#125;,&#125;; Ê∑ªÂä† eslint ÂëΩ‰ª§Âú® package.json ÁöÑ scripts Â≠óÊÆµ‰∏≠Êñ∞Â¢ûÂëΩ‰ª§ eslintÔºö 123456&#123; &quot;scripts&quot;: &#123; &quot;eslint&quot;: &quot;eslint *.js&quot;, &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot; &#125;,&#125; ÊâãÂä®‰øÆÊîπ package.json Êó∂‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèËØ≠Ê≥ïÊ≠£Á°Æ„ÄÇ ËøêË°å eslint ÂëΩ‰ª§ ÊâßË°å npm run eslintÔºåÂèØ‰ª•ÁúãÂà∞ÔºåÊåâÁÖßÂÆòÊñπÊé®ËçêËßÑÂàô‰ª£Á†ÅÈáåÊúâ 3 Â§Ñ‰∏çÁ¨¶ÂêàËßÑËåÉÁöÑÂú∞ÊñπÔºö 20171205 Â¢ûË°•Ôºöeslint ÂÆåÊàê react„ÄÅvue.js ‰ª£Á†ÅÁöÑÊ£ÄÊü•Â¶ÇÊûúÈúÄË¶ÅÁªìÂêà eslint Ê£ÄÊü•‰∏ªÊµÅÂâçÁ´ØÊ°ÜÊû∂ react„ÄÅvue.jsÔºå‰∏ãÈù¢Êèê‰æõ‰∏§Êù°Á∫øÁ¥¢ÔºåÂõ†‰∏∫ÂÆòÊñπ‰ªìÂ∫ìÁöÑ README Â∞±ÂèØ‰ª•‰Ωú‰∏∫ÂÖ•Èó®ÊñáÊ°£Ôºå‰ªîÁªÜËØªËØªÁõ∏‰ø°ÁªùÂ§ßÂ§öÊï∞ÂêåÂ≠¶ÈÉΩËÉΩÈÖçÁΩÆÂ•Ω„ÄÇ ‰ΩøÁî® eslint-plugin-react Ê£ÄÊü• react ‰ª£Á†ÅÔºå‰ΩøÁî® react-plugin-react-native Ê£ÄÊü• react-native ‰ª£Á†ÅÔºåÂ¶ÇÊûú‰Ω†ÊØîËæÉÊáíÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® eslint-config-airbnbÔºåÈáåÈù¢ÂÜÖÁΩÆ‰∫Ü eslint-plugin-reactÔºåÊñ∞‰∫∫Â∏∏ÈÅáÂà∞ peerDependencies ÂÆâË£ÖÂ§±Ë¥•ÈóÆÈ¢òÂèØÂèÇÁÖß npmjs ‰∏ªÈ°µ‰∏äÁöÑÂ¶Ç‰∏ãÊñπÊ≥ïËß£ÂÜ≥Ôºö 1234( export PKG=eslint-config-airbnb; npm info &quot;$PKG@latest&quot; peerDependencies --json | command sed &#x27;s/[\\&#123;\\&#125;,]//g ; s/: /@/g&#x27; | xargs npm install --save-dev &quot;$PKG@latest&quot;) Êé®Ëçê‰ΩøÁî® vue.js ÂÆòÊñπÁöÑ eslint Êèí‰ª∂Ôºöeslint-plugin-vue Êù•Ê£ÄÊü• vue.js ‰ª£Á†ÅÔºåÂÖ∑‰ΩìÁöÑÈÖçÁΩÆÊñπÊ≥ïÂÆòÊñπ README ÂÜôÁöÑÊ∏ÖÊô∞Êòé‰∫ÜÔºåËøôÈáåÂ∞±‰∏çËµòËø∞‰∫Ü„ÄÇ ‰∏äÈù¢ÁöÑÂá†Áßç eslint ËßÑÂàôÈõÜÁöÑÂÆòÊñπ‰ªìÂ∫ìÈÉΩÂàóÂá∫‰∫ÜÂêÑËá™ÊîØÊåÅÁöÑËßÑÂàôÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÖ≥Èó≠Êüê‰∫õËßÑÂàôÔºåÂèØ‰ª•Áõ¥Êé•Âú®Ëá™Â∑±ÁöÑ .eslintrc* ÈáåÈù¢ÁöÑ rules ‰∏≠ÈÖçÁΩÆÔºåÊØîÂ¶ÇÊàë‰ª¨‰ªìÂ∫ìÈáåÈù¢ÁöÑÔºö 12345678910111213module.exports = &#123; env: &#123; es6: true, node: true, &#125;, extends: &#x27;eslint:recommended&#x27;, rules: &#123; indent: [&#x27;error&#x27;, 2], &#x27;linebreak-style&#x27;: [&#x27;error&#x27;, &#x27;unix&#x27;], quotes: [&#x27;error&#x27;, &#x27;single&#x27;], semi: [&#x27;error&#x27;, &#x27;always&#x27;], &#125;,&#125;; 20171205 Â¢ûË°•Ôºöeslint ÂÆåÊàê react„ÄÅvue.js ‰ª£Á†ÅÁöÑÊ£ÄÊü•Â¶ÇÊûúÈúÄË¶ÅÁªìÂêà eslint Ê£ÄÊü•‰∏ªÊµÅÂâçÁ´ØÊ°ÜÊû∂ react„ÄÅvue.jsÔºå‰∏ãÈù¢Êèê‰æõ‰∏§Êù°Á∫øÁ¥¢ÔºåÂõ†‰∏∫ÂÆòÊñπ‰ªìÂ∫ìÁöÑ README Â∞±ÂèØ‰ª•‰Ωú‰∏∫ÂÖ•Èó®ÊñáÊ°£Ôºå‰ªîÁªÜËØªËØªÁõ∏‰ø°ÁªùÂ§ßÂ§öÊï∞ÂêåÂ≠¶ÈÉΩËÉΩÈÖçÁΩÆÂ•Ω„ÄÇ ‰ΩøÁî® eslint-plugin-react Ê£ÄÊü• react ‰ª£Á†ÅÔºå‰ΩøÁî® react-plugin-react-native Ê£ÄÊü• react-native ‰ª£Á†ÅÔºåÂ¶ÇÊûú‰Ω†ÊØîËæÉÊáíÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® eslint-config-airbnbÔºåÈáåÈù¢ÂÜÖÁΩÆ‰∫Ü eslint-plugin-reactÔºåÊñ∞‰∫∫Â∏∏ÈÅáÂà∞ peerDependencies ÂÆâË£ÖÂ§±Ë¥•ÈóÆÈ¢òÂèØÂèÇÁÖß npmjs ‰∏ªÈ°µ‰∏äÁöÑÂ¶Ç‰∏ãÊñπÊ≥ïËß£ÂÜ≥Ôºö 1234( export PKG=eslint-config-airbnb; npm info &quot;$PKG@latest&quot; peerDependencies --json | command sed &#x27;s/[\\&#123;\\&#125;,]//g ; s/: /@/g&#x27; | xargs npm install --save-dev &quot;$PKG@latest&quot;) Êé®Ëçê‰ΩøÁî® vue.js ÂÆòÊñπÁöÑ eslint Êèí‰ª∂Ôºöeslint-plugin-vue Êù•Ê£ÄÊü• vue.js ‰ª£Á†ÅÔºåÂÖ∑‰ΩìÁöÑÈÖçÁΩÆÊñπÊ≥ïÂÆòÊñπ README ÂÜôÁöÑÊ∏ÖÊô∞Êòé‰∫ÜÔºåËøôÈáåÂ∞±‰∏çËµòËø∞‰∫Ü„ÄÇ ‰∏äÈù¢ÁöÑÂá†Áßç eslint ËßÑÂàôÈõÜÁöÑÂÆòÊñπ‰ªìÂ∫ìÈÉΩÂàóÂá∫‰∫ÜÂêÑËá™ÊîØÊåÅÁöÑËßÑÂàôÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÖ≥Èó≠Êüê‰∫õËßÑÂàôÔºåÂèØ‰ª•Áõ¥Êé•Âú®Ëá™Â∑±ÁöÑ .eslintrc* ÈáåÈù¢ÁöÑ rules ‰∏≠ÈÖçÁΩÆÔºåÊØîÂ¶ÇÊàë‰ª¨‰ªìÂ∫ìÈáåÈù¢ÁöÑÔºö 12345678910111213module.exports = &#123; env: &#123; es6: true, node: true, &#125;, extends: &#x27;eslint:recommended&#x27;, rules: &#123; indent: [&#x27;error&#x27;, 2], &#x27;linebreak-style&#x27;: [&#x27;error&#x27;, &#x27;unix&#x27;], quotes: [&#x27;error&#x27;, &#x27;single&#x27;], semi: [&#x27;error&#x27;, &#x27;always&#x27;], &#125;,&#125;; 1.2 ËøêË°åÂ§ö‰∏™ npm script ÁöÑÂêÑÁßçÂßøÂäøÂâçÁ´ØÈ°πÁõÆÈÄöÂ∏∏‰ºöÂåÖÊã¨Â§ö‰∏™ npm scriptÔºåÂØπÂ§ö‰∏™ÂëΩ‰ª§ËøõË°åÁºñÊéíÊòØÂæàËá™ÁÑ∂ÁöÑÈúÄÊ±ÇÔºåÊúâÊó∂ÂÄôÈúÄË¶ÅÂ∞ÜÂ§ö‰∏™ÂëΩ‰ª§‰∏≤Ë°åÔºåÂç≥ËÑöÊú¨ÈÅµÂæ™‰∏•Ê†ºÁöÑÊâßË°åÈ°∫Â∫èÔºõÊúâÊó∂ÂÄôÂàôÈúÄË¶ÅËÆ©ÂÆÉ‰ª¨Âπ∂Ë°åÊù•ÊèêÈ´òÈÄüÂ∫¶ÔºåÊØîÂ¶Ç‰∏çÁõ∏‰∫íÈòªÂ°ûÁöÑ npm script„ÄÇÁ§æÂå∫‰∏≠‰πüÊúâÊØî npm ÂÜÖÁΩÆÁöÑÂ§öÂëΩ‰ª§ËøêË°åÊú∫Âà∂Êõ¥Â•ΩÁî®ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºönpm-run-all„ÄÇ Âì™Êù•ÈÇ£‰πàÂ§öÂëΩ‰ª§ÔºüÈÄöÂ∏∏Êù•ËØ¥ÔºåÂâçÁ´ØÈ°πÁõÆ‰ºöÂåÖÂê´ js„ÄÅcss„ÄÅless„ÄÅscss„ÄÅjson„ÄÅmarkdown Á≠âÊ†ºÂºèÁöÑÊñá‰ª∂Ôºå‰∏∫‰øùÈöú‰ª£Á†ÅË¥®ÈáèÔºåÁªô‰∏çÂêåÁöÑ‰ª£Á†ÅÊ∑ªÂä†Ê£ÄÊü•ÊòØÂæàÊúâÂøÖË¶ÅÁöÑÔºå‰ª£Á†ÅÊ£ÄÊü•‰∏ç‰ªÖ‰øùÈöú‰ª£Á†ÅÊ≤°Êúâ‰ΩéÁ∫ßÁöÑËØ≠Ê≥ïÈîôËØØÔºåËøòÂèØÁ°Æ‰øù‰ª£Á†ÅÈÉΩÈÅµÂÆàÁ§æÂå∫ÁöÑÊúÄ‰Ω≥ÂÆûË∑µÂíå‰∏ÄËá¥ÁöÑÁºñÁ†ÅÈ£éÊ†ºÔºåÂú®Âõ¢ÈòüÂçè‰Ωú‰∏≠Â∞§ÂÖ∂ÊúâÁî®ÔºåÂç≥‰ΩøÊòØ‰∏™‰∫∫È°πÁõÆÔºåÂä†‰∏ä‰ª£Á†ÅÊ£ÄÊü•Ôºå‰πü‰ºöÊèêÈ´ò‰Ω†ÁöÑÊïàÁéáÂíåË¥®Èáè„ÄÇ ÊàëÈÄöÂ∏∏‰ºöÁªôÂâçÁ´ØÈ°πÁõÆÂä†‰∏ä‰∏ãÈù¢ 4 Áßç‰ª£Á†ÅÊ£ÄÊü•Ôºö eslintÔºåÂèØÂÆöÂà∂ÁöÑ js ‰ª£Á†ÅÊ£ÄÊü•Ôºå1.1 ‰∏≠ÊúâËØ¶ÁªÜÁöÑÈÖçÁΩÆÊ≠•È™§Ôºõ stylelintÔºåÂèØÂÆöÂà∂ÁöÑÊ†∑ÂºèÊñá‰ª∂Ê£ÄÊü•ÔºåÊîØÊåÅ css„ÄÅless„ÄÅscssÔºõ jsonlintÔºåjson Êñá‰ª∂ËØ≠Ê≥ïÊ£ÄÊü•ÔºåË∏©ËøáÂùëÁöÑÂêåÂ≠¶‰ºöÊ∏ÖÊ•öÔºåjson Êñá‰ª∂ËØ≠Ê≥ïÈîôËØØ‰ºöÁü•ÈÅìÂØºËá¥ÂêÑÁßçÂ§±Ë¥•Ôºõ markdownlint-cliÔºåMarkdown Êñá‰ª∂ÊúÄ‰Ω≥ÂÆûË∑µÊ£ÄÊü•Ôºå‰∏™‰∫∫ÂÅèÂ•ΩÔºõÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåhtml ‰ª£Á†Å‰πüÂ∫îËØ•Ê£ÄÊü•Ôºå‰ΩÜÊòØÂ∑•ÂÖ∑ÊîØÊåÅËñÑÂº±ÔºåÂ∞±Áï•Ëøá‰∏çË°®„ÄÇÊ≠§Â§ñÔºå‰∏∫‰ª£Á†ÅÊ∑ªÂä†ÂøÖË¶ÅÁöÑÂçïÂÖÉÊµãËØï‰πüÊòØË¥®Èáè‰øùÈöúÁöÑÈáçË¶ÅÊâãÊÆµÔºåÂ∏∏Áî®ÁöÑÂçïÊµãÊäÄÊúØÊ†àÊòØÔºö mochaÔºåÊµãËØïÁî®‰æãÁªÑÁªáÔºåÊµãËØïÁî®‰æãËøêË°åÂíåÁªìÊûúÊî∂ÈõÜÁöÑÊ°ÜÊû∂Ôºõ chaiÔºåÊµãËØïÊñ≠Ë®ÄÂ∫ìÔºåÂøÖË¶ÅÁöÑÊó∂ÂÄôÂèØ‰ª•ÁªìÂêà sinon ‰ΩøÁî®ÔºõTIP#4ÔºöÊµãËØïÂ∑•ÂÖ∑Â¶Ç tap„ÄÅava ‰πüÈÉΩÊèê‰æõ‰∫ÜÂëΩ‰ª§Ë°åÊé•Âè£ÔºåËÉΩÂæàÂ•ΩÁöÑÈõÜÊàêÂà∞ npm script ‰∏≠ÔºåÂéüÁêÜÊòØÁõ∏ÈÄöÁöÑ„ÄÇ ÂåÖÂê´‰∫ÜÂü∫Êú¨ÁöÑ‰ª£Á†ÅÊ£ÄÊü•„ÄÅÂçïÂÖÉÊµãËØïÂëΩ‰ª§ÁöÑ package.json Â¶Ç‰∏ãÔºö 123456789101112131415161718192021&#123; &quot;name&quot;: &quot;hello-npm-script&quot;, &quot;version&quot;: &quot;0.1.0&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;lint:js&quot;: &quot;eslint *.js&quot;, &quot;lint:css&quot;: &quot;stylelint *.less&quot;, &quot;lint:json&quot;: &quot;jsonlint --quiet *.json&quot;, &quot;lint:markdown&quot;: &quot;markdownlint --config .markdownlint.json *.md&quot;, &quot;test&quot;: &quot;mocha tests/&quot; &#125;, &quot;devDependencies&quot;: &#123; &quot;chai&quot;: &quot;^4.1.2&quot;, &quot;eslint&quot;: &quot;^4.11.0&quot;, &quot;jsonlint&quot;: &quot;^1.6.2&quot;, &quot;markdownlint-cli&quot;: &quot;^0.5.0&quot;, &quot;mocha&quot;: &quot;^4.0.1&quot;, &quot;stylelint&quot;: &quot;^8.2.0&quot;, &quot;stylelint-config-standard&quot;: &quot;^17.0.0&quot; &#125;&#125; ËÆ©Â§ö‰∏™ npm script ‰∏≤Ë°åÔºüÂú®Êàë‰ª¨ËøêË°åÊµãËØï‰πãÂâçÁ°Æ‰øùÊàë‰ª¨ÁöÑ‰ª£Á†ÅÈÉΩÈÄöËøá‰ª£Á†ÅÊ£ÄÊü•‰ºöÊòØÊØîËæÉ‰∏çÈîôÁöÑÂÆûË∑µÔºåËøô‰πüÊòØËÆ©Â§ö‰∏™ npm script ‰∏≤Ë°åÁöÑÂÖ∏ÂûãÁî®‰æãÔºåÂÆûÁé∞ÊñπÂºè‰πüÊØîËæÉÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅÁî® &amp;&amp; Á¨¶Âè∑ÊääÂ§öÊù° npm script ÊåâÂÖàÂêéÈ°∫Â∫è‰∏≤Ëµ∑Êù•Âç≥ÂèØÔºåÂÖ∑‰ΩìÂà∞Êàë‰ª¨ÁöÑÈ°πÁõÆÔºå‰øÆÊîπÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö 12345678diff --git a/package.json b/package.jsonindex c904250..023d71e 100644--- a/package.json+++ b/package.json@@ -8,7 +8,7 @@- &quot;test&quot;: &quot;mocha tests/&quot;+ &quot;test&quot;: &quot;npm run lint:js &amp;&amp; npm run lint:css &amp;&amp; npm run lint:json &amp;&amp; npm run lint:markdown &amp;&amp; mocha tests/&quot; &#125;, ÁÑ∂ÂêéÁõ¥Êé•ÊâßË°å npm test Êàñ npm tÔºå‰ªéËæìÂá∫ÂèØ‰ª•ÁúãÂà∞Â≠êÂëΩ‰ª§ÁöÑÊâßË°åÈ°∫Â∫èÊòØ‰∏•Ê†ºÊåâÁÖßÊàë‰ª¨Âú® scripts ‰∏≠Â£∞ÊòéÁöÑÂÖàÂêéÈ°∫Â∫èÊù•ÁöÑÔºö 1eslint ==&gt; stylelint ==&gt; jsonlint ==&gt; markdownlint ==&gt; mocha ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‰∏≤Ë°åÊâßË°åÁöÑÊó∂ÂÄôÂ¶ÇÊûúÂâçÂ∫èÂëΩ‰ª§Â§±Ë¥•ÔºàÈÄöÂ∏∏ËøõÁ®ãÈÄÄÂá∫Á†ÅÈùû0ÔºâÔºåÂêéÁª≠ÂÖ®ÈÉ®ÂëΩ‰ª§ÈÉΩ‰ºöÁªàÊ≠¢ÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ùËØïÂú® index.js ‰∏≠ÂºïÂÖ•ÈîôËØØÔºàÂà†ÊéâË°åÊú´ÁöÑÂàÜÂè∑ÔºâÔºö 123456789101112diff --git a/index.js b/index.jsindex ab8bd0e..b817ea4 100644--- a/index.js+++ b/index.js@@ -4,7 +4,7 @@ const add = (a, b) =&gt; &#123; &#125; return NaN;-&#125;;+&#125; module.exports = &#123; add &#125;; ÁÑ∂ÂêéÈáçÊñ∞ËøêË°å npm tÔºåÁªìÊûúÂ¶Ç‰∏ãÔºånpm run lint:js Â§±Ë¥•‰πãÂêéÔºåÂêéÁª≠ÂëΩ‰ª§ÈÉΩÊ≤°ÊúâÊâßË°åÔºö ËÆ©Â§ö‰∏™ npm script Âπ∂Ë°åÔºüÂú®‰∏•Ê†º‰∏≤Ë°åÁöÑÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂøÖÈ°ªË¶ÅÁ°Æ‰øù‰ª£Á†Å‰∏≠Ê≤°ÊúâÁºñÁ†ÅËßÑËåÉÈóÆÈ¢òÊâçËÉΩËøêË°åÊµãËØïÔºåÂú®Êüê‰∫õÊó∂ÂÄôÂèØËÉΩÂπ∂‰∏çÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨ÁúüÊ≠£ÈúÄË¶ÅÁöÑÊòØÔºå‰ª£Á†ÅÂèòÊõ¥Êó∂ÂêåÊó∂ÁªôÂá∫ÊµãËØïÁªìÊûúÂíåÊµãËØïËøêË°åÁªìÊûú„ÄÇËøôÂ∞±ÈúÄË¶ÅÊääÂ≠êÂëΩ‰ª§ÁöÑËøêË°å‰ªé‰∏≤Ë°åÊîπÊàêÂπ∂Ë°åÔºåÂÆûÁé∞ÊñπÂºèÊõ¥ÁÆÄÂçïÔºåÊääËøûÊé•Â§öÊù°ÂëΩ‰ª§ÁöÑ &amp;&amp; Á¨¶Âè∑ÊõøÊç¢Êàê &amp; Âç≥ÂèØ„ÄÇ ‰ª£Á†ÅÂèòÊõ¥Â¶Ç‰∏ãÔºö 12345678diff --git a/package.json b/package.jsonindex 023d71e..2d9bd6f 100644--- a/package.json+++ b/package.json@@ -8,7 +8,7 @@- &quot;test&quot;: &quot;npm run lint:js &amp;&amp; npm run lint:css &amp;&amp; npm run lint:json &amp;&amp; npm run lint:markdown &amp;&amp; mocha tests/&quot;+ &quot;test&quot;: &quot;npm run lint:js &amp; npm run lint:css &amp; npm run lint:json &amp; npm run lint:markdown &amp; mocha tests/&quot; &#125;, ÈáçÊñ∞ËøêË°å npm tÔºåÊàë‰ª¨ÂæóÂà∞Â¶Ç‰∏ãÁªìÊûúÔºö ÁªÜÂøÉÁöÑÂêåÂ≠¶ÂèØËÉΩÂ∑≤ÁªèÂèëÁé∞‰∏äÂõæ‰∏≠Âì™Èáå‰∏çÂØπÔºånpm run lint:js ÁöÑÁªìÊûúÂú®ËøõÁ®ãÈÄÄÂá∫‰πãÂêéÊâçËæìÂá∫ÔºåÂ¶ÇÊûú‰Ω†Ëá™Â∑±ËøêË°åÔºå‰∏ç‰∏ÄÂÆöËÉΩÁ®≥ÂÆöÂ§çÁé∞Ëøô‰∏™ÈóÆÈ¢òÔºå‰ΩÜ npm ÂÜÖÁΩÆÊîØÊåÅÁöÑÂ§öÊù°ÂëΩ‰ª§Âπ∂Ë°åË∑ü js ÈáåÈù¢ÂêåÊó∂ÂèëËµ∑Â§ö‰∏™ÂºÇÊ≠•ËØ∑Ê±ÇÈùûÂ∏∏Á±ª‰ººÔºåÂÆÉÂè™Ë¥üË¥£Ëß¶ÂèëÂ§öÊù°ÂëΩ‰ª§ÔºåËÄå‰∏çÁÆ°ÁªìÊûúÁöÑÊî∂ÈõÜÔºåÂ¶ÇÊûúÂπ∂Ë°åÁöÑÂëΩ‰ª§ÊâßË°åÊó∂Èó¥Â∑ÆÂºÇÈùûÂ∏∏Â§ßÔºå‰∏äÈù¢ÁöÑÈóÆÈ¢òÂ∞±‰ºöÁ®≥ÂÆöÂ§çÁé∞„ÄÇÊÄé‰πàËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂë¢Ôºü Á≠îÊ°à‰πüÂæàÁÆÄÂçïÔºåÂú®ÂëΩ‰ª§ÁöÑÂ¢ûÂä† &amp; wait Âç≥ÂèØÔºåËøôÊ†∑Êàë‰ª¨ÁöÑ test ÂëΩ‰ª§ÈïøËøôÊ†∑Ôºö 1npm run lint:js &amp; npm run lint:css &amp; npm run lint:json &amp; npm run lint:markdown &amp; mocha tests/ &amp; wait Âä†‰∏ä wait ÁöÑÈ¢ùÂ§ñÂ•ΩÂ§ÑÊòØÔºåÂ¶ÇÊûúÊàë‰ª¨Âú®‰ªª‰ΩïÂ≠êÂëΩ‰ª§‰∏≠ÂêØÂä®‰∫ÜÈïøÊó∂Èó¥ËøêË°åÁöÑËøõÁ®ãÔºåÊØîÂ¶ÇÂêØÁî®‰∫Ü mocha ÁöÑ ‚Äìwatch ÈÖçÁΩÆÔºåÂèØ‰ª•‰ΩøÁî® ctrl + c Êù•ÁªìÊùüËøõÁ®ãÔºåÂ¶ÇÊûúÊ≤°Âä†ÁöÑËØùÔºå‰Ω†Â∞±Ê≤°ÂäûÊ≥ïÁõ¥Êé•ÁªìÊùüÂêØÂä®Âà∞ÂêéÂè∞ÁöÑËøõÁ®ã„ÄÇ ÊúâÊ≤°ÊúâÊõ¥Â•ΩÁöÑÁÆ°ÁêÜÊñπÂºèÔºüÊúâÂº∫Ëø´ÁóáÁöÑÂêåÂ≠¶ÂèØËÉΩ‰ºöËßâÂæóÂÉè‰∏äÈù¢ËøôÊ†∑Áî®ÂéüÁîüÊñπÂºèÊù•ËøêË°åÂ§öÊù°ÂëΩ‰ª§ÂæàËáÉËÇøÔºåÂπ∏ËøêÁöÑÊòØÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® npm-run-all ÂÆûÁé∞Êõ¥ËΩªÈáèÂíåÁÆÄÊ¥ÅÁöÑÂ§öÂëΩ‰ª§ËøêË°å„ÄÇ Áî®Â¶Ç‰∏ãÂëΩ‰ª§Â∞Ü npm-run-all Ê∑ªÂä†Âà∞È°πÁõÆ‰æùËµñ‰∏≠Ôºö 12npm i npm-run-all -DÁÑ∂Âêé‰øÆÊîπ package.json ÂÆûÁé∞Â§öÂëΩ‰ª§ÁöÑ‰∏≤Ë°åÊâßË°åÔºö 123456789diff --git a/package.json b/package.jsonindex b3b1272..83974d6 100644--- a/package.json+++ b/package.json@@ -8,7 +8,8 @@- &quot;test&quot;: &quot;npm run lint:js &amp; npm run lint:css &amp; npm run lint:json &amp; npm run lint:markdown &amp; mocha tests/ &amp; wait&quot;+ &quot;mocha&quot;: &quot;mocha tests/&quot;,+ &quot;test&quot;: &quot;npm-run-all lint:js lint:css lint:json lint:markdown mocha&quot; &#125;, npm-run-all ËøòÊîØÊåÅÈÄöÈÖçÁ¨¶ÂåπÈÖçÂàÜÁªÑÁöÑ npm scriptÔºå‰∏äÈù¢ÁöÑËÑöÊú¨ÂèØ‰ª•Ëøõ‰∏ÄÊ≠•ÁÆÄÂåñÊàêÔºö 12345678diff --git a/package.json b/package.jsonindex 83974d6..7b327cd 100644--- a/package.json+++ b/package.json@@ -9,7 +9,7 @@- &quot;test&quot;: &quot;npm-run-all lint:js lint:css lint:json lint:markdown mocha&quot;+ &quot;test&quot;: &quot;npm-run-all lint:* mocha&quot; &#125;, Â¶Ç‰ΩïËÆ©Â§ö‰∏™ npm script Âπ∂Ë°åÊâßË°åÔºü‰πüÂæàÁÆÄÂçïÔºö 12345678diff --git a/package.json b/package.jsonindex 7b327cd..c32da1c 100644--- a/package.json+++ b/package.json@@ -9,7 +9,7 @@- &quot;test&quot;: &quot;npm-run-all lint:* mocha&quot;+ &quot;test&quot;: &quot;npm-run-all --parallel lint:* mocha&quot; &#125;, Âπ∂Ë°åÊâßË°åÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Âπ∂‰∏çÈúÄË¶ÅÂú®ÂêéÈù¢Â¢ûÂä† &amp; waitÔºåÂõ†‰∏∫ npm-run-all Â∑≤ÁªèÂ∏ÆÊàë‰ª¨ÂÅö‰∫Ü„ÄÇ TIP#5Ôºönpm-run-all ËøòÊèê‰æõ‰∫ÜÂæàÂ§öÈÖçÁΩÆÈ°πÊîØÊåÅÊõ¥Â§çÊùÇÁöÑÂëΩ‰ª§ÁºñÊéíÔºåÊØîÂ¶ÇÂ§ö‰∏™ÂëΩ‰ª§Âπ∂Ë°å‰πãÂêéÊé•‰∏≤Ë°åÁöÑÂëΩ‰ª§ÔºåÊÑüÂÖ¥Ë∂£ÁöÑÂêåÂ≠¶ËØ∑ÈòÖËØªÊñáÊ°£ÔºåËá™Â∑±Áé©ÂÑø„ÄÇ 1.3 Áªô npm script ‰º†ÈÄíÂèÇÊï∞ÂíåÊ∑ªÂä†Ê≥®ÈáäÊú¨Â∞èËäÇ‰ºö‰ªãÁªç 3 ‰∏™Áü•ËØÜÁÇπÔºöÁªô npm script ‰º†ÈÄíÂèÇÊï∞‰ª•ÂáèÂ∞ëÈáçÂ§çÁöÑ npm scriptÔºõÂ¢ûÂä†Ê≥®ÈáäÊèêÈ´ò npm script ËÑöÊú¨ÁöÑÂèØËØªÊÄßÔºõÊéßÂà∂ËøêË°åÊó∂Êó•ÂøóËæìÂá∫ËÉΩËÆ©‰Ω†‰∏ìÊ≥®Âú®ÈáçË¶Å‰ø°ÊÅØ‰∏ä„ÄÇ Áªô npm script ‰º†ÈÄíÂèÇÊï∞eslint ÂÜÖÁΩÆ‰∫Ü‰ª£Á†ÅÈ£éÊ†ºËá™Âä®‰øÆÂ§çÊ®°ÂºèÔºåÂè™ÈúÄÁªôÂÆÉ‰º†ÂÖ• ‚Äìfix ÂèÇÊï∞Âç≥ÂèØÔºåÂú® scripts ‰∏≠Â£∞ÊòéÊ£ÄÊü•‰ª£Á†ÅÂëΩ‰ª§ÁöÑÂêåÊó∂‰Ω†ÂèØËÉΩ‰πüÈúÄË¶ÅÂ£∞Êòé‰øÆÂ§ç‰ª£Á†ÅÁöÑÂëΩ‰ª§ÔºåÈù¢ÂØπËøôÁßçÈúÄÊ±ÇÔºåÂ§ßÂ§öÊï∞ÂêåÂ≠¶ÂèØËÉΩ‰ºöÂøç‰∏ç‰ΩèÂ§çÂà∂Á≤òË¥¥ÔºåÂ¶Ç‰∏ãÔºö 1234567diff --git a/package.json b/package.jsonindex c32da1c..b6fb03e 100644--- a/package.json+++ b/package.json@@ -5,6 +5,7 @@ &quot;lint:js&quot;: &quot;eslint *.js&quot;,+ &quot;lint:js:fix&quot;: &quot;eslint *.js --fix&quot;, Âú® lint:js ÂëΩ‰ª§ÊØîËæÉÁü≠ÁöÑÊó∂ÂÄôÂ§çÂà∂Á≤òË¥¥ÁöÑÊñπÊ≥ïÁÆÄÂçïÁ≤óÊö¥ÊúâÊïàÔºå‰ΩÜÊòØÂΩì lint:js ÂëΩ‰ª§ÂèòÁöÑÂæàÈïø‰πãÂêéÔºåÈöæÂÖçÂêéÁª≠‰ºöÊúâ‰∫∫Êîπ‰∫Ü lint:js ËÄåÂøòËÆ∞‰øÆÊîπ lint:js:fixÔºàÂà´ÈóÆÊàë‰∏∫Âï•ÔºåÊàëÂ∞±ÊòØË∏©ÁùÄÂùëËøáÊù•ÁöÑÔºâÔºåÊõ¥ÂÅ•Â£ÆÁöÑÂÅöÊ≥ïÊòØÔºåÂú®ËøêË°å npm script Êó∂ÁªôÂÆöÈ¢ùÂ§ñÁöÑÂèÇÊï∞Ôºå‰ª£Á†Å‰øÆÊîπÂ¶Ç‰∏ãÔºö 123456diff --git a/package.json b/package.json--- a/package.json+++ b/package.json@@ -5,6 +5,7 @@ &quot;lint:js&quot;: &quot;eslint *.js&quot;,+ &quot;lint:js:fix&quot;: &quot;npm run lint:js -- --fix&quot;, Ë¶ÅÊ†ºÂ§ñÊ≥®ÊÑè ‚Äìfix ÂèÇÊï∞ÂâçÈù¢ÁöÑ ‚Äì ÂàÜÈöîÁ¨¶ÔºåÊÑèÊåáË¶ÅÁªô npm run lint:js ÂÆûÈôÖÊåáÂêëÁöÑÂëΩ‰ª§‰º†ÈÄíÈ¢ùÂ§ñÁöÑÂèÇÊï∞„ÄÇ ËøêË°åÊïàÊûúÂ¶Ç‰∏ãÂõæÔºö‰∏äÂõæÁ¨¨2‰∏™Á∫¢Ëâ≤Ê°ÜÈáåÈù¢ÊòØÂÆûÈôÖÊâßË°åÁöÑÂëΩ‰ª§ÔºåÂèØ‰ª•ÁúãÂà∞ ‚Äìfix ÂèÇÊï∞ÈôÑÂä†Âú®‰∫ÜÂêéÈù¢„ÄÇ TIP#6ÔºöÂ¶ÇÊûú‰Ω†‰∏çÊÉ≥ÂçïÁã¨Â£∞Êòé lint:js:fix ÂëΩ‰ª§ÔºåÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÁõ¥Êé•ËøêË°åÔºö npm run lint:js ‚Äì ‚Äìfix Êù•ÂÆûÁé∞ÂêåÊ†∑ÁöÑÊïàÊûú„ÄÇ ÈóÆÈ¢òÊù•‰∫ÜÔºåÂ¶ÇÊûúÊàëÊÉ≥‰∏∫ mocha ÂëΩ‰ª§Â¢ûÂä† ‚Äìwatch Ê®°ÂºèÊñπ‰æøÂú®ÂºÄÂèëÊó∂Á´ãÂç≥ÁúãÂà∞ÊµãËØïÁªìÊûúÔºåËØ•ÊÄé‰πàÂÅöÂë¢ÔºüÁõ∏‰ø°ËØªÂà∞ËøôÈáå‰Ω†ÂøÉ‰∏≠Â∑≤ÁªèÊúâ‰∫ÜÁ≠îÊ°à„ÄÇ :stuck_out_tongue: Áªô npm script Ê∑ªÂä†Ê≥®ÈáäÂ¶ÇÊûú package.json ‰∏≠ÁöÑ scripts Ë∂äÊù•Ë∂äÂ§öÔºåÊàñËÄÖÂá∫Áé∞Â§çÊùÇÁöÑÁºñÊéíÂëΩ‰ª§Ôºå‰Ω†ÂèØËÉΩÈúÄË¶ÅÁªôÂÆÉ‰ª¨Ê∑ªÂä†Ê≥®Èáä‰ª•‰øùÈöú‰ª£Á†ÅÂèØËØªÊÄßÔºå‰ΩÜ json Â§©ÁÑ∂ÊòØ‰∏çÊîØÊåÅÊ∑ªÂä†Ê≥®ÈáäÁöÑÔºå‰∏ãÈù¢ÊòØ 2 ÁßçÊØîËæÉ trick ÁöÑÊñπÂºè„ÄÇ Á¨¨‰∏ÄÁßçÊñπÂºèÊòØÔºåpackage.json ‰∏≠ÂèØ‰ª•Â¢ûÂä† &#x2F;&#x2F; ‰∏∫ÈîÆÁöÑÂÄºÔºåÊ≥®ÈáäÂ∞±ÂèØ‰ª•ÂÜôÂú®ÂØπÂ∫îÁöÑÂÄºÈáåÈù¢Ôºånpm ‰ºöÂøΩÁï•ËøôÁßçÈîÆÔºåÊØîÂ¶ÇÔºåÊàë‰ª¨ÊÉ≥Ë¶ÅÁªô test ÂëΩ‰ª§Ê∑ªÂä†Ê≥®ÈáäÔºåÊåâÂ¶Ç‰∏ãÊñπÂºèÊ∑ªÂä†Ôºö 123456diff --git a/package.json b/package.json--- a/package.json+++ b/package.json@@ -10,6 +10,7 @@+ &quot;//&quot;: &quot;ËøêË°åÊâÄÊúâ‰ª£Á†ÅÊ£ÄÊü•ÂíåÂçïÂÖÉÊµãËØï&quot;, &quot;test&quot;: &quot;npm-run-all --parallel lint:* mocha&quot; ËøôÁßçÊñπÂºèÁöÑÊòéÊòæ‰∏çË∂≥ÊòØÔºånpm run ÂàóÂá∫Êù•ÁöÑÂëΩ‰ª§ÂàóË°®‰∏çËÉΩÊääÊ≥®ÈáäÂíåÂÆûÈôÖÂëΩ‰ª§ÂØπÂ∫î‰∏äÔºåÂ¶ÇÊûú‰Ω†Â£∞Êòé‰∫ÜÂ§ö‰∏™Ôºånpm run Âè™‰ºöÂàóÂá∫ÊúÄÂêéÈÇ£‰∏™ÔºåÂ¶Ç‰∏ãÂõæÔºöÂè¶Â§ñ‰∏ÄÁßçÊñπÂºèÊòØÁõ¥Êé•Âú® script Â£∞Êòé‰∏≠ÂÅöÊâãËÑöÔºåÂõ†‰∏∫ÂëΩ‰ª§ÁöÑÊú¨Ë¥®ÊòØ shell ÂëΩ‰ª§ÔºàÈÄÇÁî®‰∫é linux Âπ≥Âè∞ÔºâÔºåÊàë‰ª¨ÂèØ‰ª•Âú®ÂëΩ‰ª§ÂâçÈù¢Âä†‰∏äÊ≥®ÈáäÔºåÂÖ∑‰ΩìÂÅöÊ≥ïÂ¶Ç‰∏ãÔºö 1234567diff --git a/package.json b/package.json--- a/package.json+++ b/package.json@@ -10,8 +10,7 @@- &quot;//&quot;: &quot;ËøêË°åÊâÄÊúâ‰ª£Á†ÅÊ£ÄÊü•ÂíåÂçïÂÖÉÊµãËØï&quot;,- &quot;test&quot;: &quot;npm-run-all --parallel lint:* mocha&quot;+ &quot;test&quot;: &quot;# ËøêË°åÊâÄÊúâ‰ª£Á†ÅÊ£ÄÊü•ÂíåÂçïÂÖÉÊµãËØï \\n npm-run-all --parallel lint:* mocha&quot; Ê≥®ÊÑèÊ≥®ÈáäÂêéÈù¢ÁöÑÊç¢Ë°åÁ¨¶ \\n ÂíåÂ§ö‰ΩôÁöÑÁ©∫Ê†ºÔºåÊç¢Ë°åÁ¨¶ÊòØÁî®‰∫éÂ∞ÜÊ≥®ÈáäÂíåÂëΩ‰ª§ÂàÜÈöîÂºÄÔºåËøôÊ†∑ÂëΩ‰ª§Â∞±Áõ∏ÂΩì‰∫éÂæÆÂûãÁöÑ shell ËÑöÊú¨ÔºåÂ§ö‰ΩôÁöÑÁ©∫Ê†ºÊòØ‰∏∫‰∫ÜÊéßÂà∂Áº©ËøõÔºå‰πüÂèØ‰ª•Áî®Âà∂Ë°®Á¨¶ \\t Êõø‰ª£„ÄÇËøôÁßçÂÅöÊ≥ïËÉΩËÆ© npm run ÂàóÂá∫Êù•ÁöÑÂëΩ‰ª§Êõ¥ÁæéËßÇÔºå‰ΩÜÊòØ scripts Â£∞ÊòéÈòÖËØªËµ∑Êù•‰∏çÈÇ£‰πàÊï¥ÈΩêÁæéËßÇ„ÄÇ ‰∏äÈù¢‰∏§ÁßçÊñπÂºèÈÉΩÊúâÊòéÊòæÁöÑÁº∫Èô∑Ôºå‰∏™‰∫∫Âª∫ËÆÆÁöÑÊõ¥‰ºòÊñπÊ°àËøòÊòØÊääÂ§çÊùÇÁöÑÂëΩ‰ª§Ââ•Á¶ªÂà∞ÂçïÁã¨ÁöÑÊñá‰ª∂‰∏≠ÁÆ°ÁêÜÔºåÂú®ÂçïÁã¨ÁöÑÊñá‰ª∂‰∏≠ÂèØ‰ª•Ëá™Áî±ÁªôÂÆÉÊ∑ªÂä†Ê≥®ÈáäÔºåËØ¶ËßÅÂêéÁª≠Á´†ËäÇ„ÄÇ Ë∞ÉÊï¥ npm script ËøêË°åÊó∂Êó•ÂøóËæìÂá∫Âú®ËøêË°å npm script Âá∫Áé∞ÈóÆÈ¢òÊó∂‰Ω†ÈúÄË¶ÅÊúâËÉΩÂäõÂéªË∞ÉËØïÂÆÉÔºåÊüê‰∫õÊÉÖÂÜµ‰∏ã‰Ω†ÈúÄË¶ÅËÆ© npm script ‰ª•ÈùôÈªòÁöÑÊñπÂºèËøêË°åÔºåËøôÁ±ªÈúÄÊ±ÇÂèØÈÄöËøáÊéßÂà∂ËøêË°åÊó∂Êó•ÂøóËæìÂá∫Á∫ßÂà´Êù•ÂÆûÁé∞„ÄÇ Êó•ÂøóÁ∫ßÂà´ÊéßÂà∂ÂèÇÊï∞ÊúâÂ•ΩÂá†‰∏™ÔºåÁÆÄÂçï‰∏æ‰æãÂ¶Ç‰∏ãÔºö ÈªòËÆ§Êó•ÂøóËæìÂá∫Á∫ßÂà´Âç≥‰∏çÂä†‰ªª‰ΩïÊó•ÂøóÊéßÂà∂ÂèÇÊï∞ÂæóÂà∞ÁöÑËæìÂá∫ÔºåÂèØËÉΩÊòØ‰Ω†ÊúÄÂ∏∏Áî®ÁöÑÔºåËÉΩÁúãÂà∞ÊâßË°åÁöÑÂëΩ‰ª§„ÄÅÂëΩ‰ª§ÊâßË°åÁöÑÁªìÊûú„ÄÇ ÊòæÁ§∫Â∞ΩÂèØËÉΩÂ∞ëÁöÑÊúâÁî®‰ø°ÊÅØÁªìÂêàÂÖ∂‰ªñÂ∑•ÂÖ∑Ë∞ÉÁî® npm script ÁöÑÊó∂ÂÄôÊØîËæÉÊúâÁî®ÔºåÈúÄË¶Å‰ΩøÁî® ‚Äìloglevel silentÔºåÊàñËÄÖ ‚ÄìsilentÔºåÊàñËÄÖÊõ¥ÁÆÄÂçïÁöÑ -s Êù•ÊéßÂà∂ÔºåËøô‰∏™Êó•ÂøóÁ∫ßÂà´ÁöÑËæìÂá∫ÂÆû‰æãÂ¶Ç‰∏ãÔºàÂè™ÊúâÂëΩ‰ª§Êú¨Ë∫´ÁöÑËæìÂá∫ÔºåËØªËµ∑Êù•ÈùûÂ∏∏ÁöÑÁÆÄÊ¥ÅÔºâÔºö Â¶ÇÊûúÊâßË°åÂêÑÁßç lint script ÁöÑÊó∂ÂÄôÂêØÁî®‰∫Ü -s ÈÖçÁΩÆÔºå‰ª£Á†ÅÈÉΩÁ¨¶ÂêàËßÑËåÉÁöÑËØùÔºå‰Ω†‰∏ç‰ºöÁúãÂà∞‰ªª‰ΩïËæìÂá∫ÔºåËøôÂ∞±ÊòØÊ≤°ÊúâÊ∂àÊÅØÊòØÊúÄÂ•ΩÁöÑÊ∂àÊÅØÁöÑÁî±Êù•ÔºåÂìàÂìàÔºÅ npm7npmÊòæÁ§∫Â∞ΩÂèØËÉΩÂ§öÁöÑËøêË°åÊó∂Áä∂ÊÄÅÊéíÊü•ËÑöÊú¨ÈóÆÈ¢òÁöÑÊó∂ÂÄôÊØîËæÉÊúâÁî®ÔºåÈúÄË¶Å‰ΩøÁî® ‚Äìloglevel verboseÔºåÊàñËÄÖ ‚ÄìverboseÔºåÊàñËÄÖÊõ¥ÁÆÄÂçïÁöÑ -d Êù•ÊéßÂà∂ÔºåËøô‰∏™Êó•ÂøóÁ∫ßÂà´ÁöÑËæìÂá∫ÂÆû‰æãÂ¶Ç‰∏ãÔºàËØ¶ÁªÜÊâìÂç∞Âá∫‰∫ÜÊØè‰∏™Ê≠•È™§ÁöÑÂèÇÊï∞„ÄÅËøîÂõûÂÄºÔºå‰∏ãÈù¢ÁöÑÊà™ÂõæÂè™ÊòØÈÉ®ÂàÜÔºâÔºö","categories":[{"name":"ÂâçÁ´ØÂ∑•Á®ãÂåñ","slug":"ÂâçÁ´ØÂ∑•Á®ãÂåñ","permalink":"https://justsso1.github.io/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"npm","slug":"npm","permalink":"https://justsso1.github.io/tags/npm/"}]},{"title":"ÂâçÁ´ØÂºÇÂ∏∏","slug":"ÂâçÁ´Ø-ÂâçÁ´ØÂºÇÂ∏∏","date":"2020-05-10T16:00:00.000Z","updated":"2024-10-16T04:06:40.993Z","comments":true,"path":"2020/05/11/ÂâçÁ´Ø-ÂâçÁ´ØÂºÇÂ∏∏/","permalink":"https://justsso1.github.io/2020/05/11/%E5%89%8D%E7%AB%AF-%E5%89%8D%E7%AB%AF%E5%BC%82%E5%B8%B8/","excerpt":"","text":"ÂÅöÂ•ΩÂâçÁ´ØÂºÇÂ∏∏ÔºåÊâçËÉΩÂÆâÂøÉÁöÑÊîæÂÅáÂïä ‰∏Ä„ÄÅ‰∏∫‰ªÄ‰πàË¶ÅÂ§ÑÁêÜÂºÇÂ∏∏ÔºüÂºÇÂ∏∏ÊòØ‰∏çÂèØÊéßÁöÑÔºå‰ºöÂΩ±ÂìçÊúÄÁªàÁöÑÂëàÁé∞ÁªìÊûúÔºå‰ΩÜÊòØÊàë‰ª¨ÊúâÂÖÖÂàÜÁöÑÁêÜÁî±ÂéªÂÅöËøôÊ†∑ÁöÑ‰∫ãÊÉÖ„ÄÇÂ¢ûÂº∫Áî®Êà∑‰ΩìÈ™åÔºõËøúÁ®ãÂÆö‰ΩçÈóÆÈ¢òÔºõÊú™Èõ®Áª∏Áº™ÔºåÂèäÊó©ÂèëÁé∞ÈóÆÈ¢òÔºõÊó†Ê≥ïÂ§çÁ∫øÈóÆÈ¢òÔºåÂ∞§ÂÖ∂ÊòØÁßªÂä®Á´ØÔºåÊú∫ÂûãÔºåÁ≥ªÁªüÈÉΩÊòØÈóÆÈ¢òÔºõÂÆåÂñÑÁöÑÂâçÁ´ØÊñπÊ°àÔºåÂâçÁ´ØÁõëÊéßÁ≥ªÁªüÔºõÂØπ‰∫é JS ËÄåË®ÄÔºåÊàë‰ª¨Èù¢ÂØπÁöÑ‰ªÖ‰ªÖÂè™ÊòØÂºÇÂ∏∏ÔºåÂºÇÂ∏∏ÁöÑÂá∫Áé∞‰∏ç‰ºöÁõ¥Êé•ÂØºËá¥ JS ÂºïÊìéÂ¥©Ê∫ÉÔºåÊúÄÂ§öÂè™‰ºö‰ΩøÂΩìÂâçÊâßË°åÁöÑ‰ªªÂä°ÁªàÊ≠¢„ÄÇÂºÇÂ∏∏ÊòØ‰∏çÂèØÊéßÁöÑÔºåÂõ†Ê≠§ÂÅöÂ•ΩÂâçÁ´ØÂºÇÂ∏∏ÁöÑÂ§ÑÁêÜÂºÇÂ∏∏ÈáçË¶Å„ÄÇ ‰∫å„ÄÅÈúÄË¶ÅÂ§ÑÁêÜÂì™‰∫õÂºÇÂ∏∏ÔºüÂâçÁ´ØË¶ÅÂ§ÑÁêÜÁöÑÂºÇÂ∏∏ÂàÜÁ±ªÔºö js ËØ≠Ê≥ïÈîôËØØ„ÄÅ‰ª£Á†ÅÂºÇÂ∏∏ ajaxËØ∑Ê±ÇÂºÇÂ∏∏ ÈùôÊÄÅËµÑÊ∫êÂä†ËΩΩÂºÇÂ∏∏ PromiseÂºÇÂ∏∏ IframeÂºÇÂ∏∏ Ë∑®Âüüscript error Â¥©Ê∫ÉÂíåÂç°È°ø ‰∏â„ÄÅTry-Catch ÁöÑËØØÂå∫Try CatchÂè™ËÉΩÊçïËé∑Âà∞ÂêåÊ≠•ÁöÑËøêË°åÊó∂ÈîôËØØÔºåÂØπËØ≠Ê≥ïÂíåÂºÇÊ≠•ÈîôËØØÂç¥Êó†ËÉΩ‰∏∫ÂäõÔºåÊçïËé∑‰∏çÂà∞„ÄÇ 123456try &#123; let name = &#x27;123&#x27; console.log(nam)&#125;catch (e) &#123; console.log(&#x27;ÊçïËé∑Âà∞ÂºÇÂ∏∏&#x27;, e)&#125; ËæìÂá∫Ôºö 1ÊçïËé∑Âà∞ÂºÇÂ∏∏ ReferenceError: nam is not defined try catch ÊçïËé∑‰∏çÂà∞ÂºÇÊ≠•ÁöÑÂºÇÂ∏∏ ‰πù„ÄÅiframe ÂºÇÂ∏∏ÂØπ‰∫é iframe ÁöÑÂºÇÂ∏∏ÊçïËé∑ÔºåÊàë‰ª¨ËøòÂæóÂÄüÂäõ window.onerrorÔºö 1234window.onerror = function(message, source, lineno, colno, error) &#123; console.log(&#x27;ÊçïËé∑Âà∞ÂºÇÂ∏∏Ôºö&#x27;,&#123;message, source, lineno, colno, error&#125;);&#125; ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÂèØËÉΩÂ¶Ç‰∏ãÔºö 1234567&lt;iframe src=&quot;./iframe.html&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;script&gt; window.frames[0].onerror = function (message, source, lineno, colno, error) &#123; console.log(&#x27;ÊçïËé∑Âà∞ iframe ÂºÇÂ∏∏Ôºö&#x27;,&#123;message, source, lineno, colno, error&#125;); return true; &#125;;&lt;/script&gt; ÂçÅ„ÄÅScript error‰∏ÄËà¨ÊÉÖÂÜµÔºåÂ¶ÇÊûúÂá∫Áé∞ Script error ËøôÊ†∑ÁöÑÈîôËØØÔºåÂü∫Êú¨‰∏äÂèØ‰ª•Á°ÆÂÆöÊòØÂá∫Áé∞‰∫ÜË∑®ÂüüÈóÆÈ¢ò„ÄÇËøôÊó∂ÂÄôÔºåÊòØ‰∏ç‰ºöÊúâÂÖ∂‰ªñÂ§™Â§öËæÖÂä©‰ø°ÊÅØÁöÑÔºå‰ΩÜÊòØËß£ÂÜ≥ÊÄùË∑ØÊó†ÈùûÂ¶Ç‰∏ãÔºöË∑®Ê∫êËµÑÊ∫êÂÖ±‰∫´Êú∫Âà∂( CORS )ÔºöÊàë‰ª¨‰∏∫ script Ê†áÁ≠æÊ∑ªÂä† crossOrigin Â±ûÊÄß„ÄÇ ÊàñËÄÖÂä®ÊÄÅÂéªÊ∑ªÂä† js ËÑöÊú¨Ôºö 1234const script = document.createElement(‚Äòscript‚Äô);script.crossOrigin = ‚Äòanonymous‚Äô;script.src = url;document.body.appendChild(script); ÁâπÂà´Ê≥®ÊÑèÔºåÊúçÂä°Âô®Á´ØÈúÄË¶ÅËÆæÁΩÆÔºöAccess-Control-Allow-OriginÊ≠§Â§ñÔºåÊàë‰ª¨‰πüÂèØ‰ª•ËØïËØïËøô‰∏™-Ëß£ÂÜ≥ Script Error ÁöÑÂè¶Á±ªÊÄùË∑ØÔºö 12345678910111213const originAddEventListener = EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener = function (type, listener, options) &#123; const wrappedListener = function (...args) &#123; try &#123; return listener.apply(this, args); &#125; catch (err) &#123; throw err; &#125; &#125; return originAddEventListener.call(this, type, wrappedListener, options);&#125; ÁÆÄÂçïËß£Èáä‰∏Ä‰∏ãÔºöÊîπÂÜô‰∫Ü EventTarget ÁöÑ addEventListener ÊñπÊ≥ïÔºõÂØπ‰º†ÂÖ•ÁöÑ listener ËøõË°åÂåÖË£ÖÔºåËøîÂõûÂåÖË£ÖËøáÁöÑ listenerÔºåÂØπÂÖ∂ÊâßË°åËøõË°å try-catchÔºõÊµèËßàÂô®‰∏ç‰ºöÂØπ try-catch Ëµ∑Êù•ÁöÑÂºÇÂ∏∏ËøõË°åË∑®ÂüüÊã¶Êà™ÔºåÊâÄ‰ª• catch Âà∞ÁöÑÊó∂ÂÄôÔºåÊòØÊúâÂ†ÜÊ†à‰ø°ÊÅØÁöÑÔºõÈáçÊñ∞ throw Âá∫Êù•ÂºÇÂ∏∏ÁöÑÊó∂ÂÄôÔºåÊâßË°åÁöÑÊòØÂêåÂüü‰ª£Á†ÅÔºåÊâÄ‰ª• window.onerror ÊçïËé∑ÁöÑÊó∂ÂÄô‰∏ç‰ºö‰∏¢Â§±Â†ÜÊ†à‰ø°ÊÅØÔºõÂà©Áî®ÂåÖË£Ö addEventListenerÔºåÊàë‰ª¨ËøòÂèØ‰ª•ËææÂà∞„ÄåÊâ©Â±ïÂ†ÜÊ†à„ÄçÁöÑÊïàÊûúÔºö 12345678910111213141516171819(() =&gt; &#123; const originAddEventListener = EventTarget.prototype.addEventListener; EventTarget.prototype.addEventListener = function (type, listener, options) &#123;+ // ÊçïËé∑Ê∑ªÂä†‰∫ã‰ª∂Êó∂ÁöÑÂ†ÜÊ†à+ const addStack = newError(`Event ($&#123;type&#125;)`).stack; const wrappedListener = function (...args) &#123; try &#123; return listener.apply(this, args); &#125; catch (err) &#123;+ // ÂºÇÂ∏∏ÂèëÁîüÊó∂ÔºåÊâ©Â±ïÂ†ÜÊ†à+ err.stack += &#x27;\\n&#x27; + addStack; throw err; &#125; &#125; return originAddEventListener.call(this, type, wrappedListener, options); &#125; &#125;)(); ÂçÅ‰∏Ä„ÄÅÂ¥©Ê∫ÉÂíåÂç°È°øÂç°È°ø‰πüÂ∞±ÊòØÁΩëÈ°µÊöÇÊó∂ÂìçÂ∫îÊØîËæÉÊÖ¢Ôºå JS ÂèØËÉΩÊó†Ê≥ïÂèäÊó∂ÊâßË°å„ÄÇ‰ΩÜÂ¥©Ê∫ÉÂ∞±‰∏ç‰∏ÄÊ†∑‰∫ÜÔºåÁΩëÈ°µÈÉΩÂ¥©Ê∫É‰∫ÜÔºåJS ÈÉΩ‰∏çËøêË°å‰∫ÜÔºåËøòÊúâ‰ªÄ‰πàÂäûÊ≥ïÂèØ‰ª•ÁõëÊéßÁΩëÈ°µÁöÑÂ¥©Ê∫ÉÔºåÂπ∂Â∞ÜÁΩëÈ°µÂ¥©Ê∫É‰∏äÊä•Âë¢ÔºüÂ¥©Ê∫ÉÂíåÂç°È°ø‰πüÊòØ‰∏çÂèØÂøΩËßÜÁöÑÔºå‰πüËÆ∏‰ºöÂØºËá¥‰Ω†ÁöÑÁî®Êà∑ÊµÅÂ§±„ÄÇÂà©Áî® window ÂØπË±°ÁöÑ load Âíå beforeunload ‰∫ã‰ª∂ÂÆûÁé∞‰∫ÜÁΩëÈ°µÂ¥©Ê∫ÉÁöÑÁõëÊéß„ÄÇ‰∏çÈîôÁöÑÊñáÁ´†ÔºåÊé®ËçêÈòÖËØªÔºöLogging Information on Browser Crashes„ÄÇ 12345678910111213141516171819window.addEventListener(&#x27;load&#x27;, function () &#123; sessionStorage.setItem(&#x27;good_exit&#x27;, &#x27;pending&#x27;); setInterval(function () &#123; sessionStorage.setItem(&#x27;time_before_crash&#x27;, newDate().toString()); &#125;, 1000); &#125;); window.addEventListener(&#x27;beforeunload&#x27;, function () &#123; sessionStorage.setItem(&#x27;good_exit&#x27;, &#x27;true&#x27;); &#125;); if(sessionStorage.getItem(&#x27;good_exit&#x27;) &amp;&amp; sessionStorage.getItem(&#x27;good_exit&#x27;) !== &#x27;true&#x27;) &#123; /* insert crash logging code here */ alert(&#x27;Hey, welcome back from your crash, looks like you crashed on: &#x27; + sessionStorage.getItem(&#x27;time_before_crash&#x27;)); &#125; Âü∫‰∫é‰ª•‰∏ãÂéüÂõ†ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® Service Worker Êù•ÂÆûÁé∞ÁΩëÈ°µÂ¥©Ê∫ÉÁöÑÁõëÊéßÔºöService Worker ÊúâËá™Â∑±Áã¨Á´ãÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÔºå‰∏éÁΩëÈ°µÂå∫ÂàÜÂºÄÔºåÁΩëÈ°µÂ¥©Ê∫É‰∫ÜÔºåService Worker ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰∏ç‰ºöÂ¥©Ê∫ÉÔºõService Worker ÁîüÂëΩÂë®Êúü‰∏ÄËà¨Ë¶ÅÊØîÁΩëÈ°µËøòË¶ÅÈïøÔºåÂèØ‰ª•Áî®Êù•ÁõëÊéßÁΩëÈ°µÁöÑÁä∂ÊÄÅÔºõÁΩëÈ°µÂèØ‰ª•ÈÄöËøá navigator.serviceWorker.controller.postMessage API ÂêëÊéåÁÆ°Ëá™Â∑±ÁöÑ SW ÂèëÈÄÅÊ∂àÊÅØ„ÄÇ ÂçÅ‰∫å„ÄÅÈîôËØØ‰∏äÊä•1.ÈÄöËøá Ajax ÂèëÈÄÅÊï∞ÊçÆ Âõ†‰∏∫ Ajax ËØ∑Ê±ÇÊú¨Ë∫´‰πüÊúâÂèØËÉΩ‰ºöÂèëÁîüÂºÇÂ∏∏ÔºåËÄå‰∏îÊúâÂèØËÉΩ‰ºöÂºïÂèëË∑®ÂüüÈóÆÈ¢òÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊõ¥Êé®Ëçê‰ΩøÁî®Âä®ÊÄÅÂàõÂª∫ img Ê†áÁ≠æÁöÑÂΩ¢ÂºèËøõË°å‰∏äÊä•„ÄÇ2.Âä®ÊÄÅÂàõÂª∫ img Ê†áÁ≠æÁöÑÂΩ¢Âºè 1234function report(error) &#123;let reportUrl = ‚Äòhttp://jartto.wang/report&#x27;;new Image().src = $&#123;reportUrl&#125;?logs=$&#123;error&#125;;&#125; Êî∂ÈõÜÂºÇÂ∏∏‰ø°ÊÅØÈáèÂ§™Â§öÔºåÊÄé‰πàÂäûÔºüÂÆûÈôÖ‰∏≠ÔºåÊàë‰ª¨‰∏çÂæó‰∏çËÄÉËôëËøôÊ†∑‰∏ÄÁßçÊÉÖÂÜµÔºöÂ¶ÇÊûú‰Ω†ÁöÑÁΩëÁ´ôËÆøÈóÆÈáèÂæàÂ§ßÔºåÈÇ£‰πà‰∏Ä‰∏™ÂøÖÁÑ∂ÁöÑÈîôËØØÂèëÈÄÅÁöÑ‰ø°ÊÅØÂ∞±ÊúâÂæàÂ§öÊù°ÔºåËøôÊó∂ÂÄôÔºåÊàë‰ª¨ÈúÄË¶ÅËÆæÁΩÆÈááÈõÜÁéáÔºå‰ªéËÄåÂáèÁºìÊúçÂä°Âô®ÁöÑÂéãÂäõÔºö 123456Reporter.send = function(data) &#123;// Âè™ÈááÈõÜ 30%if(Math.random() &lt; 0.3) &#123;send(data) // ‰∏äÊä•ÈîôËØØ‰ø°ÊÅØ&#125;&#125; ÈááÈõÜÁéáÂ∫îËØ•ÈÄöËøáÂÆûÈôÖÊÉÖÂÜµÊù•ËÆæÂÆöÔºåÈöèÊú∫Êï∞ÔºåÊàñËÄÖÊüê‰∫õÁî®Êà∑ÁâπÂæÅÈÉΩÊòØ‰∏çÈîôÁöÑÈÄâÊã©„ÄÇ ÂçÅ‰∏â„ÄÅÊÄªÁªìÂõûÂà∞Êàë‰ª¨ÂºÄÂ§¥ÊèêÂá∫ÁöÑÈÇ£‰∏™ÈóÆÈ¢òÔºåÂ¶Ç‰Ωï‰ºòÈõÖÁöÑÂ§ÑÁêÜÂºÇÂ∏∏Âë¢ÔºüÂèØÁñëÂå∫ÂüüÂ¢ûÂä† Try-CatchÂÖ®Â±ÄÁõëÊéß JS ÂºÇÂ∏∏ window.onerrorÂÖ®Â±ÄÁõëÊéßÈùôÊÄÅËµÑÊ∫êÂºÇÂ∏∏ window.addEventListenerÊçïËé∑Ê≤°Êúâ Catch ÁöÑ Promise ÂºÇÂ∏∏ÔºöunhandledrejectionVUE errorHandler Âíå React componentDidCatchÁõëÊéßÁΩëÈ°µÂ¥©Ê∫ÉÔºöwindow ÂØπË±°ÁöÑ load Âíå beforeunloadË∑®Âüü crossOrigin Ëß£ÂÜ≥ÂÖ∂ÂÆûÂæàÁÆÄÂçïÔºåÊ≠£Â¶Ç‰∏äÊñáÊâÄËØ¥ÔºöÈááÁî®ÁªÑÂêàÊñπÊ°àÔºåÂàÜÁ±ªÂûãÁöÑÂéªÊçïËé∑ÂºÇÂ∏∏ÔºåËøôÊ†∑Âü∫Êú¨ 80%-90% ÁöÑÈóÆÈ¢òÈÉΩÂåñ‰∫éÊó†ÂΩ¢„ÄÇ ÂçÅÂõõ„ÄÅÂèÇËÄÉLogging Information on Browser Crashes http://jasonjl.me/blog/2015/06/21/taking-action-on-browser-crashes/ÂâçÁ´Ø‰ª£Á†ÅÂºÇÂ∏∏ÁõëÊéßÂÆûÊàò https://github.com/happylindz/blog/issues/5Error Boundaries https://blog.csdn.net/a986597353/article/details/78469979ÂâçÁ´ØÁõëÊéßÁü•ËØÜÁÇπ https://github.com/RicardoCao-Biker/Front-End-Monitoring/blob/master/BasicKnowledge.mdCapture and report JavaScript errors with window.onerror https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror","categories":[{"name":"ÂâçÁ´ØÂ∑•Á®ãÂåñ","slug":"ÂâçÁ´ØÂ∑•Á®ãÂåñ","permalink":"https://justsso1.github.io/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"}],"tags":[{"name":"ÂºÇÂ∏∏","slug":"ÂºÇÂ∏∏","permalink":"https://justsso1.github.io/tags/%E5%BC%82%E5%B8%B8/"}]},{"title":"ÂùóÁ∫ß‰ΩúÁî®ÔºövarÁº∫Èô∑‰ª•Âèä‰∏∫‰ªÄ‰πàË¶ÅÂºïÂÖ•letÂíåconst","slug":"ÊµèËßàÂô®-ÂùóÁ∫ß‰ΩúÁî®ÂüüÔºövarÁº∫Èô∑‰ª•Âèä‰∏∫‰ªÄ‰πàË¶ÅÂºïÂÖ•letÂíåconst","date":"2020-05-10T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/05/11/ÊµèËßàÂô®-ÂùóÁ∫ß‰ΩúÁî®ÂüüÔºövarÁº∫Èô∑‰ª•Âèä‰∏∫‰ªÄ‰πàË¶ÅÂºïÂÖ•letÂíåconst/","permalink":"https://justsso1.github.io/2020/05/11/%E6%B5%8F%E8%A7%88%E5%99%A8-%E5%9D%97%E7%BA%A7%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%9Avar%E7%BC%BA%E9%99%B7%E4%BB%A5%E5%8F%8A%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%BC%95%E5%85%A5let%E5%92%8Cconst/","excerpt":"","text":"ÊúçÂä°Âô®ÂèØ‰ª•Ê†πÊçÆÂìçÂ∫îÂ§¥Êù•ÊéßÂà∂ÊµèËßàÂô®ÁöÑË°å‰∏∫ÔºåÂ¶ÇË∑≥ËΩ¨„ÄÅÁΩëÁªúÊï∞ÊçÆÁ±ªÂûãÂà§Êñ≠„ÄÇChrome ÈªòËÆ§ÈááÁî®ÊØè‰∏™Ê†áÁ≠æÂØπÂ∫î‰∏Ä‰∏™Ê∏≤ÊüìËøõÁ®ãÔºå‰ΩÜÊòØÂ¶ÇÊûú‰∏§‰∏™È°µÈù¢Â±û‰∫éÂêå‰∏ÄÁ´ôÁÇπÔºåÈÇ£Ëøô‰∏§‰∏™Ê†áÁ≠æ‰ºö‰ΩøÁî®Âêå‰∏Ä‰∏™Ê∏≤ÊüìËøõÁ®ã„ÄÇÊµèËßàÂô®ÁöÑÂØºËà™ËøáÁ®ãÊ∂µÁõñ‰∫Ü‰ªéÁî®Êà∑ÂèëËµ∑ËØ∑Ê±ÇÂà∞Êèê‰∫§ÊñáÊ°£ÁªôÊ∏≤ÊüìËøõÁ®ãÁöÑ‰∏≠Èó¥ÊâÄÊúâÈò∂ÊÆµ„ÄÇ","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"Áà¨Ëô´ÊâÄÁî®Âà∞ÁöÑÁü•ËØÜ","slug":"Áà¨Ëô´ÊâÄÁî®Âà∞ÁöÑÁü•ËØÜ","date":"2020-05-10T16:00:00.000Z","updated":"2024-10-16T04:06:39.453Z","comments":true,"path":"2020/05/11/Áà¨Ëô´ÊâÄÁî®Âà∞ÁöÑÁü•ËØÜ/","permalink":"https://justsso1.github.io/2020/05/11/%E7%88%AC%E8%99%AB%E6%89%80%E7%94%A8%E5%88%B0%E7%9A%84%E7%9F%A5%E8%AF%86/","excerpt":"","text":"nodeÁà¨Ëô´Áà¨Ëô´Ë¶ÅÈÅµÂÆàRobotsÂçèËÆÆÔºå‰πüÂ∞±ÊòØÁà¨Ëô´ÂçèËÆÆÔºåÁà¨Ëô´Á®ãÂ∫èÂú®Áà¨ÂèñÁΩëÁ´ôÊï∞ÊçÆ‰πãÂâçÔºå‰ºöÂÖàÁúãÁúãÊòØÂê¶Â≠òÂú®robots.txtÊñá‰ª∂ÔºåÂÅáÂ¶ÇÊúâÔºå‰ºöÂú®Ëøô‰∏™Êñá‰ª∂ÂÖÅËÆ∏ÁöÑËåÉÂõ¥ÂÜÖËøõË°åÁà¨Âèñ„ÄÇÂÉèÁôæÂ∫¶„ÄÅË∞∑Ê≠åÈÉΩÊòØÈÅµÂæ™Ëøô‰∏ÄÂçèËÆÆÁöÑ„ÄÇ Ê†πÊçÆÊàëÁöÑÁªèÈ™åÔºåÁà¨Ëô´‰ºöÊúâ‰∏Ä‰∏ãÂá†ÁßçÁ±ªÂûãÔºö Áà¨ÁΩëÈ°µÁî®Âà∞ÁöÑÊ®°ÂùórequestÁΩëÁªúËØ∑Ê±ÇÁΩëÈ°µÔºåcheerioÁ±ª‰ºº‰∫éjQueryÁöÑËØ≠Ê≥ïËß£ÊûêÁΩëÈ°µ„ÄÇ 12345678910111213141516171819202122const cheerio = require(&#x27;cheerio&#x27;);const request = require(&#x27;request&#x27;)async function getWordFromIciBa(english) &#123; return new Promise((resolve, reject) =&gt; &#123; request.get(`https://www.iciba.com/$&#123;english&#125;`, (err, response, body) =&gt; &#123; if (!err &amp;&amp; response.statusCode === 200) &#123; const $ = cheerio.load(body.toString()) let yinbiao = $(&#x27;div.base-speak&gt;span:nth-child(2)&#x27;).text().replace(/\\s/g, &#x27;&#x27;).slice(1) //ÁæéÂºèÈü≥Ê†á let chinese = $(&#x27;ul.switch_part li&#x27;).text().replace(/\\s/g, &#x27;&#x27;) //‰∏≠ÊñáÈáä‰πâ resolve(&#123; us_phonetic: yinbiao, chinese: chinese &#125;) &#125; else &#123; reject(err) &#125; &#125;) &#125;).catch(err =&gt; &#123; console.log(err) &#125;)&#125; Ê®°ÊãüÁôªÂΩïÁî®Âà∞ÁöÑÊ®°ÂùósuperagentÔºåÈúÄË¶ÅÁôªÂΩïÊó∂ÔºåÂú®ËØ∑Ê±ÇÂ§¥‰∏≠Ê∑ªÂä†cookie„ÄÇ‰æãÂ≠êÔºöÁà¨ÂèñqqÁ©∫Èó¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445const superagent = require(&#x27;superagent&#x27;)let url = &#x27;https://user.qzone.qq.com/proxy/domain/taotao.qq.com/cgi-bin/emotion_cgi_msglist_v6&#x27;let pos = 20;let num = 40;let fun1 = &#x27;_preloadCallback&#x27;let func2 = &#x27;_preloadCallback&#x27;async function fix() &#123; try &#123; let res = await superagent.get(url).set(&#x27;cookie&#x27;, &#x27;528226249_todaycount=0; 528226249_totalcount=29294; pgv_pvi=5218883584; pgv_si=s8073185280; qz_screen=1440x900; pgv_pvid=7967706718; pgv_info=ssid=s5682998744; QZ_FE_WEBP_SUPPORT=1; cpu_performance_v8=1; RK=oPRBCnNXSR; ptcz=fb06e745fbe330fe99a3447722d205f58030819c78f46a2e842af1b1d423faed; __Q_w_s_hat_seed=1; __Q_w_s__QZN_TodoMsgCnt=1; Loading=Yes; ptui_loginuin=528226249@qq.com; uin=o0528226249; skey=@TaX0jGEVu; p_uin=o0528226249; pt4_token=1o3CiF3KorxeXMslISpIWHSkWu6wYMVGXfrSCs6aJHM_; p_skey=a1MbdGhwOcH7Ax2IE1Ixy-N4kuO6G-khvzM1nx4u*Bo_&#x27;) .query(&#123; uin: 528226249, ftype: 0, sort: 0, pos: pos, num: num, replynum: 100, g_tk: 846558423, callback: &#x27;_preloadCallback&#x27;, code_version: 1, format: &#x27;jsonp&#x27;, need_private_comment: 1, qzonetoken: &#x27;656e856329ef0609bdae4fceadd676c8312e4371446fdd95f3f3e8cbe482db5a6c0941fadacf72&#x27;, &#125;) ; let text = res.res.text; console.log(text) text = text.slice(17) text = text.slice(0, -2) const obj = JSON.parse(text) let msglist = obj.msglist // console.log(msglist) msglist.forEach(item =&gt; &#123; // item ‰∏∫ÊØè‰∏ÄÊù°ËØ¥ËØ¥ &#125;) &#125; catch (e) &#123; console.log(e) &#125;&#125; ÂØºÂá∫excelÁî®Âà∞ÁöÑÊ®°Âùónode-xlsxÔºåÂ∞ÜÊï∞ÊçÆÂÜôÂÖ•xlsxÊñá‰ª∂‰∏≠„ÄÇÂèØ‰ª•ÂèÇËÄÉÊñáÊ°£Ôºö https://www.npmjs.com/package/node-xlsx ‰æãÂ≠êÔºö 1234567891011121314151617const xlsx = require(&#x27;node-xlsx&#x27;);const data = [[1, 2, 3], [true, false, null, &#x27;sheetjs&#x27;], [&#x27;foo&#x27;, &#x27;bar&#x27;, new Date(&#x27;2014-02-19T14:30Z&#x27;), &#x27;0.3&#x27;], [&#x27;baz&#x27;, null, &#x27;qux&#x27;]];const options = &#123;&#x27;!cols&#x27;: [&#123;wch: 20&#125;, &#123;wch: 20&#125;, &#123;wch: 60&#125;]&#125;; let buffer = xlsx.build([&#123; name: &#x27;sheet1&#x27;, data: data &#125;], options) fs.writeFile(&#x27;./my_xlsx.xlsx&#x27;, buffer, function (err) &#123; if (err) throw err console.log(&#x27;Write to my_xlsx.xlsx has finished&#x27;) &#125;)// Parse a fileconst workSheetsFromFile = xlsx.parse(`$&#123;__dirname&#125;/no_word.xlsx`);const workSheetsFromBuffer = xlsx.parse(fs.readFileSync(`$&#123;__dirname&#125;/no_word.xlsx`)); ‰ª•‰∏äÊòØÊàëÂÅöNodeÁà¨Ëô´ÈÅáÂà∞ÁöÑÂá†ÁßçÁ±ªÂûãÔºå‰ª•ÂêéÈÅáÂà∞‰∫ÜÊñ∞ÁöÑÂÜçË°•ÂÖÖÂà∞‰∏ãÈù¢„ÄÇ","categories":[],"tags":[{"name":"Áà¨Ëô´","slug":"Áà¨Ëô´","permalink":"https://justsso1.github.io/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"Âú®JavaScript‰∏≠‰ΩøÁî®ES6 ProxyÂÅöÁ±ªÂûãÂÆâÂÖ®","slug":"Âú®JavaScript‰∏≠‰ΩøÁî®ES6 ProxyÂÅöÁ±ªÂûãÂÆâÂÖ®","date":"2020-04-27T16:00:00.000Z","updated":"2024-10-12T08:40:56.548Z","comments":true,"path":"2020/04/28/Âú®JavaScript‰∏≠‰ΩøÁî®ES6 ProxyÂÅöÁ±ªÂûãÂÆâÂÖ®/","permalink":"https://justsso1.github.io/2020/04/28/%E5%9C%A8JavaScript%E4%B8%AD%E4%BD%BF%E7%94%A8ES6%20Proxy%E5%81%9A%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8/","excerpt":"","text":"ÂΩìÂâçÔºåÂ§ßÂ§öÊï∞Ëß£ÂÜ≥JavaScript‰∏≠Á±ªÂûãÂÆâÂÖ®‰∏çË∂≥ÁöÑËß£ÂÜ≥ÊñπÊ°àÈÉΩÊòØÂü∫‰∫éÈùôÊÄÅÁ±ªÂûãÊ£ÄÊü•ÂíåÁ±ªÂûãÊé®Êñ≠„ÄÇTypeScriptÂíåFlowÈÄöËøáÊ∑ªÂä†ÈùôÊÄÅÁ±ªÂûãÊ≥®ÈáäÊù•ÊãìÂ±ïJavaScriptÔºåÂπ∂‰∏îÂèØ‰ª•Âú®ÁºñËØëÊó∂È™åËØÅÊÇ®ÁöÑ‰ª£Á†ÅÔºåÂπ∂‰ΩøÁî®Áõ∏ÂêåÁöÑÊäΩË±°ËØ≠Ê≥ïÊ†ëÊù•ËæìÂá∫ÊúÄÁªàÁöÑJS‰ª£Á†Å„ÄÇÁî±‰∫éIDEÂèØ‰ª•‰æùÈù†ÈùôÊÄÅÂàÜÊûêÊù•Êèê‰æõËá™Âä®ÂÆåÊàêÂíåÂºÄÂèëËæÖÂä©ÔºåÂõ†Ê≠§ÔºåËøôÂØπ‰∫éÊîπÂñÑÂºÄÂèë‰∫∫ÂëòÁöÑ‰ΩìÈ™åÈùûÂ∏∏ÊúâÊïà„ÄÇ‰ΩÜÊòØÔºåÂÖ≥‰∫éÁ±ªÂûãÂÆâÂÖ®Ôºå‰ªçÁÑ∂Â≠òÂú®‰∏Ä‰∏™‰∏ªË¶ÅÁº∫Èô∑Ôºö‰∏ÄÊó¶‰ΩøÁî®JavaScriptËøõË°åÁºñËØëÂπ∂Âú®ÊµèËßàÂô®‰∏≠ËøêË°åÔºåÂ∞±‰∏çÂÜç‰øùËØÅÊâÄ‰ΩøÁî®ÁöÑÂèòÈáèÂÖ∑ÊúâÈ¢ÑÊúüÁöÑÁ±ªÂûã„ÄÇ Ê¨∫È™óTypeScriptÈùûÂ∏∏ÂÆπÊòì„ÄÇÂü∫Êú¨‰∏äÔºå‰ªª‰ΩïÂèØ‰ª•ÈÅøÂÖçÈùôÊÄÅÂàÜÊûêÁöÑÊìç‰ΩúÈÉΩÂèØËÉΩÂú®‰∏çÈÄöÁü•TypeScriptÁöÑÊÉÖÂÜµ‰∏ãÊΩúÂú®ÁöÑÊõ¥ÊîπÂèòÈáèÁöÑÁ±ªÂûãÔºö ‰ΩøÁî®ÊñπÊã¨Âè∑Âíå‰∏Ä‰∏™‰ª£Ë°®Â±ûÊÄßÁöÑÂèòÈáèÊù•Ê£ÄÁ¥¢Â±ûÊÄß ÈÄöËøáHTML‰∫ã‰ª∂Â±ûÊÄßÔºåsetTimeoutÊàñFunctionÊûÑÈÄ†ÂáΩÊï∞ËøõË°åÂä®ÊÄÅ‰ª£Á†ÅËØÑ‰º∞ ÂÖ®Â±ÄÂèòÈáè‰∏éÂ§ñÈÉ®Â∫ìÊàñÊµèËßàÂô®Êâ©Â±ïÂÜ≤Á™Å ‰∏Ä‰∏™ÂÜÖÁΩÆÂéüÂûãÔºåËØ•ÂéüÂûãÂ∑≤Ë¢´Â∫ìÊàñpolyfillÊÑèÂ§ñ‰øÆÊîπ„ÄÅTypeScriptÂºÄÂèë‰∫∫ÂëòËØïÂõæÈÅøÂÖç‰∏äÈù¢ÁöÑËøô‰∫õÊ®°ÂºèÔºåÂπ∂ËÆ§‰∏∫ËøôÊòØÊúÄ‰Ω≥ÂÆûË∑µ„ÄÇ‰ΩÜÊòØÔºåÁî±‰∫éÂºÄÂèë‰∫∫ÂëòÂØπÈùôÊÄÅÁ±ªÂûãÁ≥ªÁªüÁöÑ‰ø°‰ªªÔºåËøôÂèØËÉΩÂØºËá¥‰∏Ä‰∫õÊ∑∑‰π±ÁöÑÈóÆÈ¢òÔºåËÄåÂøòËÆ∞‰∫ÜÂÆÉÂÆûÈôÖ‰∏äÊúÄÁªàÊòØÂú®ËÆ°ÁÆóÊú∫‰∏äËøêË°åÁöÑÂä®ÊÄÅËÑöÊú¨ËØ≠Ë®Ä„ÄÇ JS‰∏≠ËøòÊúâÂè¶‰∏ÄÁßçÁ±ªÂûãÂÆâÂÖ®ÁöÑÊñπÊ≥ïË¢´ÈÅóÂøò‰∫ÜÔºåÂèØËÉΩÂÄºÂæóÊõ¥Â§öÂÖ≥Ê≥®ÔºöJavaScriptÊú¨Ë∫´‰∏≠ÁöÑÂº∫Á±ªÂûãÊ£ÄÊü•„ÄÇ Áî±‰∫éECMAScript5ÂíåÂ±ûÊÄßgetters&#x2F;settersÔºåÊàë‰ª¨ÂèØ‰ª•ÊéßÂà∂ÂØπÂØπË±°Â±ûÊÄßËøõË°åÁöÑÂàÜÈÖç„ÄÇÁúãËøô‰∏™‰æãÂ≠êÔºö 12345678910111213141516let _name = &#x27;joe&#x27;;const user = &#123; get name() &#123; return _name &#125;, set name(value) &#123; if (typeof value !== &#x27;string&#x27;) &#123; throw new Error(&#x27;‰º†ÂÖ•Á±ªÂûã‰∏çÊòØÂ≠óÁ¨¶‰∏≤&#x27;) &#125; else &#123; _name = value &#125; &#125;&#125;user.name = &#x27;hello&#x27;user.name = 123 //Error: ‰º†ÂÖ•Á±ªÂûã‰∏çÊòØÂ≠óÁ¨¶‰∏≤ Âè™Ë¶Å‰Ω†Áü•ÈÅìÂØπË±°ÁöÑÊâÄÊúâÂ±ûÊÄßÂêçÁß∞Âπ∂‰∏îÂßãÁªàÂú®ÂØπË±°‰∏äÂÆö‰πâÂÆÉ‰ª¨Ôºå‰Ω†Â∞±ÂèØ‰ª•ÂØπÂØπË±°Â±ûÊÄßËøõË°åÁÆÄÂçïÁöÑÁ±ªÂûãÊ£ÄÊü•„ÄÇsettersËøòÊúâÂÖ∂‰ªñÁöÑÁº∫Èô∑Ôºö‰ªñ‰ª¨Êó†Ê≥ïÊçïËé∑ÂØπË±°Â±ûÊÄßÁöÑÊâÄÊúâÊìç‰ΩúÔºåËÉΩÂæàÂÆπÊòìÁöÑÈÄöËøáObject.defineProperty()‰πãÁ±ªÁöÑÊñπÊ≥ïÊé®Áøª„ÄÇ Ëøô‰ΩøÊàë‰ª¨ËøõÂÖ•‰∫ÜES6&#x2F;ES2015ÊúÄË¢´‰Ωé‰º∞ÁöÑÂäüËÉΩ‰πã‰∏ÄÔºöProxyÂØπË±°„ÄÇProxyÂåÖË£πÁõÆÊ†áÂØπË±°ÔºåÂπ∂ÂÖÖÂΩìÈÄèÊòé‰º†ÈÄí„ÄÇÂºÄÂèë‰∫∫ÂëòÂèØ‰ª•ÈÄöËøáËÆæÁΩÆÈô∑Èò±Êù•Êã¶Êà™ÂØπËØ•ÂØπË±°ÊâßË°åÁöÑÊâÄÊúâÊìç‰Ωú„ÄÇËøôÊ≠£ÊòØ‰∏∫Êàë‰ª¨ÁöÑ‰ª£Á†ÅÂ∏¶Êù•Âº∫Â§ßÁöÑÁ±ªÂûãÊ£ÄÊü•ÊâÄÈúÄË¶ÅÁöÑ„ÄÇ ËÆ©Êàë‰ª¨Áî®ProxyÈáçÂÜô‰πãÂâçÁöÑ‰ª£Á†ÅÔºö 1234567891011const user = new Proxy(&#123;_name: &#x27;joe&#x27;&#125;, &#123; set(target, p, value, receiver) &#123; if (p === &#x27;_name&#x27; &amp;&amp; typeof value !== &#x27;string&#x27;) &#123; throw new Error(&#x27;‰º†ÂÖ•Á±ªÂûã‰∏çÊòØÂ≠óÁ¨¶‰∏≤&#x27;) &#125; return Reflect.set(target, p, value) &#125;&#125;)user._name = &#x27;hello&#x27;user._name = 456 //Error: ‰º†ÂÖ•Á±ªÂûã‰∏çÊòØÂ≠óÁ¨¶‰∏≤ Âú®ËøôÈáåÔºåÊàë‰ª¨‰ªÖÂØπsetÊìç‰ΩúËøõË°å‰∫ÜÊã¶Êà™Ôºå‰ΩÜÊòØÂêåÊ†∑ÁöÑÔºåÊàë‰ª¨ËøòÂèØ‰ª•ÂØπdefineProperty„ÄÅdeleteProperty‰ª•Âèä‰ªª‰ΩïÂÖ∂‰ªñÂèØ‰ª•‰ΩøÁî®Êàë‰ª¨ÁöÑÂ±ûÊÄßÂÄºÂèëÁîüÂèòÂåñÁöÑÈô∑Èò±ËøõË°åÊã¶Êà™„ÄÇ ‰∏égetters/ settersÁöÑ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÔºåProxy‰∏çÈúÄË¶ÅÁü•ÈÅìÂ±ûÊÄßÂêçÁß∞Âç≥ÂèØÊçïËé∑ÊâßË°åÁöÑÊìç‰Ωú„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•ÂØπÂ∞öÊú™ÂÆö‰πâÁöÑÂä®ÊÄÅÂ±ûÊÄßËøõË°åÁ±ªÂûãÊ£ÄÊü•ÔºåËøòÂèØ‰ª•ÁºñÂÜôÊõ¥Â§öÈÄöÁî®ÁöÑ‰ΩøÁî®Á®ãÂ∫èÂáΩÊï∞Ôºö 123456789101112131415161718192021222324function checktype(obj, definition) &#123; return new Proxy(obj, &#123; set(obj, key, value, receiver) &#123; if (key in definition &amp;&amp; typeof value !== definition[key]) &#123; throw new Error(`$&#123;key&#125;Á±ªÂûãÂ∫îËØ•ÊòØ: $&#123;definition[key]&#125;`) &#125; return Reflect.set(obj, key, value) &#125; &#125;)&#125;class User &#123; constructor(name, age) &#123; //this ÊòØÂÆû‰æã return checktype(this, &#123; name: &#x27;string&#x27;, age: &#x27;number&#x27; &#125;) &#125;&#125;let joe = new User()joe.name = &#x27;joe&#x27;;joe.age = &#x27;12&#x27; //Error: ageÁ±ªÂûãÂ∫îËØ•ÊòØ: number (ËØëËÄÖÁöÑËØù)Ê≥®ÊÑèÔºöËøôÈáåÂè™ËÉΩ‰ΩøÁî® let joe &#x3D; new User(); joe.name &#x3D; ‚ÄòjoeÁöÑÂΩ¢ÂºèÔºåËÄå‰∏çËÉΩ‰ΩøÁî®let joe &#x3D; new User({name: 11,age: ‚Äò23‚Äô})ÔºåÂõ†‰∏∫ËøôÊ†∑Âπ∂‰∏ç‰ºöËß¶Âèë ProxyÁöÑsetÊã¶Êà™Ôºå‰∏ç‰ºöÊääÂ±ûÊÄßÂÜôÂà∞thisÂØπË±°‰∏äÔºåËøôÊ†∑ËøîÂõûÁöÑÂØπË±°ÊòØÁ©∫ÁöÑÔºåÊ≤°ÊúâÂ±ûÊÄß User {} ProxyÂèØ‰ª•Â§ÑÁêÜ‰ªª‰ΩïÁ±ªÂûãÁöÑÂØπË±°ÔºåÂπ∂‰∏îÂèØËÉΩÂØπÂèòÈáèÁöÑÂá†‰πé‰ªª‰ΩïÊìç‰ΩúÈÉΩÂèØ‰ª•Êã¶Êà™„ÄÇËøôÂåÖÊã¨functionÁî®ÂÅöapplyË¢´Ë∞ÉÁî®ÔºåÂèØ‰ª•ÊÉ≥Ë±°Âü∫‰∫éËøô‰∫õÊûÑÂª∫‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÁ±ªÂûãÊ£ÄÊü•Á≥ªÁªü„ÄÇËÄåËøôÊ≠£ÊòØÂéªÂπ¥‰ΩøÁî®ObjectModelÊâÄÂÅöÁöÑ‰∫ãÊÉÖ„ÄÇ 1234567891011121314151617// Basic Modelsconst PositiveInteger = BasicModel(Number) .assert(Number.isInteger) .assert(n =&gt; n &gt;= 0, &quot;should be greater or equal to zero&quot;)// Object Modelsclass Person extends ObjectModel(&#123; name: String, age: PositiveInteger&#125;)&#123; greet()&#123; return `Hello I&#x27;m $&#123;this.name&#125;` &#125;&#125;// Function ModelsPerson.prototype.greetSomeone = FunctionModel(Person).return(String)(function(person)&#123; return `Hello $&#123;person.name&#125;, I&#x27;m $&#123;this.name&#125;` &#125;) &#x2F;&#x2F; and models for Arrays, Maps, Sets‚Ä¶Ê®°ÂûãÂü∫Êú¨‰∏äÊòØÂâçÈù¢‰ª£Á†ÅÁ§∫‰æã‰∏≠Á±ªÂûãÊ£ÄÊü•ÂäüËÉΩÁöÑÊîπËøõÁâàÊú¨„ÄÇ ‰∏éTypeScriptÊé•Âè£Á±ª‰ººÔºåÂÆÉ‰ª¨ÁöÑ‰ΩúÁî®ÊòØÁ°Æ‰øùÂèòÈáèÁ¨¶ÂêàÊ®°ÂûãÂÆö‰πâ„ÄÇ ËøôÂè™ÊòØÂÜ∞Â±±‰∏ÄËßí„ÄÇ Âõ†‰∏∫ÊâÄÊúâËøô‰∫õÈÉΩÊòØÂú®ËøêË°åÊó∂ÂÆåÊàêÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•ÊÉ≥Ë±°Âá∫ÈùôÊÄÅÁ±ªÂûãÊ£ÄÊü•Ëß£ÂÜ≥ÊñπÊ°àÊó†Ê≥ïÂÆûÁé∞ÁöÑÊâÄÊúâÁî®‰æãÔºö È™åËØÅÊù•Ëá™REST APIÁöÑJSONÂΩ¢ÂºèÔºåÂπ∂Ëá™Âä®Â∞ÜÂµåÂ•óÊï∞ÊçÆËΩ¨Êç¢‰∏∫ÈÄÇÂΩìÁöÑJSÁ±ª Ê£ÄÊü•Êù•Ëá™localStorageÊàñIndexedDBÁöÑÂÜÖÂÆπÁöÑÊúâÊïàÊÄß ÈÄöËøáÁ±ªÂûãÊ£ÄÊü•ÂÜÖÁΩÆÊµèËßàÂô®APIÊù•ÊâßË°åÂäüËÉΩÊ£ÄÊµã Âø´ÈÄüÂ∞ÜÁ±ªÂûãÂÆö‰πâÊ∑ªÂä†Âà∞Êù•Ëá™CDNÁöÑÂ§ñÈÉ®Â∫ì Áé∞Âú®Êàë‰ª¨ÁöÑÁ±ªÂûãÂ∑≤‰ªéÈùôÊÄÅÂàÜÊûê‰∏≠Ëß£ËÑ±Âá∫Êù•ÔºåÊàë‰ª¨ÁîöËá≥ÂèØ‰ª•ÊÉ≥Ë±°Á±ªÂûãÂÆö‰πâ‰ºöÊ†πÊçÆÂ∫îÁî®Á®ãÂ∫èÁöÑÁä∂ÊÄÅËÄåÂèòÂåñÔºö‰æãÂ¶ÇÔºå‰∏ÄÊó¶Áî®Êà∑ÊùÉÈôêÊõ¥ÊîπÔºå‰æø‰ºöÁ´ãÂç≥ÂêëUserÂÆû‰æãÊ∑ªÂä†Êñ∞Êéß‰ª∂„ÄÇ Â¶ÇÊûúÂèØ‰ª•ÁßëÂ≠¶‰∏äÁΩëÁöÑËØùÔºåÂèØ‰ª•ËßÇÁúãËßÜÈ¢ë https://www.youtube.com/embed/zmojfyNH_EE Ëøô‰∫õÂè™ÊòØÂä®ÊÄÅÁ±ªÂûãÊ£ÄÊü•Á≥ªÁªüÁõ∏ÂØπ‰∫éÈùôÊÄÅÊ£ÄÊü•ÁöÑËÆ∏Â§öÂ•ΩÂ§Ñ‰∏≠ÁöÑÂá†‰∏™„ÄÇ Èô§Ê≠§‰πãÂ§ñÔºåÂÆÉ‰∏çÈúÄË¶ÅÂ≠¶‰π†Êñ∞ÁöÑËØ≠Ë®ÄÊàñÊ∑ªÂä†ÁºñËØëÊ≠•È™§„ÄÇ ÂÆÉÂè™ÊòØ‰∏Ä‰∏™Â∞èÁöÑÊôÆÈÄöJavaScriptÂ∫ì„ÄÇ ProxyÁé∞Âú®ÂÖ∑Êúâ‰∏çÈîôÁöÑÊµèËßàÂô®ÊîØÊåÅÔºåÊàëËÆ§‰∏∫ÊòØÊó∂ÂÄôÊâ©Â§ßÊàë‰ª¨ÂØπJavaScriptÁ±ªÂûãÂÆâÂÖ®ÊÄßÁöÑ‰∫ÜËß£‰∫Ü„ÄÇ TypeScriptÂíåFlowÊèê‰æõ‰∫ÜÂá∫Ëâ≤ÁöÑÂºÄÂèë‰∫∫Âëò‰ΩìÈ™åÔºåObjectModelÂπ∂‰∏çÊâìÁÆóÂèñ‰ª£ÂÆÉ‰ª¨Ôºå‰ΩÜÊòØ‰ªçÊúâËøõË°åÂàõÊñ∞ÂíåÂ∞ùËØïÊñ∞ÊñπÊ≥ïÁöÑÁ©∫Èó¥„ÄÇ ÔºàËØëËÄÖÁöÑËØùÔºâËôΩÁÑ∂Êú¨ÊñáÊúÄÂêé‰ªãÁªç‰∫ÜObjectModelËøô‰∏™Â∫ìÔºåÂÆÉÊòØ‰∏Ä‰∏™Âä®ÊÄÅÁöÑÁ±ªÂûãÊ£ÄÊü•jsÂ∫ìÔºåÂ∫ïÂ±Ç‰æùËµñÁöÑÊòØES6ÁöÑProxyÔºåËøôËØ¥ÊòéÔºåProxyÁúüÁöÑÂæàÂº∫Â§ßÔºåÂèØ‰ª•ÁúãÁúãËøô‰∏™Â∫ìÁöÑÊ∫êÁ†ÅÂ≠¶‰π†Â∞ÜProxyÁî®Âà∞ÂÆûÈôÖÂ∑•‰Ωú‰∏≠„ÄÇÁé∞Âú®ObjectModel 4.0Â∑≤ÁªèÂèëÂ∏ÉÔºåÈááÁî®ES ModuleÔºå‰ΩøÁî®ES2018ÂÜôÁöÑÔºåÊâÄ‰ª•Ê∫êÁ†Å‰πüÊòØÂ≠¶‰π†JSÁöÑÂæàÂ•ΩÁöÑ‰æãÂ≠ê„ÄÇ ÂéüÊñáÂú∞ÂùÄÔºöhttps://medium.com/@SylvainPV/type-safety-in-javascript-using-es6-proxies-eee8fbbbd600","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[{"name":"proxy","slug":"proxy","permalink":"https://justsso1.github.io/tags/proxy/"}]},{"title":"ÂÖÉÁºñÁ®ãÊòØ‰ªÄ‰πà","slug":"ÂÖÉÁºñÁ®ãÊòØ‰ªÄ‰πà","date":"2020-04-26T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2020/04/27/ÂÖÉÁºñÁ®ãÊòØ‰ªÄ‰πà/","permalink":"https://justsso1.github.io/2020/04/27/%E5%85%83%E7%BC%96%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88/","excerpt":"","text":"ÂÖÉÁºñÁ®ãÁöÑÁõÆÊ†áÊòØÂà©Áî®ËØ≠Ë®ÄËá™Ë∫´ÁöÑÂÜÖÁúÅËÉΩÂäõ‰Ωø‰ª£Á†ÅÁöÑÂÖ∂‰ΩôÈÉ®ÂàÜÊõ¥ÂÖ∑ÊèèËø∞ÊÄß„ÄÅË°®ËææÊÄßÂíåÁÅµÊ¥ªÊÄß„ÄÇ ES6Âú®JavaScriptÁé∞ÊúâÁöÑÂü∫Á°Ä‰∏ä‰∏∫ÂÖÉÁºñÁ®ãÊñ∞Â¢û‰∫Ü‰∏Ä‰∫õÂΩ¢Âºè&#x2F;ÁâπÊÄß„ÄÇÂ¶Ç‰∏ãÔºö ÂáΩÊï∞ÂêçÁß∞Á®ãÂ∫è‰∏≠ÊúâÂ§öÁßçÊñπÂºèÂèØ‰ª•Ë°®Ëææ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂáΩÊï∞ÁöÑ‚ÄùÂêçÁß∞‚ÄùÂ∫îËØ•ÊòØËØ¥‰ªÄ‰πàÂπ∂ÈùûÊÄªÊòØÊ∏ÖÊô∞Êó†ÁñëÁöÑ„ÄÇ ÊúâËØçÊ≥ïÂêçÁß∞ÁöÑÂáΩÊï∞Âú®ES6‰∏≠Ôºå ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂáΩÊï∞ÁöÑËØçÊ≥ïÂêçÁß∞ÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ‰πü‰ºöË¢´ËÆæ‰∏∫ÂÆÉÁöÑnameÂ±ûÊÄß„ÄÇÂ¶ÇÊûúÂáΩÊï∞ËÆæÂÆö‰∫ÜnameÂÄºÔºåÈÇ£‰πàËøô‰∏™ÂÄºÈÄöÂ∏∏‰πüÂ∞±ÊòØÂºÄÂèëËÄÖ‰∏≠Ê†àË∏™Ëøπ‰ΩøÁî®ÁöÑÂêçÁß∞„ÄÇÊ≤°ÊúâËØçÊ≥ïÂêçÁß∞ÁöÑÂáΩÊï∞Êé®ÂØº„ÄÇ 12345678910111213141516171819202122232425262728(function()&#123; .. &#125;); // name: (function*()&#123; .. &#125;); // name: window.foo = function()&#123; .. &#125;; // name: class Awesome &#123; constructor() &#123; .. &#125; // name: Awesome funny() &#123; .. &#125; // name: funny &#125; var c = class Awesome &#123; .. &#125;; // name: Awesome var o = &#123; foo() &#123; .. &#125;, // name: foo *bar() &#123; .. &#125;, // name: bar baz: () =&gt; &#123; .. &#125;, // name: baz bam: function()&#123; .. &#125;, // name: bam get qux() &#123; .. &#125;, // name: get qux set fuz() &#123; .. &#125;, // name: set fuz [&quot;b&quot; + &quot;iz&quot;]: function()&#123; .. &#125;, // name: biz [Symbol( &quot;buz&quot; )]: function()&#123; .. &#125; // name: [buz] &#125;; var x = o.foo.bind( o ); // name: bound foo (function()&#123; .. &#125;).bind( o ); // name: boundexport default function() &#123; .. &#125; // name: default var y = new Function(); // name: anonymous var GeneratorFunction = function*()&#123;&#125;.__proto__.constructor; var z = new GeneratorFunction(); // name: anonymous ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåname Â±ûÊÄß‰∏çÂèØÂÜôÔºå‰ΩÜÂèØÈÖçÁΩÆÔºå‰πüÂ∞±ÊòØËØ¥Â¶ÇÊûúÈúÄË¶ÅÁöÑËØùÔºåÂèØ‰ΩøÁî® Object.defineProperty(..) Êù•ÊâãÂä®‰øÆÊîπ„ÄÇ ÂÖÉÂ±ûÊÄßnew.target ÂÖÉÂ±ûÊÄßÔºåÂÖ≥ÈîÆÂ≠ónewÁî®‰∫éÂ±ûÊÄßËÆøÈóÆÁöÑ‰∏ä‰∏ãÊñá„ÄÇ ÂÖ¨ÂºÄÁ¨¶Âè∑Symbol.iteratorË∞ÉÁî®‚Ä¶Â±ïÂºÄÂíåfor‚Ä¶ofÂæ™ÁéØÊó∂Ôºå‰ºöËá™Âä®‰ΩøÁî®Symbol.iterator„ÄÇ Symbol.iteratorË°®Á§∫‰ªªÊÑèÂØπË±°Ë∫´‰∏äÁöÑ‰∏Ä‰∏™‰∏ìÈó®‰ΩçÁΩÆÔºàÂ±ûÊÄßÔºâÔºåËØ≠Ë®ÄÊú∫Âà∂Ëá™Âä®Âú®Ëøô‰∏™‰ΩçÁΩÆ‰∏äÂØªÊâæ‰∏Ä‰∏™ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÊûÑÈÄ†‰∏Ä‰∏™Ëø≠‰ª£Âô®Êù•Ê∂àËÄóËøô‰∏™ÂØπË±°ÁöÑÂÄº„ÄÇÂæàÂ§öÂØπË±°ÂÆö‰πâÊúâËøô‰∏™Á¨¶Âè∑ÁöÑÈªòËÆ§ÂÄº„ÄÇ ÁÑ∂ËÄåÔºå‰πüÂèØ‰ª•ÈÄöËøáÂÆö‰πâ Symbol.iterator Â±ûÊÄß‰∏∫‰ªªÊÑèÂØπË±°ÂÄºÂÆö‰πâËá™Â∑±ÁöÑËø≠‰ª£Âô®ÈÄªËæëÔºåÂç≥‰ΩøËøô‰ºöË¶ÜÁõñÈªòËÆ§ÁöÑËø≠‰ª£Âô®„ÄÇ Symbol.toStringTag‰∏éSymbol.hashInstanceÊúÄÂ∏∏ËßÅÁöÑ‰∏Ä‰∏™ÂÖÉÁºñÁ®ã‰ªªÂä°ÔºåÂ∞±ÊòØÂú®‰∏Ä‰∏™ÂÄº‰∏äËøõË°åÂÜÖÁúÅÊù•ÊâæÂá∫ÂÆÉÊòØ‰ªÄ‰πàÁßçÁ±ªÔºåËøôÈÄöÂ∏∏ÊòØ‰∏∫‰∫ÜÁ°ÆÂÆöÂÖ∂‰∏äÈÄÇÂêàÊâßË°å‰ΩïÁßçËøêÁÆó„ÄÇÂØπ‰∫éÂØπË±°Êù•ËØ¥ÔºåÊúÄÂ∏∏Áî®ÁöÑÂÜÖÁúÅÊäÄÊúØÊòØ toString() Âíåinstanceof„ÄÇ 12345function Foo() &#123;&#125; var a = new Foo(); a.toString(); // [object Object] a instanceof Foo; // trueÂú® ES6 ‰∏≠ÔºåÂèØ‰ª•ÊéßÂà∂Ëøô‰∫õÊìç‰ΩúÁöÑË°å‰∏∫ÁâπÊÄßÔºö 12345678910111213141516function Foo(greeting) &#123; this.greeting = greeting; &#125; Foo.prototype[Symbol.toStringTag] = &quot;Foo&quot;; Object.defineProperty( Foo, Symbol.hasInstance, &#123; value: function(inst) &#123; return inst.greeting == &quot;hello&quot;; &#125; &#125; ); var a = new Foo( &quot;hello&quot; ), b = new Foo( &quot;world&quot; ); b[Symbol.toStringTag] = &quot;cool&quot;; a.toString(); // [object Foo] String( b ); // [object cool] a instanceof Foo; // true b instanceof Foo; // false ÂéüÂûãÔºàÊàñÂÆû‰æãÊú¨Ë∫´ÔºâÁöÑSymbol.toStringTagÁ¨¶Âè∑ÊåáÂÆö‰∫ÜÂÜç[object ___]Â≠óÁ¨¶‰∏≤Âåñ‰ΩøÁî®ÁöÑÂ≠óÁ¨¶‰∏≤ÂÄº„ÄÇ ÂéüÂûãÔºàÊàñÂÆû‰æãÊú¨Ë∫´ÔºâÁöÑSymbol.toStringTagÁ¨¶Âè∑ÊåáÂÆö‰∫ÜÂÜç[object ___]Â≠óÁ¨¶‰∏≤Âåñ‰ΩøÁî®ÁöÑÂ≠óÁ¨¶‰∏≤ÂÄº„ÄÇ Symbol.speciesÈÄöËøáSymbol.speciesÊîπÂÜôÁ±ªÁöÑÈªòËÆ§ÁöÑÊûÑÈÄ†Âô®„ÄÇ 12345678910111213141516171819class Cool &#123; // Êää@@speciesÊé®ËøüÂà∞Â≠êÁ±ªstatic get [Symbol.species]() &#123; return this; &#125; again() &#123; return new this.constructor[Symbol.species](); &#125; &#125; class Fun extends Cool &#123;&#125; class Awesome extends Cool &#123; // Âº∫Âà∂ÊåáÂÆö@@species‰∏∫Áà∂ÊûÑÈÄ†Âô®static get [Symbol.species]() &#123; return Cool; &#125; &#125; var a = new Fun(), b = new Awesome(), c = a.again(), d = b.again(); c instanceof Fun; // true d instanceof Awesome; // false d instanceof Cool; // true Â∞±ÂÉèÂâçÈù¢‰ª£Á†Å‰∏≠ Cool ÁöÑÂÆö‰πâÈÇ£Ê†∑ÔºåÂÜÖÁΩÆÂéüÁîüÊûÑÈÄ†Âô®‰∏ä Symbol.species ÁöÑÈªòËÆ§Ë°å‰∏∫ÊòØreturn this„ÄÇÂú®Áî®Êà∑Á±ª‰∏äÊ≤°ÊúâÈªòËÆ§ÂÄºÔºå‰ΩÜÊòØÂ∞±ÂÉèÂ±ïÁ§∫ÁöÑÈÇ£Ê†∑ÔºåËøô‰∏™Ë°å‰∏∫ÁâπÊÄßÂæàÂÆπÊòìÊ®°Êãü„ÄÇ Â¶ÇÊûúÈúÄË¶ÅÂÆö‰πâÁîüÊàêÊñ∞ÂÆû‰æãÁöÑÊñπÊ≥ïÔºå‰ΩøÁî® new this.constructorSymbol.species Ê®°ÂºèÂÖÉÁºñÁ®ãÔºåËÄå‰∏çË¶ÅÁ°¨ÁºñÁ†Å new this.constructor(..) Êàñ new XYZ(..)„ÄÇÁÑ∂ÂêéÁªßÊâøÁ±ªÂ∞±ËÉΩÂ§üËá™ÂÆö‰πâ Symbol.species Êù•ÊéßÂà∂Áî±Âì™‰∏™ÊûÑÈÄ†Âô®‰∫ßÁîüËøô‰∫õÂÆû‰æã„ÄÇ Symbol.toPrimitiveÊäΩË±°Á±ªÂûãËΩ¨Êç¢ËøêÁÆótpPrimitiveÔºåÂÆÉÁî®Âú®ÂØπË±°‰∏∫‰∫ÜÊüê‰∏™Êìç‰ΩúÔºàÊØîÂ¶ÇÊØîËæÉ&#x3D;&#x3D;ÊàñËÄÖÁõ∏Âä†+ÔºâÂøÖÈ°ªË¢´Âº∫Âà∂ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™ÂéüÁîüÁ±ªÂûãÂÄºÁöÑÊó∂ÂÄô„ÄÇÂú®ES6‰πãÂâçÔºåÊ≤°ÊúâÂäûÊ≥ïÊéßÂà∂Ëøô‰ª•Ë°å‰∏∫„ÄÇËÄåÂú®ES6‰∏≠ÔºåÂú®‰ªªÊÑèÂØπË±°ÂÄº‰∏ä‰Ωú‰∏∫Â±ûÊÄßÁöÑÁ¨¶Âè∑@@toPrimitivessysmbolÈÉΩÂèØ‰ª•ÈÄöËøáÊåáÂÆö‰∏Ä‰∏™ÊñπÊ≥ïÊù•ÂÆöÂà∂Ëøô‰∏™ToPrimitiveÂº∫Âà∂Êç¢ËΩ¨„ÄÇ 1234567891011var arr = [1,2,3,4,5]; arr + 10; // 1,2,3,4,510 arr[Symbol.toPrimitive] = function(hint) &#123; if (hint == &quot;default&quot; || hint == &quot;number&quot;) &#123; // Ê±ÇÊâÄÊúâÊï∞Â≠ó‰πãÂíåreturn this.reduce( function(acc,curr)&#123; return acc + curr; &#125;, 0 ); &#125; &#125;; arr + 10; // 25 Symbol.toPrimitiveÊñπÊ≥ïÊ†πÊçÆË∞ÉÁî®ToPrimitiveÁöÑËøêÁÆóÊúüÊúõÁöÑÁ±ªÂûãÔºå‰ºöÊèê‰æõ‰∏Ä‰∏™ÊèêÁ§∫ÔºàhintÔºâÊåáÂÆö‚Äústring‚Äù„ÄÅ‚Äúnumber‚ÄùÊàñ‚Äúdefault‚ÄùÔºàËøôÂ∫îËØ•Ë¢´Ëß£Èáä‰∏∫‚Äùnumber‚ÄùÔºâ„ÄÇÂú®ÂâçÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÔºåÂä†Ê≥ï + ËøêÁÆóÊ≤°ÊúâÊèêÁ§∫Ôºà‰º†ÂÖ• ‚Äúdefault‚ÄùÔºâ„ÄÇËÄå‰πòÊ≥ï * ËøêÁÆóÊèêÁ§∫‰∏∫ ‚Äúnumber‚ÄùÔºåString(arr)ÊèêÁ§∫‰∏∫ ‚Äústring‚Äù„ÄÇ Â¶ÇÊûú‰∏Ä‰∏™ÂØπË±°‰∏éÂè¶‰∏Ä‰∏™ÈùûÂØπË±°ÂÄºÊØîËæÉÔºå&#x3D;&#x3D; ËøêÁÆóÁ¨¶Ë∞ÉÁî®Ëøô‰∏™ÂØπË±°‰∏äÁöÑToPrimitive ÊñπÊ≥ïÊó∂‰∏çÊåáÂÆöÊèêÁ§∫‚Äî‚ÄîÂ¶ÇÊûúÊúâ @@toPrimitive ÊñπÊ≥ïÁöÑËØùÔºåË∞ÉÁî®Êó∂ÊèêÁ§∫‰∏∫ ‚Äúdefault‚Äù„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊØîËæÉÁöÑ‰∏§‰∏™ÂÄºÈÉΩÊòØÂØπË±°Ôºå&#x3D;&#x3D; ÁöÑË°å‰∏∫Âíå &#x3D;&#x3D;&#x3D; ‰∏ÄÊ†∑Ôºå‰πüÂ∞±ÊòØÁõ¥Êé•ÊØîËæÉÂÖ∂ÂºïÁî®„ÄÇËøôÁßçÊÉÖÂÜµ‰∏ãÂÆåÂÖ®‰∏ç‰ºöË∞ÉÁî® @@toPrimitive„ÄÇ Ê≠£ÂàôË°®ËææÂºèÁ¨¶Âè∑ÂØπ‰∫éÊ≠£ÂàôË°®ËææÂºèÂØπË±°ÔºåÊúâ4‰∏™ÂÖ¨ÂºÄÁ¨¶Âè∑ÂèØ‰ª•Ë¢´Ë¶ÜÁõñÔºå‰ªñ‰ª¨ÊéßÂà∂ÁùÄËøô‰∫õÊ≠£ÂàôË°®ËææÂºèÂú®4‰∏™ÂØπÂ∫îÁöÑÂêåÂêçString.prototyptÂáΩÊï∞‰∏≠Â¶Ç‰ΩïË¢´‰ΩøÁî®„ÄÇ @@match Ôºö Ê≠£ÂàôË°®ËææÂºèÁöÑSymbol.matchÂÄºÊòØ‰∏Ä‰∏™Áî®‰∫éÂà©Áî®ÁªôÂÆöÁöÑÊ≠£ÂàôË°®ËææÂºèÂåπÈÖç‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂÄºÁöÑÈÉ®ÂàÜÊàñÂÖ®ÈÉ®ÂÜÖÂÆπÁöÑÊñπÊ≥ï„ÄÇ @@replace:Ê≠£ÂàôË°®ËææÂºèÁöÑSymbol.replaceÂÄºÊòØ‰∏Ä‰∏™ÊñπÊ≥ïÔºåString.prototypt.replace(..)Áî®ÂÆÉÊù•ÊõøÊç¢‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂÜÖÂåπÈÖçÊ®°ÂºèÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™Â≠óÁ¨¶‰∏≤Â∫èÂàó„ÄÇ @@searchÔºöÊ≠£ÂàôË°®ËææÂºèÁöÑSymbol.searchÂÄºËØïËØï‰∏Ä‰∏™ÊñπÊ≥ïÔºåString.prototype.search(..)Áî®ÂÆÉÊù•Âú®Âè¶‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤‰∏≠ÊêúÁ¥¢‰∏Ä‰∏™ÂåπÈÖçÁªôÂÆöÊ≠£ÂàôË°®ËææÂºèÁöÑÂ≠ê‰∏≤„ÄÇ @@splitÔºöÊ≠£ÂàôË°®ËææÂºèÁöÑSymbol.splitÂÄºÊó∂‰∏Ä‰∏™ÊñπÊ≥ïÔºåString.prototype.split(..)Áî®ÂÆÉÊääÂ≠óÁ¨¶‰∏≤Âú®ÂåπÈÖçÁªôÂÆöÊ≠£ÂàôË°®ËææÂºèÁöÑÂàÜÈöîÁ¨¶Â§ÑÂàÜÈöî‰∏∫Â≠ê‰∏≤„ÄÇ Â¶ÇÊûú‰Ω†‰∏çÂ§üËâ∫È´ò‰∫∫ËÉÜÂ§ßÁöÑËØùÔºåÂ∞±‰∏çË¶ÅË¶ÜÁõñÂÜÖÁΩÆÊ≠£ÂàôË°®ËææÂºèÁÆóÊ≥ï‰∫ÜÔºÅ JavaScript ÁöÑÊ≠£ÂàôË°®ËææÂºèÂºïÊìéÁªèËøáÈ´òÂ∫¶‰ºòÂåñÔºåÊâÄ‰ª•‰Ω†Ëá™Â∑±ÁöÑÁî®Êà∑‰ª£Á†ÅÂæàÂèØËÉΩ‰ºöÊÖ¢‰∏äËÆ∏Â§ö„ÄÇËøôÁ±ªÂÖÉÁºñÁ®ãÁÆÄÊ¥ÅÂº∫Â§ßÔºå‰ΩÜÊòØÂè™Â∫îËØ•Âú®Á°ÆÂÆûÈúÄË¶ÅÊàñËÉΩÂ∏¶Êù•Êî∂ÁõäÁöÑÊó∂ÂÄôÊâç‰ΩøÁî®„ÄÇ Symbol.isConcatSpreadableÁ¨¶Âè∑ @@isConcatSpreadable ÂèØ‰ª•Ë¢´ÂÆö‰πâ‰∏∫‰ªªÊÑèÂØπË±°ÔºàÊØîÂ¶ÇÊï∞ÁªÑÊàñÂÖ∂‰ªñÂèØËø≠‰ª£ÂØπË±°ÔºâÁöÑÂ∏ÉÂ∞îÂûãÂ±ûÊÄßÔºàSymbolisConcatSpreadableÔºâÔºåÁî®Êù•ÊåáÁ§∫Â¶ÇÊûúÊääÂÆÉ‰º†Áªô‰∏Ä‰∏™Êï∞ÁªÑÁöÑ concat(..) ÊòØÂê¶Â∫îËØ•Â∞ÜÂÖ∂Â±ïÂºÄ„ÄÇËÄÉËôëÔºö 1234var a = [1,2,3], b = [4,5,6]; b[Symbol.isConcatSpreadable] = false; [].concat( a, b ); // [1,2,3,[4,5,6]] Symbol.unscopablesÁ¨¶Âè∑ @@unscopables ÂèØ‰ª•Ë¢´ÂÆö‰πâ‰∏∫‰ªªÊÑèÂØπË±°ÁöÑÂØπË±°Â±ûÊÄßÔºàSymbol.unscopablesÔºâÔºåÁî®Êù•ÊåáÁ§∫‰ΩøÁî® with ËØ≠Âè•Êó∂Âì™‰∫õÂ±ûÊÄßÂèØ‰ª•Êàñ‰∏çÂèØ‰ª•Êö¥Èú≤‰∏∫ËØçÊ≥ïÂèòÈáè„ÄÇËÄÉËôëÔºö 12345678910var o = &#123; a:1, b:2, c:3 &#125;, a = 10, b = 20, c = 30; o[Symbol.unscopables] = &#123; a: false, b: true, c: false&#125;; with (o) &#123; console.log( a, b, c ); // 1 20 3 &#125; @@unscopables ÂØπË±°‰∏≠ÁöÑ true Ë°®Á§∫Ëøô‰∏™Â±ûÊÄßÂ∫îËØ•ÊòØ unscopable ÁöÑÔºåÂõ†Ê≠§‰ºö‰ªéËØçÊ≥ï‰ΩúÁî®ÂüüÂèòÈáè‰∏≠Ë¢´ËøáÊª§Âá∫Âéª„ÄÇfalse Ë°®Á§∫ÂèØ‰ª•Â∞ÜÂÖ∂ÂåÖÂê´Âà∞ËØçÊ≥ï‰ΩúÁî®ÂüüÂèòÈáè‰∏≠„ÄÇstrict Ê®°Âºè‰∏ã‰∏çÂÖÅËÆ∏ with ËØ≠Âè•ÔºåÂõ†Ê≠§Â∫îÂΩìË¢´ËÆ§‰∏∫ÊòØËØ≠Ë®ÄÁöÑËøáÊó∂ÁâπÊÄß„ÄÇ‰∏çË¶Å‰ΩøÁî®ÂÆÉ„ÄÇÂõ†‰∏∫Â∫îËØ•ÈÅøÂÖç‰ΩøÁî® withÔºåÊâÄ‰ª•Á¨¶Âè∑ @@unscopables ‰πüÊ≤°ÊúâÂ§™Â§ßÊÑè‰πâ„ÄÇ ‰ª£ÁêÜ ProxyES6‰∏≠Êñ∞Â¢ûÁöÑÊúÄÊòéÊòæÁöÑÂÖÉÁºñÁ®ãÁâπÊÄß‰πã‰∏ÄÊòØProxy„ÄÇ‰ª£ÁêÜÊòØ‰∏ÄÁßçÁî±‰Ω†ÂàõÂª∫ÁöÑÁâπÊÆäÁöÑÂØπË±°ÔºåÂÆÉ‚ÄúÂ∞ÅË£Ö‚ÄùÂè¶‰∏Ä‰∏™ÊôÆÈÄöÂØπË±°‚Äî‚ÄîÊàñËÄÖËØ¥Êå°Âú®Ëøô‰∏™ÊôÆÈÄöÂØπË±°ÁöÑÂâçÈù¢„ÄÇ‰Ω†ÂèØ‰ª•Âú®‰ª£ÁêÜÂØπË±°‰∏äÊ≥®ÂÜåÁâπÊÆäÁöÑÂ§ÑÁêÜÂáΩÊï∞Ôºà‰πüÂ∞±ÊòØ trapÔºâÔºå‰ª£ÁêÜ‰∏äÊâßË°åÂêÑÁßçÊìç‰ΩúÁöÑÊó∂ÂÄô‰ºöË∞ÉÁî®Ëøô‰∏™Á®ãÂ∫è„ÄÇËøô‰∫õÂ§ÑÁêÜÂáΩÊï∞Èô§‰∫ÜÊääÊìç‰ΩúËΩ¨ÂèëÁªôÂéüÂßãÁõÆÊ†á &#x2F; Ë¢´Â∞ÅË£ÖÂØπË±°‰πãÂ§ñÔºåËøòÊúâÊú∫‰ºöÊâßË°åÈ¢ùÂ§ñÁöÑÈÄªËæë„ÄÇ ÊØè‰∏™‰ª£ÁêÜÂ§ÑÁêÜÂáΩÊï∞Âú®ÂØπÂ∫îÁöÑÂÖÉÁºñÁ®ã‰ªªÂä°ÊâßË°åÁöÑÊó∂ÂÄôËøõË°åÊã¶Êà™ÔºåËÄåÊØè‰∏™ Reflect Â∑•ÂÖ∑Âú®‰∏Ä‰∏™ÂØπË±°‰∏äÊâßË°åÁõ∏Â∫îÁöÑÂÖÉÁºñÁ®ã‰ªªÂä°„ÄÇÊØè‰∏™‰ª£ÁêÜÂ§ÑÁêÜÂáΩÊï∞ÈÉΩÊúâ‰∏Ä‰∏™Ëá™Âä®Ë∞ÉÁî®Áõ∏Â∫îÁöÑ Reflect Â∑•ÂÖ∑ÁöÑÈªòËÆ§ÂÆö‰πâ„ÄÇÂá†‰πéÂèØ‰ª•Á°ÆÂÆö Proxy Âíå Reflect ÊÄªÊòØËøô‰πàÂçèÂêåÂ∑•‰ΩúÁöÑ„ÄÇ get(..)ÈÄöËøá [[Get]]ÔºåÂú®‰ª£ÁêÜ‰∏äËÆøÈóÆ‰∏Ä‰∏™Â±ûÊÄßÔºàReflect.get(..)„ÄÅ. Â±ûÊÄßËøêÁÆóÁ¨¶Êàñ [ .. ] Â±ûÊÄßËøêÁÆóÁ¨¶Ôºâ set(..)ÈÄöËøá [[Set]]ÔºåÂú®‰ª£ÁêÜ‰∏äËÆæÁΩÆ‰∏Ä‰∏™Â±ûÊÄßÂÄºÔºàReflect.set(..)„ÄÅËµãÂÄºËøêÁÆóÁ¨¶ &#x3D; ÊàñÁõÆÊ†á‰∏∫ÂØπË±°Â±ûÊÄßÁöÑËß£ÊûÑËµãÂÄºÔºâ deleteProperty(..)ÈÄö Ëøá [[Delete]]Ôºå ‰ªé ‰ª£ ÁêÜ ÂØπ Ë±° ‰∏ä Âà† Èô§ ‰∏Ä ‰∏™ Â±û ÊÄßÔºàReflect.deleteProperty(..) ÊàñÔºàdeleteÔºâ apply(..)ÔºàÂ¶ÇÊûúÁõÆÊ†á‰∏∫ÂáΩÊï∞ÔºâÈÄö Ëøá [[Call]]ÔºåÂ∞Ü‰ª£ÁêÜ‰Ωú‰∏∫ÊôÆÈÄöÂáΩÊï∞ &#x2F; Êñπ Ê≥ï Ë∞É Áî®ÔºàReflect.apply(..)„ÄÅcall(..)„ÄÅapply(..) Êàñ (..) Ë∞ÉÁî®ËøêÁÆóÁ¨¶Ôºâ construct(..)ÔºàÂ¶ÇÊûúÁõÆÊ†á‰∏∫ÊûÑÈÄ†ÂáΩÊï∞ÔºâÈÄöËøá [[Construct]]ÔºåÂ∞Ü‰ª£ÁêÜ‰Ωú‰∏∫ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®ÔºàReflect.construct(..) Êàñ newÔºâ getOwnPropertyDescriptor(..)ÈÄöËøá [[GetOwnProperty]]Ôºå‰ªé‰ª£ÁêÜ‰∏≠ÊèêÂèñ‰∏Ä‰∏™Â±ûÊÄßÊèèËø∞Á¨¶ÔºàObject.getOwnPropertyDescriptor(..)Êàñ Reflect.getOwnPropertyDescriptor(..)Ôºâ defineProperty(..)ÈÄöËøá [[DefineOwnProperty]]ÔºåÂú®‰ª£ÁêÜ‰∏äËÆæÁΩÆ‰∏Ä‰∏™Â±ûÊÄßÊèèËø∞Á¨¶ÔºàObject.defineProperty(..)Êàñ Reflect.defineProperty(..)Ôºâ getPrototypeOf(..)ÈÄö Ëøá [[GetPrototypeOf]]ÔºåÂæóÂà∞‰ª£ÁêÜÁöÑ [[Prototype]]ÔºàObject.getPrototypeOf(..)„ÄÅReflect.getPrototypeOf(..)„ÄÅproto„ÄÅObject#isPrototypeOf(..) Êàñ instanceofÔºâ setPrototypeOf(..)ÈÄö Ëøá [[SetPrototypeOf]]ÔºåËÆæÁΩÆ‰ª£ÁêÜÁöÑ [[Prototype]]ÔºàObject.setPrototypeOf(..)„ÄÅReflect.setPrototypeOf(..) Êàñ protoÔºâ preventExtensions(..)ÈÄöËøá [[PreventExtensions]]Ôºå‰ΩøÂæó‰ª£ÁêÜÂèòÊàê‰∏çÂèØÊâ©Â±ïÁöÑÔºàObject.prevent Extensions(..)Êàñ Reflect.preventExtensions(..)Ôºâ isExtensible(..)ÈÄöËøá [[IsExtensible]]ÔºåÊ£ÄÊµã‰ª£ÁêÜÊòØÂê¶ÂèØÊâ©Â±ïÔºàObject.isExtensible(..) Êàñ Reflect.isExtensible(..)Ôºâ ownKeys(..)ÈÄöËøá [[OwnPropertyKeys]]ÔºåÊèêÂèñ‰ª£ÁêÜËá™Â∑±ÁöÑÂ±ûÊÄßÂíå &#x2F; ÊàñÁ¨¶Âè∑Â±ûÊÄßÔºàObject.keys(..)„ÄÅObject.getOwnPropertyNames(..)„ÄÅObject.getOwnSymbolProperties(..)„ÄÅReflect.ownKeys(..) Êàñ JSON.stringify(..)Ôºâenumerate(..)ÈÄöËøá [[Enumerate]]ÔºåÂèñÂæó‰ª£ÁêÜÊã•ÊúâÁöÑÂíå‚ÄúÁªßÊâøÊù•ÁöÑ‚ÄùÂèØÊûö‰∏æÂ±ûÊÄßÁöÑËø≠‰ª£Âô®ÔºàReflect.enumerate(..) Êàñ for..inÔºâ has(..)ÈÄöËøá [[HasProperty]]ÔºåÊ£ÄÊü•‰ª£ÁêÜÊòØÂê¶Êã•ÊúâÊàñËÄÖ‚ÄúÁªßÊâø‰∫Ü‚ÄùÊüê‰∏™Â±ûÊÄßÔºàReflect.has(..)„ÄÅObject#hasOwnProperty(..) Êàñ ‚Äúprop‚Äù in objÔºâ ‰ΩÜÊòØËøòÊòØÊúâ‰∫õÊìç‰ΩúÊòØÊó†Ê≥ï‰ª£ÁêÜÁöÑÔºåtypeof String() + 123456789var obj = &#123; a:1, b:2 &#125;, handlers = &#123; .. &#125;, pobj = new Proxy( obj, handlers ); typeof obj; String( obj ); obj + &quot;&quot;; obj == pobj; obj === pobj ÂèØÂèñÊ∂à‰ª£ÁêÜÂèØÂèñÊ∂à‰ª£ÁêÜÁî® Proxy.revocable(..) ÂàõÂª∫ÔºåËøôÊòØ‰∏Ä‰∏™ÊôÆÈÄöÂáΩÊï∞ÔºåËÄå‰∏çÂÉè Proxy(..) ‰∏ÄÊ†∑ÊòØÊûÑÈÄ†Âô®„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÂÆÉÊé•Êî∂ÂêåÊ†∑ÁöÑ‰∏§‰∏™ÂèÇÊï∞Ôºötarget Âíå handlers„ÄÇÂíå new Proxy(..) ‰∏ç‰∏ÄÊ†∑ÔºåProxy.revocable(..) ÁöÑËøîÂõûÂÄº‰∏çÊòØ‰ª£ÁêÜÊú¨Ë∫´„ÄÇËÄåÊòØ‰∏Ä‰∏™Êúâ‰∏§‰∏™Â±ûÊÄß‚Äî‚Äîproxy Âíå revode ÁöÑÂØπË±° 123456789101112131415161718var obj = &#123; a: 1 &#125;, handlers = &#123; get(target,key,context) &#123; // Ê≥®ÊÑèÔºötarget === obj, // context === pobj console.log( &quot;accessing: &quot;, key ); return target[key]; &#125; &#125;, &#123; proxy: pobj, revoke: prevoke &#125; = Proxy.revocable( obj, handlers ); pobj.a; // accessing: a // 1 // ÁÑ∂ÂêéÔºöprevoke(); pobj.a; // TypeError","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[{"name":"proxy","slug":"proxy","permalink":"https://justsso1.github.io/tags/proxy/"}]},{"title":"Proxy ReflectÁúüÁöÑÂæàÊúâÁî®","slug":"Proxy„ÄÅReflectÁúüÁöÑÂæàÊúâÁî®","date":"2020-04-25T16:00:00.000Z","updated":"2024-10-12T08:40:56.538Z","comments":true,"path":"2020/04/26/Proxy„ÄÅReflectÁúüÁöÑÂæàÊúâÁî®/","permalink":"https://justsso1.github.io/2020/04/26/Proxy%E3%80%81Reflect%E7%9C%9F%E7%9A%84%E5%BE%88%E6%9C%89%E7%94%A8/","excerpt":"","text":"ProxyProxyÊòØ‰ªÄ‰πàËøôÈáåÊàëÊÉ≥ÁÆÄÂçïÊù•ËØ¥ÔºåProxyÊòØÂØπË±°ÁöÑ‰ª£ÁêÜÂô®ÔºåÂæàÂ•ΩÁêÜËß£ÔºåÊàë‰ª¨Êúâ‰∏Ä‰∏™ÂæàÈáçË¶ÅÁöÑÂØπË±°ÔºåÊàë‰ª¨‰∏çÂ∏åÊúõÂà´‰∫∫Èöè‰æøËé∑Âèñ‰øÆÊîπËØ•ÂØπË±°ÔºåÊàë‰ª¨Ë¶Å‰øùÊä§ËØ•ÂØπË±°ÔºåÁî®Âè¶Â§ñ‰∏Ä‰∏™ÂØπË±°‰ª£ÁêÜÂÆÉÔºåÂØπÁúüÊ≠£Ë¶ÅÊìç‰ΩúÁöÑÂØπË±°ÊòØ‰∏ÄÁßçÊï∞ÊçÆ‰øùÊä§ÂíåËøáÊª§„ÄÇ ProxyÂπ∂‰∏çÊòØÁÆÄÂçïÁöÑÈÄöËøáÊàë‰ª¨Â∏∏ËßÅÁöÑ‰ª£Á†ÅÂΩ¢ÂºèÂ¶Çif elseÂØπÂØπË±°ËøõË°å‰øùÊä§ÔºåÂÆÉÊòØÂú®‰ª£Á†ÅÁºñÁ®ãÂ±ÇÈù¢ÂØπÂØπË±°ËøõË°å‰øùÊä§ÔºåÂ±û‰∫é‚ÄúÂÖÉÁºñÁ®ã‚Äù„ÄÇÊØîÂ¶ÇÔºåÂú®ËØªÂèñÊàñËÆæÁΩÆÂØπË±°ÁöÑÂ±ûÊÄßÊó∂ÔºåÊàë‰ª¨ÂèØ‰ª•Âà©Áî®get() set()ËøõË°å‰ª£ÁêÜÔºåÊâßË°åÂáΩÊï∞Êó∂ÔºàÂáΩÊï∞Êú¨Êù•Â∞±ÊòØÂØπË±°ÔºâÂèØ‰ª•‰ΩøÁî®apply(),ÂáΩÊï∞ÂΩì‰ΩúÊûÑÈÄ†Âô®Êó∂ÔºåÂèØ‰ª•‰ΩøÁî®constructorËøõË°åÊã¶Êà™„ÄÇ ProxyÁöÑÊã¶Êà™Êìç‰ΩúÊúâÂì™‰∫õËôΩÁÑ∂ÊòØ‰ª£ÁêÜÂô®Ôºå‰ΩÜÊòØ‰πü‰∏çËÉΩ‰ªªÁî±Á®ãÂ∫èÂëò‚ÄúËá™Áî±ÂèëÊå•‚ÄùÔºåÊâÄ‰ª•ES6‰∏≠ÂØπProxyÂÅö‰∫Ü‰∏Ä‰∫õÈôêÂà∂ÔºåProxyÊîØÊåÅÁöÑÊã¶Êà™Êìç‰ΩúÊúâ‰∏ãÈù¢Ëøô‰∫õÔºö get(target, propKey, receiver): Êã¶Êà™ÂØπË±°Â±ûÊÄßÁöÑËØªÂèñ set(target, propKey, value, receiver): Êã¶Êà™ÂØπË±°Â±ûÊÄßÁöÑËÆæÁΩÆ has(target, propKey): Êã¶Êà™propKey in proxyÊìç‰ΩúÔºåËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄº deleteProperty(target, propKey): Êã¶Êà™delete proxy[propKey]ÁöÑÊìç‰ΩúÔºåËøîÂõûÂ∏ÉÂ∞îÂÄº ownKeys(target): Êã¶Êà™Object.getOwnPropertyNames(proxy)„ÄÅObject.getOwnPropertySymbols(proxy)„ÄÅObject.keys(proxy)„ÄÅfor...inÂæ™ÁéØÔºåËøîÂõû‰∏Ä‰∏™Êï∞ÁªÑ„ÄÇËØ•ÊñπÊ≥ïËøîÂõûÁõÆÊ†áÂØπË±°ÊâÄÊúâËá™Ë∫´ÁöÑÂ±ûÊÄßÁöÑÂ±ûÊÄßÂêçÔºåËÄåObject.keys()ÁöÑËøîÂõûÁªìÊûú‰ªÖÂåÖÊã¨ÁõÆÊ†áÂØπË±°Ëá™Ë∫´ÁöÑÂèØÈÅçÂéÜÂ±ûÊÄß„ÄÇ getOwnPropertyDescriptor(target, propKey)ÔºöÊã¶Êà™Object.getOwnPropertyDescriptor(proxy, propKey)ÔºåËøîÂõûÂ±ûÊÄßÁöÑÊèèËø∞ÂØπË±°„ÄÇ defineProperty(target, propKey, propDesc)ÔºöÊã¶Êà™Object.defineProperty(proxy, propKey, propDescÔºâ„ÄÅObject.defineProperties(proxy, propDescs)ÔºåËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄº„ÄÇ preventExtensions(target)ÔºöÊã¶Êà™Object.preventExtensions(proxy)ÔºåËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄº„ÄÇ getPrototypeOf(target)ÔºöÊã¶Êà™Object.getPrototypeOf(proxy)ÔºåËøîÂõû‰∏Ä‰∏™ÂØπË±°„ÄÇ isExtensible(target)ÔºöÊã¶Êà™Object.isExtensible(proxy)ÔºåËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄº„ÄÇ setPrototypeOf(target, proto)ÔºöÊã¶Êà™Object.setPrototypeOf(proxy, proto)ÔºåËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄº„ÄÇÂ¶ÇÊûúÁõÆÊ†áÂØπË±°ÊòØÂáΩÊï∞ÔºåÈÇ£‰πàËøòÊúâ‰∏§ÁßçÈ¢ùÂ§ñÊìç‰ΩúÂèØ‰ª•Êã¶Êà™„ÄÇ apply(target, object, args)ÔºöÊã¶Êà™ Proxy ÂÆû‰æã‰Ωú‰∏∫ÂáΩÊï∞Ë∞ÉÁî®ÁöÑÊìç‰ΩúÔºåÊØîÂ¶Çproxy(‚Ä¶args)„ÄÅproxy.call(object, ‚Ä¶args)„ÄÅproxy.apply(‚Ä¶)„ÄÇ construct(target, args)ÔºöÊã¶Êà™ Proxy ÂÆû‰æã‰Ωú‰∏∫ÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®ÁöÑÊìç‰ΩúÔºåÊØîÂ¶Çnew proxy(‚Ä¶args)„ÄÇ 12345678910111213141516171819202122232425var handler = &#123; get: function(target, name) &#123; if (name === &#x27;prototype&#x27;) &#123; return Object.prototype; &#125; return &#x27;Hello, &#x27; + name; &#125;, apply: function(target, thisBinding, args) &#123; return args[0]; &#125;, construct: function(target, args) &#123; return &#123;value: args[1]&#125;; &#125;&#125;;var fproxy = new Proxy(function(x, y) &#123; return x + y;&#125;, handler);fproxy(1, 2) // 1new fproxy(1, 2) // &#123;value: 2&#125;fproxy.prototype === Object.prototype // truefproxy.foo === &quot;Hello, foo&quot; // true ProxyÁöÑÂ∫îÁî®ProxyÊèê‰æõÁöÑÊã¶Êà™Âô®ÂæàÂ§öÁßçÔºåÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÁöÑÈúÄÊ±ÇÔºåÁªÑÂêàËøô‰∫õÊã¶Êà™Âô®ËææÂà∞Ëá™Â∑±ÁöÑÁõÆÁöÑ Èò≤Ê≠¢ÂØπË±°ÁöÑÂÜÖÈÉ®Â±ûÊÄß(ÁßÅÊúâÂ±ûÊÄß)Ë¢´Â§ñÈÉ®ËØªÂÜôÔºåËææÂà∞Á±ªÂûãÂÆâÂÖ® JSÂØπË±°‰∏≠ÁöÑÁßÅÊúâÂ±ûÊÄßÊ≤°ÊúâËßÑÂÆöÔºåÊàë‰ª¨ÈÉΩÊòØÁ∫¶ÂÆö‰ΩøÁî®ÂâçÁºÄÊòØ‚Äô‚Äò‰ª£Ë°®ÁßÅÊúâÂ±ûÊÄßÔºå‰ΩÜËøòÊòØÂπ∂‰∏ç‚ÄúÁßÅÊúâ‚Äù„ÄÇÂèØ‰ª•‰ΩøÁî®ProxyÂÅöÂà∞ÁßÅÊúâÂ±ûÊÄßÔºåÂú®get&#x2F;setÂ±ûÊÄßÊó∂ÔºåÂà§Êñ≠È¶ñÂ≠óÁ¨¶ÊòØÂê¶ÊòØ‚Äô‚Äò,Â¶ÇÊûúÊòØÔºåÂàôÂâñÂá∫ÈîôËØØ„ÄÇ 123456789101112131415161718192021222324252627const handle = &#123; get(target, p, receiver) &#123; inver(p, &#x27;get&#x27;) return target[p] &#125;, set(target, p, value, receiver) &#123; inver(p, &#x27;set&#x27;) target[p] = value return true; &#125;&#125;function inver(key, action) &#123; if (key[0] === &#x27;_&#x27;) &#123; throw new Error(`Invalid attempt to $&#123;action&#125; $&#123;key&#125;`) &#125;&#125;try &#123; const target = &#123;&#125; const proxy = new Proxy(target, handle) proxy._prop proxy._prop = &#x27;c&#x27;&#125; catch (e) &#123; console.log(e) // Error: Invalid attempt to get private &quot;_prop&quot; property&#125; ‰ΩøÁî®hasÊñπÊ≥ïÈöêËóèÊüê‰∫õÂ±ûÊÄßÔºå‰∏çË¢´inËøêÁÆóÁ¨¶ÂèëÁé∞ 1234567891011var handler = &#123; has (target, key) &#123; if (key[0] === &#x27;_&#x27;) &#123; return false; &#125; return key in target; &#125;&#125;;var target = &#123; _prop: &#x27;foo&#x27;, prop: &#x27;foo&#x27; &#125;;var proxy = new Proxy(target, handler);&#x27;_prop&#x27; in proxy // false ‰∏≠Êñ≠Â§ÑÁêÜ Proxy.revocable() Proxy.revocableÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™ÂèØÂèñÊ∂àÁöÑ Proxy ÂÆû‰æã 12345678910let target = &#123;&#125;;let handler = &#123;&#125;;let &#123;proxy, revoke&#125; = Proxy.revocable(target, handler);proxy.foo = 123;proxy.foo // 123revoke();proxy.foo // TypeError: Revoked Proxy.revocableÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™ÂØπË±°ÔºåËØ•ÂØπË±°ÁöÑproxyÂ±ûÊÄßÊòØProxyÂÆû‰æãÔºårevokeÂ±ûÊÄßÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂèØ‰ª•ÂèñÊ∂àProxyÂÆû‰æã„ÄÇ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÂΩìÊâßË°årevokeÂáΩÊï∞‰πãÂêéÔºåÂÜçËÆøÈóÆProxyÂÆû‰æãÔºåÂ∞±‰ºöÊäõÂá∫‰∏Ä‰∏™ÈîôËØØ„ÄÇ Proxy.revocableÁöÑ‰∏Ä‰∏™‰ΩøÁî®Âú∫ÊôØÊòØÔºåÁõÆÊ†áÂØπË±°‰∏çÂÖÅËÆ∏Áõ¥Êé•ËÆøÈóÆÔºåÂøÖÈ°ªÈÄöËøá‰ª£ÁêÜËÆøÈóÆÔºå‰∏ÄÊó¶ËÆøÈóÆÁªìÊùüÔºåÂ∞±Êî∂Âõû‰ª£ÁêÜÊùÉÔºå‰∏çÂÖÅËÆ∏ÂÜçÊ¨°ËÆøÈóÆ„ÄÇ ÊäΩÁ¶ªÊ†°È™åÊ®°ÂùóÔºåÁ±ªÂûãÊ£ÄÊü• 1234567891011121314151617181920let numericDataStore = &#123; count: 0, amount: 1234, total: 14&#125;;numericDataStore = new Proxy(numericDataStore, &#123; set(target, key, value, proxy) &#123; if (typeof value !== &#x27;number&#x27;) &#123; throw Error(&quot;Properties in numericDataStore can only be numbers&quot;); &#125; return Reflect.set(target, key, value, proxy); &#125;&#125;);// ÊäõÂá∫ÈîôËØØÔºåÂõ†‰∏∫ &quot;foo&quot; ‰∏çÊòØÊï∞ÂÄºnumericDataStore.count = &quot;foo&quot;;// ËµãÂÄºÊàêÂäünumericDataStore.count = 333; ÂèØ‰ª•Êü•ÁúãÊàëÁöÑÂè¶‰∏ÄÁØáÁøªËØëÊñáÁ´†ÔºöÂú®JavaScript‰∏≠‰ΩøÁî®ES6 ProxyÂÅöÁ±ªÂûãÂÆâÂÖ®ProxyÂèØ‰ª•ÂÅöÂà∞Âä®ÊÄÅÁöÑÁ±ªÂûãÊ£ÄÊü• ËÆøÈóÆÊó•Âøó ÂØπ‰∫éÈÇ£‰∫õË∞ÉÁî®È¢ëÁπÅ„ÄÅËøêË°åÁºìÊÖ¢ÊàñÂç†Áî®ÊâßË°åÁéØÂ¢ÉËµÑÊ∫êËæÉÂ§öÁöÑÂ±ûÊÄßÊàñÊé•Âè£ÔºåÂºÄÂèëËÄÖ‰ºöÂ∏åÊúõËÆ∞ÂΩïÂÆÉ‰ª¨ÁöÑ‰ΩøÁî®ÊÉÖÂÜµÊàñÊÄßËÉΩË°®Áé∞ÔºåËøô‰∏™Êó∂ÂÄôÂ∞±ÂèØ‰ª•‰ΩøÁî® Proxy ÂÖÖÂΩì‰∏≠Èó¥‰ª∂ÁöÑËßíËâ≤ÔºåËΩªËÄåÊòì‰∏æÂÆûÁé∞Êó•ÂøóÂäüËÉΩÔºö 12345678910111213141516171819202122232425let api = &#123; _apiKey: &#x27;123abc456def&#x27;, getUsers: function() &#123; /* ... */ &#125;, getUser: function(userId) &#123; /* ... */ &#125;, setUser: function(userId, config) &#123; /* ... */ &#125;&#125;;function logMethodAsync(timestamp, method) &#123; setTimeout(function() &#123; console.log(`$&#123;timestamp&#125; - Logging $&#123;method&#125; request asynchronously.`); &#125;, 0)&#125;api = new Proxy(api, &#123; get: function(target, key, proxy) &#123; var value = target[key]; return function(...arguments) &#123; logMethodAsync(new Date(), key); return Reflect.apply(value, target, arguments); &#125;; &#125;&#125;);api.getUsers(); È¢ÑË≠¶ÂíåÊã¶Êà™ ÂÅáËÆæ‰Ω†‰∏çÊÉ≥ËÆ©ÂÖ∂‰ªñÂºÄÂèëËÄÖÂà†Èô§ noDelete Â±ûÊÄßÔºåËøòÊÉ≥ËÆ©Ë∞ÉÁî® oldMethod ÁöÑÂºÄÂèëËÄÖ‰∫ÜËß£Âà∞Ëøô‰∏™ÊñπÊ≥ïÂ∑≤ÁªèË¢´Â∫üÂºÉ‰∫ÜÔºåÊàñËÄÖÂëäËØâÂºÄÂèëËÄÖ‰∏çË¶Å‰øÆÊîπ doNotChange Â±ûÊÄßÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•‰ΩøÁî® Proxy Êù•ÂÆûÁé∞Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142let dataStore = &#123; noDelete: 1235, oldMethod: function() &#123;/*...*/ &#125;, doNotChange: &quot;tried and true&quot;&#125;;const NODELETE = [&#x27;noDelete&#x27;]; const NOCHANGE = [&#x27;doNotChange&#x27;];const DEPRECATED = [&#x27;oldMethod&#x27;]; dataStore = new Proxy(dataStore, &#123; set(target, key, value, proxy) &#123; if (NOCHANGE.includes(key)) &#123; throw Error(`Error! $&#123;key&#125; is immutable.`); &#125; return Reflect.set(target, key, value, proxy); &#125;, deleteProperty(target, key) &#123; if (NODELETE.includes(key)) &#123; throw Error(`Error! $&#123;key&#125; cannot be deleted.`); &#125; return Reflect.deleteProperty(target, key); &#125;, get(target, key, proxy) &#123; if (DEPRECATED.includes(key)) &#123; console.warn(`Warning! $&#123;key&#125; is deprecated.`); &#125; var val = target[key]; return typeof val === &#x27;function&#x27; ? function(...args) &#123; Reflect.apply(target[key], target, args); &#125; : val; &#125;&#125;);// these will throw errors or log warnings, respectivelydataStore.doNotChange = &quot;foo&quot;; delete dataStore.noDelete; dataStore.oldMethod(); ËøáÁï•Êìç‰Ωú Êüê‰∫õÊìç‰Ωú‰ºöÈùûÂ∏∏Âç†Áî®ËµÑÊ∫êÔºåÊØîÂ¶Ç‰º†ËæìÂ§ßÊñá‰ª∂ÔºåËøô‰∏™Êó∂ÂÄôÂ¶ÇÊûúÊñá‰ª∂Â∑≤ÁªèÂú®ÂàÜÂùóÂèëÈÄÅ‰∫ÜÔºåÂ∞±‰∏çÈúÄË¶ÅÂú®ÂØπÊñ∞ÁöÑËØ∑Ê±Ç‰ΩúÂá∫Áõ∏Â∫îÔºàÈùûÁªùÂØπÔºâÔºåËøô‰∏™Êó∂ÂÄôÂ∞±ÂèØ‰ª•‰ΩøÁî® Proxy ÂØπÂΩìËØ∑Ê±ÇËøõË°åÁâπÂæÅÊ£ÄÊµãÔºåÂπ∂Ê†πÊçÆÁâπÂæÅËøáÊª§Âá∫Âì™‰∫õÊòØ‰∏çÈúÄË¶ÅÂìçÂ∫îÁöÑÔºåÂì™‰∫õÊòØÈúÄË¶ÅÂìçÂ∫îÁöÑ„ÄÇ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁÆÄÂçïÊºîÁ§∫‰∫ÜËøáÊª§ÁâπÂæÅÁöÑÊñπÂºèÔºåÂπ∂‰∏çÊòØÂÆåÊï¥‰ª£Á†ÅÔºåÁõ∏‰ø°Â§ßÂÆ∂‰ºöÁêÜËß£ÂÖ∂‰∏≠ÁöÑÂ¶ôÂ§ÑÔºö 12345678910111213141516171819202122let obj = &#123; getGiantFile: function(fileId) &#123;/*...*/ &#125;&#125;;obj = new Proxy(obj, &#123; get(target, key, proxy) &#123; return function(...args) &#123; const id = args[0]; let isEnroute = checkEnroute(id); let isDownloading = checkStatus(id); let cached = getCached(id); if (isEnroute || isDownloading) &#123; return false; &#125; if (cached) &#123; return cached; &#125; return Reflect.apply(target[key], target, args); &#125; &#125;&#125;); ‰ª•‰∏äÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåProxyÂØπ‰∫éÂØπË±°ÁöÑ‰ª£ÁêÜ‰ΩúÁî®ÂæàÂ§ßÔºåÂèØ‰ª•Âè™ÂØπÂ§ñÂ±ïÁ§∫Êàë‰ª¨ÂÖÅËÆ∏Â±ïÁ§∫ÁöÑÂÜÖÂÆπÔºåÊØîÂ¶ÇÊüê‰∫õÂ±ûÊÄß„ÄÅÊüê‰∫õÊñπÊ≥ï‰∫Ü„ÄÇProxysÂ±û‰∫éÂÖÉÁºñÁ®ã‰∫ÜÔºåÂú®Ê°ÜÊû∂ÁºñÂÜô‰∏≠‰ºöÁî®ÔºåÂΩìÊ°ÜÊû∂Â§çÊùÇÂ∫¶ÂæàÈ´òÔºåÂ∞ÅË£ÖÁöÑÂØπË±°‰∏≠ËÇØÂÆöÊúâ‰∏Ä‰∫õÂÜÖÂÆπÊòØ‰Ωú‰∏∫ÁßÅÊúâÁöÑÔºå‰∏çËÉΩÂØπÂ§ñÊö¥Èú≤ÔºåÊâÄ‰ª•‰ΩøÁî®ProxyÂèØ‰ª•‰øùËØÅÂ∞ÅË£ÖÁöÑÂØπË±°ÁöÑÂÆâÂÖ®ÊÄßÂíåÁã¨Á´ãÊÄß„ÄÇ Âç≥‰æø‰∏çÂú®Ê°ÜÊû∂‰∏≠ÔºåÂú®Êàë‰ª¨Âπ≥Êó∂ÁöÑÂºÄÂèë‰ªªÂä°‰∏≠‰πüÂèØ‰ª•Áî®„ÄÇÊØîÂ¶ÇÂ∞ÅË£ÖÊï∞ÊçÆÂ∫ìORMÔºå‰ª£ÁêÜÁΩëÁªúËØ∑Ê±ÇÁ≠âÁ≠â„ÄÇ ÊÄùËÄÉÔºöProxyÂíåTypeScriptÁöÑÂÖ≥ËÅîÂíåÂå∫Âà´ÂÉèÊòØset()Êã¶Êà™ÔºåÊàë‰ª¨ÂèØ‰ª•Êã¶Êà™ÂÄºÁöÑÁ±ªÂûãÊòØÂê¶Á¨¶ÂêàÊàë‰ª¨ÁöÑË¶ÅÊ±ÇÔºåÊØîÂ¶ÇÂøÖÈ°ªÊòØÊï∞ÂÄºÔºåÊâç‰ºöset()Êìç‰ΩúÊàêÂäü„ÄÇProxyÂíåTypeScriptÂêåÊ†∑ÈÉΩÂèØ‰ª•ÂÅöÂà∞„ÄÇÈÇ£‰ªñ‰ª¨ÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÂë¢ÔºüProxyÊòØÁ±ª‰ºº‚ÄúÂÖÉÁºñÁ®ã‚ÄùÔºåËÄåTypeScriptÊòØJavaScriptÁ±ªÂûãÁöÑË∂ÖÈõÜÔºåÂÆÉÂèØ‰ª•ÁºñËØëÊàêJS„ÄÇ‰ªñ‰ª¨Ëß£ÂÜ≥ÈóÆÈ¢òÁöÑÂ±ÇÈù¢‰∏ç‰∏ÄÊ†∑ÔºåTypeScriptÊòØÈùôÊÄÅÁ±ªÂûãÊ£ÄÊü•ÔºåÂú®‰ª£Á†ÅÁºñËØëÈò∂ÊÆµÂ∞±ÂèØ‰ª•Ê£ÄÊµãÂá∫Êù•ÔºåIDEÂèØ‰ª•‰∏∫Êàë‰ª¨Êä•ÈîôÔºõËÄåProxyÂèØ‰ª•Êèê‰æõÂä®ÊÄÅÁ±ªÂûãÊ£ÄÊü•ÔºåÂú®ËøêË°åÊó∂‰πüËÉΩÂÅöÂà∞Á±ªÂûãÊ£ÄÊü•„ÄÇ ReflectReflect ÊòØ‰∏Ä‰∏™ÂÜÖÁΩÆÁöÑÂØπË±°ÔºåÂÆÉÊèê‰æõÊã¶Êà™ JavaScript Êìç‰ΩúÁöÑÊñπÊ≥ï„ÄÇËøô‰∫õÊñπÊ≥ï‰∏éproxy handlersÁöÑÊñπÊ≥ïÁõ∏Âêå„ÄÇReflect‰∏çÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÂØπË±°ÔºåÂõ†Ê≠§ÂÆÉÊòØ‰∏çÂèØÊûÑÈÄ†ÁöÑ„ÄÇ ÊèèËø∞‰∏éÂ§ßÂ§öÊï∞ÂÖ®Â±ÄÂØπË±°‰∏çÂêåÔºåReflect‰∏çÊòØ‰∏Ä‰∏™ÊûÑÈÄ†ÂáΩÊï∞„ÄÇ‰Ω†‰∏çËÉΩÂ∞ÜÂÖ∂‰∏é‰∏Ä‰∏™newËøêÁÆóÁ¨¶‰∏ÄËµ∑‰ΩøÁî®ÔºåÊàñËÄÖÂ∞ÜReflectÂØπË±°‰Ωú‰∏∫‰∏Ä‰∏™ÂáΩÊï∞Êù•Ë∞ÉÁî®„ÄÇReflectÁöÑÊâÄÊúâÂ±ûÊÄßÂíåÊñπÊ≥ïÈÉΩÊòØÈùôÊÄÅÁöÑÔºàÂ∞±ÂÉèMathÂØπË±°Ôºâ„ÄÇ ÊñπÊ≥ïReflectÊòØÂÜÖÁΩÆÂØπË±°ÔºåÂú®ÊµèËßàÂô®ÊéßÂà∂Âè∞‰∏≠ËæìÂÖ•ReflectÊü•ÁúãÔºö ReflectÂØπË±°Êèê‰æõ‰ª•‰∏ãÈùôÊÄÅÂáΩÊï∞ÔºåÂÆÉ‰ª¨ÂÖ∑Êúâ‰∏éÂ§ÑÁêÜÂô®ÂØπË±°Ôºà‰πüÂ∞±ÊòØProxy handleÔºâÊñπÊ≥ïÁõ∏ÂêåÁöÑÂêçÁß∞„ÄÇËøô‰∫õÊñπÊ≥ï‰∏≠ÁöÑ‰∏Ä‰∫õ‰∏é Object ‰∏äÁöÑÂØπÂ∫îÊñπÊ≥ïÁõ∏Âêå„ÄÇ Reflect.apply()ÂØπ‰∏Ä‰∏™ÂáΩÊï∞ËøõË°åË∞ÉÁî®Êìç‰ΩúÔºåÂêåÊó∂ÂèØ‰ª•‰º†ÂÖ•‰∏Ä‰∏™Êï∞ÁªÑ‰Ωú‰∏∫Ë∞ÉÁî®ÂèÇÊï∞„ÄÇÂíå Function.prototype.apply() ÂäüËÉΩÁ±ª‰ºº„ÄÇ Reflect.construct()ÂØπÊûÑÈÄ†ÂáΩÊï∞ËøõË°å new Êìç‰ΩúÔºåÁõ∏ÂΩì‰∫éÊâßË°å new target(‚Ä¶args)„ÄÇ Reflect.defineProperty()Âíå Object.defineProperty() Á±ª‰ºº„ÄÇ Reflect.deleteProperty()‰Ωú‰∏∫ÂáΩÊï∞ÁöÑdeleteÊìç‰ΩúÁ¨¶ÔºåÁõ∏ÂΩì‰∫éÊâßË°å delete target[name]„ÄÇ Reflect.enumerate()ËØ•ÊñπÊ≥ï‰ºöËøîÂõû‰∏Ä‰∏™ÂåÖÂê´ÊúâÁõÆÊ†áÂØπË±°Ë∫´‰∏äÊâÄÊúâÂèØÊûö‰∏æÁöÑËá™Ë∫´Â≠óÁ¨¶‰∏≤Â±ûÊÄß‰ª•ÂèäÁªßÊâøÂ≠óÁ¨¶‰∏≤Â±ûÊÄßÁöÑËø≠‰ª£Âô®Ôºåfor‚Ä¶in Êìç‰ΩúÈÅçÂéÜÂà∞ÁöÑÊ≠£ÊòØËøô‰∫õÂ±ûÊÄß„ÄÇ Reflect.get()Ëé∑ÂèñÂØπË±°Ë∫´‰∏äÊüê‰∏™Â±ûÊÄßÁöÑÂÄºÔºåÁ±ª‰ºº‰∫é target[name]„ÄÇ Reflect.getOwnPropertyDescriptor()Á±ª‰ºº‰∫é Object.getOwnPropertyDescriptor()„ÄÇReflect.getPrototypeOf()Á±ª‰ºº‰∫é Object.getPrototypeOf()„ÄÇReflect.has()Âà§Êñ≠‰∏Ä‰∏™ÂØπË±°ÊòØÂê¶Â≠òÂú®Êüê‰∏™Â±ûÊÄßÔºåÂíå in ËøêÁÆóÁ¨¶ ÁöÑÂäüËÉΩÂÆåÂÖ®Áõ∏Âêå„ÄÇReflect.isExtensible()Á±ª‰ºº‰∫é Object.isExtensible().Reflect.ownKeys()ËøîÂõû‰∏Ä‰∏™ÂåÖÂê´ÊâÄÊúâËá™Ë∫´Â±ûÊÄßÔºà‰∏çÂåÖÂê´ÁªßÊâøÂ±ûÊÄßÔºâÁöÑÊï∞ÁªÑ„ÄÇ(Á±ª‰ºº‰∫é Object.keys(), ‰ΩÜ‰∏ç‰ºöÂèóenumerableÂΩ±Âìç).Reflect.preventExtensions()Á±ª‰ºº‰∫é Object.preventExtensions()„ÄÇËøîÂõû‰∏Ä‰∏™Boolean„ÄÇReflect.set()Â∞ÜÂÄºÂàÜÈÖçÁªôÂ±ûÊÄßÁöÑÂáΩÊï∞„ÄÇËøîÂõû‰∏Ä‰∏™BooleanÔºåÂ¶ÇÊûúÊõ¥Êñ∞ÊàêÂäüÔºåÂàôËøîÂõûtrue„ÄÇReflect.setPrototypeOf()Á±ª‰ºº‰∫é Object.setPrototypeOf()„ÄÇ ÂèÇËÄÉÈìæÊé•Ôºö https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect https://medium.com/@SylvainPV/type-safety-in-javascript-using-es6-proxies-eee8fbbbd600","categories":[],"tags":[{"name":"proxy","slug":"proxy","permalink":"https://justsso1.github.io/tags/proxy/"}]},{"title":"ES6 ModulesÊ®°ÂùóÁ≥ªÁªü","slug":"es6-ES ModulesÊ®°ÂùóÁ≥ªÁªü","date":"2020-04-25T16:00:00.000Z","updated":"2024-10-12T08:40:56.541Z","comments":true,"path":"2020/04/26/es6-ES ModulesÊ®°ÂùóÁ≥ªÁªü/","permalink":"https://justsso1.github.io/2020/04/26/es6-ES%20Modules%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"ES6 ModuleÂ∞ÜÊØè‰∏™Êñá‰ª∂‰Ωú‰∏∫‰∏Ä‰∏™Ê®°ÂùóÔºåÊØè‰∏™Ê®°ÂùóÊã•ÊúâËá™Ë∫´ÁöÑ‰ΩúÁî®Âüü„ÄÇES6 Module ‰ºöËá™Âä®ÈááÁî®‰∏•Ê†ºÊ®°ÂºèÔºå ÂØºÂá∫ exportÂú®ES6 Module‰∏≠‰ΩøÁî®exportÂëΩ‰ª§Êù•ÂØºÂá∫Ê®°Âùó„ÄÇexportÊúâ‰∏§ÁßçÊñπÂºèÔºö ÂëΩÂêçÂØºÂá∫ÈªòËÆ§ÂØºÂá∫‰∏Ä‰∏™Ê®°ÂùóÂèØ‰ª•ÊúâÂ§ö‰∏™ÂëΩÂêçÂØºÂá∫„ÄÇÂÆÉÊúâ‰∏§Áßç‰∏çÂêåÁöÑÂÜôÊ≥ïÔºö Javascript &#x2F;&#x2F;ÂÜôÊ≥ï‰∏Äexport const name &#x3D; ‚Äòjack‚Äô;export const add &#x3D; function(a,b){return a+b} &#x2F;&#x2F;ÂÜôÊ≥ï‰∫åconst name &#x3D; ‚Äòjack‚Äô;const add &#x3D; (a,b) &#x3D;&gt; a+bexport { name, add}Âú®‰ΩøÁî®ÂëΩÂêçÂØºÂá∫Êó∂ÔºåÂèØ‰ª•ÈÄöËøáasÂÖ≥ÈîÆÂ≠óÂØπÂèòÈáèÈáçÂëΩÂêç„ÄÇ Javascriptconst name &#x3D; ‚Äòjack‚Äô;const add &#x3D; (a,b) &#x3D;&gt; a+bexport { name, add as getSum}Ê®°ÂùóÁöÑÈªòËÆ§ÂØºÂá∫Âè™ËÉΩÊúâ‰∏Ä‰∏™„ÄÇÂ¶ÇÔºö Javascriptexport default { name: ‚Äòjack‚Äô, add: function(a,b) { return a+b }}Êàë‰ª¨ÂèØ‰ª•Â∞Üexport defaultÁêÜËß£‰∏∫ÂØπÂ§ñËæìÂá∫‰∫Ü‰∏Ä‰∏™Âêç‰∏∫defaultÁöÑÂèòÈáèÔºåÂõ†Ê≠§‰∏çÈúÄË¶ÅÂÉèÂëΩÂêçÂØºÂá∫‰∏ÄÊ†∑ËøõË°åÂèòÈáèÂ£∞ÊòéÔºåÁõ¥Êé•ÂØºÂá∫ÂÄºÂç≥ÂèØ„ÄÇ Javascript&#x2F;&#x2F; ÂØºÂá∫Â≠óÁ¨¶‰∏≤export default ‚ÄòThis is lal.js‚Äô &#x2F;&#x2F; ÂØºÂá∫ classexport default class{..} &#x2F;&#x2F;ÂØºÂá∫ÂåøÂêçÂáΩÊï∞export default function(){..}ÂØºÂÖ•ÂØºÂÖ•ÂØπÂ∫îÁùÄÂØºÂá∫Ôºå‰πüÊúâ‰∏§ÁßçÊñπÂºè„ÄÇ ÂØºÂÖ•Â∏¶ÊúâÂëΩÂêçÂØºÂá∫ÁöÑÊ®°ÂùóJavascript&#x2F;&#x2F;lal.js const name &#x3D; ‚Äòjack‚Äô;const add &#x3D; (a,b) &#x3D;&gt; a+bexport { name, add}import {name, add} from ‚Äò.&#x2F;lal.js‚Äô;Âä†ËΩΩÂ∏¶ÊúâÂëΩÂêçÂØºÂá∫ÁöÑÊ®°ÂùóÊó∂ÔºåimportÂêéÈù¢Ë¶ÅË∑ü‰∏ÄÂ†ÜÂ§ßÊã¨Âè∑Êù•Â∞ÜÂØºÂÖ•ÁöÑÂèòÈáèÂêçÂåÖË£πËµ∑Êù•ÔºåÂπ∂‰∏îËøô‰∫õÂèòÈáèÂêçÈúÄË¶Å‰∏éÂØºÂá∫ÁöÑÂèòÈáèÂêçÂÆåÂÖ®‰∏ÄÁõ¥„ÄÇÂØºÂÖ•ÂèòÈáèÁöÑÊïàÊûúÁõ∏ÂΩì‰∫éÂú®ÂΩìÂâç‰ΩúÁî®Âüü‰∏ãÂ£∞Êòé‰∫ÜËøô‰∫õÂèòÈáèÔºàname ÂíåaddÔºâ,Âπ∂‰∏î‰∏çÂèØÂØπÂÖ∂ËøõË°åÊõ¥ÊîπÔºå‰πüÂ∞±ÊòØÊâÄÊúâÂØºÂÖ•ÁöÑÂèòÈáèÈÉΩÊòØÂè™ËØªÁöÑ„ÄÇ ‰∏éÂëΩÂêçÂØºÂá∫Á±ª‰ººÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáasÂÖ≥ÈîÆÂ≠óÂèØ‰ª•ÂØπÂØºÂÖ•ÁöÑÂèòÈáèÈáçÂëΩÂêç„ÄÇ Javascriptimport {name, add as Sum} from ‚Äò.&#x2F;lal.js‚ÄôSum(2,3)Êï¥‰ΩìÂØºÂÖ• import * as A from ‚Äò.&#x2F;a.js‚Äô ÂØπ‰∫éÈªòËÆ§ÂØºÂá∫ÁöÑÂØºÂÖ•Javascript&#x2F;&#x2F;lal.jsexport default { name: ‚Äòjack‚Äô, add: function(a,b) { return a+b }} import A from ‚Äò.&#x2F;lal,js‚ÄôA.add(2,3)ÂØπ‰∫éÈªòËÆ§ÂØºÂá∫Êù•ËØ¥ÔºåimportÂêéÈù¢Áõ¥Êé•Ë∑üÂèòÈáèÂêçÔºåÂπ∂‰∏îËøô‰∏™ÂêçÂ≠óÂèØ‰ª•Ëá™Áî±ÊåáÂÆöÔºàÔºâÔºåÂÆÉÊåá‰ª£‰∫Ülal.js‰∏≠ÈªòËÆ§ÂØºÂá∫ÁöÑ„ÄÇ‰ªéÂéüÁêÜ‰∏äÂèØ‰ª•ËøôÊ†∑ÂéªÂ§ÑÁêÜÔºö","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[{"name":"Ê®°ÂùóÂåñ","slug":"Ê®°ÂùóÂåñ","permalink":"https://justsso1.github.io/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/"}]},{"title":"ES6ËØ≠Ê≥ïÁ≥ñ‰πãÁÆ≠Â§¥ÂáΩÊï∞","slug":"ES6ËØ≠Ê≥ïÁ≥ñ‰πãÁÆ≠Â§¥ÂáΩÊï∞","date":"2020-04-18T16:00:00.000Z","updated":"2024-10-12T08:40:56.532Z","comments":true,"path":"2020/04/19/ES6ËØ≠Ê≥ïÁ≥ñ‰πãÁÆ≠Â§¥ÂáΩÊï∞/","permalink":"https://justsso1.github.io/2020/04/19/ES6%E8%AF%AD%E6%B3%95%E7%B3%96%E4%B9%8B%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/","excerpt":"","text":"ÊôÆÈÄöÂáΩÊï∞‰∏≠thisÁöÑÁªëÂÆöÊòØÂæàÂ§çÊùÇÂ§öÂèòÁöÑÔºåES6ÁÆ≠Â§¥ÂáΩÊï∞&#x3D;&gt;‰ª•ÁâπÂÆöÁöÑÊñπÂºèÊîπÂèòthisÁöÑË°å‰∏∫ÁâπÊÄßÔºåËß£ÂÜ≥thisÁõ∏ÂÖ≥ÁºñÁ†ÅÁöÑ‰∏Ä‰∏™ÁâπÊÆäÂèàÂ∏∏ËßÅÁöÑÁóõÁÇπ„ÄÇ ÁÆ≠Â§¥ÂáΩÊï∞‰πü‰∏çÊÄªÊòØÊØîÊôÆÈÄöÂáΩÊï∞Â•ΩÔºåÂΩìËøô‰∏™ÂáΩÊï∞Ë∂äÈïøÔºå&#x3D;&gt;Â∏¶Êù•ÁöÑÂ•ΩÂ§ÑË∂äÂ∞èÔºåËøô‰∏™ÂáΩÊï∞Ë∂äÁü≠Ôºå&#x3D;&gt;Â∏¶Êù•ÁöÑÂ•ΩÂ§ÑË∂äÂ§ß„ÄÇÊâÄ‰ª•Âè™Âú®Á°ÆÂÆûÈúÄË¶ÅÁÆÄÁü≠ÁöÑÂú®Á∫øÂáΩÊï∞Ë°®ËææÂºèÁöÑÊó∂ÂÄôÊâçÁî®&#x3D;&gt;ÔºåËÄåÂØπ‰∫éÈÇ£‰∫õ‰∏ÄËà¨ÈïøÂ∫¶ÁöÑÂáΩÊï∞ÂàôÊó†ÈúÄÊîπÂèò„ÄÇ 123456789var controller = &#123; makeRequest: function()&#123; var self = this; btn.addEventListener( &quot;click&quot;, function()&#123; // .. self.makeRequest(); &#125;, false ); &#125; &#125;; Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®var self &#x3D; thisËøô‰∏ÄHackÔºåÁÑ∂Âêé‰ΩøÁî®self.makeRequestÔºåÂõ†‰∏∫Êàë‰ª¨‰º†ÂÖ•addEVentListenerÁöÑÂõûË∞ÉÂáΩÊï∞ÂÜÖÈÉ®ÔºåthisÁªëÂÆöÂíåmakeRequest()Êú¨Ë∫´ÁöÑthisÁªëÂÆö‰∏ç‰∏ÄÊ†∑„ÄÇÊôÆÈÄöÂáΩÊï∞‰∏≠ÁöÑthisÁªëÂÆöÊòØÂä®ÊÄÅÁöÑÔºåÊàë‰ª¨ÈúÄË¶ÅÈÄöËøáselfÂèòÈáè‰æùËµñËØçÊ≥ï‰ΩúÁî®ÂüüÁöÑÂèØÈ¢ÑÊµãÊÄß„ÄÇ ÁÆ≠Â§¥ÂáΩÊï∞‰∏≠ÁöÑthisÁªëÂÆö‰∏çÊòØÂä®ÊÄÅÁöÑÔºåËÄåÊòØËØçÊ≥ïÁöÑ„ÄÇ 123456789var controller = &#123; makeRequest: function()&#123; btn.addEventListener( &quot;click&quot;, () =&gt; &#123; // .. this.makeRequest(); &#125;, false ); &#125; &#125;; Êàë‰ª¨‰ΩøÁî®=&gt;ÁÆ≠Â§¥ÂáΩÊï∞Êõø‰ª£ÊôÆÈÄöÂáΩÊï∞ÔºåÁÆ≠Â§¥ÂáΩÊï∞ÂõûË∞É‰∏≠ÁöÑËØçÊ≥ïthisÂíåmakeRequest()‰∏≠ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ&#x3D;&gt;Â∞±ÊòØvar self &#x3D; thisÁöÑËØçÊ≥ïÊõø‰ª£ÂΩ¢Âºè„ÄÇ Êàë‰ª¨‰ΩøÁî®BabelËΩ¨Êç¢‰∏Ä‰∏ãÔºö ÂèëÁé∞ÔºåÂú®‰ΩøÁî®&#x3D;&gt;‰πãÂâçÔºå‰πüÂ∞±ÊòØÁÆ≠Â§¥ÂáΩÊï∞ÁöÑÂ§ñÂ±ÇÔºåÂÖà‰ΩøÁî®var self &#x3D; this‰øùÂ≠ò‰∫Üthis ÂÜçÁúã‰∏Ä‰∏™‰æãÂ≠êÔºö 12345678910var controller = &#123; makeRequest: () =&gt; &#123; // .. this.helper(); &#125;, helper: () =&gt; &#123; // .. &#125; &#125;; controller.makeRequest(); Â∞ΩÁÆ°Êàë‰ª¨‰ª• controller.makeRequest(..) ÁöÑÂΩ¢ÂºèË∞ÉÁî®Ôºåthis.helper ÂºïÁî®ËøòÊòØ‰ºöÂ§±Ë¥•ÔºåÂõ†‰∏∫ËøôÈáåÁöÑ this Âπ∂‰∏çÂÉèÂπ≥Â∏∏‰∏ÄÊ†∑ÊåáÂêë controller„ÄÇÈÇ£‰πàÂÆÉÊåáÂêëÂì™ÈáåÂë¢ÔºüÂÆÉÊòØ‰ªéÂåÖÂõ¥ÁöÑ‰ΩúÁî®Âüü‰∏≠ËØçÊ≥ïÁªßÊâøËÄåÊù•ÁöÑ this„ÄÇÂú®ÂâçÈù¢ÁöÑ‰ª£Á†Å‰∏≠‰πüÂ∞±ÊòØÂÖ®Â±Ä‰ΩúÁî®ÂüüÔºåÂÖ∂‰∏≠ this ÊåáÂêëÈÇ£‰∏™ÂÖ®Â±ÄÂØπË±°„ÄÇ ÁÆ≠Â§¥ÂáΩÊï∞Ê≤°ÊúâËá™Â∑±ÁöÑthisÔºåÂè™ÊúâËØçÊ≥ïthisÔºåÁªßÊâøËá™Áà∂Â±Ç ÁÆ≠Â§¥ÂáΩÊï∞Ê≤°ÊúâËá™Â∑±ÁöÑargumentsÊï∞ÁªÑÔºåÂè™ÊúâËØçÊ≥ïargumentsÔºåÁªßÊâøËá™Áà∂Â±Ç ÁÆ≠Â§¥ÂáΩÊï∞‰πüÊ≤°Êúâsuper ÁÆ≠Â§¥ÂáΩÊï∞‰πüÊ≤°Êúânew.target ‰ΩúÁî®ÂüüÂíå‰ΩúÁî®ÂüüÈìæ ‰∏ÄÂÆöË¶ÅËÆ∞‰ΩèÁÆ≠Â§¥ÂáΩÊï∞ÁöÑÁâπÁÇπÔºåÂú®ÈÄÇÂΩìÁöÑÂú∞Êñπ‰ΩøÁî®„ÄÇÂ¶ÇÊûúÊòØÂÜôÂØπË±°ÁöÑÊñπÊ≥ïÔºåË¶Å‰ΩøÁî®ÊôÆÈÄöÂáΩÊï∞ÔºåÂõ†‰∏∫ÊôÆÈÄöÂáΩÊï∞‰∏≠ÊúâthisÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊåáÂêëËØ•ÂØπË±°ÔºåËÄåÁÆ≠Â§¥ÂáΩÊï∞Ê≤°Êúâthis,ÂàôËÆøÈóÆ‰∏çÂà∞ÂØπË±°ÁöÑÂÖ∂‰ªñÂ±ûÊÄß‰∫Ü„ÄÇ Â¶ÇÊûúËøîÂõûÂÄºÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑË°®ËææÂºèÔºå‰∏îËøô‰∏™ÂáΩÊï∞ÂÜÖÈÉ®Ê≤°ÊúâthisÁöÑÂºïÁî®Ôºå‰∏îÊ≤°ÊúâËá™Ë∫´ÂºïÁî®ÔºàÈÄíÂΩí„ÄÅÁªëÂÆö&#x2F;Ëß£ÁªëÂÆöÔºå‰∏î‰∏ç‰ºöË¶ÅÊ±ÇÂáΩÊï∞ÊâßË°åËøô‰∫õÔºåÂèØ‰ª•‰ΩøÁî®ÁÆ≠Â§¥ÂáΩÊï∞„ÄÇ Â¶ÇÊûúÂáΩÊï∞ÂÜÖÈÉ®ÊúâÂæàÂ§öËØ≠Âè•ÔºåËøòÊòØË¶ÅÁî®ÊôÆÈÄöÂáΩÊï∞Ôºå‰øùËØÅÂèØËØªÊÄß„ÄÇ","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"ÊàëÂØπÊ®°ÊùøÂ≠óÁ¨¶‰∏≤‰∏≠Ê†áÁ≠æÊ®°ÊùøÁöÑÊÄùËÄÉ","slug":"ÊàëÂØπÊ®°ÁâàÂ≠óÁ¨¶‰∏≤‰∏≠Ê†áÁ≠æÊ®°ÊùøÁöÑÊÄùËÄÉ","date":"2020-04-16T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/04/17/ÊàëÂØπÊ®°ÁâàÂ≠óÁ¨¶‰∏≤‰∏≠Ê†áÁ≠æÊ®°ÊùøÁöÑÊÄùËÄÉ/","permalink":"https://justsso1.github.io/2020/04/17/%E6%88%91%E5%AF%B9%E6%A8%A1%E7%89%88%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E6%A0%87%E7%AD%BE%E6%A8%A1%E6%9D%BF%E7%9A%84%E6%80%9D%E8%80%83/","excerpt":"","text":"Ê®°ÊùøÂ≠óÁ¨¶‰∏≤Ê®°ÊùøÂ≠óÁ¨¶‰∏≤ÁöÑÂá†‰∏™ÁâπÊÄßÔºö ÂèØ‰ª•ÂµåÂÖ•ÂèòÈáèÔºåÊàñËÄÖË°®ËææÂºè ‰ºö‰øùÁïôÂ§ö‰∏™Á©∫Ê†º„ÄÅÊç¢Ë°å„ÄÅÁº©Ëøõ 12345678910111213141516171819202122232425262728//ÂµåÂÖ•ÂèòÈáèvar name = &quot;Kyle&quot;; var greeting = `Hello $&#123;name&#125;!`; console.log( greeting ); // &quot;Hello Kyle!&quot;//Â§öË°åvar text = `Now is the time for all good men to come to the aid of their country!`; console.log( text ); // Now is the time for all good men // to come to the aid of their // country!var text = //ÊèíÂÖ•Ë°®ËææÂºèfunction upper(s) &#123; return s.toUpperCase(); &#125; var who = &quot;reader&quot;; var text = `A very $&#123;upper( &quot;warm&quot; )&#125; welcome to all of you $&#123;upper( `$&#123;who&#125;s` )&#125;!`; console.log( text ); // A very WARM welcome // to all of you READERS! Ê†áÁ≠æÊ®°Êùø Ê®°ÊùøÂ≠óÁ¨¶‰∏≤ËøòÂèØ‰ª•Ë∑üÂú®‰∏Ä‰∏™ÂáΩÊï∞ÂêéÈù¢ÔºåËØ•ÂáΩÊï∞Â∞ÜË¢´Ë∞ÉÁî®Êù•Â§ÑÁêÜËøô‰∏™Ê®°ÊùøÂ≠óÁ¨¶‰∏≤„ÄÇËøôË¢´Áß∞‰∏∫‚ÄùÊ†áÁ≠æÊ®°Êùø‚ÄùÂäüËÉΩ„ÄÇ 123alert`123`// Á≠âÂêå‰∫éalert(123) Â¶ÇÊûúÊ®°ÊùøÂ≠óÁ¨¶‰∏≤‰∏≠Âê´ÊúâÂèòÈáèÔºåÊ†áÁ≠æÊ®°Êùø‰ºöËøõË°åÁâπÊÆäÂ§ÑÁêÜÔºåÂÆÉ‰ºöÊ†πÊçÆÂµåÂÖ•ÁöÑÂèòÈáèÔºåÊääÊ®°ÊùøÂ≠óÁ¨¶‰∏≤ÊãÜÂºÄ„ÄÇÊôÆÈÄöÂ≠óÁ¨¶‰∏≤ÁªÑÊàêÊï∞ÁªÑÂÅö‰ΩçÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºåÊèíÂÖ•ÁöÑÂèòÈáè‰æùÊ¨°‰Ωú‰∏∫Á¨¨‰∫å‰∏™„ÄÅÁ¨¨‰∏â‰∏™‚Ä¶ÂèòÈáè„ÄÇ 1234567891011121314151617var a = 5;var b = 10;tag`Hello $&#123; a + b &#125; world $&#123; a * b &#125;`;// Á≠âÂêå‰∫étag([&#x27;Hello &#x27;, &#x27; world &#x27;, &#x27;&#x27;], 15, 50);function tag(stringArr, value1, value2)&#123; // ...&#125;// Á≠âÂêå‰∫éfunction tag(stringArr, ...values)&#123; // ...&#125; tagÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåËØ•Êï∞ÁªÑÁöÑÊàêÂëòÊòØÊ®°ÊùøÂ≠óÁ¨¶‰∏≤‰∏≠ÈÇ£‰∫õÊ≤°ÊúâÂèòÈáèÊõøÊç¢ÁöÑÈÉ®ÂàÜÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂèòÈáèÊõøÊç¢Âè™ÂèëÁîüÂú®Êï∞ÁªÑÁöÑÁ¨¨‰∏Ä‰∏™ÊàêÂëò‰∏éÁ¨¨‰∫å‰∏™ÊàêÂëò‰πãÈó¥„ÄÅÁ¨¨‰∫å‰∏™ÊàêÂëò‰∏éÁ¨¨‰∏â‰∏™ÊàêÂëò‰πãÈó¥Ôºå‰ª•Ê≠§Á±ªÊé®„ÄÇ tagÂáΩÊï∞ÁöÑÂÖ∂‰ªñÂèÇÊï∞ÔºåÈÉΩÊòØÊ®°ÊùøÂ≠óÁ¨¶‰∏≤ÂêÑ‰∏™ÂèòÈáèË¢´ÊõøÊç¢ÂêéÁöÑÂÄº„ÄÇÁî±‰∫éÊú¨‰æã‰∏≠ÔºåÊ®°ÊùøÂ≠óÁ¨¶‰∏≤Âê´Êúâ‰∏§‰∏™ÂèòÈáèÔºåÂõ†Ê≠§tag‰ºöÊé•ÂèóÂà∞value1Âíåvalue2‰∏§‰∏™ÂèÇÊï∞„ÄÇ ‰∏∫‰ªÄ‰πàË¶ÅÊúâÊ†áÁ≠æÊ®°ÊùøÔºüÊàëÁ¨¨‰∏ÄÊ¨°ÁúãÂà∞Ê†áÁ≠æÊ®°ÊùøÁöÑÊó∂ÂÄôÔºå‰∏çÁ¶ÅÂú®ÊÉ≥‰∏∫‰ªÄ‰πàË¶ÅÊúâÊ†áÁ≠æÊ®°ÊùøÔºåÂÆÉÊúâ‰ªÄ‰πàÊôÆÈÄöÂáΩÊï∞‰∏çËÉΩÊõø‰ª£ÁöÑÂú∞ÊñπÂë¢ÔºüÂ¶ÇÊûúÊ≤°Êúâ‰∏çÂèØÊõø‰ª£ÁöÑÂú∞ÊñπÔºåÈÇ£‰∏∫‰ªÄ‰πàËøòË¶ÅÂàõÈÄ†ÂÆÉÂë¢ÔºüÁ≠îÊ°àÊòØÔºöÊ†áÁ≠æÊ®°ÊùøÁ°ÆÂÆûÊúâÂÆÉÂ≠òÂú®ÁöÑÊÑè‰πâÔºå‰πüÊúâÊôÆÈÄöÂáΩÊï∞Êó†Ê≥ïÊõø‰ª£ÂÆÉÁöÑÂú∞Êñπ„ÄÇ 12const logArgs = (...args) =&gt; console.log(...args) ÂÖàÁî®ÊôÆÈÄöÂáΩÊï∞ÂΩ¢ÂºèË∞ÉÁî® 12logArgs(&#x27;a&#x27;, &#x27;b&#x27;)// -&gt; a b ÂÜçÁî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊ®°ÊùøÂ≠óÁ¨¶‰∏≤ËØïËØïÔºö 12logArgs``// -&gt; [&quot;&quot;, raw: Array(1)] ‰∏äÈù¢ËæìÂá∫‰∫Ü‰∏Ä‰∏™Á©∫Êï∞ÁªÑÔºåÁÑ∂Âêé‰º†ÂÖ•‰∏Ä‰∏™ÊúâÂÄºÁöÑÊ®°ÊùøÂ≠óÁ¨¶‰∏≤Ôºö 12logArgs`I like pizza`// -&gt; [&quot;I like pizza&quot;] Áé∞Âú®ÔºåËøõ‰∏ÄÊ≠•ÁΩëÊ®°ÊùøÂ≠óÁ¨¶‰∏≤‰∏≠‰º†ÂÖ•ÂèòÈáè 123456789101112const favoriteFood = &#x27;pizza&#x27;//ÂΩì‰ΩúÊôÆÈÄöÂáΩÊï∞Ë∞ÉÁî®ÔºåÁõ¥Êé•Âá∫ÂÖ•ÊãºÊé•ÁöÑÂ≠óÁ¨¶‰∏≤logArgs(`I like $&#123;favoriteFood&#125;.`)// -&gt; I like pizza.//‰ΩøÁî®Ê†áÁ≠æÊ®°ÊùøÔºå‰ºöËæìÂá∫Â§ÑÁêÜÂêéÁöÑÂèÇÊï∞const favoriteFood = &#x27;pizza&#x27;logArgs`I like $&#123;favoriteFood&#125;.`// -&gt; [&quot;I like &quot;, &quot;.&quot;] &quot;pizza&quot; ÂèòÊç¢ËøáÁ®ãÊòØËøôÊ†∑ÁöÑÔºö ÂΩìÊàë‰ª¨‰º†ÂÖ•Â§ö‰∏™ÂèòÈáèÊó∂ÔºåÊØè‰∏Ä‰∏™ÊèíÂÖ•ÁöÑÂèòÈáèÈÉΩ‰Ωú‰∏∫‰∏ã‰∏Ä‰∏™ÂèÇÊï∞‰∫Ü 12345const favoriteFood = &#x27;pizza&#x27;const favoriteDrink = &#x27;obi&#x27;logArgs`I like $&#123;favoriteFood&#125; and $&#123;favoriteDrink&#125;.`// -&gt; [&quot;I like &quot;, &quot; and &quot;, &quot;.&quot;] &quot;pizza&quot; &quot;obi&quot; ËøôÊ†∑ÁúãÊù•ÔºåÊ†áÁ≠æÊ®°ÁâàÊúâ‰ªÄ‰πàÂ§ßÁöÑ‰ΩúÁî®Âë¢Ôºü 1234567//ÊôÆÈÄöÂáΩÊï∞logArgs(`Test $&#123;() =&gt; console.log(&#x27;test&#x27;)&#125;`)// -&gt; Test () =&gt; console.log(&#x27;test&#x27;)console.log(() =&gt; console.log(&#x27;test&#x27;))// () =&gt; console.log(&#x27;test&#x27;) ÊôÆÈÄöÂáΩÊï∞ÔºåÈÅáÂà∞ÂèòÈáèÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÊòØÔºå‰ºöÊääÂáΩÊï∞ÂèòÊàêÂ≠óÁ¨¶‰∏≤ÂΩ¢ÂºèÁöÑÔºåËÄåÊ≤°ÊúâÂà´ÁöÑÂ§ÑÁêÜÔºåÁúãÁúãÊ†áÁ≠æÊ®°ÊùøÁöÑÁâπÊÆä‰πãÂ§ÑÔºåÊ®°ÊùøÂ≠óÁ¨¶‰∏≤‰∏≠ÂµåÂÖ•ÂèòÈáè 123logArgs`Test $&#123;() =&gt; console.log(&#x27;test&#x27;)&#125;`// -&gt; [&quot;Test&quot;, &quot;&quot;] () =&gt; console.log(&#x27;test&#x27;) ÂèØ‰ª•ÁúãÂá∫ÔºåÊ†áÁ≠æÊ®°ÊùøÊääÊ®°ÊùøÂ≠óÁ¨¶‰∏≤‰∏≠ÁöÑÂèòÈáèËß£Êûê‰∫ÜÂá∫Êù•ÔºåÂáΩÊï∞ËøòÊòØ‰∏Ä‰∏™ÂáΩÊï∞‰∏ç‰ºöÂèòÊàêÂ≠óÁ¨¶‰∏≤„ÄÇÊàë‰ª¨ÊúâËÉΩÂäõÊãøÂà∞ÂáΩÊï∞ÔºåÈÇ£‰πàÊàë‰ª¨‰πüÂèØ‰ª•ÊâßË°åËøô‰∏™ÂáΩÊï∞ 12345const execFuncArgs = (...args) =&gt; args.forEach(arg =&gt; &#123; if (typeof arg === &#x27;function&#x27;) &#123; arg() &#125;&#125;) ‰∏äÈù¢ÁöÑÂáΩÊï∞ÔºåÊàë‰ª¨‰ºöÂøΩÁï•‰∏çÊòØÂáΩÊï∞ÁöÑÂèÇÊï∞ÔºåÊòØÂáΩÊï∞Â∞±ÊâßË°åÂÆÉ 12345678execFuncArgs(&#x27;a&#x27;, &#x27;b&#x27;)// -&gt; undefinedexecFuncArgs(() =&gt; &#123; console.log(&#x27;this is a function&#x27;) &#125;)// -&gt; &quot;this is a function&quot;execFuncArgs(&#x27;a&#x27;, () =&gt; &#123; console.log(&#x27;another one&#x27;) &#125;)// -&gt; &quot;another one&quot; ËÆ©Êàë‰ª¨ÊääÂÆÉÂΩì‰ΩúÊôÆÈÄöÂáΩÊï∞Êù•Ë∞ÉÁî®Â∏¶ÊúâÂèòÈáèÁöÑÊ®°ÊùøÂ≠óÁ¨¶‰∏≤ 12execFuncArgs(`Hi, $&#123;() =&gt; &#123; console.log(&#x27;Executed!&#x27;) &#125;&#125;`)// -&gt; undefined ‰∏∫‰ªÄ‰πà‰ºöÊòØundfinedÂë¢ÔºüÂõ†‰∏∫ÔºåÊôÆÈÄöÂáΩÊï∞Ë∞ÉÁî®ÁöÑÊñπÂºèÔºåÊ®°ÊùøÂ≠óÁ¨¶‰∏≤‰ºöÂÖ®ÈÉ®ÂèòÊàêÂ≠óÁ¨¶‰∏≤ÁöÑÂΩ¢ÂºèÔºåÂèòÈáè‰πüÂèòÊàê‰∫ÜÂ≠óÁ¨¶‰∏≤ÁöÑÂΩ¢ÂºèÂÆûÈôÖ‰∏äË∞ÉÁî®ÂèÇÊï∞ÊòØËøôÊ†∑ÁöÑÔºö &quot;Hi, () =&gt; &#123; console.log(&#39;I got executed!&#39;) &#125;&quot;. Êää‰∏äÈù¢ÁöÑÂáΩÊï∞ÂΩì‰Ωú‚ÄùÊ†áÁ≠æÊ®°Êùø‚ÄùÊù•Ë∞ÉÁî® 12execFuncArgs`Hi, $&#123;() =&gt; &#123; console.log(&#x27;Executed!&#x27;) &#125;&#125;`// -&gt; &quot;Executed!&quot; ‰∏é‰πãÂâçÁõ∏ÂèçÔºåexecFuncArgsÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÂÆûÈôÖ‰∏äÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÁÑ∂Âêé‰ºöÊâßË°åËøô‰∏™ÂáΩÊï∞„ÄÇÁî±Ê≠§ÂèØ‰ª•Ëß£ÂÜ≥ÊàëÁöÑÁñëÈóÆ‰∫ÜÔºöÊ†áÁ≠æÊ®°ÊùøÂèØ‰ª•ÂØπ‰º†ÂÖ•ÁöÑÊ®°ÊùøÂ≠óÁ¨¶‰∏≤‰∏≠ÁöÑÂèòÈáèÔºåËøõË°åÊèêÂèñÔºåÂπ∂Ëøõ‰∏ÄÊ≠•Â§ÑÁêÜÔºåÊôÆÈÄöÂáΩÊï∞Ê†πÊú¨Âèñ‰∏çÂà∞Ëøô‰∫õÂèòÈáèÔºåÂ∞±Áî≠ÊèêËøõ‰∏ÄÊ≠•Â§ÑÁêÜ‰∫Ü„ÄÇ Ê†áÁ≠æÊ®°ÊùøÁöÑÂÆûÈôÖÂ∫îÁî®‚ÄúÊ†áÁ≠æÊ®°Êùø‚ÄùÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÂ∫îÁî®ÔºåÂ∞±ÊòØËøáÊª§HTMLÂ≠óÁ¨¶‰∏≤ÔºåÈò≤Ê≠¢Áî®Êà∑ËæìÂÖ•ÊÅ∂ÊÑèÂÜÖÂÆπ„ÄÇ 1234567891011121314151617181920var message = SaferHTML`&lt;p&gt;$&#123;sender&#125; has sent you a message.&lt;/p&gt;`;function SaferHTML(templateData) &#123; var s = templateData[0]; for (var i = 1; i &lt; arguments.length; i++) &#123; var arg = String(arguments[i]); // Escape special characters in the substitution. s += arg.replace(/&amp;/g, &quot;&amp;amp;&quot;) .replace(/&lt;/g, &quot;&amp;lt;&quot;) .replace(/&gt;/g, &quot;&amp;gt;&quot;); // Don&#x27;t escape special characters in the template. s += templateData[i]; &#125; return s;&#125; ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåsenderÂèòÈáèÂæÄÂæÄÊòØÁî®Êà∑Êèê‰æõÁöÑÔºåÁªèËøáSaferHTMLÂáΩÊï∞Â§ÑÁêÜÔºåÈáåÈù¢ÁöÑÁâπÊÆäÂ≠óÁ¨¶ÈÉΩ‰ºöË¢´ËΩ¨‰πâ„ÄÇ 123456var sender = &#x27;&lt;script&gt;alert(&quot;abc&quot;)&lt;/script&gt;&#x27;; // ÊÅ∂ÊÑè‰ª£Á†Åvar message = SaferHTML`&lt;p&gt;$&#123;sender&#125; has sent you a message.&lt;/p&gt;`;message// &lt;p&gt;&amp;lt;script&amp;gt;alert(&quot;abc&quot;)&amp;lt;/script&amp;gt; has sent you a message.&lt;/p&gt; Ê†áÁ≠æÊ®°ÊùøÁöÑÂè¶‰∏Ä‰∏™Â∫îÁî®ÔºåÂ∞±ÊòØÂ§öËØ≠Ë®ÄËΩ¨Êç¢ÔºàÂõΩÈôÖÂåñÂ§ÑÁêÜÔºâ„ÄÇ 12i18n`Welcome to $&#123;siteName&#125;, you are visitor number $&#123;visitorNumber&#125;!`// &quot;Ê¨¢ËøéËÆøÈóÆxxxÔºåÊÇ®ÊòØÁ¨¨xxxx‰ΩçËÆøÈóÆËÄÖÔºÅ&quot; ËøòÊúâcommon-tagsÂ∫ì‰∏≠ÁöÑoneLineÊ†áÁ≠æÂáΩÊï∞ 12345678import &#123;oneLine&#125; from &#x27;common-tags&#x27;oneLine` foo bar baz`// &quot;foo bar baz&quot; ÊÄª‰πãÔºåÊ†áÁ≠æÊ®°ÊùøÂäüËÉΩÂæàÂº∫Â§ßÔºåÂèØËÉΩ‰∏ÄÂºÄÂßãÂπ∂‰∏ç‰ºöËßâÂæóÂéâÂÆ≥‰πãÂ§ÑÔºåÂπ≥Êó∂Â∑•‰Ωú‰∏≠‰πü‰∏ç‰ºöÁî®Âà∞Ôºå‰ΩÜÊòØËøô‰∫õÁü•ËØÜÊòØÊúâÁî®ÁöÑÔºåÂú®ÂæàÂ§öÂ∫ì‰∏≠‰ºöÁî®Âà∞ÂÆÉÔºåÊàë‰ª¨‰ΩøÁî®Ëøô‰∫õÂ∫ìÁöÑÊó∂ÂÄô‰πüÂú®‰∏çËá™Ëßâ‰∏≠‰ΩøÁî®‰∫ÜÊ†áÁ≠æÊ®°ÊùøÔºåÂèØ‰ª•ÊÖ¢ÊÖ¢ÂºÄÂßã‰∫ÜËß£ÂÆÉÔºåÂπ∂‰ΩøÁî®ÂÆÉ„ÄÇ ÂèÇËÄÉÊñáÁ´†Ôºö ES6 Tagged Template Literals The magic behind üíÖ styled-components","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"Ê∑±ÂÖ•ÁêÜËß£letÂíåconstÂéüÁêÜ","slug":"Ê∑±ÂÖ•ÁêÜËß£letÂíåconstÂéüÁêÜ","date":"2020-04-11T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/04/12/Ê∑±ÂÖ•ÁêÜËß£letÂíåconstÂéüÁêÜ/","permalink":"https://justsso1.github.io/2020/04/12/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3let%E5%92%8Cconst%E5%8E%9F%E7%90%86/","excerpt":"","text":"let ÂíåconstÂëΩ‰ª§ÊòØES6Êñ∞Â¢ûÁöÑÔºåËÆ©Êàë‰ª¨Êù•ÁúãÁúãÂÆÉ‰ª¨ÊòØÊÄé‰πàÂõû‰∫ãÂêßÔΩû Âú®Êúâ let Âíåconst‰πãÂâçÔºåÊàë‰ª¨‰ΩøÁî® var Êù•Â£∞ÊòéÂèòÈáèÔºåvarÂ£∞ÊòéÂèòÈáè‰ºöÊúâÂèòÈáèÊèêÂçáÁöÑÁâπÊÄßÔºå Javascriptconsole.log(a)var a &#x3D; 1 &#x2F;&#x2F;undefinedÁî®varÂ£∞Êòéa,aÂèòÈáè‰ºöË¢´ÊèêÂçáÂà∞Âú®ÂΩìÂâç‰ΩúÁî®ÂüüÁöÑÊúÄÂâçÈù¢Â£∞ÊòéÔºåÂÖ∂ÂÆûÊâßË°åÁöÑ‰ª£Á†ÅÊòØËøôÊ†∑ÁöÑÔºö Javascriptvar a;console.log(a)a &#x3D; 1;‰∏∫‰∫ÜÁ∫¶ÊùüÂèòÈáèÊèêÂçáÔºåÂá∫Áé∞‰∫ÜÂùóÁ∫ß‰ΩúÁî®ÂüüÔºåÂùóÁ∫ß‰ΩúÁî®ÂüüÊê≠ÈÖçletÂíåconstÂ∞±Ê≤°ÊúâÂèòÈáèÊèêÂçá‰∫Ü„ÄÇ Javascriptconsole.log(b)let b &#x3D; 1 &#x2F;&#x2F;ReferenceError: b is not definedÁî®letÂ∞±Ê≤°ÊúâÂèòÈáèÊèêÂçáÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØÂú®Â£∞ÊòéÂèòÈáè‰πãÂâçÂ∞±ËÆøÈóÆÔºå‰ºöÊä•ÈîôÔºåËÆøÈóÆb‰ºöÊä•ReferenceErrorÈîôËØØÈÇ£let‰∏∫‰ªÄ‰πàÊ≤°ÊúâÂèòÈáèÊèêÂçáÁöÑÈóÆÈ¢òÂë¢ÔºüÂùóÁ∫ß‰ΩúÁî®ÂüüÂèàÊòØ‰ªÄ‰πàÂë¢Ôºü ÂùóÁ∫ß‰ΩúÁî®ÂüületÂíåconstÂÆûÈôÖ‰∏ä‰∏∫ES6ÂºïÂÖ•‰∫Ü‚ÄùÂùóÁ∫ß‰ΩúÁî®Âüü‚ÄùÁöÑÊ¶ÇÂøµ„ÄÇÂú®ES5‰∏≠Âè™ÊúâÂÖ®Â±Ä‰ΩúÁî®ÂüüÂíåÂáΩÊï∞‰ΩúÁî®Âüü„ÄÇES6Êñ∞Â¢û‰∫ÜÂùóÁ∫ß‰ΩúÁî®ÂüüÊù•Á∫¶ÊùüÂèòÈáèÁöÑÁîüÂëΩÂë®Êúü„ÄÇÁÆÄÂçïËØ¥Â∞±ÊòØ‰∏§‰∏™Â§ßÊã¨Âè∑{}Â∞±ÂΩ¢Êàê‰∫ÜÂùóÁ∫ß‰ΩúÁî®ÂüüÔºåÂ§ñÂ±Ç‰ª£Á†ÅÂùó‰∏çÂèóÂÜÖÂ±Ç‰ª£Á†ÅÂùóÁöÑÂΩ±Âìç„ÄÇ 1234567891011121314function f1()&#123; let n = 5; if(true)&#123; let n = 10 &#125; console.log(n) //5&#125;for(let i =0 ;i&lt; 10 ;i++)&#123;&#125;console.log(i) //ReferenceError: i is not defined ÂÜÖÂ±ÇÁöÑn‰∏ç‰ºöÂΩ±ÂìçÂ§ñÂ±ÇÁöÑnÔºåÊâÄ‰ª•ÊâìÂç∞n&#x3D;5forÂæ™ÁéØ‰∏≠Â£∞Êòé‰∫ÜÂèòÈáèi,Âú®forÂæ™ÁéØ‰πãÂ§ñËÆøÈóÆiÂèòÈáèÔºå‰ºöÊä•ÈîôÔºåËøôÊòØÂõ†‰∏∫Âú®Â§ñÂ±Ç‰ª£Á†ÅÂùó‰∏≠Ê≤°ÊúâÂ£∞ÊòéÂèòÈáèi forÂæ™ÁéØ‰∏≠ÈÉΩ‰ºöÊúâÂùóÁ∫ß‰ΩúÁî®Âüü„ÄÇÊàë‰ª¨Êù•Áúã‰∏Ä‰∏™ÁªèÂÖ∏ÁöÑ‰æãÂ≠ê 123456789var arr = []for (var i = 0; i &lt; 10; i++) &#123; arr[i] = function () &#123; console.log(i) &#125;&#125;arr[2]() //10console.log(i) //10 Âú®forÂæ™ÁéØÂ§ñÂèØ‰ª•ËÆøÈóÆÂà∞iÔºåiÁöÑÂÄº‰∏∫10ÔºåËøôÊòØÂõ†‰∏∫iÂú®forÂæ™ÁéØ‰∏≠‰ΩøÁî®varÂ£∞Êòé‰∫ÜÔºå‰ºöË¢´ÂèòÈáèÊèêÂçáÔºåÁªìÊûúÂ∞±ÊòØiÊåÇËΩΩÂà∞ÂÖ®Â±ÄÂØπË±°‰∏≠ÔºåÂú®ÊµèËßàÂô®‰∏≠Â∞±ÊòØwindowÂØπË±°ÔºåÊàê‰∏∫windowÁöÑÂ±ûÊÄß„ÄÇÊØè‰∏ÄÂ±ÇÂæ™ÁéØÊîπÂèòÁöÑÈÉΩÊòØÂÖ®Â±ÄÁöÑi, ‰º†ÂÖ•Âà∞Âæ™ÁéØ‰∏≠ÁöÑconsole.log(i)ÈÉΩÊòØ10ÔºåÊúÄÂêéÂ§ñÈÉ®ËÆøÈóÆÁöÑiÂÄº‰πüÂèòÊàê‰∫Ü10 123456789var brr = []for (let i = 0; i &lt; 10; i++) &#123; brr[i] = function () &#123; console.log(i) &#125;&#125;brr[2]() //2console.log(i) //ReferenceError: i is not defined forÂæ™ÁéØ‰∏≠‰ΩøÁî®letÂ£∞ÊòéÂèòÈáèiÔºåËøôÊ†∑ÊØè‰∏ÄÂ±ÇÂæ™ÁéØÈÉΩÈáçÊñ∞Â£∞Êòé‰∫ÜiÔºåÂπ∂ÁªëÂÆö‰∫ÜÂΩìÂâçÂæ™ÁéØÁöÑ‰ª£Á†ÅÂùóÔºåÊâÄ‰ª•‰º†ÂÖ•ÂÜÖÂ≠òÂáΩÊï∞ÁöÑÈ¢ùconsole.log(i)‰πüÊòØÂΩìÊó∂ÁöÑiÁöÑÂÄºÔºåÊâÄ‰ª•brr2ÊâßË°åÊó∂ÔºåÂèòÈáèiÁöÑÂÄºÊòØ2ÔºåÂú®forÂæ™ÁéØÂ§ñËÆøÈóÆi‰ºöÂá∫Èîô„ÄÇ ‰Ω†ÂèØËÉΩ‰ºöÈóÆÔºåÊØè‰∏ÄÂ±ÇÁöÑÂæ™ÁéØÂèòÈáèÈÉΩÊòØÈáçÊñ∞Â£∞ÊòéÁöÑÔºåÈÇ£‰πàforÂæ™ÁéØÊÄé‰πàÁü•ÈÅì‰∏ä‰∏ÄÂ±ÇÂæ™ÁéØÁöÑÂÄºÔºå‰ªéËÄåËÆ°ÁÆóÂá∫Êú¨Â±ÇÁöÑÂÄºÔºüËøôÊòØÂõ†‰∏∫JavascriptÂºïÊìéÂÜÖÈÉ®‰ºöËÆ∞‰Ωè‰∏ä‰∏ÄÂ±ÇÁöÑÂæ™ÁéØÁöÑÂÄºÔºåÂú®‰∏ä‰∏ÄÂ±ÇÂæ™ÁéØÁöÑÂü∫Á°Ä‰∏äÔºåËÆ°ÁÆóÂæóÂá∫ÂàùÂßãÂåñÊú¨Â±ÇÁöÑÂèòÈáèÁöÑÂÄº„ÄÇ ÁªÜËØ¥forÂæ™ÁéØ‰∏≠ÁöÑÂùóÁ∫ß‰ΩúÁî®ÂüüforÂæ™ÁéØ‰∏≠ÔºàÔºâÊòØ‰∏Ä‰∏™ÂùóÁ∫ß‰ΩúÁî®ÂüüÔºåËÄåÂæ™ÁéØ‰ΩìÂÜÖ{}ÊòØ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ≠ê‰ΩúÁî®Âüü„ÄÇ 12345678for (let i = 0; i &lt; 3; i++) &#123; let i = &#x27;abc&#x27;; console.log(i);&#125;// abc// abc// abc ‰∏äÈù¢ËæìÂá∫‰∏âÊ¨° abc ÔºåËØ¥ÊòéÔºåÂæ™ÁéØÂÜÖÈÉ®ÁöÑiÂèòÈáè‰∏éÂæ™ÁéØÂèòÈáèi‰∏çÂú®Âêå‰∏Ä‰∏™‰ΩúÁî®ÂüüÔºåÊúâÂêÑËá™ÂçïÁã¨ÁöÑ‰ΩúÁî®Âüü„ÄÇ Êàë‰ª¨Êù•ÁúãÁúãletÂà∞Â∫ïÊòØÊÄé‰πàÁî±varËΩ¨ËøáÊù•ÁöÑÔºåÊàëÁî®BabelËØïËØïÔºö 12345678910var brr = []for (let i = 0; i &lt; 10; i++) &#123; brr[i] = function () &#123; console.log(i) &#125;&#125;brr[2]()console.log(i) BabelËΩ¨Ëøá‰πãÂêéÔºå 12345678910111213141516&quot;use strict&quot;;var brr = [];var _loop = function _loop(_i) &#123; brr[_i] = function () &#123; console.log(_i); &#125;;&#125;;for (var _i = 0; _i &lt; 10; _i++) &#123; _loop(_i);&#125;brr[2]();console.log(i); babelÊääforÂæ™ÁéØÂÜÖÂ±ÇÈÉΩÊäΩË±°Âà∞‰∏Ä‰∏™ÂáΩÊï∞‰∏≠‰∫ÜÔºåÁÑ∂ÂêéÔºåÊääÂæ™ÁéØÂèòÈáè‰º†ÂÖ•Ëøô‰∏™ÂáΩÊï∞ÂèÇÊï∞ÔºåËøôÊ†∑ÊØè‰∏ÄÂ±ÇÁöÑÂæ™ÁéØÈÉΩ‰ºöËøîÂõû‰∏Ä‰∏™ÂáΩÊï∞Â£∞ÊòéÔºåËÄåÂæ™ÁéØÂèòÈáèÈÉΩ‰ºöÈîÅÂÆö‰Ωè„ÄÇ ÊöÇÊó∂ÊÄßÊ≠ªÂå∫Âè™Ë¶ÅÂùóÁ∫ß‰ΩúÁî®Âüü‰∏≠ÊúâletÂíåconstÂëΩ‰ª§ÔºåÈÇ£‰πàÊâÄÂ£∞ÊòéÁöÑÂèòÈáèÂ∞±‚ÄùÁªëÂÆö‚ÄùËøô‰∏™Âå∫ÂüüÔºå‰∏çÂÜçÂèóÂ§ñÈÉ®ÁöÑÂΩ±Âìç„ÄÇÂú®ÂùóÁ∫ß‰ΩúÁî®ÂüüÂÜÖÔºå‰ΩøÁî®letÊàñconstÂ£∞ÊòéÂèòÈáè‰πãÂâçÔºåËØ•ÂèòÈáèÈÉΩÊòØ‰∏çÂèØÂèñÁöÑÔºåËøôÂ∞±Âè´‚ÄùÊöÇÊó∂ÊÄßÊ≠ªÂå∫‚Äù ÊöÇÊó∂ÊÄßÊ≠ªÂå∫Ëß£ÂÜ≥ÁöÑÈóÆÈ¢òÔºöËß£ÂÜ≥‰∫ÜÂú®Â£∞ÊòéÂèòÈáè‰πãÂâçËÆøÈóÆËØ•ÂèòÈáèÔºåÊ≤°ÊúâÂèòÈáèÊèêÂçáÔºå‰∏ªË¶Å‰∏∫‰∫ÜÂáèÂ∞ëËøêË°åÊó∂ÈîôËØØ„ÄÇ ÊöÇÊó∂ÊÄßÊ≠ªÂå∫ÁöÑÊú¨Ë¥®Ôºö Âè™Ë¶Å‰∏ÄËøõÂÖ•ÂΩìÂâç‰ΩúÁî®ÂüüÔºåÊâÄË¶Å‰ΩøÁî®ÁöÑÂèòÈáèÂ∞±Â∑≤ÁªèÂ≠òÂú®‰∫ÜÔºå‰ΩÜÊòØ‰∏çÂèØËé∑ÂèñÔºå‰∏çÂèØËÆøÈóÆÔºåÂè™ÊúâÁ≠âÂà∞Â£∞ÊòéÂèòÈáèÁöÑÈÇ£‰∏ÄË°å‰ª£Á†ÅÂá∫Áé∞ÔºåÊâçÂèØ‰ª•Ëé∑ÂèñÂíå‰ΩøÁî®ËØ•ÂèòÈáè„ÄÇ constÂü∫Êú¨Áî®Ê≥ïconstÂ£∞Êòé‰∏Ä‰∏™Âè™ËØªÁöÑÂ∏∏Èáè„ÄÇ‰∏ÄÊó¶Â£∞ÊòéÔºåÂ∏∏ÈáèÁöÑÂÄºÂ∞±‰∏çËÉΩÊîπÂèò„ÄÇ const ‰πü‰∏ç‰ºöÂèòÈáèÊèêÂçá const ‰πüÂ≠òÂú®ÊöÇÊó∂ÊÄßÊ≠ªÂå∫ÁâπÊÄß constÂú®Â£∞ÊòéÂèòÈáèÊó∂Â∞±Ë¶ÅËµãÂÄºÔºåÂê¶Âàô‰ª•Âêé‰∏çËÉΩËµãÂÄº‰∫Ü constÂè™Â£∞Êòé‰∏çËµãÂÄº‰ºöÊä•Èîô const Â£∞ÊòéÁöÑÂèòÈáèÂ¶ÇÊûúÊòØÂü∫Êú¨Á±ªÂûãÔºåÈÇ£‰πà‰∏çÂÖÅËÆ∏ÊîπÂèòÔºåÂ¶ÇÊûúÊòØÂºïÁî®Á±ªÂûãÔºåÈÇ£‰πàÂè™Ë¶Å‰∏çÊîπÂèòÂºïÁî®ÁöÑÂú∞ÂùÄÂ∞±ÊòØÂèØ‰ª•ÁöÑ„ÄÇ Êú¨Ë¥®Javascriptconst name &#x3D; ‚ÄòFriday‚Äôname &#x3D; ‚ÄòSunday‚Äô &#x2F;&#x2F;Áõ¥Êé•Êä•Èîô const people &#x3D; { name: ‚ÄòJack‚Äô, age: 21}people.age &#x3D; 22console.log(people) &#x2F;&#x2F;{ name: ‚ÄòJack‚Äô, age: 22 }","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"ËÅäËÅäfunction‰∏é‰ΩúÁî®ÂüüÈìæ","slug":"ËÅäËÅäfunction‰∏é‰ΩúÁî®ÂüüÈìæ","date":"2020-04-11T16:00:00.000Z","updated":"2024-10-16T03:56:56.748Z","comments":true,"path":"2020/04/12/ËÅäËÅäfunction‰∏é‰ΩúÁî®ÂüüÈìæ/","permalink":"https://justsso1.github.io/2020/04/12/%E8%81%8A%E8%81%8Afunction%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE/","excerpt":"","text":"ËÅäËÅäfunction‰∏é‰ΩúÁî®ÂüüÈìæ ÂâçË®ÄÔºöfunctionÂú®js‰∏≠ÊâÆÊºî‰∫Ü‰∏æË∂≥ËΩªÈáçÁöÑËßíËâ≤ÔºåÊòØ‰∏ÄÁ≠âÂÖ¨Ê∞ë„ÄÇfunctionÂíånewÂú®‰∏ÄËµ∑‰ºöÊúâÂÆû‰æã„ÄÅÂéüÂûã„ÄÅÂéüÂûãÈìæÁ≠â‰∏ÄÁ≥ªÂàóÈóÆÈ¢ò„ÄÇfunction‰∏≠ËÆøÈóÆÂèòÈáè‰ºöÊúâ‰ΩúÁî®Âüü„ÄÅ‰ΩúÁî®ÂüüÈìæÁöÑÈóÆÈ¢òÔºå‰ª•ÂèäÈó≠ÂåÖÁ≠âÊ¶ÇÂøµ„ÄÇ js‰∏≠Êï∞ÊçÆÁ±ªÂûãÔºöÂü∫Êú¨Á±ªÂûãÂíåÂºïÁî®Á±ªÂûãÂºïÁî®Á±ªÂûãÁöÑÂÄºÊòØ‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂØπË±°„ÄÇ‰∏éÂÖ∂‰ªñËØ≠Ë®Ä‰∏çÂêåÔºåJavaScript‰∏çÂÖÅËÆ∏Áõ¥Êé•ËÆøÈóÆÂÜÖÂ≠ò‰∏≠ÁöÑ‰ΩçÁΩÆÔºå‰πüÂ∞±ÊòØËØ¥‰∏çËÉΩÁõ¥Êé•Êìç‰ΩúÂØπË±°ÁöÑÂÜÖÂ≠òÁ©∫Èó¥„ÄÇÂú®Êìç‰ΩúÂØπË±°Êó∂ÔºåÂÆûÈôÖ‰∏äÊòØÂú®Êìç‰ΩúÂØπË±°ÁöÑÂºïÁî®ËÄå‰∏çÊòØÂÆûÈôÖÁöÑÂØπË±°„ÄÇ Âü∫Êú¨Á±ªÂûãÂíåÂºïÁî®Á±ªÂûãÁöÑ‰∏çÂêåÁÇπÔºö Â≠òÂÇ®ÊñπÂºè‰∏çÂêå„ÄÇÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂ≠òÂÇ®Âú®Ê†àÂÜÖÂ≠ò‰∏≠ÔºåÂºïÁî®Á±ªÂûãÂ≠òÂÇ®Âú®Â†ÜÂÜÖÂ≠ò‰∏≠ÔºåÂèòÈáèÂ≠òÁöÑÊòØÊåáÂêëÂ†ÜÂÜÖÂ≠òÁöÑÂú∞ÂùÄ Â§çÂà∂Êó∂ÁöÑ‰∏çÂêå„ÄÇÂü∫Êú¨Á±ªÂûãÁöÑÂÄº‰ºöÂàõÂª∫‰∏Ä‰∏™ÂÄºÁöÑÈ¢ùÂâØÊú¨ÔºõÂºïÁî®Á±ªÂûãÔºåÂ§çÂà∂ÁöÑÂÖ∂ÂÆûÊòØÊåáÈíàÔºåÂõ†Ê≠§‰∏§‰∏™ÂèòÈáèÊúÄÁªàÈÉΩÊåáÂêëÂêå‰∏Ä‰∏™ÂØπË±°‰º†ÈÄíÂèÇÊï∞‰º†ÈÄíÂèÇÊï∞ÔºåECMAScript‰∏≠ÊâÄÊúâÂáΩÊï∞ÁöÑÂèÇÊï∞ÈÉΩÊòØÊåâÊåá‰º†ÈÄíÁöÑ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÊääÂáΩÊï∞Â§ñÈÉ®ÁöÑÂÄºÂ§çÂà∂ÁªôÂáΩÊï∞ÂÜÖÈÉ®ÁöÑÂèÇÊï∞ÔºåÂ∞±ÂíåÊääÊåá‰ªé‰∏Ä‰∏™ÂèòÈáèÂ§çÂà∂Âà∞Âè¶‰∏Ä‰∏™ÂèòÈáè‰∏ÄÊ†∑„ÄÇÂü∫Êú¨Á±ªÂûãÂÄºÁöÑ‰º†ÈÄíÂ¶ÇÂêåÂü∫Êú¨Á±ªÂûãÂèòÈáèÁöÑÂ§çÂà∂‰∏ÄÊ†∑ÔºåËÄåÂºïÁî®Á±ªÂûãÁ±ªÂûãÂÄºÁöÑ‰º†ÈÄíÔºåÂàôÂ¶ÇÂêåÂºïÁî®Á±ªÂûãÂèòÈáèÁöÑÂ§çÂà∂‰∏ÄÊ†∑„ÄÇ #####Ê£ÄÊµãÁ±ªÂûãtypeofÊ£ÄÊµãÂá∫Âü∫Êú¨Á±ªÂûãÂíå‚Äùobject‚ÄùÁ±ªÂûãÔºåÂÖ∑‰ΩìÂì™ÁßçÂØπË±°Á±ªÂûãÊ£ÄÊµã‰∏çÂá∫ 123456var s = &quot;Nicholas&quot;; //&quot;string&quot;var b = true; //&quot;boolean&quot;var i = 22; //&quot;number&quot;var u; // &quot;undefined&quot;var n = null; //&quot;object&quot;var o = new Object(); //&quot;object&quot; instanceofÂèØ‰ª•Ê£ÄÊµãÂá∫ÂØπË±°ÊòØÂì™ÁßçÁ±ªÂûãÁöÑ 1var result = variable instanceof constructor Âè™Ë¶ÅÂú®ËØ•ÂØπË±°ÁöÑÂéüÂûãÈìæ‰∏äÊúâËØ•ÊûÑÈÄ†ÂáΩÊï∞ÔºåÁªìÊûúÂ∞±ÊòØtrue„ÄÇËÄåObjectÊòØÊâÄÊúâÂØπË±°ÁöÑÂéüÂûãÈìæ‰∏äÊúÄÈ°∂Â±ÇÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÊâÄ‰ª•Âú®Ê£ÄÊµã‰∏Ä‰∏™ÂºïÁî®Á±ªÂûãÂÄºÂíåObjectÊûÑÈÄ†ÂáΩÊï∞Êó∂ÔºåinstanceofÊìç‰ΩúÁ¨¶‰∏ÄÂÆöËøîÂõûtrue„ÄÇÂ¶ÇÊûú‰ΩøÁî®instanceofÊìç‰ΩúÁ¨¶Ê£ÄÊµãÂü∫Êú¨Á±ªÂûãÂÄºÊó∂ÔºåÂßãÁªàËøîÂõûfalseÔºåÂõ†‰∏∫Âü∫Êú¨Á±ªÂûã‰∏çÊòØÂØπË±°„ÄÇ ÊâÄ‰ª•ÔºåÁ°ÆÂÆö‰∏Ä‰∏™ÂÄºÊòØÂì™ÁßçÂü∫Êú¨Á±ªÂûãÂèØ‰ª•‰ΩøÁî® typeof Êìç‰ΩúÁ¨¶ÔºåËÄåÁ°ÆÂÆö‰∏Ä‰∏™ÂÄºÊòØÂì™ÁßçÂºïÁî®Á±ªÂûãÂèØ‰ª•‰ΩøÁî®instanceofÊìç‰ΩúÁ¨¶„ÄÇ ÊâßË°åÁéØÂ¢ÉÂèä‰ΩúÁî®ÂüüÊâÄÊúâÂèòÈáèÔºàÂåÖÊã¨Âü∫Êú¨Á±ªÂûãÂíåÂºïÁî®Á±ªÂûãÔºâÈÉΩÂ≠òÂú®‰∫é‰∏Ä‰∏™ÊâßË°åÁéØÂ¢ÉÔºà‰πüÊàê‰∏∫‰ΩúÁî®ÂüüÔºâÂΩì‰∏≠ÔºåËøô‰∏™ÊâßË°åÁéØÂ¢ÉÂÜ≥ÂÆö‰∫ÜÂèòÈáèÁöÑÁîüÂëΩÂë®ÊúüÔºå‰ª•ÂèäÂì™‰∏ÄÈÉ®ÂàÜ‰ª£Á†ÅÂèØ‰ª•ËÆøÈóÆÂÖ∂‰∏≠ÁöÑÂèòÈáè„ÄÇ ÊâßË°åÁéØÂ¢ÉÊúâÂÖ®Â±ÄÊâßË°åÁéØÂ¢ÉÔºà‰πüÁß∞‰∏∫ÂÖ®Â±ÄÁéØÂ¢ÉÔºâÂíåÂáΩÊï∞ÊâßË°åÁéØÂ¢É‰πãÂàÜÔºõÊØèÊ¨°ËøõÂÖ•‰∏Ä‰∏™Êñ∞ÊâßË°åÁéØÂ¢ÉÔºåÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Áî®‰∫éÊêúÁ¥¢ÂèòÈáèÂíåÂáΩÊï∞ÁöÑ‰ΩúÁî®ÂüüÈìæÔºõÂáΩÊï∞ÁöÑÂ±ÄÈÉ®ÁéØÂ¢É‰∏ç‰ªÖÊúâÊùÉËÆøÈóÆÂáΩÊï∞‰ΩúÁî®Âüü‰∏≠ÁöÑÂèòÈáèÔºåËÄå‰∏îÊúâÊùÉËÆøÈóÆÂÖ∂ÂåÖÂê´ÔºàÁà∂ÔºâÁéØÂ¢ÉÔºå‰πÉËá≥ÂÖ®Â±ÄÁéØÂ¢ÉÔºõÂÖ®Â±ÄÁéØÂ¢ÉÂè™ËÉΩËÆøÈóÆÂú®ÂÖ®Â±ÄÁéØÂ¢É‰∏≠ÂÆö‰πâÁöÑÂèòÈáèÂíåÂáΩÊï∞ÔºåËÄå‰∏çËÉΩÁõ¥Êé•ËÆøÈóÆÂ±ÄÈÉ®ÁéØÂ¢É‰∏≠ÁöÑ‰ªª‰ΩïÊï∞ÊçÆÔºõÂèòÈáèÁöÑÊâßË°åÁéØÂ¢ÉÊúâÂä©‰∫éÁ°ÆÂÆöÂ∫îËØ•‰ΩïÊó∂ÈáäÊîæÂÜÖÂ≠ò„ÄÇ‰ª£Á†ÅÔºö 1234567891011121314var color = &quot;blue&quot;; function changeColor()&#123; var anotherColor = &quot;red&quot;; function swapColors()&#123; var tempColor = anotherColor; anotherColor = color; color = tempColor; // ËøôÈáåÂèØ‰ª•ËÆøÈóÆ color„ÄÅanotherColor Âíå tempColor &#125; // ËøôÈáåÂèØ‰ª•ËÆøÈóÆ color Âíå anotherColorÔºå‰ΩÜ‰∏çËÉΩËÆøÈóÆ tempColor swapColors(); &#125; // ËøôÈáåÂè™ËÉΩËÆøÈóÆ color changeColor(); ‰ª•‰∏ä‰ª£Á†ÅÂÖ±Ê∂âÂèä 3 ‰∏™ÊâßË°åÁéØÂ¢ÉÔºöÂÖ®Â±ÄÁéØÂ¢É„ÄÅchangeColor()ÁöÑÂ±ÄÈÉ®ÁéØÂ¢ÉÂíå swapColors()ÁöÑÂ±ÄÈÉ®ÁéØÂ¢É„ÄÇÂÖ®Â±ÄÁéØÂ¢É‰∏≠Êúâ‰∏Ä‰∏™ÂèòÈáè color Âíå‰∏Ä‰∏™ÂáΩÊï∞ changeColor()„ÄÇchangeColor()ÁöÑÂ±ÄÈÉ®ÁéØÂ¢É‰∏≠Êúâ‰∏Ä‰∏™Âêç‰∏∫ anotherColor ÁöÑÂèòÈáèÂíå‰∏Ä‰∏™Âêç‰∏∫ swapColors()ÁöÑÂáΩÊï∞Ôºå‰ΩÜÂÆÉ‰πüÂèØ‰ª•ËÆøÈóÆÂÖ®Â±ÄÁéØÂ¢É‰∏≠ÁöÑÂèòÈáè color„ÄÇswapColors()ÁöÑÂ±ÄÈÉ®ÁéØÂ¢É‰∏≠Êúâ‰∏Ä‰∏™ÂèòÈáè tempColorÔºåËØ•ÂèòÈáèÂè™ËÉΩÂú®Ëøô‰∏™ÁéØÂ¢É‰∏≠ËÆøÈóÆÂà∞„ÄÇÊó†ËÆ∫ÂÖ®Â±ÄÁéØÂ¢ÉËøòÊòØ changeColor()ÁöÑÂ±ÄÈÉ®ÁéØÂ¢ÉÈÉΩÊó†ÊùÉËÆøÈóÆ tempColor„ÄÇÁÑ∂ËÄåÔºåÂú® swapColors()ÂÜÖÈÉ®ÂàôÂèØ‰ª•ËÆøÈóÆÂÖ∂‰ªñ‰∏§‰∏™ÁéØÂ¢É‰∏≠ÁöÑÊâÄÊúâÂèòÈáèÔºåÂõ†‰∏∫ÈÇ£‰∏§‰∏™ÁéØÂ¢ÉÊòØÂÆÉÁöÑÁà∂ÊâßË°åÁéØÂ¢É„ÄÇ JavaScript ÊòØ‰∏ÄÈó®ÂÖ∑ÊúâËá™Âä®ÂûÉÂúæÊî∂ÈõÜÊú∫Âà∂ÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºåÂºÄÂèë‰∫∫Âëò‰∏çÂøÖÂÖ≥ÂøÉÂÜÖÂ≠òÂàÜÈÖçÂíåÂõûÊî∂ÈóÆÈ¢ò„ÄÇ Á¶ªÂºÄ‰ΩúÁî®ÂüüÁöÑÂÄºÂ∞ÜË¢´Ëá™Âä®Ê†áËÆ∞‰∏∫ÂèØ‰ª•ÂõûÊî∂ÔºåÂõ†Ê≠§Â∞ÜÂú®ÂûÉÂúæÊî∂ÈõÜÊúüÈó¥Ë¢´Âà†Èô§„ÄÇ‚ÄúÊ†áËÆ∞Ê∏ÖÈô§‚ÄùÊòØÁõÆÂâç‰∏ªÊµÅÁöÑÂûÉÂúæÊî∂ÈõÜÁÆóÊ≥ïÔºåËøôÁßçÁÆóÊ≥ïÁöÑÊÄùÊÉ≥ÊòØÁªôÂΩìÂâç‰∏ç‰ΩøÁî®ÁöÑÂÄºÂä†‰∏äÊ†áËÆ∞ÔºåÁÑ∂ÂêéÂÜçÂõûÊî∂ÂÖ∂ÂÜÖÂ≠ò„ÄÇÂè¶‰∏ÄÁßçÂûÉÂúæÊî∂ÈõÜÁÆóÊ≥ïÊòØ‚ÄúÂºïÁî®ËÆ°Êï∞‚ÄùÔºåËøôÁßçÁÆóÊ≥ïÁöÑÊÄùÊÉ≥ÊòØË∑üË∏™ËÆ∞ÂΩïÊâÄÊúâÂÄºË¢´ÂºïÁî®ÁöÑÊ¨°Êï∞„ÄÇJavaScriptÂºïÊìéÁõÆÂâçÈÉΩ‰∏çÂÜç‰ΩøÁî®ËøôÁßçÁÆóÊ≥ïÔºõ‰ΩÜÂú® IE ‰∏≠ËÆøÈóÆÈùûÂéüÁîü JavaScript ÂØπË±°ÔºàÂ¶Ç DOM ÂÖÉÁ¥†ÔºâÊó∂ÔºåËøôÁßçÁÆóÊ≥ï‰ªçÁÑ∂ÂèØËÉΩ‰ºöÂØºËá¥ÈóÆÈ¢ò„ÄÇÂΩì‰ª£Á†Å‰∏≠Â≠òÂú®Âæ™ÁéØÂºïÁî®Áé∞Ë±°Êó∂Ôºå‚ÄúÂºïÁî®ËÆ°Êï∞‚ÄùÁÆóÊ≥ïÂ∞±‰ºöÂØºËá¥ÈóÆÈ¢ò„ÄÇËß£Èô§ÂèòÈáèÁöÑÂºïÁî®‰∏ç‰ªÖÊúâÂä©‰∫éÊ∂àÈô§Âæ™ÁéØÂºïÁî®Áé∞Ë±°ÔºåËÄå‰∏îÂØπÂûÉÂúæÊî∂ÈõÜ‰πüÊúâÂ•ΩÂ§Ñ„ÄÇ‰∏∫‰∫ÜÁ°Æ‰øùÊúâÊïàÂú∞ÂõûÊî∂ÂÜÖÂ≠òÔºåÂ∫îËØ•ÂèäÊó∂Ëß£Èô§‰∏çÂÜç‰ΩøÁî®ÁöÑÂÖ®Â±ÄÂØπË±°„ÄÅÂÖ®Â±ÄÂØπË±°Â±ûÊÄß‰ª•ÂèäÂæ™ÁéØÂºïÁî®ÂèòÈáèÁöÑÂºïÁî®„ÄÇÈó≠ÂåÖ‰∏∫‰ΩïÊúâÁî®ÔºüÈó≠ÂåÖÊòØÊåáÊúâÊùÉËÆøÈóÆÂè¶‰∏Ä‰∏™ÂáΩÊï∞‰ΩúÁî®Âüü‰∏≠ÁöÑÂèòÈáèÁöÑÂáΩÊï∞„ÄÇ ‰∏äÈù¢ÁöÑ‰ΩúÁî®ÂüüÈìæÂØπÁêÜËß£Èó≠ÂåÖËá≥ÂÖ≥ÈáçË¶ÅÔºåÂú®ÂáΩÊï∞ÊâßË°åËøáÁ®ã‰∏≠Ôºå‰∏∫ËØªÂèñÂíåÂÜôÂÖ•ÂèòÈáèÁöÑÂÄºÔºåÂ∞±ÈúÄË¶ÅÂú®‰ΩúÁî®ÂüüÈìæ‰∏≠Êü•ÊâæÂèòÈáè„ÄÇ‰ΩúÁî®ÂüüÈìæ‰∏≠ÂåÖÂê´‰∏§‰∏™ÂèòÈáèÂØπË±°ÔºöÊú¨Âú∞Ê¥ªÂä®ÂØπË±°ÂíåÂÖ®Â±ÄÂèòÈáèÂØπË±°„ÄÇÊòæÁÑ∂Ôºå‰ΩúÁî®ÂüüÈìæÊú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™ÊåáÂêëÂèòÈáèÂØπË±°ÁöÑÊåáÈíàÂàóË°®ÔºåÂÆÉÂè™ÊòØÂºïÁî®‰ΩÜ‰∏çÂÆûÈôÖÂåÖÂê´ÂèòÈáèÂØπË±°„ÄÇ ‰∏ÄËà¨Êù•ËÆ≤ÔºåÂΩìÂáΩÊï∞ÊâßË°åÂÆåÊØïÂêéÔºåÂ±ÄÈÉ®Ê¥ªÂä®ÂØπË±°Â∞±‰ºöË¢´ÈîÄÊØÅÔºåÂÜÖÂ≠ò‰∏≠‰ªÖ‰øùÂ≠òÂÖ®Â±Ä‰ΩúÁî®ÂüüÔºàÂÖ®Â±ÄÊâßË°åÁéØÂ¢ÉÁöÑÂèòÈáèÂØπË±°Ôºâ„ÄÇ‰ΩÜÊòØÈó≠ÂåÖÁöÑÊÉÖÂÜµÁî±ÊúâÊâÄ‰∏çÂêå„ÄÇÈó≠ÂåÖÊòØÊúâÊùÉËÆøÈóÆÂåÖÂê´ÂáΩÊï∞ÁöÑ‰ΩúÁî®ÂüüÁöÑÔºåÈó≠ÂåÖ‰øùÂ≠òÁöÑÊòØÂåÖÂê´ÂáΩÊï∞ÁöÑÂèòÈáèÂØπË±°ÔºåÊâÄ‰ª•ÂÆÉÁöÑÂåÖÂê´ÂáΩÊï∞‰ΩúÁî®Âüü‰∏ç‰ºöË¢´ÈîÄÊØÅÊéâ„ÄÇ ÂÖ≥‰∫éthisÂØπË±°ÊØè‰∏™ÂáΩÊï∞Âú®Ë¢´Ë∞ÉÁî®Êó∂ÈÉΩ‰ºöËá™Âä®ÂèñÂæó‰∏§‰∏™ÁâπÊÆäÂèòÈáèÔºöthis Âíå arguments„ÄÇÂÜÖÈÉ®ÂáΩÊï∞Âú®ÊêúÁ¥¢Ëøô‰∏§‰∏™ÂèòÈáèÊó∂ÔºåÂè™‰ºöÊêúÁ¥¢Âà∞ÂÖ∂Ê¥ªÂä®ÂØπË±°‰∏∫Ê≠¢ÔºåÂõ†Ê≠§Ê∞∏Ëøú‰∏çÂèØËÉΩÁõ¥Êé•ËÆøÈóÆÂ§ñÈÉ®ÂáΩÊï∞‰∏≠ÁöÑËøô‰∏§‰∏™ÂèòÈáè„ÄÇ‰∏çËøáÔºåÊääÂ§ñÈÉ®‰ΩúÁî®Âüü‰∏≠ÁöÑ this ÂØπË±°‰øùÂ≠òÂú®‰∏Ä‰∏™Èó≠ÂåÖËÉΩÂ§üËÆøÈóÆÂà∞ÁöÑÂèòÈáèÈáåÔºåÂ∞±ÂèØ‰ª•ËÆ©Èó≠ÂåÖËÆøÈóÆËØ•ÂØπË±°‰∫Ü 123456789101112var name = &quot;The Window&quot;; var object = &#123; name : &quot;My Object&quot;, getNameFunc : function()&#123; var that = this; return function()&#123; return that.name; &#125;; &#125; &#125;; alert(object.getNameFunc()()); //&quot;My Object&quot; Âú®ÂÆö‰πâÂåøÂêçÂáΩÊï∞‰πãÂâçÔºåÊàë‰ª¨Êää thisÂØπË±°ËµãÂÄºÁªô‰∫Ü‰∏Ä‰∏™ÂêçÂè´ that ÁöÑÂèòÈáè„ÄÇËÄåÂú®ÂÆö‰πâ‰∫ÜÈó≠ÂåÖ‰πãÂêéÔºåÈó≠ÂåÖ‰πüÂèØ‰ª•ËÆøÈóÆËøô‰∏™ÂèòÈáèÔºåÂõ†‰∏∫ÂÆÉÊòØÊàë‰ª¨Âú®ÂåÖÂê´ÂáΩÊï∞‰∏≠ÁâπÊÑèÂ£∞ÂêçÁöÑ‰∏Ä‰∏™ÂèòÈáè„ÄÇÂç≥‰ΩøÂú®ÂáΩÊï∞ËøîÂõû‰πãÂêéÔºåthat ‰πü‰ªçÁÑ∂ÂºïÁî®ÁùÄ objectÔºåÊâÄ‰ª•Ë∞ÉÁî®object.getNameFunc()()Â∞±ËøîÂõû‰∫Ü‚ÄùMy Object‚Äù„ÄÇ this Âíå arguments ‰πüÂ≠òÂú®ÂêåÊ†∑ÁöÑÈóÆÈ¢ò„ÄÇÂ¶ÇÊûúÊÉ≥ËÆøÈóÆ‰ΩúÁî®Âüü‰∏≠ÁöÑ arguments ÂØπË±°ÔºåÂøÖÈ°ªÂ∞ÜÂØπËØ•ÂØπË±°ÁöÑÂºïÁî®‰øùÂ≠òÂà∞Âè¶‰∏Ä‰∏™Èó≠ÂåÖËÉΩÂ§üËÆøÈóÆÁöÑÂèòÈáè‰∏≠„ÄÇ Èó≠ÂåÖÊúâÂèØËÉΩ‰∫ßÁîüÁöÑÈóÆÈ¢òÔºöÂÜÖÂ≠òÊ≥ÑÊºè Áî±‰∫é IE9 ‰πãÂâçÁöÑÁâàÊú¨ÂØπ JScript ÂØπË±°Âíå COM ÂØπË±°‰ΩøÁî®‰∏çÂêåÁöÑÂûÉÂúæÊî∂ÈõÜ‰æãÁ®ãÔºåÂõ†Ê≠§Èó≠ÂåÖÂú® IE ÁöÑËøô‰∫õÁâàÊú¨‰∏≠‰ºöÂØºËá¥‰∏Ä‰∫õÁâπÊÆäÁöÑÈóÆÈ¢ò„ÄÇÂÖ∑‰ΩìÊù•ËØ¥ÔºåÂ¶ÇÊûúÈó≠ÂåÖÁöÑ‰ΩúÁî®ÂüüÈìæ‰∏≠‰øùÂ≠òÁùÄ‰∏Ä‰∏™HTML ÂÖÉÁ¥†ÔºåÈÇ£‰πàÂ∞±ÊÑèÂë≥ÁùÄËØ•ÂÖÉÁ¥†Â∞ÜÊó†Ê≥ïË¢´ÈîÄÊØÅ„ÄÇÊù•Áúã‰∏ãÈù¢ÁöÑ‰æãÂ≠ê„ÄÇ Javascriptfunction assignHandler(){ var element &#x3D; document.getElementById(‚ÄúsomeElement‚Äù); element.onclick &#x3D; function(){ alert(element.id); };}‰ª•‰∏ä‰ª£Á†ÅÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰Ωú‰∏∫ element ÂÖÉÁ¥†‰∫ã‰ª∂Â§ÑÁêÜÁ®ãÂ∫èÁöÑÈó≠ÂåÖÔºåËÄåËøô‰∏™Èó≠ÂåÖÂàôÂèàÂàõÂª∫‰∫Ü‰∏Ä‰∏™Âæ™ÁéØÂºïÁî®Ôºà‰∫ã‰ª∂Â∞ÜÂú®Á¨¨ 13 Á´†ËÆ®ËÆ∫Ôºâ„ÄÇÁî±‰∫éÂåøÂêçÂáΩÊï∞‰øùÂ≠ò‰∫Ü‰∏Ä‰∏™ÂØπ assignHandler()ÁöÑÊ¥ªÂä®ÂØπË±°ÁöÑÂºïÁî®ÔºåÂõ†Ê≠§Â∞±‰ºöÂØºËá¥Êó†Ê≥ïÂáèÂ∞ë element ÁöÑÂºïÁî®Êï∞„ÄÇÂè™Ë¶ÅÂåøÂêçÂáΩÊï∞Â≠òÂú®Ôºåelement ÁöÑÂºïÁî®Êï∞Ëá≥Â∞ë‰πüÊòØ 1ÔºåÂõ†Ê≠§ÂÆÉÊâÄÂç†Áî®ÁöÑÂÜÖÂ≠òÂ∞±Ê∞∏Ëøú‰∏ç‰ºöË¢´ÂõûÊî∂„ÄÇ ‰∏çËøáÔºåËøô‰∏™ÈóÆÈ¢òÂèØ‰ª•ÈÄöËøáÁ®çÂæÆÊîπÂÜô‰∏Ä‰∏ã‰ª£Á†ÅÊù•Ëß£ÂÜ≥ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫„ÄÇ 12345678function assignHandler()&#123; var element = document.getElementById(&quot;someElement&quot;); var id = element.id; element.onclick = function()&#123; alert(id); &#125;; element = null; &#125; Âú®‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÔºåÈÄöËøáÊää element.id ÁöÑ‰∏Ä‰∏™ÂâØÊú¨‰øùÂ≠òÂú®‰∏Ä‰∏™ÂèòÈáè‰∏≠ÔºåÂπ∂‰∏îÂú®Èó≠ÂåÖ‰∏≠ÂºïÁî®ËØ•ÂèòÈáèÊ∂àÈô§‰∫ÜÂæ™ÁéØÂºïÁî®„ÄÇ‰ΩÜ‰ªÖ‰ªÖÂÅöÂà∞Ëøô‰∏ÄÊ≠•ÔºåËøòÊòØ‰∏çËÉΩËß£ÂÜ≥ÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÈóÆÈ¢ò„ÄÇÂøÖÈ°ªË¶ÅËÆ∞‰ΩèÔºöÈó≠ÂåÖ‰ºöÂºïÁî®ÂåÖÂê´ÂáΩÊï∞ÁöÑÊï¥‰∏™Ê¥ªÂä®ÂØπË±°ÔºåËÄåÂÖ∂‰∏≠ÂåÖÂê´ÁùÄ element„ÄÇÂç≥‰ΩøÈó≠ÂåÖ‰∏çÁõ¥Êé•ÂºïÁî® elementÔºåÂåÖÂê´ÂáΩÊï∞ÁöÑÊ¥ªÂä®ÂØπË±°‰∏≠‰πü‰ªçÁÑ∂‰ºö‰øùÂ≠ò‰∏Ä‰∏™ÂºïÁî®„ÄÇÂõ†Ê≠§ÔºåÊúâÂøÖË¶ÅÊää element ÂèòÈáèËÆæÁΩÆ‰∏∫ null„ÄÇËøôÊ†∑Â∞±ËÉΩÂ§üËß£Èô§ÂØπ DOM ÂØπË±°ÁöÑÂºïÁî®ÔºåÈ°∫Âà©Âú∞ÂáèÂ∞ëÂÖ∂ÂºïÁî®Êï∞ÔºåÁ°Æ‰øùÊ≠£Â∏∏ÂõûÊî∂ÂÖ∂Âç†Áî®ÁöÑÂÜÖÂ≠ò„ÄÇ 1.‰ΩøÁî®Èó≠ÂåÖÂèØ‰ª•Âú®JavaScript‰∏≠Ê®°‰ªøÂùóÁ∫ß‰ΩúÁî®ÂüüÔºàJavaScriptÊú¨Ë∫´Ê≤°ÊúâÂùóÁ∫ß‰ΩúÁî®ÂüüÁöÑÊ¶ÇÂøµÔºâ„ÄÇÂàõÂª∫Âπ∂Á´ãÂç≥Ë∞ÉÁî®‰∏Ä‰∏™ÂáΩÊï∞ÔºåËøôÊ†∑Êó¢ÂèØ‰ª•ÊâßË°åÂÖ∂‰∏≠ÁöÑ‰ª£Á†ÅÔºåÂèà‰∏ç‰ºöÂú®ÂÜÖÂ≠ò‰∏≠Áïô‰∏ãÂØπËØ•ÂáΩÊï∞ÁöÑÂºïÁî®ÔºõÁªìÊûúÂ∞±ÊòØÂáΩÊï∞ÂÜÖÈÉ®ÁöÑÊâÄÊúâÂèòÈáèÈÉΩ‰ºöË¢´Á´ãÂç≥ÈîÄÊØÅ‚Äî‚ÄîÈô§ÈùûÂ∞ÜÊüê‰∫õÂèòÈáèËµãÂÄºÁªô‰∫ÜÂåÖÂê´‰ΩúÁî®ÂüüÔºàÂç≥Â§ñÈÉ®‰ΩúÁî®ÂüüÔºâ‰∏≠ÁöÑÂèòÈáè„ÄÇÂÉèC++ÊòØÁî±ÂùóÁ∫ß‰ΩúÁî®ÂüüÁöÑÂ∞±ÊòØÂú®{}‰∏≠Â£∞ÊòéÁöÑÂèòÈáèÁöÑÁîüÂëΩÂë®ÊúüÂè™Âú®ËøôÂØπËä±Êã¨Âè∑‰∏≠ÔºåÂú®Ëä±Êã¨Âè∑Â§ñÊòØËÆøÈóÆ‰∏çÂà∞ÁöÑ„ÄÇËÄåjsÂπ∂‰∏çÊòØËøôÊ†∑„ÄÇ 123456function outputNumbers(count)&#123; for (var i=0; i &lt; count; i++)&#123; alert(i); &#125; alert(i); //ËÆ°Êï∞&#125; Ëøô‰∏™ÂáΩÊï∞‰∏≠ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ for Âæ™ÁéØÔºåËÄåÂèòÈáè i ÁöÑÂàùÂßãÂÄºË¢´ËÆæÁΩÆ‰∏∫ 0„ÄÇÂú® Java„ÄÅC++Á≠âËØ≠Ë®Ä‰∏≠ÔºåÂèòÈáè iÂè™‰ºöÂú® for Âæ™ÁéØÁöÑËØ≠Âè•Âùó‰∏≠ÊúâÂÆö‰πâÔºåÂæ™ÁéØ‰∏ÄÊó¶ÁªìÊùüÔºåÂèòÈáè i Â∞±‰ºöË¢´ÈîÄÊØÅ„ÄÇÂèØÊòØÂú® JavaScrip ‰∏≠ÔºåÂèòÈáè iÊòØÂÆö‰πâÂú® ouputNumbers()ÁöÑÊ¥ªÂä®ÂØπË±°‰∏≠ÁöÑÔºåÂõ†Ê≠§‰ªéÂÆÉÊúâÂÆö‰πâÂºÄÂßãÔºåÂ∞±ÂèØ‰ª•Âú®ÂáΩÊï∞ÂÜÖÈÉ®ÈöèÂ§ÑËÆøÈóÆÂÆÉ„ÄÇÂç≥‰ΩøÂÉè‰∏ãÈù¢ËøôÊ†∑ÈîôËØØÂú∞ÈáçÊñ∞Â£∞ÊòéÂêå‰∏Ä‰∏™ÂèòÈáèÔºå‰πü‰∏ç‰ºöÊîπÂèòÂÆÉÁöÑÂÄº„ÄÇ ÂèØ‰ª•ÂÄüÂä©ÂåøÂêçÂáΩÊï∞ÂÆûÁé∞ÂùóÁ∫ß‰ΩúÁî®ÂüüÔºåÂáΩÊï∞Ë°®ËææÂºèÂêéÈù¢Ë∑üÂúÜÊã¨Âè∑Ôºå‰ª£Ë°®Á´ãÂç≥ÊâßË°åÔºåÂΩ¢ÊàêÁßÅÊúâ‰ΩúÁî®ÂüüÔºåÊâßË°åÂÆå‰πãÂêéÔºåÈáåÈù¢ÁöÑÂèòÈáè‰πü‰ºöË¢´ÂõûÊî∂Ë∞É„ÄÇ 123456789101112(function()&#123; //ËøôÈáåÊòØÂùóÁ∫ß‰ΩúÁî®Âüü&#125;)();Javascriptfunction outputNumbers(count)&#123; (function () &#123; for (var i=0; i &lt; count; i++)&#123; alert(i); &#125; &#125;)(); alert(i); //ÂØºËá¥‰∏Ä‰∏™ÈîôËØØÔºÅ&#125; ËøôÁßçÊäÄÊúØÁªèÂ∏∏Âú®ÂÖ®Â±Ä‰ΩúÁî®Âüü‰∏≠Ë¢´Áî®Âú®ÂáΩÊï∞Â§ñÈÉ®Ôºå‰ªéËÄåÈôêÂà∂ÂêëÂÖ®Â±Ä‰ΩúÁî®Âüü‰∏≠Ê∑ªÂä†ËøáÂ§öÁöÑÂèòÈáèÂíåÂáΩÊï∞„ÄÇ‰∏ÄËà¨Êù•ËØ¥ÔºåÊàë‰ª¨ÈÉΩÂ∫îËØ•Â∞ΩÈáèÂ∞ëÂêëÂÖ®Â±Ä‰ΩúÁî®Âüü‰∏≠Ê∑ªÂä†ÂèòÈáèÂíåÂáΩÊï∞„ÄÇÂú®‰∏Ä‰∏™Áî±ÂæàÂ§öÂºÄÂèë‰∫∫ÂëòÂÖ±ÂêåÂèÇ‰∏éÁöÑÂ§ßÂûãÂ∫îÁî®Á®ãÂ∫è‰∏≠ÔºåËøáÂ§öÁöÑÂÖ®Â±ÄÂèòÈáèÂíåÂáΩÊï∞ÂæàÂÆπÊòìÂØºËá¥ÂëΩÂêçÂÜ≤Á™Å„ÄÇËÄåÈÄöËøáÂàõÂª∫ÁßÅÊúâ‰ΩúÁî®ÂüüÔºåÊØè‰∏™ÂºÄÂèë‰∫∫ÂëòÊó¢ÂèØ‰ª•‰ΩøÁî®Ëá™Â∑±ÁöÑÂèòÈáèÔºåÂèà‰∏çÂøÖÊãÖÂøÉÊêû‰π±ÂÖ®Â±Ä‰ΩúÁî®Âüü„ÄÇ 2.Èó≠ÂåÖËøòÂèØ‰ª•Áî®‰∫éÂØπË±°‰∏≠ÂàõÂª∫ÁßÅÊúâÂèòÈáèÂç≥‰ΩøJavaScript‰∏≠ËøòÊ≤°ÊúâÊ≠£ÂºèÁöÑÁßÅÊúâÂØπË±°Â±ûÊÄßÁöÑÊ¶ÇÂøµÔºå‰ΩÜÂèØ‰ª•‰ΩøÁî®Èó≠ÂåÖÊù•ÂÆûÁé∞ÂÖ¨ÊúâÊñπÊ≥ïÔºåËÄåÈÄöËøáÂÖ¨ÊúâÊñπÊ≥ïÂèØ‰ª•ËÆøÈóÆÂú®ÂåÖÂê´‰ΩúÁî®Âüü‰∏≠ÁöÑÂÆö‰πâÁöÑÂèòÈáè„ÄÇÊúâÊùÉËÆøÈóÆÁßÅÊúâÂèòÈáèÁöÑÂÖ¨ÊúâÊñπÊ≥ïÂè´ÂÅöÁâπÊùÉÊñπÊ≥ï„ÄÇÂèØ‰ª•‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞Ê®°Âºè„ÄÅÂéüÂûãÊ®°ÂºèÊù•ÂÆûÁé∞Ëá™ÂÆö‰πâÁ±ªÂûãÁöÑÁâπÊùÉÊñπÊ≥ïÔºå‰πüÂèØ‰ª•‰ΩøÁî®Ê®°ÂùóÊ®°Âºè„ÄÅÂ¢ûÂº∫ÁöÑÊ®°ÂùóÊ®°ÂºèÊù•ÂÆûÁé∞Âçï‰æãÁöÑÁâπÊùÉÊñπÊ≥ï„ÄÇ‰∏•Ê†ºÊù•ËÆ≤ÔºåJavaScript ‰∏≠Ê≤°ÊúâÁßÅÊúâÊàêÂëòÁöÑÊ¶ÇÂøµÔºõÊâÄÊúâÂØπË±°Â±ûÊÄßÈÉΩÊòØÂÖ¨ÊúâÁöÑ„ÄÇ‰∏çËøáÔºåÂÄíÊòØÊúâ‰∏Ä‰∏™ÁßÅÊúâÂèòÈáèÁöÑÊ¶ÇÂøµ„ÄÇ‰ªª‰ΩïÂú®ÂáΩÊï∞‰∏≠ÂÆö‰πâÁöÑÂèòÈáèÔºåÈÉΩÂèØ‰ª•ËÆ§‰∏∫ÊòØÁßÅÊúâÂèòÈáèÔºåÂõ†‰∏∫‰∏çËÉΩÂú®ÂáΩÊï∞ÁöÑÂ§ñÈÉ®ËÆøÈóÆËøô‰∫õÂèòÈáè„ÄÇÁßÅÊúâÂèòÈáèÂåÖÊã¨ÂáΩÊï∞ÁöÑÂèÇÊï∞„ÄÅÂ±ÄÈÉ®ÂèòÈáèÂíåÂú®ÂáΩÊï∞ÂÜÖÈÉ®ÂÆö‰πâÁöÑÂÖ∂‰ªñÂáΩÊï∞„ÄÇ 123456789101112function Person(name)&#123; this.getName = function()&#123; return name; &#125;; this.setName = function (value) &#123; name = value; &#125;; &#125; var person = new Person(&quot;Nicholas&quot;); alert(person.getName()); //&quot;Nicholas&quot; person.setName(&quot;Greg&quot;); alert(person.getName()); //&quot;Greg&quot; Âú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂÆö‰πâÁâπÊùÉÊñπÊ≥ï‰πüÊúâ‰∏Ä‰∏™Áº∫ÁÇπÔºåÈÇ£Â∞±ÊòØ‰Ω†ÂøÖÈ°ª‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞Ê®°ÂºèÊù•ËææÂà∞Ëøô‰∏™ÁõÆÁöÑ„ÄÇÊûÑÈÄ†ÂáΩÊï∞Ê®°ÂºèÁöÑÁº∫ÁÇπÊòØÈíàÂØπÊØè‰∏™ÂÆû‰æãÈÉΩ‰ºöÂàõÂª∫ÂêåÊ†∑‰∏ÄÁªÑÊñ∞ÊñπÊ≥ïÔºåËÄå‰ΩøÁî®ÈùôÊÄÅÁßÅÊúâÂèòÈáèÊù•ÂÆûÁé∞ÁâπÊùÉÊñπÊ≥ïÂ∞±ÂèØ‰ª•ÈÅøÂÖçËøô‰∏™ÈóÆÈ¢ò„ÄÇ ÈùôÊÄÅÁßÅÊúâÂèòÈáè„ÄÇ‰∏ªË¶Å‰ΩøÁî®ÂéüÂûãÊ®°ÂºèÔºåÂÖ¨ÊúâÊñπÊ≥ïÂÆö‰πâÂú®ÂéüÂûã‰∏äÔºå‰ΩøÁî®‰∏Ä‰∏™Êú™ÁªèÂ£∞ÊòéÁöÑÂèòÈáèÔºàÂèòÊàêÂÖ®Â±ÄÂèòÈáèÔºâÔºåËÉΩÂ§üÂú®ÁßÅÊúâ‰ΩúÁî®Âüü‰πãÂ§ñË¢´ËÆøÈóÆÂà∞„ÄÇÊ®°ÂùóÊ®°Âºè„ÄÇÊ®°ÂùóÊ®°ÂºèÈÄöËøá‰∏∫Âçï‰æãÔºà‰∏Ä‰∏™ÂÆû‰æãÂØπË±°ÔºâÊ∑ªÂä†ÁßÅÊúâÂèòÈáèÂíåÁâπÊùÉÊñπÊ≥ïËÉΩÂ§ü‰ΩøÂÖ∂ÂæóÂà∞Â¢ûÂº∫„ÄÇÂ¢ûÂº∫ÁöÑÊ®°ÂùóÊ®°Âºè„ÄÇÂú®Ê®°ÂùóÊ®°ÂºèÁöÑÂü∫Á°Ä‰∏äÔºåÂú®ËøîÂõûÂØπË±°‰πãÂâçÂä†ÂÖ•ÂØπÂÖ∂Â¢ûÂº∫ÁöÑ‰ª£Á†Å„ÄÇJavaScript‰∏≠ÁöÑÂáΩÊï∞Ë°®ËææÂºèÂíåÈó≠ÂåÖÈÉΩÊòØÊûÅÂÖ∂ÊúâÁî®ÁöÑÁâπÊÄßÔºåÂà©Áî®ÂÆÉ‰ª¨ÂèØ‰ª•ÂÆûÁé∞ÂæàÂ§öÂäüËÉΩ„ÄÇ‰∏çËøáÂõ†‰∏∫ÂàõÂª∫Èó≠ÂåÖÂøÖÈ°ªÁª¥Êä§È¢ùÂ§ñÁöÑ‰ΩúÁî®ÂüüÔºåÊâÄ‰ª•ËøáÂ∫¶‰ΩøÁî®ÂÆÉ‰ª¨ÂèØËÉΩ‰ºöÂç†Áî®Â§ßÈáèÂÜÖÂ≠ò„ÄÇ","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"Ê®°ÊãüÂÆûÁé∞Êï∞ÁªÑÁöÑforEach","slug":"es6-Ê®°ÊãüÂÆûÁé∞Êï∞ÁªÑÁöÑforEaches6-Ê®°ÊãüÂÆûÁé∞Êï∞ÁªÑÁöÑforEach","date":"2020-04-10T16:00:00.000Z","updated":"2024-10-12T08:40:56.541Z","comments":true,"path":"2020/04/11/es6-Ê®°ÊãüÂÆûÁé∞Êï∞ÁªÑÁöÑforEaches6-Ê®°ÊãüÂÆûÁé∞Êï∞ÁªÑÁöÑforEach/","permalink":"https://justsso1.github.io/2020/04/11/es6-%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0%E6%95%B0%E7%BB%84%E7%9A%84forEaches6-%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0%E6%95%B0%E7%BB%84%E7%9A%84forEach/","excerpt":"","text":"JavascriptÂ∫ïÂ±ÇÊ∫êÁ†ÅÂ∫îËØ•ÊòØÁî®c&#x2F;c++ÂÜôÁöÑÔºåÂπ∂‰∏çÊòØJS‰ª£Á†ÅÔºåÊâÄ‰ª•Âè™ËÉΩÊòØÂ∞ΩÂèØËÉΩÁöÑÊ®°Êãü ÂÖàËÆ≤‰∏Ä‰∏ãforEachÁöÑapiÁî®Ê≥ïÔºö forEach(function(currentValue, index, arr), thisArg) forEachÂ∫ïÂ±ÇÊòØÁî®ÁöÑÊúÄÂü∫Êú¨ÁöÑforÂæ™ÁéØÂÆûÁé∞ÁöÑÔºöJavascriptÂ∫ïÂ±ÇÊ∫êÁ†ÅÂ∫îËØ•ÊòØÁî®c&#x2F;c++ÂÜôÁöÑÔºåÂπ∂‰∏çÊòØJS‰ª£Á†ÅÔºåÊâÄ‰ª•Âè™ËÉΩÊòØÂ∞ΩÂèØËÉΩÁöÑÊ®°Êãü ÂÖàËÆ≤‰∏Ä‰∏ãforEachÁöÑapiÁî®Ê≥ïÔºö forEach(function(currentValue, index, arr), thisArg) forEachÂ∫ïÂ±ÇÊòØÁî®ÁöÑÊúÄÂü∫Êú¨ÁöÑforÂæ™ÁéØÂÆûÁé∞ÁöÑÔºö","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"ËÅäËÅäfunction‰∏éÂéüÂûãÈìæ","slug":"ËÅäËÅäfunction‰∏éÂéüÂûãÈìæ","date":"2020-04-10T16:00:00.000Z","updated":"2024-10-16T03:56:52.734Z","comments":true,"path":"2020/04/11/ËÅäËÅäfunction‰∏éÂéüÂûãÈìæ/","permalink":"https://justsso1.github.io/2020/04/11/%E8%81%8A%E8%81%8Afunction%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/","excerpt":"","text":"ËÅäËÅäfunction‰∏éÂéüÂûãÈìæÂâçË®ÄÔºöfunctionÂú®js‰∏≠ÊâÆÊºî‰∫Ü‰∏æË∂≥ËΩªÈáçÁöÑËßíËâ≤ÔºåÊòØ‰∏ÄÁ≠âÂÖ¨Ê∞ë„ÄÇfunctionÂíånewÂú®‰∏ÄËµ∑‰ºöÊúâÂÆû‰æã„ÄÅÂéüÂûã„ÄÅÂéüÂûãÈìæÁ≠â‰∏ÄÁ≥ªÂàóÈóÆÈ¢ò„ÄÇfunction‰∏≠ËÆøÈóÆÂèòÈáè‰ºöÊúâ‰ΩúÁî®Âüü„ÄÅ‰ΩúÁî®ÂüüÈìæÁöÑÈóÆÈ¢òÔºå‰ª•ÂèäÈó≠ÂåÖÁ≠âÊ¶ÇÂøµ„ÄÇ Êú¨ÁØáÊñáÁ´†‰∏ªË¶ÅËÆ≤Ëß£ÂéüÂûãÈìæÁõ∏ÂÖ≥ÁöÑÂÜÖÂÆπÔºå‰∏ãÁØáÊñáÁ´†Â∞Ü‰ºöËÆ≤Ëß£‰ΩúÁî®ÂüüÈìæÁõ∏ÂÖ≥ÂÜÖÂÆπ„ÄÇ js‰∏≠Á•ûÂ•áÁöÑÁöÑfunctionjs‰∏≠ÁöÑfunctionÂÖ∂ÂÆûÊòØFunctionÁ±ªÂûãÁöÑÂÆû‰æã„ÄÇFunctionÁ±ªÂûãÂáΩÊï∞ÊòØjsËØ≠Ë®ÄËá™ÊúâÁöÑÁ±ªÂûãÔºåËÄå‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÂáΩÊï∞ÊòØFunctionÁ±ªÂûãÁöÑÂÆû‰æãÔºåÂáΩÊï∞ÂêçÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™ÊåáÂêëÂáΩÊï∞ÂÆû‰æãÂØπË±°ÁöÑÊåáÈíà„ÄÇËÄå‰∏îÔºåjs‰∏≠ÁöÑfunctionÂè™‰∏çËøáÊòØÂ∞Ü‰∏Ä‰∫õËØ≠Âè•Â∞ÅË£ÖÂú®‰∏ÄËµ∑ÔºåÂú®ÂáΩÊï∞Ë¢´ÊâßË°åÊó∂ÔºåÊâçÁ°ÆÂÆöÂÆÉÁªëÂÆöÁöÑÁéØÂ¢ÉÂØπË±°ÔºåÊâç‰ºöÂàõÂª∫Ê¥ªÂä®ÂØπË±°ÔºåÊâÄ‰ª•ÂáΩÊï∞ÈùûÂ∏∏ÁÅµÊ¥ªÔºåÂèØ‰ª•Âä®ÊÄÅÊîπÂèòÁªëÂÆöÁöÑÁéØÂ¢ÉÂØπË±°ÔºåËææÂà∞Â§çÁî®„ÄÇ functionÊúâ‰∏§‰∏™ÈáçË¶ÅÁöÑÂ±ûÊÄßÔºöargumentsÂíåthisÂØπË±°„ÄÇargumentsÁ±ª‰ººÊï∞ÁªÑÔºå‰øùÂ≠òÁùÄÂáΩÊï∞‰º†ÂÖ•ÂèÇÊï∞ÁöÑ‰∏Ä‰ªΩÂâØÊú¨ÔºåthisÂØπË±°ÊòØÊåáÂáΩÊï∞ÊçÆ‰ª•ÊâßË°åÁöÑÁéØÂ¢ÉÂØπË±°ÔºåÊú¨ÁØá‰∏ªË¶ÅËÆ≤Ëß£this. ÂáΩÊï∞functionÂç≥ÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî®Ôºå‰πüÂèØ‰ª•‰ΩøÁî®newÂèòÈáèË∞ÉÁî®ÔºåËøôÊ†∑ÁöÑÂáΩÊï∞Âè´ÊûÑÈÄ†ÂáΩÊï∞ÔºåËôΩÁÑ∂Êú¨Ë¥®‰∏äÂíåÊôÆÈÄöÂáΩÊï∞Ê≤°ÊúâÂå∫Âà´Ôºå‰ΩÜÊòØ‰∏∫‰∫ÜÂàõÂª∫Ëá™ÂÆö‰πâÁ±ªÂûãÔºåÂÅöÂá∫Âå∫ÂàÜÔºåÊûÑÈÄ†ÂáΩÊï∞ÁöÑÈ¶ñÂ≠óÊØç‰∏ÄËà¨Â§ßÂÜô„ÄÇ ÁÑ∂Âêéjs‰∏≠ÁöÑÈù¢ÂêëÂØπË±°Â∞±ÂæàÊúâË∂£‰∫ÜÔºåjavascript‰πüÊòØÈù¢ÂêëÂØπË±°ÁöÑÁ®ãÂ∫èËÆæËÆ°ËØ≠Ë®ÄÔºå‰ΩÜÂÆÉÂíå‰º†ÁªüËØ≠Ë®ÄÂ¶Çc++Âú®Èù¢ÂêëÂØπË±°ÁöÑËÆæËÆ°‰∏äÊúâÂæàÂ§ß‰∏çÂêåÔºåjsÊ≤°ÊúâclassÁ±ªÁöÑÊ¶ÇÂøµÔºåÂÆÉÂà©Áî®functionÁöÑprototype Ôºå‰πüÂ∞±ÊòØÂéüÂûãÈìæÊù•ÂÆåÊàêÈù¢ÂêëÂØπË±°ÁöÑËÆæËÆ°„ÄÇÂÖàÁúã‰∏Ä‰∏ã‰º†ÁªüÁöÑÈù¢ÂêëÂØπË±°Á®ãÂ∫èÁöÑ‰ªãÁªçÂêßÔºö Èù¢ÂêëÂØπË±°Á®ãÂ∫èËÆæËÆ°‰ª•ÂØπË±°‰∏∫Ê†∏ÂøÉÔºåËØ•ÊñπÊ≥ïËÆ§‰∏∫Á®ãÂ∫èÁî±‰∏ÄÁ≥ªÂàóÂØπË±°ÁªÑÊàê„ÄÇÁ±ªÊòØÂØπÁé∞ÂÆû‰∏ñÁïåÁöÑÊäΩË±°ÔºåÂåÖÊã¨Ë°®Á§∫ÈùôÊÄÅÂ±ûÊÄßÁöÑÊï∞ÊçÆÂíåÂØπÊï∞ÊçÆÁöÑÊìç‰ΩúÔºåÂØπË±°ÊòØÁ±ªÁöÑÂÆû‰æãÂåñ„ÄÇÂØπË±°Èó¥ÈÄöËøáÊ∂àÊÅØ‰º†ÈÄíÁõ∏‰∫íÈÄö‰ø°ÔºåÊù•Ê®°ÊãüÁé∞ÂÆû‰∏ñÁïå‰∏≠‰∏çÂêåÂÆû‰ΩìÈó¥ÁöÑËÅîÁ≥ª„ÄÇÂú®Èù¢ÂêëÂØπË±°ÁöÑÁ®ãÂ∫èËÆæËÆ°‰∏≠ÔºåÂØπË±°ÊòØÁªÑÊàêÁ®ãÂ∫èÁöÑÂü∫Êú¨Ê®°Âùó„ÄÇ Ë¶ÅÁü•ÈÅìjsËøôÈó®ËØ≠Ë®ÄÁöÑÂéÜÂè≤ÔºåÂÆÉÊòØÂàõÂßã‰∫∫Brendan EichÂ§ß‰Ω¨Âú®Âá†Â§©‰πãÁ±ªÂàõÈÄ†Âá∫Êù•ÁöÑ‰∏ÄÈó®Êñ∞ÁöÑËØ≠Ë®ÄÔºå‰∏∫‰∫ÜËÆ©ËøôÈó®ËØ≠Ë®ÄÁúãËµ∑Êù•ÂÉèJavaÊõ¥ÂèóÊ¨¢ËøéÔºåÊâçÂèñÂêçJavascriptÔºåÂΩìÊó∂js‰πüÊòØË∑ëÂú®ÊµèËßàÂô®‰∏≠ÁöÑËÑöÊú¨ËØ≠Ë®ÄÔºå‰πüÊ≤°ÊÉ≥Èù¢ÂêëÂØπË±°ÂÉèÂº∫Á±ªÂûãËØ≠Ë®ÄÈÇ£Ê†∑ËÆæËÆ°ÔºåÊâÄ‰ª•Â∞±Êàê‰∫ÜÂà©Áî®functionÂíåprototypeËøô‰∏™È¨ºÊ†∑Â≠êÊù•ÂÆûÁé∞ÔºåÂèØËßÅÔºåÂçÉ‰∏á‰∏çË¶ÅËµ∂Â∑•ÂïäÔΩû‰Ω†ÁúãÁúã‰∏∫‰∫ÜÂÆåÊàê‰ªªÂä°ÔºåÁïô‰∫ÜÂ§öÂ∞ëÂùëÔºåÊ≥™ÔΩûÊâÄ‰ª•javaÂíåjavascriptÊòØÈõ∑ÈîãÂíåÈõ∑Â≥∞Â°îÁöÑÂÖ≥Á≥ª„ÄÇ Èù¢ÂêëÂØπË±°Ë¶ÅÊúâÂØπË±°ÂíåÁªßÊâøÔºåÊàë‰ª¨ÂÖàËÆ≤js‰∏≠ÊÄé‰πàÂàõÂª∫ÂØπË±°ÔºåÁÑ∂ÂêéËÆ≤ÊÄé‰πàÁªßÊâø„ÄÇ ÊØè‰∏Ä‰∏™functionÂú®Â£∞ÊòéÁöÑÊó∂ÂÄôÔºåÂ∞±Êúâ‰∏Ä‰∏™prototypeÂ±ûÊÄßÔºåÂÆÉÊåáÂêëËØ•ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂéüÂûãÂØπË±°„ÄÇÂà©Áî®new Êìç‰ΩúÊûÑÂª∫ÂáΩÊï∞ÂàõÂª∫ÁöÑÂÆû‰æãÔºåËøô‰∏âËÄÖ‰πãÈó¥ÊòØ‰ªÄ‰πàÂÖ≥Á≥ªÂë¢ÔºüÊûÑÈÄ†ÂáΩÊï∞ÁöÑprototypeÊåáÂêëÂéüÂûãÂØπË±°ÔºåÂéüÂûãÂØπË±°ÈªòËÆ§Êúâ‰∏Ä‰∏™constructorÂ±ûÊÄßÊåáÂêëÊûÑÈÄ†ÂáΩÊï∞ÔºõÂÆû‰æãÊúâ‰∏Ä‰∏™protoÂ±ûÊÄßÊåáÂêëÂéüÂûãÂØπË±°„ÄÇ ËôΩÁÑ∂ÂàõÂª∫ÂØπË±°ÂèØ‰ª•‰ΩøÁî®new Object()‰πãÁ±ªÁöÑÔºå‰ΩÜÊòØË¶ÅÂÆûÁé∞Èù¢ÂêëÂØπË±°ÁöÑÁªßÊâøÔºåÂ∞±Á¶ª‰∏çÂºÄÂéüÂûãÈìæ‰∫Ü„ÄÇ ÊûÑÈÄ†ÂáΩÊï∞ÂÖ∂ÂÆûÊòØjs‰∏≠ÂàõÂª∫ÂØπË±°ÁöÑ‰∏ÄÁßçÊñπÂºèÔºåËøòÊúâÂÖ∂‰ªñÊñπÂºèÔºåÂ¶ÇÂ∑•ÂéÇÊ®°Âºè„ÄÅÂéüÂûãÊ®°Âºè„ÄÅÁªÑÂêà‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞ÂíåÂéüÂûãÊ®°ÂºèÁ≠âÔºåÊú¨ÁØáÊñáÁ´†‰ºöËÆ≤ÂíåÂéüÂûãÈìæÁõ∏ÂÖ≥ÁöÑÔºåÂÖ∂‰ªñÁöÑ‰∏ç‰ºöÁªÜÁªÜÁöÑËÆ≤„ÄÇ ÂàõÂª∫ÂØπË±°Â∑•ÂéÇÊ®°ÂºèÂ∑•ÂéÇÊ®°ÂºèÔºåÂ∞±ÊòØÂ∞ÅË£Ö‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂÜÖÈÉ®Ë¥üË¥£Áîü‰∫ßÂØπË±°„ÄÇ 123456789101112 var o = new Object(); o.name = name; o.age = age; o.job = job; o.sayName = function()&#123; alert(this.name); &#125;; return o; &#125; var person1 = createPerson(&quot;Nicholas&quot;, 29, &quot;Software Engineer&quot;); var person2 = createPerson(&quot;Greg&quot;, 27, &quot;Doctor&quot;); Áº∫ÁÇπÔºöÁîü‰∫ßÂá∫ÁöÑÂØπË±°Ê≤°ÊúâÁ±ªÂûãÂèØË®Ä„ÄÇ ÊûÑÈÄ†ÂáΩÊï∞Ê®°ÂºèÂºÄÂ§¥ËØ¥‰∫ÜfunctionÂèØ‰ª•‰Ωú‰∏∫ÊûÑÈÄ†ÂáΩÊï∞Áî®newÂàõÂª∫ÂÆû‰æãÔºå‰∏äÊñá‰πüÂü∫Êú¨ËØ¥‰∫ÜÊûÑÈÄ†ÂáΩÊï∞„ÄÇ 12345678910function Person(name, age, job)&#123; this.name = name; this.age = age; this.job = job; this.sayName = function()&#123; alert(this.name); &#125;; &#125; var person1 = new Person(&quot;Nicholas&quot;, 29, &quot;Software Engineer&quot;); var person2 = new Person(&quot;Greg&quot;, 27, &quot;Doctor&quot;); Áé∞Âú®ÂèØ‰ª•ËØ¥ËØ¥newÔºåËôΩÁÑ∂javascript‰ΩøÁî®newÊù•ËøûÊé•ÊûÑÈÄ†ÂáΩÊï∞ÂíåÂØπË±°Ôºå‰ΩÜÊòØjs‰∏≠ÁöÑnewÂíåjava‰∏≠ÁöÑnewÁöÑÂê´‰πâÂæà‰∏çÂêå„ÄÇnewÊìç‰ΩúÁ¨¶ÂÆûÈôÖ‰∏ä‰ºöÁªèÂéÜ‰ª•‰∏ã4Ê≠•Ôºö(1) ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂØπË±°Ôºõ(2) Â∞ÜÊûÑÈÄ†ÂáΩÊï∞ÁöÑ‰ΩúÁî®ÂüüËµãÁªôÊñ∞ÂØπË±°ÔºàÂõ†Ê≠§ this Â∞±ÊåáÂêë‰∫ÜËøô‰∏™Êñ∞ÂØπË±°ÔºâÔºõ(3) ÊâßË°åÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑ‰ª£Á†ÅÔºà‰∏∫Ëøô‰∏™Êñ∞ÂØπË±°Ê∑ªÂä†Â±ûÊÄßÔºâÔºõ(4) ËøîÂõûÊñ∞ÂØπË±°„ÄÇ ÂéüÂûãÊ®°ÂºèÂõ†‰∏∫ÊâÄÊúâÂÆû‰æãÁöÑÂéüÂûãÂØπË±°‰∫ãÂêå‰∏Ä‰∏™ÔºåÊâÄ‰ª•ÂéüÂûãÂØπË±°‰∏äÈù¢ÁöÑÂ±ûÊÄßÔºåÊâÄÊúâÂÆû‰æãÂÖ±‰∫´Ôºå‰πüÁÆóÊòØÂèØ‰ª•Â∞ë‰∫õ‰∏Ä‰∫õ‰ª£Á†ÅÂàõÂª∫ÂØπË±°‰∫Ü„ÄÇ 12345678910111213function Person()&#123; &#125; Person.prototype.name = &quot;Nicholas&quot;; Person.prototype.age = 29; Person.prototype.job = &quot;Software Engineer&quot;; Person.prototype.sayName = function()&#123; alert(this.name); &#125;; var person1 = new Person(); person1.sayName(); //&quot;Nicholas&quot; var person2 = new Person(); person2.sayName(); //&quot;Nicholas&quot; alert(person1.sayName == person2.sayName); //true ÂéüÂûãÂØπË±°‰∏äÈù¢ÁöÑÂü∫Êú¨Á±ªÂûãÂ±ûÊÄßËøòÂ•ΩÔºå‰ºöÂàõÂª∫ÂÄºÁöÑÂâØÊú¨Ôºå‰ΩÜÊòØÂØπ‰∫éÂºïÁî®Á±ªÂûãÂ±ûÊÄßÔºåÊåáÁöÑÊòØÂêå‰∏Ä‰∏™Âú∞ÂùÄÔºå‰∏çÂêåÂÆû‰æã‰πãÈó¥Êìç‰ΩúÂºïÁî®Á±ªÂûãÂ±ûÊÄßÊòØÂØπ‰∫íÁõ∏ÂΩ±ÂìçÁöÑ„ÄÇËøòÊúâÂáΩÊï∞ÔºåÂáΩÊï∞‰πüÊòØ‰∏Ä‰∏™Áã¨‰∫´ÔºåÊØè‰∏™ÂÆû‰æãÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™ÂåøÂêçÂáΩÊï∞ÁªëÂÆöÂú®sayName‰∏äÈù¢ÔºåÂ∞±‰ºöÈÄ†ÊàêÂÜÖÂ≠òÊµ™Ë¥πÔºåÂáΩÊï∞ÂèØ‰ª•Âè™ÂàõÂª∫‰∏Ä‰∏™ÔºåÊâßË°åÁöÑÊó∂ÂÄôÂä®ÊÄÅÊîπÂèòthisÂ∞±ÂèØ„ÄÇ ÂéüÂûãÈìæÔºö Â¶ÇÊûú‰∏Ä‰∏™ÂéüÂûãÂØπË±°ÊòØÂè¶‰∏Ä‰∏™Á±ªÂûãÁöÑÂÆû‰æãÔºå‰æùÊ¨°ÈÄíÊé®ÔºåÈÇ£‰πàÂ∞±ÂΩ¢Êàê‰∫ÜÂéüÂûãÈìæ„ÄÇ 12345678910111213function Person()&#123; &#125; Person.prototype.name = &quot;Nicholas&quot;; Person.prototype.age = 29; Person.prototype.job = &quot;Software Engineer&quot;; Person.prototype.sayName = function()&#123; alert(this.name); &#125;; var person1 = new Person(); person1.sayName(); //&quot;Nicholas&quot; var person2 = new Person(); person2.sayName(); //&quot;Nicholas&quot; alert(person1.sayName == person2.sayName); //true ÂèØËÉΩ‰ºöËßâÂæóPerson.prototypeÂ§™È∫ªÁÉ¶‰∫ÜÔºåÊÉ≥Person.prototype &#x3D; {}ËøôÊ†∑ÂÜôÔºå‰ΩÜÊòØËøôÊ†∑ÂÜô‰ºö ÈáçÂÜôÂéüÂûãÂØπË±°ÔºåÂéüÂûãÂØπË±°‰∏≠ÁöÑconstructorÊ∂àÂ§±ÔºåÂéüÂûãÈìæ‰πüÊñ≠‰∫Ü„ÄÇÊâÄ‰ª•Ë¶ÅÊâãÂä®ÁöÑÊ∑ªÂä†constructorÔºåÊâãÂä®ËøûÊé•ÂéüÂûãÈìæ„ÄÇ 1234567891011function Person()&#123; &#125; Person.prototype = &#123; constructor : Person, name : &quot;Nicholas&quot;, age : 29, job: &quot;Software Engineer&quot;, sayName : function () &#123; alert(this.name); &#125; &#125;; ÁªÑÂêà‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞ÂíåÂéüÂûãÊ®°ÂºèÂàõÂª∫Ëá™ÂÆö‰πâÁ±ªÂûãÁöÑÊúÄÂ∏∏ËßÅÊñπÂºèÔºåÂ∞±ÊòØÁªÑÂêà‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞Ê®°Âºè‰∏éÂéüÂûãÊ®°Âºè„ÄÇÊûÑÈÄ†ÂáΩÊï∞Ê®°ÂºèÁî®‰∫éÂÆö‰πâÂÆû‰æãÂ±ûÊÄßÔºåËÄåÂéüÂûãÊ®°ÂºèÁî®‰∫éÂÆö‰πâÊñπÊ≥ïÂíåÂÖ±‰∫´ÁöÑÂ±ûÊÄß„ÄÇÁªìÊûúÔºåÊØè‰∏™ÂÆû‰æãÈÉΩ‰ºöÊúâËá™Â∑±ÁöÑ‰∏Ä‰ªΩÂÆû‰æãÂ±ûÊÄßÁöÑÂâØÊú¨Ôºå‰ΩÜÂêåÊó∂ÂèàÂÖ±‰∫´ÁùÄÂØπÊñπÊ≥ïÁöÑÂºïÁî®ÔºåÊúÄÂ§ßÈôêÂ∫¶Âú∞ËäÇÁúÅ‰∫ÜÂÜÖÂ≠ò„ÄÇÂè¶Â§ñÔºåËøôÁßçÊ∑∑ÊàêÊ®°ÂºèËøòÊîØÊåÅÂêëÊûÑÈÄ†ÂáΩÊï∞‰º†ÈÄíÂèÇÊï∞ÔºõÂèØË∞ìÊòØÈõÜ‰∏§ÁßçÊ®°Âºè‰πãÈïø„ÄÇ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÈáçÂÜô‰∫ÜÂâçÈù¢ÁöÑ‰æãÂ≠ê„ÄÇ 12345678910111213141516171819function Person(name, age, job)&#123; this.name = name; this.age = age; this.job = job; this.friends = [&quot;Shelby&quot;, &quot;Court&quot;]; &#125; Person.prototype = &#123; constructor : Person, sayName : function()&#123; alert(this.name); &#125; &#125; var person1 = new Person(&quot;Nicholas&quot;, 29, &quot;Software Engineer&quot;); var person2 = new Person(&quot;Greg&quot;, 27, &quot;Doctor&quot;); person1.friends.push(&quot;Van&quot;); alert(person1.friends); //&quot;Shelby,Count,Van&quot; alert(person2.friends); //&quot;Shelby,Count&quot; alert(person1.friends === person2.friends); //false alert(person1.sayName === person2.sayName); //true Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÂÆû‰æãÂ±ûÊÄßÈÉΩÊòØÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂÆö‰πâÁöÑÔºåËÄåÁî±ÊâÄÊúâÂÆû‰æãÂÖ±‰∫´ÁöÑÂ±ûÊÄß constructor ÂíåÊñπÊ≥ï sayName()ÂàôÊòØÂú®ÂéüÂûã‰∏≠ÂÆö‰πâÁöÑ„ÄÇËÄå‰øÆÊîπ‰∫Ü person1.friendsÔºàÂêëÂÖ∂‰∏≠Ê∑ªÂä†‰∏Ä‰∏™Êñ∞Â≠óÁ¨¶‰∏≤ÔºâÔºåÂπ∂‰∏ç‰ºöÂΩ±ÂìçÂà∞ person2.friendsÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÂàÜÂà´ÂºïÁî®‰∫Ü‰∏çÂêåÁöÑÊï∞ÁªÑ„ÄÇËøôÁßçÊûÑÈÄ†ÂáΩÊï∞‰∏éÂéüÂûãÊ∑∑ÊàêÁöÑÊ®°ÂºèÔºåÊòØÁõÆÂâçÂú® ECMAScript ‰∏≠‰ΩøÁî®ÊúÄÂπøÊ≥õ„ÄÅËÆ§ÂêåÂ∫¶ÊúÄÈ´òÁöÑ‰∏ÄÁßçÂàõÂª∫Ëá™ÂÆö‰πâÁ±ªÂûãÁöÑÊñπÊ≥ï„ÄÇÂèØ‰ª•ËØ¥ÔºåËøôÊòØÁî®Êù•ÂÆö‰πâÂºïÁî®Á±ªÂûãÁöÑ‰∏ÄÁßçÈªòËÆ§Ê®°Âºè„ÄÇ ÁªßÊâøÊòØÊÄé‰πàÂÆûÁé∞ÁªßÊâøÁöÑÔºüÂà©Áî®ÂéüÂûãÈìæÔºåÂΩ¢Êàê‚ÄùÁà∂Á±ª‚Äù‚ÄùÂ≠êÁ±ª‚ÄùÁöÑÂÖ≥Á≥ªÔºåËôΩÁÑ∂‰∏çÂ¶ÇjavaËØ≠Ë®ÄÈÇ£Ê†∑ÁöÑÂÆåÁæéÔºå‰ΩÜ‰πüÂèØ‰ª•Ê®°ÊãüÂá∫Êù•„ÄÇÂ≠êÁ±ªÁöÑÂéüÂûãÂØπË±°ÊòØÁà∂Á±ªÁöÑÂÆû‰æãÁöÑËØùÔºåÈÇ£‰πàÁà∂Á±ªÂÆû‰æã‰∏äÈù¢ÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåÂ≠êÁ±ªÈÉΩÂèØ‰ª•ËÆøÈóÆÂà∞ÔºåÁÆóÊòØ‚ÄùÁªßÊâø‚Äù‰∫Ü„ÄÇÈÄöËøáÂÆûÁé∞ÂéüÂûãÈìæÔºåÊú¨Ë¥®‰∏äÊâ©Â±ï‰∫ÜÊú¨Á´†ÂâçÈù¢‰ªãÁªçÁöÑÂéüÂûãÊêúÁ¥¢Êú∫Âà∂„ÄÇ 123456789101112131415161718192021222324252627282930 this.property = true; &#125; SuperType.prototype.getSuperValue = function()&#123; return this.property; &#125;; function SubType()&#123; this.subproperty = false; &#125; //ÁªßÊâø‰∫Ü SuperType SubType.prototype = new SuperType(); SubType.prototype.getSubValue = function ()&#123; return this.subproperty; &#125;; var instance = new SubType(); alert(instance.getSuperValue()); //trueJavascript this.property = true; &#125; SuperType.prototype.getSuperValue = function()&#123; return this.property; &#125;; function SubType()&#123; this.subproperty = false; &#125; //ÁªßÊâø‰∫Ü SuperType SubType.prototype = new SuperType(); SubType.prototype.getSubValue = function ()&#123; return this.subproperty; &#125;; var instance = new SubType(); alert(instance.getSuperValue()); //true","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"Ê®°ÊãüÂÆûÁé∞ES6ÁöÑMapÊï∞ÊçÆÁªìÊûÑ","slug":"Ê®°ÊãüÂÆûÁé∞ES6ÁöÑMapÊï∞ÊçÆÁªìÊûÑ","date":"2020-04-07T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/04/08/Ê®°ÊãüÂÆûÁé∞ES6ÁöÑMapÊï∞ÊçÆÁªìÊûÑ/","permalink":"https://justsso1.github.io/2020/04/08/%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0ES6%E7%9A%84Map%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","excerpt":"","text":"Â§ßÂÆ∂ÈÉΩÁü•ÈÅìES6‰∏≠ÁöÑMapÊòØÊñ∞Â¢ûÁöÑ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑ„ÄÇÂÆÉÁ±ª‰ººÂØπË±°Ôºå‰ΩÜÊòØÂØπË±°ÁöÑÈîÆÂè™ËÉΩÊòØÂ≠óÁ¨¶‰∏≤ÔºåMapÁöÑÈîÆ‰∏çÈôêÂÆöÊòØÂ≠óÁ¨¶‰∏≤ÔºåMapÁöÑÈîÆÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÂèØ‰ª•ÊòØÂ∏ÉÂ∞îÂÄºÁ≠â„ÄÇMapÊèê‰æõ‚ÄùÂÄº-ÂÄº‚ÄùÁöÑÂØπÂ∫îÂÖ≥Á≥ªÔºåÊòØ‰∏ÄÁßçHashÁªìÊûÑÔºå‰ΩÜÂÆûÈôÖ‰∏äES6ÂèàÊØî‰º†ÁªüHashÂ§ö‰∫Ü‰∏Ä‰∫õÁâπÊÄß„ÄÇ ÈÄöËøá‰∏ãÈù¢Ëøô‰∏™Â∞è‰æãÂ≠êÔºåÊàë‰ª¨Áúã‰∏Ä‰∏ãMapÊØî‰º†ÁªüHashÂ§öÁöÑÁâπÊÄßÊòØ‰ªÄ‰πàÔºö 123456let m = new Map()m.set(1,1).set(2,2).set(3,3) //Map(3) &#123;1 =&gt; 1, 2 =&gt; 2, 3 =&gt; 3&#125;m.delete(2) //true Map(2) &#123;1 =&gt; 1, 3 =&gt; 3&#125; m.set(1,&#x27;1&#x27;) //Map(2) &#123;1 =&gt; &quot;1&quot;, 3 =&gt; 3&#125;m.set(4,4) //Map(3) &#123;1 =&gt; &quot;1&quot;, 3 =&gt; 3, 4 =&gt; 4&#125; ÊàëÁÆÄÂçïÁΩóÂàó‰∏Ä‰∏ã Map ÁöÑapiÔºà‰ΩÜÂπ∂‰∏çÊòØÈáçÁÇπÔºâ Map.prototype.set(key,value)ÔºåËøîÂõûMapÊú¨Ë∫´ÔºåÊâÄ‰ª•ÂèØ‰ª•ÈìæÂºè Map.prototype.get(key) Â¶ÇÊûúÊâæ‰∏çÂà∞ÔºåËøîÂõûundefined Map.prototype.has(key) Map.prototype.clear() ËøôÁØáÊñáÁ´†ÁöÑÈáçÁÇπ‰∏çÊòØËÆ≤Ëß£apiÁöÑÔºåËÄåÊòØÈÄèËøáMapÊèê‰æõÁöÑËøô‰∫õapi,ËÉΩÂ§ü‰Ωì‰ºöÂà∞MapÂ∫ïÂ±ÇÁöÑÊï∞ÊçÆÁªìÊûÑÊòØ‰ªÄ‰πàÊ†∑ÁöÑ ‰∏äÈù¢ÁöÑ‰æãÂ≠êÔºåÂÖàÂàùÂßãÂåñ‰∏Ä‰∏™Map mÔºåÁÑ∂Âêé‰∏ÄÊ¨°ÊÄßset 3 ‰∏™ÂÄºÔºåÂèØ‰ª•ÁúãÂà∞Ê≠§Êó∂ÁöÑmÊòØMap(3) &#123;1 =&gt; 1, 2 =&gt; 2, 3 =&gt; 3&#125;Ê≠£Â•ΩÂíåÊàë‰ª¨setÁöÑÈ°∫Â∫èÊòØÂØπÂ∫îÁöÑÔºåÁÑ∂ÂêéÂà†Èô§key&#x3D;2ÁöÑÈîÆÂÄºÂØπÔºåÁÑ∂ÂêémÊòØMap(2) &#123;1 =&gt; 1, 3 =&gt; 3&#125;,ÁÑ∂ÂêéÈáçÊñ∞m.set(1,&#39;1&#39;)ÔºåËøôÊó∂mÊòØMap(2) &#123;1 =&gt; &quot;1&quot;, 3 =&gt; 3&#125;ÔºåÂÜçm.set(4,4)ÔºåÂèØ‰ª•ÁúãÂà∞mÊòØMap(3) &#123;1 =&gt; &quot;1&quot;, 3 =&gt; 3, 4 =&gt; 4&#125;„ÄÇkey&#x3D;4ÁöÑÈîÆÂÄºÂØπÊòØÂú®ÊúÄÂêéÁöÑÔºåËøôÊ†áÊòé‰∫Ü‰∏ÄÁßçÈ°∫Â∫èÔºåÂú®setÊñ∞ÂÄºÁöÑÊó∂ÂÄôÔºå‰øùÊåÅÁùÄ‰∏ÄÁßçÂÖàÂêéÈ°∫Â∫è„ÄÇ Ëøô‰∏™ÁâπÊÄßÂ∞±ÊòØÔºåMapÁöÑÊèíÂÖ•ÊÄªÊòØ‰øùÊåÅÁùÄÂÖàÂêéÈ°∫Â∫èÔºàÂà†Èô§‰∫Ü‰∏≠Èó¥ÂÖÉÁ¥†‰πü‰ºö‰øùÊåÅÈ°∫Â∫èÔºâÔºåËøôÂíå‰º†ÁªüHashÂπ∂‰∏ç‰∏ÄÊ†∑„ÄÇ‰º†ÁªüHashÊòØ‰∏ÄÁßçÊï£ÂàóÁªìÊûÑÔºåÂÖÉÁ¥†Âπ∂‰∏çÂÖ∑Â§áÈ°∫Â∫èÊÄßÔºåËÄåMapÂæàÊòéÊòæÔºåÂêéÊèíÂÖ•ÁöÑÂÖÉÁ¥†Â∞±Âú®ÊúÄÂêéÔºå‰øùÊåÅÁùÄËøôÁßçÂÖàÂêéÈ°∫Â∫è„ÄÇ HashÊú¨ÊòØÂìàÂ∏åÂáΩÊï∞ÔºåË°®Á§∫‰∏∫index = fn(key)ÔºåËøôÈáåÁöÑfnÂ∞±ÊòØÂìàÂ∏åÂáΩÊï∞ÔºåÂÆÉ‰ª£Ë°®‰∏ÄÁßçÁîüÊàêÂú∞ÂùÄÁöÑËßÑÂàôÔºå‰∏ÄËà¨ÊúâÁõ¥Êé•ÂÆöÂà∂Ê≥ï„ÄÅÊï∞ÁªÑÂàÜÊûêÊ≥ï„ÄÅÂπ≥ÊñπÂèñ‰∏≠Ê≥ïÁ≠âÁ≠âÔºåËøôÁ¶ªÊú¨ÁØáÊñáÁ´†Ë∑ëËøú‰∫ÜÔºåÂìàÂ∏åÁÆóÊ≥ïÂì™ÁßçÂ•ΩÔºåÂ∑≤ÁªèÂú®ËÆ°ÁÆóÊú∫ÁÆóÊ≥ï‰∏≠ÊúâÊâÄÁ†îÁ©∂ÔºåÂèØ‰ª•Áúãhttps://blog.csdn.net/u011109881/article/details/80379505Êàë‰ª¨Ê®°ÊãüMapÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ∞±ÈúÄË¶ÅËá™Â∑±Âà∂ÂÆö‰∏Ä‰∏™HashÂáΩÊï∞„ÄÇ HashÊòØ‰∏ÄÊÆµËøûÁª≠ÁöÑÊúâÈôêÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÊ†πÊçÆÊï£ÂàóÂáΩÊï∞H(key)ÂíåÂ§ÑÁêÜÂÜ≤Á™ÅÁöÑÊñπÊ≥ïÂ∞Ü‰∏ÄÁªÑÂÖ≥ÈîÆÂ≠óÊò†Â∞ÑÂà∞‰∏Ä‰∏™ÊúâÈôêÁöÑËøûÁª≠ÁöÑÂú∞ÈõÜÔºàÂå∫Èó¥Ôºâ‰∏äÔºåÂπ∂‰ª•ÂÖ≥ÈîÆÂ≠óÂú®Âú∞ÂùÄÈõÜ‰∏≠ÁöÑ‚ÄùË±°‚Äù‰Ωú‰∏∫ËÆ∞ÂΩïÂú®Ë°®‰∏≠ÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÔºåËøôÁßçË°®Â∞±ÊòØÊï£ÂàóË°®ÔºåËøô‰∏ÄÊò†Ë±°ËøáÁ®ãÁß∞‰∏∫Êï£ÂàóÈÄ†Ë°®ÊàñÊï£ÂàóÔºåÊâÄÂæóÁöÑÈ¢ùÂ≠òÂÇ®‰ΩçÁΩÆÁß∞Êï£ÂàóÂú∞ÂùÄ„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÊçãÊçãÊÄùË∑Ø‰∫ÜÔºåÊ†πÊçÆ‰∏äÊñáÔºåMapÂ∫ïÂ±Ç‰ΩøÁî®‰∫ÜHashÊØãÂ∫∏ÁΩÆÁñëÔºå‰ΩÜ‰øùÊåÅÈ°∫Â∫èËøô‰∏™ÁâπÊÄßÔºåÊàëÁåúÊµãMapÁöÑÂ∫ïÂ±Ç‰ΩøÁî®‰∫ÜÈìæË°®Êï∞ÊçÆÁªìÊûÑÔºàÈìæË°®ÊòØÂâç‰∏Ä‰∏™ÁªìÁÇπÁöÑnextÊåáÈíàÊåáÂêëÂêé‰∏Ä‰∏™ÁªìÁÇπÔºâÔºåÊâÄ‰ª•MapÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÔºå‰ΩøÁî®‰∫ÜHash + ÈìæË°®ÂÆûÁé∞„ÄÇ MapÂèØ‰ª•‰øùËØÅÈ°∫Â∫èÔºå‰πüÂèØ‰ª•‰ΩøÁî®O(1)ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Êù•ÊâæÂà∞Êüê‰∏™ÂÖÉÁ¥†ÔºåÊâÄ‰ª•Êàë‰ª¨ÂàùÊ≠•ÊñπÊ°àÔºåHashÁöÑÊï£ÂàóË°®Â≠òÂÇ®Map‰∏≠ÁöÑÊï∞ÊçÆÔºåÂêåÊó∂ÊØè‰∏™ÁªìÁÇπÂ≠òÂÖ•ÁöÑÂÖàÂêéÈ°∫Â∫è‰ΩøÁî®ÈìæË°®ÁöÑÂΩ¢ÂºèË°®Á§∫„ÄÇ ÊàëÁîª‰∫Ü‰∏§Âº†Á§∫ÊÑèÂõæÔºåË°®Á§∫Êï∞ÊçÆÁªìÊûÑÁöÑ‰∏ÄÁßçÂü∫Êú¨ÂÆûÁé∞ÂíåÂà†Èô§Êüê‰∏™ÁªìÁÇπÊó∂ÁöÑÂÆûÁé∞ÔºåÂ¶Ç‰∏ãÔºö Âõæ‰∏≠ÔºåÊàë‰∏∫‰∫ÜÁÆÄÂåñÈªòËÆ§Êï£ÂàóË°®ÁöÑÈïøÂ∫¶ÊòØ6ÔºåÊèíÂÖ•ËäÇÁÇπÊó∂ÔºåÊàë‰ª¨‰ΩøÁî®Hash()ÂáΩÊï∞ÔºåÊ†πÊçÆ‰º†ÂÖ•ÁöÑkeyÔºåËé∑Âèñ‰∏Ä‰∏™Â∫îËØ•ÊèíÂÖ•ÁöÑ‰ΩçÁΩÆindexÔºåÊØîÂ¶ÇÁ¨¨‰∏Ä‰∏™ÁªìÁÇπ‚ë†ÔºåÂæóÂá∫index&#x3D;1ÔºåÈÇ£‰πàÊîæÂÖ•‰ΩçÁΩÆÔºåÂÜçÊîæ‰∏Ä‰∏™ÁªìÁÇπ‚ë°ÔºåÂæóÂá∫index,ËøôÈáåË¶ÅÊúâ‰∏Ä‰∏™ÊåáÈíà(next)Ôºå‰ªé‚ë†ÊåáÂêë‚ë°ÔºåËøôÊ†∑ÊâçËÉΩ‰øùËØÅMap‰∏≠Êï∞ÊçÆÁöÑÈ°∫Â∫èÔºåÁÑ∂ÂêéÊòØÊèíÂÖ•ÁªìÁÇπ‚ë¢„ÄÇÊèíÂÖ•ÁªìÁÇπ‚ë£ÁöÑÊó∂ÂÄôÔºåÈÄöËøáHashÂáΩÊï∞ÔºåÂæóÂá∫Âíå‚ë†ÁªìÁÇπÁõ∏ÂêåÁöÑ‰ΩçÁΩÆÔºåËøôÁßçÁé∞Ë±°Âè´ÂÅöHashÁ¢∞ÊíûÔºåÁ¢∞ÊíûÊòØ‰∏çÂèØÈÅøÂÖçÁöÑÔºåÂ•ΩÁöÑHashÂáΩÊï∞Â∫îËØ•Â∞ΩÂèØËÉΩÂ∞ëÁöÑÂá∫Áé∞Á¢∞ÊíûÔºåÊõ¥Âä†Âπ≥ÂùáÁöÑ‰ΩøÁî®Êï£ÂàóË°®„ÄÇÂá∫Áé∞‰∫ÜÁ¢∞ÊíûÔºåÊÄé‰πàÂ§ÑÁêÜÂë¢ÔºåËøôÈáåÊàëÈÄâÊã©‰ΩøÁî®ÊåáÈíàÔºåËøûÊé•‚ë†ÁªìÁÇπÂíå‚ë£ÁªìÁÇπÔºåËøôÊ†∑Âú®Âêå‰∏Ä‰∏™‰ΩçÁΩÆÔºå‰ºöÊò†Â∞ÑÂ§ö‰∏™ÁªìÁÇπ„ÄÇÔºàÁêÜËÆ∫‰∏äÂ∫îËØ•Â∞ΩÂèØËÉΩÂ∞ëÁöÑÁ¢∞ÊíûÔºåÂê¶ÂàôÂΩ±ÂìçÊü•ÊâæÈÄüÂ∫¶ÔºâÔºåÊåâÁÖßËøôÊ†∑ÁöÑËßÑÂæãÔºå‰æùÊ¨°ÂàõÂª∫‰∫ÜÁªìÁÇπ‚ë§ÂíåÁªìÁÇπ‚ë• Âà†Èô§Êüê‰∏™ÁªìÁÇπÊó∂Ôºå‰º†ÂÖ•Ë¶ÅÂà†Èô§ÁöÑkeyÔºåÈÄöËøáHashÂáΩÊï∞ÔºåÈùûÂ∏∏Âø´ÁöÑÊâæÂà∞ÊâÄÂú®‰ΩçÁΩÆÔºå‰∏çÈúÄË¶ÅÈÅçÂéÜ„ÄÇÁÑ∂ËÄåÊàë‰ª¨ËØ¥‰∫ÜMapÁöÑÂÄºÁöÑÊèíÂÖ•ÊòØÊúâÈ°∫Â∫èÁöÑÔºåÊØîÂ¶ÇÂà†Èô§ÁªìÁÇπ‚ë°Ôºå‰∏∫‰∫Ü‰øùÊåÅËøôÁßçÈ°∫Â∫èÊÄßÔºåÊàë‰ª¨‰ΩøÁî®ÈìæË°®ÁöÑÁâπÊÄßÔºåÊääÁªìÁÇπ‚ë°ÁöÑÂâç‰∏Ä‰∏™ÁªìÁÇπ‚ë†ÁöÑnextÊåáÈíàÊåáÂêëÁªìÁÇπ‚ë¢„ÄÇËøôÈáå‰∏çÈúÄË¶ÅÁßªÂä®ÁªìÁÇπ‰ªÄ‰πàÔºåÂè™ÊòØÊîπÂèò‰∏Ä‰∏ãÊåáÈíàÁöÑÊåáÂêëÔºåÊâÄ‰ª•Êìç‰ΩúÈùûÂ∏∏Âø´ ÂÉèMapÁöÑÂÖ∂‰ªñÊìç‰ΩúÔºåÊØîÂ¶Çget(key) Â∞±ÂæàÂÆπÊòì‰∫ÜÔºåÂÖ≥ÈîÆÊòØÁêÜËß£‰∏äÈù¢ÁöÑ‰∏§‰∏™ÂõæÊ®°Âûã„ÄÇÂ•Ω‰∫ÜÔºåÊé•‰∏ãÊù•Áî®JavascriptÂéüÁîüÊù•Ê®°Êãü‰∏Ä‰∏™MapÊï∞ÊçÆÁªìÊûÑÔºå‰∏ä‰ª£Á†ÅÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201class ListNode &#123; constructor(key, value) &#123; this.key = key; this.value = value; this.next = null; //ËÆ∞ÂΩïÊèíÂÖ•È°∫Â∫è this.ne = null; //ËÆ∞ÂΩïHashÁ¢∞ÊíûÂêéÁöÑÁªìÁÇπ &#125;&#125;function myMap() &#123; this.init()&#125;myMap.prototype.init = function()&#123; this.collection = new Array(6) //mapÂ∫ïÂ±ÇÁî®‰∫ÜhashÁÆóÊ≥ï„ÄÇÂÅáÂ¶Ç‰ΩøÁî®collectionÂÆπÂô®Â≠òÊîæmap‰∏≠ÁöÑÊï∞ÊçÆ for (let i = 0; i &lt; this.collection.length; i++) &#123; this.collection[i] = Object.create(null) this.collection[i].ne = null; this.collection[i].next = null; &#125; this.size = 0 this.head = null; //Â§¥ÊåáÈíàÔºåÊÄªÊòØÊåáÂêëÁ¨¨‰∏Ä‰∏™ this.tail = null; //Â∞æÊåáÈíàÔºåÊÄªÊòØÊåáÂêëÊúÄÂêé‰∏Ä‰∏™&#125;//ÊèíÂÖ•ÊàñÊõ¥Êñ∞keyÁªìÁÇπmyMap.prototype.set = function (key, value) &#123; let index = this.hash(key) //Ëé∑ÂèñÂÆπÂô®‰∏≠ÁöÑ‰ΩçÁΩÆ let node = this.collection[index] //Ëé∑Âæóindex‰ΩçÁΩÆÂ§ÑÁöÑÂØπË±° while (node.ne) &#123; if (node.ne.key === key) &#123; node.ne.value = value //Êõ¥Êñ∞ return this //Ê≥®ÊÑèËøîÂõûÂΩìÂâçÂØπË±°this &#125; else &#123; node = node.ne &#125; &#125; //map‰∏≠Ê≤°ÊúâËØ•keyÔºåÂ∞±Âú®ÈìæË°®Â∞æÈÉ®ÊèíÂÖ• let new_node = new ListNode(key, value) node.ne = new_node if (!this.tail) &#123; this.tail = new_node &#125; if (!this.head) &#123; this.head = new_node //Â¶ÇÊûúÊòØÁ¨¨‰∏Ä‰∏™ÁªìÁÇπÔºåÂ§¥ÊåáÈíàÊåáÂêëÂÆÉ &#125; this.tail.next = new_node //Â∞æÊåáÈíà this.tail = new_node this.size++ return this //Ê≥®ÊÑèËøîÂõûÂΩìÂâçÂØπË±°this&#125;//Ëé∑ÂèñkeyÁªìÁÇπÁöÑÂÄºmyMap.prototype.get = function (key) &#123; let index = this.hash(key) let node = this.collection[index] //Ëé∑ÂèñÂÆπÂô®Áõ∏Â∫î‰ΩçÁΩÆÂ§ÑÁöÑÂØπË±° while (node) &#123; if (node.key === key) &#123; return node.value &#125; else &#123; node = node.ne &#125; &#125; return undefined&#125;//Âà†ÊéâkeyÁªìÁÇπmyMap.prototype.delete = function (key) &#123; if (!this.head) &#123; return false &#125; //‰ªéÂÆπÂô®‰∏≠Âà†Èô§ let index = this.hash(key) let node = this.collection[index] let pre = null; while (node.ne) &#123; if (node.ne.key === key) &#123; let _prev = node; //‰ªéÈìæË°®‰∏≠Âà†Èô§ÔºåÈúÄË¶ÅÂâçÁΩÆÁªìÁÇπ let _node = node.ne //‰øùÂ≠òË¶ÅÂà†Èô§ÁöÑÁªìÁÇπ _prev.ne = node.ne.ne//‰ªéÂÆπÂô®‰∏≠Âà†Èô§ÔºåÂâçÁΩÆÁªìÁÇπÁöÑÊåáÈíàÊåáÂêëË¶ÅÂà†Èô§ÁªìÁÇπÁöÑÊåáÈíà //‰ªéÈìæË°®‰∏≠Âà†Èô§ if (this.head === _node) &#123; //Â¶ÇÊûúË¶ÅÂà†Èô§ÁöÑÁªìÁÇπÊòØÂ§¥ÁªìÁÇπ this.head = _node.next; &#125; else if (this.tail === _node) &#123; //Â¶ÇÊûúË¶ÅÂà†Èô§ÁöÑÁªìÁÇπÊó∂Â∞æÁªìÁÇπ this.tail = _prev; //Â∞ÜÂ∞æÊåáÈíàÊåá‰∏∫ÂâçÁΩÆÁªìÁÇπ _prev.next = null; //Â∞ÜÂâçÁΩÆÁªìÁÇπÁöÑÊåáÈíàÁΩÆ‰∏∫Á©∫ &#125; else &#123; let cur = this.head; while (cur) &#123; if (cur.key !== key) &#123; pre = cur; cur = cur.next; &#125; else &#123; break &#125; &#125; pre.next = cur.next &#125; this.size-- return true; &#125; else &#123; node = node.ne &#125; &#125; return false&#125;myMap.prototype.has = function (key) &#123; let index = this.hash(key) let node = this.collection[index] while (node.ne) &#123; if (node.ne.key === key) &#123; return true &#125; else &#123; node = node.ne &#125; &#125; return false&#125;//ËøîÂõûÈîÆÂêçÁöÑÈÅçÂéÜÂô®myMap.prototype.keys = function* () &#123; let head = this.head // ÈÅçÂéÜÈìæË°®ÔºåÊääÈìæË°®‰∏≠ÊâÄÊúâKeyÊîæÂÖ•ÁîüÊàêÂô®‰∏≠ while (head) &#123; if (head.key) &#123; yield head.key &#125; head = head.next &#125;&#125;//ËøîÂõûÈîÆÂÄºÁöÑÈÅçÂéÜÂô®myMap.prototype.values = function* () &#123; let head = this.head; while (head) &#123; if (head.value) &#123; yield head.value &#125; head = head.next &#125;&#125;//ËøîÂõûÊâÄÊúâÊàêÂëò ÈÅçÂéÜÂô®myMap.prototype.entries = function* () &#123; let head = this.head; while (head) &#123; if (head.key) &#123; yield [head.key, head.value] &#125; head = head.next &#125;&#125;myMap.prototype[Symbol.iterator] = myMap.prototype.entries //ÈªòËÆ§ÈÅçÂéÜÂô®Êé•Âè£Ôºåfor of‰ΩøÁî®//ËøîÂõûMapÁöÑÊâÄÊúâÊàêÂëòÔºåÊé•Âèó‰∏Ä‰∏™ÂáΩÊï∞‰Ωú‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØthisArg Â¶ÇÊûúÁúÅÁï•‰∫Ü thisArg ÂèÇÊï∞ÔºåÊàñËÄÖÂÖ∂ÂÄº‰∏∫ null Êàñ undefinedÔºåthis ÂàôÊåáÂêëÂÖ®Â±ÄÂØπË±°„ÄÇmyMap.prototype.forEach = function (callbackFn, thisArg) &#123; let head = this.head while (head) &#123; if (head.key) &#123; callbackFn.call(thisArg, head.key, head.value, this) head = head.next &#125; &#125;&#125;myMap.prototype.clear = function () &#123; this.init()&#125;/** * @param any key * @return &#123;number&#125; *///Hash ÊñπÊ≥ïÔºåHashÁöÑÁÆóÊ≥ïÊàëËá™Â∑±Ê®°Êãü‰∏Ä‰∏™ÔºåÁúüÊ≠£ÂÆûË∑µ‰∏≠ÁöÑHashÁÆóÊ≥ïËÇØÂÆöÂçÅÂàÜÂ§çÊùÇmyMap.prototype.hash = function (key) &#123; let index = 0; if (typeof key === &#x27;string&#x27;) &#123; //Â≠óÁ¨¶‰∏≤ÁöÑËØùÂèñÂâç10‰ΩçÔºå‰πüÊ≤°ÂøÖË¶ÅÂÖ®ÈÉ®ÈÅçÂéÜÂÆåÂ≠óÁ¨¶‰∏≤Ôºå‰ºöÂΩ±ÂìçÊÄßËÉΩ„ÄÅËÆ°ÁÆóÊó∂Èó¥ for (let i = 0; i &lt; 10; i++) &#123; index += isNaN(key.charCodeAt(i)) ? 0 : key.charCodeAt(i) &#125; &#125; else if (typeof key === &#x27;number&#x27;) &#123; index = isNaN(key) ? this.collection.length - 1 : key % this.collection.length &#125; else if (typeof key === &#x27;object&#x27;) &#123; // Â¶ÇÊûú‰º†ÂÖ•ÁöÑÊòØ‰∏Ä‰∏™ÂØπË±°‰Ωú‰∏∫ÈîÆÔºåes6‰∏≠ÁöÑMapÔºåÂ∫ïÂ±ÇHashÁÆóÊ≥ï‰∏ÄÂÆöË∑üÂÆÉÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊúâÂÖ≥ÔºåÂõ†‰∏∫ÂèñÂÄºÊó∂ÔºåÊØîËæÉÁöÑÊòØÊòØÂê¶ÊòØÂêå‰∏Ä‰∏™ÂºïÁî®„ÄÇÂ∞±ÁÆóÁªô‰∫Ü‰∏Ä‰∏™Â≠óÈù¢ÈáèÁõ∏ÂêåÁöÑÂÄºÔºå‰πü‰∏çËÉΩÂèñÂà∞ÂÄºÔºåÂøÖÈ°ªËØïËØïÂºïÁî®Áõ∏ÂêåÁöÑÂÄºÊâçËÉΩÂèñÂà∞ // ËøôÈáåÊàëÂè™ËÉΩÊ®°Êãükey‰∏∫ÂØπË±°Êó∂ÔºåÁªèHashÁÆóÊ≥ïÂæóÂà∞ÁöÑÈÉΩÊòØindex=0‰∫Ü index = 0 &#125; else if (typeof key === &#x27;undefined&#x27;) &#123; index = 1 &#125; else if (typeof key === &#x27;boolean&#x27;) &#123; index = 2 &#125; return index % this.collection.length&#125; Áî±‰∫éË¶ÅÊ≥®ÊÑèÁöÑÁªÜËäÇÂ§™Â§öÔºåÊâÄ‰ª•ÊàëÂä†‰∏ä‰∫ÜÊ≥®ÈáäÔºå‰∏ÄÂÆöË¶ÅÂ•ΩÂ•ΩÁúãÊ≥®ÈáäÂïäÔΩû ÂÖàËØ¥‰∏ÄÂè•ÂâçÊèêJavascriptÂ∫ïÂ±ÇÊòØÁî®c&#x2F;c++ÂÜôÁöÑÔºå‰∏∫‰ªÄ‰πàËøô‰πàËØ¥Âë¢ÔºüÂõ†‰∏∫ES6ÁöÑMapÂèØ‰ª•Áî®ÂØπË±°‰Ωú‰∏∫ÈîÆÔºåÈÇ£‰πàÂú®ËÆ°ÁÆóÊú∫Â∫ïÂ±ÇÔºåËÇØÂÆöÊòØÂíå‰º†ÂÖ•ÂØπË±°ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊúâÂÖ≥Á≥ªÁöÑÔºåMapÂèñÂÄºÊó∂ÔºåÂ¶ÇÊûúÊòØÂºïÁî®Á±ªÂûãÔºåÂøÖÈ°ªÊòØÁõ∏ÂêåÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊâçÂèØ‰ª•ÂèñÂà∞„ÄÇ Áªº‰∏äÔºåÊ®°ÊãüÁöÑ‰∏ªË¶ÅÊÄùË∑ØÊòØÔºåÁî®HashÊÄùÊÉ≥Êù•Â≠òÂÇ®Êï∞ÊçÆÔºåËææÂà∞O(1)ÁöÑÊü•ÊâæÊó∂Èó¥ÔºåÁî®ÈìæË°®ÊÄùÊÉ≥Êù•Áª¥ÊåÅÊèíÂÖ•Êï∞ÊçÆÁöÑÂÖàÂêéÈ°∫Â∫è„ÄÇÁªÜËäÇÁÇπÊòØÔºåHashÁöÑÁ¢∞ÊíûÂ§ÑÁêÜÔºåÊàëÊòØËá™Â∑±Ê®°ÊãüHashÂáΩÊï∞ÔºåÂõ†‰∏∫JavascriptÂ∫ïÂ±ÇÊòØÁî®c&#x2F;c++ÂÜôÁöÑÔºåÊâÄ‰ª•Áî®jsÂÜôÂè™ËÉΩÊòØÂè´‚ÄùÊ®°Êãü‚Äù„ÄÇÊàëËøòÁî®‰∫ÜÂçïÈìæË°®Êù•Â§ÑÁêÜÁ¢∞ÊíûÔºåÈÄöËøáneÊåáÈíàÔºåÂèØ‰ª•ÂèñÂà∞Á¢∞ÊíûÁöÑÂêéÁª≠ÂÄºÔºåËøôÊ†∑Êúâ‰∏™ÈöêËóèÈóÆÈ¢òÊòØÔºåÂΩìÁ¢∞ÊíûÂ§ö‰∫ÜÔºåMapÁöÑÊü•ÊâæÈÄüÂ∫¶‰ºöÊÖ¢ÔºåÂÖ∂ÂÆû‰πüÂèØ‰ª•Áî®Êï∞ÁªÑÊù•Â§ÑÁêÜÁ¢∞ÊíûÔºåÂ•ΩÂ§ÑÊòØMapÊü•ÊâæÈÄüÂ∫¶‰ºöÂø´ÈÇ£‰πàÁÇπ„ÄÇ Â§öËØ¥‰∏ÄÂè•ÔºåÂú®ËÆ°ÁÆóÊú∫È¢ÜÂüüHashÁ¢∞ÊíûÁÆóÊòØ‰∏Ä‰∏™ËØæÈ¢òÔºåÂ¶ÇÊûúË¶ÅÊ∑±ÂÖ•Á†îÁ©∂ÈÉΩÂèØ‰ª•ÂÜôÁØáËÆ∫Êñá‰∫Ü„ÄÇHashÂáΩÊï∞‰πüÊúâÂæàÂ§öÁßçÔºå‰ΩÜ‰ª•Âì™ÁßçÁÆóÊ≥ï‰∏∫ÂáÜÔºåÂàôË¶ÅÁúã‰ΩøÁî®Âú∫ÊôØÔºå‰∏çËøáÊúÄÁªàÁõÆÊ†áÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂ∞±ÊòØÂáèÂ∞ëÁ¢∞ÊíûÔºåÂùáÂåÄ‰ΩøÁî®ÊØè‰∏™Â≠òÂÇ®Âú∞ÂùÄ„ÄÇ Êù•È™åËØÅ‰∏Ä‰∏ãÁªìÊûúÂêßÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243let m = new myMap();m.set(&#x27;a&#x27;, 1).set(&#x27;b&#x27;, 2)console.log(m.get(&#x27;a&#x27;), m.get(&#x27;b&#x27;)) //1 2let obj = &#123;name: &#x27;lolita&#x27;&#125;let obj2 = &#123;name: &#x27;obj2&#x27;&#125;m.set(obj, &#x27;obj&#x27;)m.set(obj2, &#x27;obj2&#x27;)console.log(m.get(obj)) //objconsole.log(m.size) //4console.log(m.delete(&#x27;a&#x27;)) //trueconsole.log(m.delete(&#x27;a&#x27;)) //false,Âõ†‰∏∫&#x27;a&#x27;Â∑≤ÁªèË¢´Âà†Èô§Ëøá‰∫Üconsole.log(m.delete(obj)) //trueconsole.log(m.get(obj2)) // obj2for (let key of m.keys()) &#123; console.log(&#x27;key:&#x27;, key) //key: b key: &#123; name: &#x27;obj2&#x27; &#125;&#125;for (let value of m.values()) &#123; console.log(&#x27;value:&#x27;, value) //value: 2 value: obj2&#125;for (let item of m.entries()) &#123; console.log(item[0], item[1]) //b 2 &#123; name: &#x27;obj2&#x27; &#125; &#x27;obj2&#x27; &#125;for (let [key, value] of m) &#123; console.log(key, value); //b 2 &#123; name: &#x27;obj2&#x27; &#125; &#x27;obj2&#x27;&#125;let ooo = &#123;name: &#x27;Jack&#x27;&#125;m.forEach(function (key, value, map) &#123; console.log(&quot;key: %s, value: %s&quot;, key, value) console.log(this) //forEachÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰∏çÂÜôÊàñËÄÖnullÊàñËÄÖundefinedÔºåthisÈÉΩ‰ºöÊòØÂÖ®Â±ÄÂØπË±°&#125;, ooo)//key: b, value: 2 &#123; name: &#x27;Jack&#x27; &#125;// key: [object Object], value: obj2 &#123; name: &#x27;Jack&#x27; &#125;console.log(m.clear()) //undefined ÁªèËøáÈ™åËØÅÔºåÂÆåÂÖ®Á¨¶ÂêàÈ¢ÑÊúüÁªìÊûúÔºåÂèØ‰ª•ËØ¥Ê®°ÊãüÊòØÂà∞‰ΩçÁöÑÔºåÊ¨ßËÄ∂ÔΩû Question: ‰∏∫‰ªÄ‰πàÂ∫ïÂ±ÇÁî®HashË°®Á§∫ÔºåÁî®ÂØπË±°‰∏çË°åÂêóÔºü‰∏çË°åÔºåÂØπË±°ËôΩÁÑ∂‰πüÂèØ‰ª•ËææÂà∞get setÁöÑÊïàÊûúÔºå‰ΩÜÊòØÂú®ÈÅçÂéÜÊó∂Ôºå‰ΩøÁî® for ‚Ä¶ in ÊàñËÄÖObject.keys()ÈÉΩ‰ºöÊåâÂçáÂ∫èËá™Âä®ÊéíÂ∫èÈóÆÈ¢ò ÊÄé‰πàÊ®°ÊãüÂÜÖÂ≠òÂú∞ÂùÄÁîüÊàêËøáÁ®ãÂë¢Ôºü 12345678let generator = function* RandomRefFun() &#123; const random = Math.random().toString(16).slice(2,8) yield `0x$&#123;random&#125;`;&#125; let RandomRefFun = generator() let randomRef = RandomRefFun().next().value ÂèÇËÄÉÈìæÊé•Ôºö https://es6.ruanyifeng.com/#docs/set-map#Map https://dev.to/arthurbiensur/kind-of-getting-the-memory-address-of-a-javascript-object-2mnd ÁôæÂ∫¶ÁôæÁßë-ÂìàÂ∏å","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"ÂºÇÊ≠•Êìç‰ΩúÂíåAsyncÂáΩÊï∞","slug":"ÂºÇÊ≠•Êìç‰ΩúÂíåAsyncÂáΩÊï∞","date":"2020-03-19T16:00:00.000Z","updated":"2024-10-12T08:40:56.548Z","comments":true,"path":"2020/03/20/ÂºÇÊ≠•Êìç‰ΩúÂíåAsyncÂáΩÊï∞/","permalink":"https://justsso1.github.io/2020/03/20/%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C%E5%92%8CAsync%E5%87%BD%E6%95%B0/","excerpt":"","text":"PromiseGeneratorÂáΩÊï∞ÂçèÁ®ã‰º†ÁªüÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºåÊó©ÊúâÂºÇÊ≠•ÁºñÁ®ãÁöÑËß£ÂÜ≥ÊñπÊ°àÔºàÂÖ∂ÂÆûÊòØÂ§ö‰ªªÂä°ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºâ„ÄÇÊúü‰∏≠Êúâ‰∏ÄÁßçÂè´ÂÅö‚ÄùÂçèÁ®ã‚ÄùÔºàcoroutineÔºâÔºåÊÑèÊÄùÊòØÂ§ö‰∏™Á∫øÁ®ã‰∫íÁõ∏ÂÜô‰ΩúÔºåÂÆåÊàêÂºÇÊ≠•‰ªªÂä°„ÄÇ ÂçèÁ®ãÊúâÁÇπÂÉèÂáΩÊï∞ÔºåÂèàÊúâÁÇπÂÉèÁ∫øÁ®ã„ÄÇÂÆÉÁöÑËøêË°åÊµÅÁ®ãÂ§ßËá¥Â¶Ç‰∏ãÔºö Á¨¨‰∏ÄÊ≠•ÔºåÂçèÁ®ãAÂºÄÂßãÊâßË°å„ÄÇ Á¨¨‰∫åÊ≠•ÔºåÂçèÁ®ãAÊâßË°åÂà∞‰∏ÄÂçäÔºåËøõÂÖ•ÊöÇÂÅúÔºåÊâßË°åÊùÉËΩ¨ÁßªÂà∞ÂçèÁ®ãB Á¨¨‰∏âÊ≠•ÔºåÔºà‰∏ÄÊÆµÊó∂Èó¥ÂêéÔºâÂçèÁ®ãB‰∫§ËøòÊâßË°åÊùÉ„ÄÇ Á¨¨ÂõõÊ≠•ÔºåÂçèÁ®ãAÊÅ¢Â§çÊâßË°å„ÄÇ‰∏äÈù¢ÊµÅÁ®ãÁöÑÂçèÁ®ãAÔºåÂ∞±ÊòØÂºÇÊ≠•‰ªªÂä°ÔºåÂõ†‰∏∫ÂÆÉÂàÜÊàê‰∏§ÊÆµÔºàÊàñÂ§öÊÆµÔºâÊâßË°å„ÄÇ‰∏æ‰æãÊù•ËØ¥ÔºåËØªÂèñÊñá‰ª∂ÁöÑÂçèÁ®ãÂÜôÊ≥ïÂ¶Ç‰∏ãÔºö 12345function *asyncJob() &#123; // ÂÖ∂‰ªñ‰ª£Á†Å var f = yield readFile(fileA) // ÂÖ∂‰ªñ‰ª£Á†Å&#125; ‰∏äÈù¢‰ª£Á†ÅÁöÑÂáΩÊï∞asyncJobÊòØ‰∏Ä‰∏™ÂçèÁ®ãÔºåÂÆÉÁöÑÂ••Â¶ôÂ∞±Âú®ÂÖ∂‰∏≠ÁöÑyieldÂëΩ‰ª§„ÄÇÂÆÉË°®Á§∫ÊâßË°åÂà∞Ê≠§Â§ÑÔºåÊâßË°åÊùÉÂ∞Ü‰∫§ÁªôÂÖ∂‰ªñÂçèÁ®ã„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåyieldÂëΩ‰ª§ÊòØÂºÇÊ≠•‰∏§‰∏™Èò∂ÊÆµÁöÑÂàÜÁïåÁ∫ø„ÄÇ ÂçèÁ®ãÈÅáÂà∞yieldÂëΩ‰ª§Â∞±ÊöÇÂÅúÔºåÁ≠âÂà∞ÊâßË°åÊùÉËøîÂõûÔºåÂÜç‰ªéÊöÇÂÅúÁöÑÂú∞ÊñπÁªßÁª≠ÂæÄÂêéÊâßË°å„ÄÇÂÆÉÁöÑÊúÄÂ§ßÊúâÁÇπÔºåÂ∞±ÊòØ‰ª£Á†ÅÁöÑÂÜôÊ≥ïÈùûÂ∏∏ÂÉèÂêåÊ≠•ÔºåÂ¶ÇÊûúÂéªÈô§yieldÂëΩ‰ª§ÔºåÁÆÄÁõ¥‰∏ÄÊ®°‰∏ÄÊ†∑„ÄÇ GeneratorÂáΩÊï∞ÁöÑÊ¶ÇÂøµGeneratorÂáΩÊï∞ÁöÑÊï∞ÊçÆ‰∫§Êç¢ÂíåÈîôËØØÂ§ÑÁêÜGeneratorÂáΩÊï∞ÂèØ‰ª•ÊöÇÂÅúÊâßË°åÂíåÊÅ¢Â§çÊâßË°åÔºåËøôÊòØÂÆÉËÉΩÂ∞ÅË£ÖÂºÇÊ≠•‰ªªÂä°ÁöÑÊ†πÊú¨ÂéüÂõ†„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÂÆÉËøòÊúâ‰∏§‰∏™ÁâπÊÄßÔºå‰Ωø‰ªñÂèØ‰ª•‰Ωú‰∏∫ÂºÇÊ≠•ÁºñÁ®ãÁöÑÂÆåÊï¥Ëß£ÂÜ≥ÊñπÊ°àÔºöÂáΩÊï∞‰ΩìÂÜÖÂ§ñÁöÑÊï∞ÊçÆÂè´Âî§ÂíåÈîôËØØÂ§ÑÁêÜÊú∫Âà∂„ÄÇ nextÊñπÊ≥ïËøîÂõûÂÄºÁöÑvalueÂ±ûÊÄßÔºåÊòØGeneratorÂáΩÊï∞ÂêëÂ§ñËæìÂá∫Êï∞ÊçÆÔºånextÊñπÊ≥ïËøòÂèØ‰ª•Êé•ÂèóÂèÇÊï∞ÔºåËøôÊòØÂêëGeneratorÂáΩÊï∞‰ΩìÂÜÖËæìÂÖ•Êï∞ÊçÆ„ÄÇ 12345678910function* gen(x)&#123; var y = yield x +2; return y;&#125;var g = gen(1);g.next() //&#123; value: 3, done: false &#125;g.next(2) //&#123; value: 2, done: true &#125; ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™nextÊñπÊ≥ïÁöÑvalueÂ±ûÊÄßÔºåËøîÂõûË°®ËææÂºèx + 2ÁöÑÂÄºÔºà3Ôºâ„ÄÇÁ¨¨‰∫å‰∏™nextÊñπÊ≥ïÂ∏¶ÊúâÂèÇÊï∞2ÔºåËøô‰∏™ÂèÇÊï∞ÂèØ‰ª•‰º†ÂÖ• Generator ÂáΩÊï∞Ôºå‰Ωú‰∏∫‰∏ä‰∏™Èò∂ÊÆµÂºÇÊ≠•‰ªªÂä°ÁöÑËøîÂõûÁªìÊûúÔºåË¢´ÂáΩÊï∞‰ΩìÂÜÖÁöÑÂèòÈáèyÊé•Êî∂„ÄÇÂõ†Ê≠§ÔºåËøô‰∏ÄÊ≠•ÁöÑ value Â±ûÊÄßÔºåËøîÂõûÁöÑÂ∞±ÊòØ2ÔºàÂèòÈáèyÁöÑÂÄºÔºâ„ÄÇ GeneratorÂáΩÊï∞ÂÜÖÈÉ®ËøòÂèØ‰ª•ÈÉ®ÁΩ≤ÈîôËØØÂ§ÑÁêÜ‰ª£Á†ÅÔºåÊçïËé∑ÂáΩÊï∞‰ΩìÂ§ñÊäõÂá∫ÁöÑÈîôËØØ„ÄÇ 1234567891011121314function* gen(x)&#123; try &#123; var y = yield x + 2; &#125; catch (e)&#123; console.log(e); &#125; return y;&#125;var g = gen(1);g.next();g.throw(&#x27;Âá∫Èîô‰∫Ü&#x27;);// Âá∫Èîô‰∫Ü ‰∏äÈù¢‰ª£Á†ÅÁöÑÊúÄÂêé‰∏ÄË°åÔºåGeneratorÂáΩÊï∞‰ΩìÂ§ñÔºå‰ΩøÁî®ÊåáÈíàÂØπË±°ÁöÑthrowÊñπÊ≥ïÊäõÂá∫ÁöÑÈîôËØØÔºåÂèØ‰ª•Ë¢´ÂáΩÊï∞‰ΩìÂÜÖÁöÑtry ‚Ä¶catch‰ª£Á†ÅÂùóÊçïËé∑„ÄÇËøôÊÑèÂë≥ÁùÄÔºåÂá∫ÈîôÁöÑ‰ª£Á†Å‰∏éÂ§ÑÁêÜÈîôËØØÁöÑ‰ª£Á†ÅÔºåÂÆûÁé∞‰∫ÜÊó∂Èó¥ÂíåÁ©∫Èó¥‰∏äÁöÑÂàÜÁ¶ªÔºåËøôÂØπ‰∫éÂºÇÊ≠•ÁºñÁ®ãÊó†ÁñëÊòØÂæàÈáçË¶ÅÁöÑ„ÄÇ ÂºÇÊ≠•‰ªªÂä°ÁöÑÂ∞ÅË£Ö‰∏ãÈù¢ÁúãÁúãÂ¶Ç‰Ωï‰ΩøÁî® Generator ÂáΩÊï∞ÔºåÊâßË°å‰∏Ä‰∏™ÁúüÂÆûÁöÑÂºÇÊ≠•‰ªªÂä°„ÄÇ 123456789var fetch = require(&#x27;node-fetch&#x27;);function* gen()&#123; var url = &#x27;https://api.github.com/users/github&#x27;; var result = yield fetch(url); console.log(result.bio);&#125; ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåGeneratorÂáΩÊï∞Â∞ÅË£Ö‰∫Ü‰∏Ä‰∏™ÂºÇÊ≠•Êìç‰ΩúÔºåËØ•Êìç‰ΩúÂÖàËØªÂèñ‰∏Ä‰∏™ËøúÁ®ãÊé•Âè£ÔºåÁÑ∂Âêé‰ªéJSONÊ†ºÂºèÁöÑÊï∞ÊçÆËß£Êûê‰ø°ÊÅØ„ÄÇÂ∞±ÂÉèÂâçÈù¢ËØ¥ËøáÁöÑÔºåËøôÊÆµ‰ª£Á†ÅÈùûÂ∏∏ÂÉèÂêåÊ≠•Êìç‰ΩúÔºåÈô§‰∫ÜÂä†‰∏ä‰∫ÜyieldÂëΩ‰ª§„ÄÇ ÊâßË°åËøôÊÆµ‰ª£Á†ÅÁöÑÊñπÊ≥ïÂ¶Ç‰∏ã„ÄÇ 123456789var g = gen();var result = g.next();result.value.then(function(data)&#123; return data.json();&#125;).then(function(data)&#123; g.next(data);&#125;); ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÈ¶ñÂÖàÊâßË°åGeneratorÂáΩÊï∞ÔºåËé∑ÂèñÈÅçÂéÜÂô®ÂØπË±°ÔºåÁÑ∂Âêé‰ΩøÁî®next ÊñπÊ≥ïÔºàÁ¨¨‰∫åË°åÔºâÔºåÊâßË°åÂºÇÊ≠•‰ªªÂä°ÁöÑÁ¨¨‰∏ÄÈò∂ÊÆµ„ÄÇÁî±‰∫éFetchÊ®°ÂùóËøîÂõûÁöÑÊòØ‰∏Ä‰∏™PromiseÂØπË±°ÔºåÂõ†Ê≠§Ë¶ÅÁî®thenÊñπÊ≥ïË∞ÉÁî®‰∏ã‰∏Ä‰∏™next ÊñπÊ≥ï„ÄÇ ÂèØ‰ª•ÁúãÂà∞ÔºåËôΩÁÑ∂ Generator ÂáΩÊï∞Â∞ÜÂºÇÊ≠•Êìç‰ΩúË°®Á§∫ÂæóÂæàÁÆÄÊ¥ÅÔºå‰ΩÜÊòØÊµÅÁ®ãÁÆ°ÁêÜÂç¥‰∏çÊñπ‰æøÔºàÂç≥‰ΩïÊó∂ÊâßË°åÁ¨¨‰∏ÄÈò∂ÊÆµ„ÄÅ‰ΩïÊó∂ÊâßË°åÁ¨¨‰∫åÈò∂ÊÆµÔºâ„ÄÇ ThunkÂáΩÊï∞ÂèÇÊï∞ÁöÑÊ±ÇËÅåÁ≠ñÁï•‰∫âËÆÆThunkÂáΩÊï∞Êó©Âú®‰∏ä‰∏™‰∏ñÁ∫™60Âπ¥‰ª£Â∞±ËØûÁîü‰∫Ü„ÄÇÈÇ£Êó∂ÔºåÁºñÁ®ãËØ≠Ë®ÄÂàöÊîæËµ∑Ê≠•ÔºåËÆ°ÁÆóÊú∫Â≠¶ÂÆ∂ËøòÂú®Á†îÁ©∂ÔºåÁºñËØëÂô®ÊÄé‰πàÂÜôÊØîËæÉÂ•Ω„ÄÇ‰∏Ä‰∏™‰∫âËÆ∫ÁöÑÁÑ¶ÁÇπÊòØ‚ÄùÊ±ÇÂÄºÁ≠ñÁï•‚ÄùÔºåÂç≥ÂáΩÊï∞ÁöÑÂèÇÊï∞Âà∞Â∫ïËØ•‰ΩïÊó∂Ê±ÇÂÄº„ÄÇ ‰º†ÂÄºË∞ÉÁî® ‰º†ÂêçË∞ÉÁî®ÂêÑÊúâÂà©ÂºäÔºå‰º†ÂÄºË∞ÉÁî®ÊØîËæÉÁÆÄÂçïÔºå‰ΩÜÊòØÂØπÂèÇÊï∞Ê±ÇÂÄºÁöÑÊó∂ÂÄôÔºåÂÆûÈôÖ‰∏äËøòÊ≤°Áî®Âà∞Ëøô‰∏™ÂèÇÊï∞ÔºåÊúâÂèØËÉΩÈÄ†ÊàêÊÄßËÉΩÊçüÂ§±„ÄÇÁé∞Âú®ÁöÑCËØ≠Ë®ÄÈááÁî®ÁöÑÊòØ‰º†ÂÄºË∞ÉÁî®„ÄÇ‰º†ÂÄºË∞ÉÁî®ÊúâÊó∂ÂÄôÈÄ†ÊàêÊÄßËÉΩÊçüÂ§±ÔºåÊâÄ‰ª•Êúâ‰∏Ä‰∫õËÆ°ÁÆóÊú∫ÁßëÂ≠¶ÂÆ∂ÂÄæÂêë‰∫é‚Äù‰º†ÂêçË∞ÉÁî®‚ÄùÔºåÂç≥Âè™Âú®ÊâßË°åÊó∂Ê±ÇÂÄº„ÄÇ ThunkÂáΩÊï∞ÁöÑÊÑè‰πâ‰º†ÂêçË∞ÉÁî®ÊúâÂÆÉÂ≠òÂú®ÁöÑÈÅìÁêÜÂíåÂÆûÁé∞ÔºåËôΩÁÑ∂Áé∞Âú®C JavaScript‰ΩøÁî®ÁöÑÊòØ‰º†ÂÄºË∞ÉÁî®Ôºå‰ΩÜÊòØ‰º†ÂêçË∞ÉÁî®ËøòÊòØÊúâ‰∏ÄÂÆöÁöÑ‰ΩøÁî®ËåÉÂõ¥ÁöÑ„ÄÇ ÁºñËØëÂô®ÁöÑ‚Äù‰º†ÂêçË∞ÉÁî®‚ÄùÂÆûÁé∞ÔºåÂæÄÂæÄÊòØÂ∞ÜÂèÇÊï∞ÊîæÂà∞‰∏Ä‰∏™‰∏¥Êó∂ÂáΩÊï∞‰πã‰∏≠ÔºåÂÜçÂ∞ÜËøô‰∏™‰∏¥Êó∂ÂáΩÊï∞‰º†ÂÖ•ÂáΩÊï∞‰Ωì„ÄÇËøô‰∏™‰∏¥Êó∂ÂáΩÊï∞Â∞±Âè´ÂÅöThunkÂáΩÊï∞„ÄÇ 12345678910111213141516function f(m)&#123; return m * 2;&#125;f(x + 5);// Á≠âÂêå‰∫évar thunk = function () &#123; return x + 5;&#125;;function f(thunk)&#123; return thunk() * 2;&#125; ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÂáΩÊï∞fÁöÑÂèÇÊï∞x + 5Ë¢´‰∏Ä‰∏™ÂáΩÊï∞ÊõøÊç¢‰∫Ü„ÄÇÂá°ÊòØÁî®Âà∞ÂéüÂèÇÊï∞ÁöÑÂú∞ÊñπÔºåÂØπThunkÂáΩÊï∞Ê±ÇÂÄºÂç≥ÂèØ„ÄÇ ËøôÂ∞±ÊòØThunkÂáΩÊï∞ÁöÑÂÆö‰πâÔºåÂÆÉÊòØ‚Äù‰º†ÂêçË∞ÉÁî®‚ÄùÁöÑ‰∏ÄÁßçÂÆûÁé∞Á≠ñÁï•ÔºåÁî®Êù•ÊõøÊç¢Êüê‰∏™Ë°®ËææÂºè„ÄÇ JavaScriptËØ≠Ë®ÄÁöÑThunkÂáΩÊï∞JavaScriptËØ≠Ë®ÄÊòØ‰º†ÂÄºË∞ÉÁî®ÔºåÂÆÉÁöÑThunkÂáΩÊï∞Âê´‰πâÊúâÊâÄ‰∏çÂêå„ÄÇ** Âú®JavaScriptËØ≠Ë®Ä‰∏≠ÔºåThunkÂáΩÊï∞ÊõøÊç¢ÁöÑ‰∏çÊòØË°®ËææÂºèÔºåËÄåÊòØÂ§öÂèÇÊï∞ÂáΩÊï∞ÔºåÂ∞ÜÂÖ∂ÊõøÊç¢ÊàêÂçïÂèÇÊï∞ÁöÑÁâàÊú¨Ôºå** ‰∏îÂè™Êé•ÂèóÂõûË∞ÉÂáΩÊï∞‰Ωú‰∏∫ÂèÇÊï∞„ÄÇ ThunkifyÊ®°ÂùóÁîü‰∫ßÁéØÂ¢ÉÂ§ßÁöÑËΩ¨Êç¢Âô®ÔºåÂª∫ËÆÆ‰ΩøÁî®ThunkifyÊ®°Âùó„ÄÇ È¶ñÂÖàÊòØÂÆâË£Ö„ÄÇ 12345678910$ npm install thunkify‰ΩøÁî®ÊñπÂºèÂ¶Ç‰∏ã„ÄÇvar thunkify = require(‚Äòthunkify‚Äô);var fs = require(‚Äòfs‚Äô);var read = thunkify(fs.readFile);read(‚Äòpackage.json‚Äô)(function(err, str)&#123;// ‚Ä¶&#125;); ThunkifyÁöÑÊ∫êÁ†Å‰∏é‰∏ä‰∏ÄËäÇÈÇ£‰∏™ÁÆÄÂçïÁöÑËΩ¨Êç¢Âô®ÈùûÂ∏∏ÂÉè„ÄÇ 123456789101112131415161718192021222324252627function thunkify(fn)&#123;return function()&#123;var args = new Array(arguments.length);var ctx = this;for(var i = 0; i &lt; args.length; ++i) &#123; args[i] = arguments[i];&#125;return function(done)&#123; var called; args.push(function()&#123; if (called) return; called = true; done.apply(null, arguments); &#125;); try &#123; fn.apply(ctx, args); &#125; catch (err) &#123; done(err); &#125;&#125;&#125;&#125;; ÂÆÉÁöÑÊ∫êÁ†Å‰∏ªË¶ÅÂ§ö‰∫Ü‰∏Ä‰∏™Ê£ÄÊü•Êú∫Âà∂ÔºåÂèòÈáècalledÁ°Æ‰øùÂõûË∞ÉÂáΩÊï∞Âè™ËøêË°å‰∏ÄÊ¨°„ÄÇËøôÊ†∑ÁöÑËÆæËÆ°‰∏é‰∏ãÊñáÁöÑGeneratorÂáΩÊï∞Áõ∏ÂÖ≥„ÄÇËØ∑Áúã‰∏ãÈù¢ÁöÑ‰æãÂ≠ê„ÄÇ 12345678910function f(a, b, callback)&#123;var sum = a + b;callback(sum);callback(sum);&#125;var ft = thunkify(f);var print = console.log.bind(console);ft(1, 2)(print);// 3 ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÁî±‰∫éthunkifyÂè™ÂÖÅËÆ∏ÂõûË∞ÉÂáΩÊï∞ÊâßË°å‰∏ÄÊ¨°ÔºåÊâÄ‰ª•Âè™ËæìÂá∫‰∏ÄË°åÁªìÊûú GeneratorÂáΩÊï∞ÁöÑÊµÅÁ®ãÁÆ°ÁêÜThunkÂáΩÊï∞Áé∞Âú®ÂèØ‰ª•Áî®‰∫éGeneratorÂáΩÊï∞ÁöÑËá™Âä®ÊµÅÁ®ãÁÆ°ÁêÜ GeneeratorÂáΩÊï∞ÂèØ‰ª•Ëá™Âä®ÊâßË°å„ÄÇ 1234567891011function* gen() &#123; // ***&#125;var g = gen();var res = g.next();while(!res.done)&#123; console.log(res.value) res = g.next()&#125; ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåGeneratorÂáΩÊï∞gen‰ºöËá™Âä®ÊâßË°åÂÆåÊâÄÊúâÊ≠•È™§„ÄÇ ‰ΩÜÊòØÔºåËøô‰∏çÈÄÇÂêàÂºÇÊ≠•Êìç‰Ωú„ÄÇÂ¶ÇÊûúÂøÖÈ°ª‰øùËØÅÂâç‰∏ÄÊ≠•ÊâßË°åÂÆåÔºåÊâçËÉΩÊâßË°åÂêé‰∏ÄÊ≠•Ôºå‰∏äÈù¢ÁöÑËá™Âä®ÊâßË°åÂ∞±‰∏çÂèØË°å„ÄÇËøôÊòØÔºåThunkÂáΩÊï∞Â∞±ËÉΩÊ¥æ‰∏äÁî®Âú∫„ÄÇ‰ª•ËØªÂèñÊñá‰ª∂‰∏∫‰æã„ÄÇ‰∏ãÈù¢ÁöÑGeneratorÂáΩÊï∞Â∞ÅË£Ö‰∫Ü‰∏§‰∏™ÂºÇÊ≠•Êìç‰Ωú„ÄÇ 123456789var fs = require(&#x27;fs&#x27;);var thunkify = require(&#x27;thunkify&#x27;);var readFile = thunkify(fs.readFile);var gen = function* ()&#123; var r1 = yield readFile(&#x27;/etc/fstab&#x27;); &#125; ThunkÂáΩÊï∞ÁöÑËá™Âä®ÊµÅÁ®ãÁÆ°ÁêÜThunkÂáΩÊï∞ÁöÑÁúüÊ≠£ÁöÑÂ®ÅÂäõÔºåÂú®‰∫éÂèØ‰ª•Ëá™Âä®ÊâßË°åGeneratorÂáΩÊï∞„ÄÇ‰∏ãÈù¢Â∞±ÊòØ‰∏Ä‰∏™Âü∫‰∫éThunkÂáΩÊï∞ÁöÑGeneratorÊâßË°åÂô®„ÄÇ ThunkÂáΩÊï∞ÁöÑGeneratorÊâßË°åÂô®„ÄÇ 1234567891011121314151617function run(fn) &#123; var gen = fn(); function next(err,data) &#123; var result = gen.next(data); if(result.done)&#123; return ; &#125; result.value(next) &#125;&#125;function* g()&#123; // ...&#125;run(g) ‰∏äÈù¢‰ª£Á†ÅÁöÑrunÂáΩÊï∞ÔºåÂ∞±ÊòØ‰∏Ä‰∏™GeneratorÂáΩÊï∞ÁöÑËá™Âä®ÊâßË°åÂô®„ÄÇÂÜÖÈÉ®ÁöÑnextÂáΩÊï∞Â∞±ÊòØThunkÁöÑÂõûË∞ÉÂáΩÊï∞„ÄÇnextÂáΩÊï∞ÂÖàÂ∞ÜÊåáÈíàÁßªÂà∞GeneratorÂáΩÊï∞ÁöÑ‰∏ã‰∏ÄÊ≠•Ôºàgen.nextÊñπÊ≥ïÔºâÔºåÁÑ∂ÂêéÂà§Êñ≠GeneratorÂáΩÊï∞ÊòØÂê¶ÁªìÊùü(result.doneÂ±ûÊÄß)ÔºåÂ¶ÇÊûúÊ≤°ÁªìÊùüÔºåÂ∞±Â∞ÜnextÂáΩÊï∞ÂÜç‰º†ÂÖ•ThunkÂáΩÊï∞Ôºàresult.valueÔºâÂ±ûÊÄßÔºåÂê¶ÂàôÂ∞±Áõ¥Êé•ÈÄÄÂá∫„ÄÇ Êúâ‰∫ÜËøô‰∏™ÊâßË°åÂô®ÔºåÊâßË°åGeneratorÂáΩÊï∞Êñπ‰æøÂ§ö‰∫Ü„ÄÇ‰∏çÁÆ°ÂÜÖÈÉ®ÊúâÂ§öÂ∞ë‰∏™ÂºÇÊ≠•Êìç‰ΩúÔºåÁõ¥Êé•ÊääGeneratorÂáΩÊï∞‰º†ÂÖ•runÂáΩÊï∞Âç≥ÂèØ„ÄÇÂΩìÁÑ∂ÔºåÂâçÊèêÊòØÊØè‰∏Ä‰∏™ÂºÇÊ≠•Êìç‰ΩúÔºåÈÉΩË¶ÅÊòØThunkÂáΩÊï∞Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåË∑üÂú®yieldÂëΩ‰ª§ÂêéÈù¢ÁöÑÂøÖÈ°ªÊòØThunkÂáΩÊï∞„ÄÇ 12345678var g = function* () &#123; var f1 = yield readFile(&#x27;fileA&#x27;) var f2 = yield readFile(&#x27;fileB&#x27;) // ... var fn = yield readFile(&#x27;fileN&#x27;)&#125;run(g) ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÂáΩÊï∞gÂ∞ÅË£Ö‰∫Ün‰∏™ÂºÇÊ≠•ÁöÑËØªÂèñÊñá‰ª∂Êìç‰ΩúÔºåÂè™Ë¶ÅÊâßË°årunÂáΩÊï∞ÔºåËøô‰∫õÊìç‰ΩúÂ∞±‰ºöËá™Âä®ÂÆåÊàê„ÄÇËøôÊ†∑‰∏ÄÊù•ÔºåÂºÇÊ≠•Êìç‰Ωú‰∏ç‰ªÖÂèØ‰ª•ÂÜôÂæóÂÉèÂêåÊ≠•Êìç‰ΩúÔºåËÄå‰∏î‰∏ÄË°å‰ª£Á†ÅÂ∞±ÂèØ‰ª•ÊâßË°å„ÄÇ ThunkÂáΩÊï∞Âπ∂‰∏çÊòØGeneratorÂáΩÊï∞Ëá™Âä®ÊâßË°åÁöÑÂîØ‰∏ÄÊñπÊ°à„ÄÇÂõ†‰∏∫Ëá™Âä®ÊâßË°åÁöÑÂÖ≥ÈîÆÊòØÔºåÂøÖÈ°ªÊúâ‰∏ÄÁßçÊú∫Âà∂ÔºåËá™Âä®ÊéßÂà∂GeneratorÂáΩÊï∞ÁöÑÊµÅÁ®ãÔºåÊé•Êî∂Âíå‰∫§ËøòÁ®ãÂ∫èÁöÑÊâßË°åÊùÉ„ÄÇÂõûË∞ÉÂáΩÊï∞ÂèØ‰ª•ÂÅöÂà∞Ëøô‰∏ÄÁÇπÔºåPromiseÂØπË±°‰πüÂèØ‰ª•ÂÅöÂà∞Ëøô‰∏ÄÁÇπ„ÄÇ coÊ®°ÂùóÂü∫Êú¨Áî®Ê≥ïcoÊ®°ÂùóÁî®‰∫éGeneratorÂáΩÊï∞ÁöÑËá™Âä®ÊâßË°å„ÄÇ coÊ®°ÂùóÁöÑÂéüÁêÜ‰∏∫‰ªÄ‰πàcoÂèØ‰ª•Ëá™Âä®ÊâßË°åGeneratorÂáΩÊï∞ÔºüÂâçÈù¢ËØ¥ËøáÔºåGeneratorÂ∞±ÊòØ‰∏Ä‰∏™ÂºÇÊ≠•Êìç‰ΩúÁöÑÂÆπÂô®„ÄÇÂÆÉÁöÑËá™ÂÆöÊâßË°åÈúÄË¶Å‰∏ÄÁßçÊú∫Âà∂ÔºåÂΩìÂºÇÊ≠•Êìç‰ΩúÊúâ‰∫ÜÁªìÊûúÔºåËÉΩÂ§üËá™Âä®‰∫§ÂõûÊâßË°åÊùÉ„ÄÇ ‰∏§ÁßçÊñπÊ≥ïÂèØ‰ª•ÂÅöÂà∞Ëøô‰∏ÄÁÇπ„ÄÇ ÂõûË∞ÉÂáΩÊï∞„ÄÇÂ∞ÜÂºÇÊ≠•Êìç‰ΩúÂåÖË£ÖÊàêThunkÂáΩÊï∞ÔºåÂú®ÂõûË∞ÉÂáΩÊï∞ÈáåÈù¢‰∫§ÂõûÊâßË°åÊùÉ„ÄÇPromiseÂØπË±°„ÄÇÂ∞ÜÂºÇÊ≠•Êìç‰ΩúÂåÖË£ÖÊàêPromiseÂØπË±°ÔºåÁî®thenÊñπÊ≥ï‰∫§ÂõûÊâßË°åÊùÉ„ÄÇcoÊ®°ÂùóÂÖ∂ÂÆûÂ∞±ÊòØÂ∞Ü‰∏§ÁßçËá™Âä®ÊâßË°åÂô®ÔºàThunkÂáΩÊï∞ÂíåPromiseÂØπË±°ÔºâÔºåÂåÖË£ÖÊàê‰∏Ä‰∏™Ê®°Âùó„ÄÇ‰ΩøÁî®coÁöÑÂâçÊèêÊù°‰ª∂ÊòØÔºåGeneratorÂáΩÊï∞ÁöÑyieldÂëΩ‰ª§ÂêéÈù¢ÔºåÂè™ËÉΩÊòØThunkÂáΩÊï∞ÊàñPromiseÂáΩÊï∞„ÄÇ Âü∫‰∫éPromiseÂØπË±°ÁöÑËá™Âä®ÊâßË°åËøòÊòØÊ≤øÁî®‰∏äÈù¢ÁöÑ‰æãÂ≠ê„ÄÇÈ¶ñÂÖàÔºåÊääfsÊ®°ÂùóÁöÑreadFileÊñπÊ≥ïÂåÖË£ÖÊàê‰∏Ä‰∏™PromiseÂØπË±°„ÄÇ 1234567891011121314151617var fs = require(&#x27;fs&#x27;)var readFile = function (fileName)&#123; return new Promise(function (resolve,reject)&#123; fs.readFile(fileName, function(error, data)&#123; if(error) return reject(error) resolve(data) &#125;) &#125;) &#125;var gen = function* ()&#123; var f1 = yield readFile(&#x27;/etc/fstab&#x27;) var f2 = yield readFile(&#x27;/etc/shells&#x27;) console.log(f1.toString()) console.log(f2.toString())&#125; ÁÑ∂ÂêéÔºåÊâãÂä®ÊâßË°å‰∏äÈù¢ÁöÑGeneratorÂáΩÊï∞„ÄÇ 1234567var g = gen();g.next().value.then(function (data)&#123; g.next(data).value.then(function(data)&#123; g.next(data) &#125;)&#125;) ÊâãÂä®ÊâßË°åÂÖ∂ÂÆûÂ∞±ÊòØÁî®thenÊñπÊ≥ïÔºåÂ±ÇÂ±ÇÊ∑ªÂä†ÂõûË∞ÉÂáΩÊï∞„ÄÇÁêÜËß£‰∫ÜËøô‰∏ÄÁÇπÔºåÂ∞±ÂèØ‰ª•ÂÜôÂá∫‰∏Ä‰∏™Ëá™Âä®ÊâßË°åÂô®„ÄÇ 123456789101112131415function run(gen)&#123; var g = gen(); function next(data)&#123; var result = g.next(data); if (result.done) return result.value; result.value.then(function(data)&#123; next(data); &#125;); &#125; next();&#125;run(gen); ‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÂè™Ë¶ÅGeneratorÂáΩÊï∞ËøòÊ≤°ÊâßË°åÂà∞ÊúÄÂêé‰∏ÄÊ≠•ÔºånextÂáΩÊï∞Â∞±Ë∞ÉÁî®Ëá™Ë∫´Ôºå‰ª•Ê≠§ÂÆûÁé∞Ëá™Âä®ÊâßË°å„ÄÇ coÊ®°ÂùóÁöÑÊ∫êÁ†ÅasyncÂáΩÊï∞Âê´‰πâES7Êèê‰æõ‰∫ÜasyncÂáΩÊï∞Ôºå‰ΩøÂæóÂºÇÊ≠•Êìç‰ΩúÂèòÂæóÊõ¥Âä†Êñπ‰æø„ÄÇasyncÂáΩÊï∞ÊòØ‰ªÄ‰πàÔºü‰∏ÄÂè•ËØùÔºåasyncÂáΩÊï∞Â∞±ÊòØGeneratorÂáΩÊï∞ÁöÑËØ≠Ê≥ïÁ≥ñ„ÄÇ ÂâçÊñáÊúâ‰∏Ä‰∏™GeneratorÂáΩÊï∞Ôºå‰æùÊ¨°ËØªÂèñ‰∏§‰∏™Êñá‰ª∂„ÄÇ Javascriptvar fs &#x3D; require(‚Äòfs‚Äô); var readFile &#x3D; function (fileName) { return new Promise(function (resolve, reject) { fs.readFile(fileName, function(error, data) { if (error) reject(error); resolve(data); }); });}; var gen &#x3D; function* (){ var f1 &#x3D; yield readFile(‚Äò&#x2F;etc&#x2F;fstab‚Äô); var f2 &#x3D; yield readFile(‚Äò&#x2F;etc&#x2F;shells‚Äô); console.log(f1.toString()); console.log(f2.toString());};ÂÜôÊàêasyncÂáΩÊï∞ÔºåÂ∞±ÊòØ‰∏ãÈù¢ËøôÊ†∑„ÄÇ Javascript var asyncReadFile &#x3D; async function (){ var f1 &#x3D; await readFile(‚Äò&#x2F;etc&#x2F;fstab‚Äô); var f2 &#x3D; await readFile(‚Äò&#x2F;etc&#x2F;shells‚Äô); console.log(f1.toString()); console.log(f2.toString());};‰∏ÄÊØîËæÉÂ∞±‰ºöÂèëÁé∞ÔºåasyncÂáΩÊï∞Â∞±ÊòØÂ∞ÜGeneratorÂáΩÊï∞ÁöÑÊòüÂè∑Ôºà*ÔºâÊõøÊç¢ÊàêasyncÔºåÂ∞ÜyieldÊõøÊç¢ÊàêawaitÔºå‰ªÖÊ≠§ËÄåÂ∑≤„ÄÇ async ÂáΩÊï∞ÂØπGeneratorÂáΩÊï∞ÁöÑÊîπËøõÔºå‰ΩìÁé∞Âú®‰ª•‰∏ãÂõõÁÇπ„ÄÇ ÂÜÖÁΩÆÊâßË°åÂô®„ÄÇGeneratorÂáΩÊï∞ÁöÑÊâßË°åÂøÖÈ°ªÈù†ÊâßË°åÂô®ÔºåÊâÄ‰ª•ÊâçÊúâ‰∫ÜcoÊ®°ÂùóÔºåËÄåasyncÂáΩÊï∞Ëá™Â∏¶ÊâßË°åÂô®„ÄÇ‰πüÂ∞±ÊòØËØ¥Ôºåasync ÂáΩÊï∞ÁöÑÊâßË°åÔºå‰∏éÊôÆÈÄöÂáΩÊï∞‰∏ÄÊ®°‰∏ÄÊ†∑ÔºåÂè™Ë¶Å‰∏ÄË°å„ÄÇJavascriptvar result &#x3D; asyncReadFile();‰∏äÈù¢ÁöÑ‰ª£Á†ÅË∞ÉÁî®‰∫ÜasyncReadFileÂáΩÊï∞ÔºåÁÑ∂ÂêéÂÆÉÂ∞±‰ºöËá™Âä®ÊâßË°åÔºåËæìÂá∫ÊúÄÂêéÁªìÊûúÔºåËøôÂÆåÂÖ®‰∏çÂÉèGeneratorÂáΩÊï∞ÔºåÈúÄË¶ÅË∞ÉÁî®nextÊñπÊ≥ïÔºåÊàñËÄÖÁî®coÊ®°ÂùóÔºåÊâçËÉΩÂæóÂà∞ÁúüÊ≠£ÊâßË°åÔºåÂæóÂà∞ÊúÄÂêéÁªìÊûú„ÄÇ Êõ¥Â•ΩÁöÑËØ≠‰πâ„ÄÇasyncÂíåawaitÔºåÊØîËµ∑ÂûãÂè∑ÂíåyieldÔºåËØ≠‰πâÊõ¥Ê∏ÖÊ•ö‰∫Ü„ÄÇasyncË°®Á§∫ÂáΩÊï∞ÈáåÊúâÂºÇÊ≠•Êìç‰ΩúÔºåasaitË°®Á§∫Ë∑üÂú®ÂêéÈù¢ÁöÑË°®ËææÂºèÈúÄË¶ÅÁ≠âÂæÖÁªìÊûú„ÄÇÊõ¥ÂπøÁöÑÈÄÇÁî®ÊÄß„ÄÇcoÊ®°ÂùóÁ∫¶ÂÆöÔºåyieldÂëΩ‰ª§ÂêéÈù¢Âè™ËÉΩÊòØThunkÂáΩÊï∞ÊàñPromiseÂØπË±°ÔºåËÄåasyncÂáΩÊï∞ÁöÑawaitÂëΩ‰ª§ÂêéÈù¢ÔºåÂèØ‰ª•ÊòØPromiseÂØπË±°ÂíåÂéüÂßãÁ±ªÂûãÁöÑÂÄºÔºàÊï∞ÂÄº„ÄÅÂ≠óÁ¨¶‰∏≤ÂíåÂ∏ÉÂ∞îÂÄºÔºå‰ΩÜËøôÊó∂Á≠âÂêå‰∫éÂêåÊ≠•Êìç‰ΩúÔºâ„ÄÇËøîÂõûÂÄºÊòØPromise„ÄÇasyncÂáΩÊï∞ÁöÑËøîÂõûÂÄºÊòØPromiseÂØπË±°ÔºåËøôÊØîGeneeratorÂáΩÊï∞ÁöÑËøîÂõûÂÄºÊòØIteratorÂØπË±°Êñπ‰æøÂ§ö‰∫Ü„ÄÇ‰Ω†ÂèØ‰ª•Áî®thenÊñπÊ≥ïÊåáÂÆö‰∏ã‰∏ÄÊ≠•ÁöÑÊìç‰Ωú„ÄÇËøõ‰∏ÄÊ≠•ËØ¥ÔºåasyncÂáΩÊï∞ÂÆåÂÖ®ÂèØ‰ª•Áúã‰ΩúÂ§ö‰∏™ÂºÇÊ≠•Êìç‰ΩúÔºåÂåÖË£ÖÊàê‰∏Ä‰∏™PromiseÂØπË±°ÔºåËÄåawaitÂëΩ‰ª§Â∞±ÊòØÂÜÖÈÉ®thenÂëΩ‰ª§ÁöÑËØ≠Ê≥ïÁ≥ñ„ÄÇ ËØ≠Ê≥ïasyncÂáΩÊï∞ÁöÑËØ≠Ê≥ïËßÑÂàôÊÄª‰Ωì‰∏äÊØîËæÉÁÆÄÂçïÔºåÈöæÁÇπÊòØÈîôËØØÂ§ÑÁêÜÊú∫Âà∂„ÄÇ asyncÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™PromiseÂØπË±°„ÄÇasyncÂáΩÊï∞ÂÜÖÈÉ®returnËØ≠Âè•ËøîÂõûÁöÑÂÄºÔºå‰ºöÊàê‰∏∫thenÊñπÊ≥ï‰∏≠ÂõûË∞ÉÂáΩÊï∞ÁöÑÂèÇÊï∞„ÄÇ Javascriptasync function f(){ return ‚Äòhello world‚Äô;} f().then(v &#x3D;&gt; console.log(v))‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÂáΩÊï∞fÂÜÖÈÉ®return ÂëΩ‰ª§ËøîÂõûÁöÑÂÄºÔºå‰ºöË¢´thenÊñπÊ≥ïÂõûË∞ÉÂáΩÊï∞Êé•Êî∂Âà∞„ÄÇ asyncÂáΩÊï∞ÂÜÖÈÉ®ÊäõÂá∫ÈîôËØØÔºå‰ºöÂØºËá¥ËøîÂõûÁöÑPromiseÂØπË±°ÂèòÊàêrejectÁä∂ÊÄÅ„ÄÇÊäõÂá∫ÁöÑÈîôËØØÂØπË±°‰ºöË¢´catchÊñπÊ≥ïÂõûË∞ÉÂáΩÊï∞Êé•Êî∂Âà∞„ÄÇ Javascriptasync function f(){ throw new Error(‚ÄòÂá∫Èîô‰∫Ü‚Äô)} f().then(v &#x3D;&gt; console.log(v), e &#x3D;&gt; console.log(e)) &#x2F;&#x2F;Error: Âá∫Èîô‰∫ÜasyncÂáΩÊï∞ËøîÂõûÁöÑPromiseÂØπË±°ÔºåÂøÖÈ°ªÁ≠âÂà∞ÂÜÖÈÉ®ÊâÄÊúâawaitÂëΩ‰ª§ÁöÑPromiseÂØπË±°ÊâßË°åÂÆåÔºåÊâç‰ºöÂèëÁîüÁä∂ÊÄÅÊîπÂèò„ÄÇ Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåawaitÂëΩ‰ª§ÂêéÈù¢ÊòØ‰∏Ä‰∏™PromiseÂØπË±°„ÄÇÂ¶ÇÊûú‰∏çÊòØÔºå‰ºöË¢´ËΩ¨Êàê‰∏Ä‰∏™Á´ãÂç≥resolveÁöÑPromiseÂØπË±°„ÄÇ asyncÂáΩÊï∞ÁöÑÂÆûÁé∞asyncÂáΩÊï∞ÁöÑÂÆûÁé∞ÔºåÂ∞±ÊòØÂ∞ÜGeneratorÂáΩÊï∞ÂíåËá™Âä®ÊâßË°åÂô®ÔºåÂåÖË£ÖÂú®‰∏Ä‰∏™ÂáΩÊï∞Èáå„ÄÇ Javascriptasync function fn(args){ &#x2F;&#x2F; ‚Ä¶} &#x2F;&#x2F;Á≠âÂêå‰∫é function fn(args){ return spawn(function*() { &#x2F;&#x2F; ‚Ä¶ })}ÊâÄÊúâÁöÑasyncÂáΩÊï∞ÈÉΩÂèØ‰ª•ÂÜôÊàê‰∏äÈù¢ÁöÑÁ¨¨‰∫åÁßçÂΩ¢ÂºèÔºåÂÖ∂‰∏≠ÁöÑspawnÂáΩÊï∞Â∞±ÊòØËá™Âä®ÊâßË°åÂô®„ÄÇ‰∏ãÈù¢ÁªôÂá∫spawnÂáΩÊï∞ÁöÑÂÆûÁé∞ÔºåÂü∫Êú¨Â∞±ÊòØÂâçÊñáËá™Âä®ÊâßË°åÂô®ÁöÑÁøªÁâà„ÄÇ Javascriptfunction spawn(){ return new Promise(function (resolve, reject){ var gen &#x3D; genF(); function step(nextF) { try{ var next &#x3D; nextF(); } catch(e){ return reject(e) } } if(next.done)&#123; return resolve(next.value) &#125; Promise.resolve(next.value).then(function (v)&#123; step(function () &#123; return gen.next(v);&#125;); &#125;, function (e)&#123; step(function ()&#123; return gen.throw(e)&#125;) &#125;) step(function()&#123;return gen.next(undefined);&#125;) &#125;) }asyncÂáΩÊï∞ÊòØÈùûÂ∏∏Êñ∞ÁöÑËØ≠Ê≥ïÂäüËÉΩÔºåÊñ∞Âà∞‰∏çÂ±û‰∫éES6,ËÄåÊòØÂ±û‰∫éES7„ÄÇÁõÆÂâçÔºåÂÆÉ‰ªçÂ§Ñ‰∫éÊèêÊ°àÈò∂ÊÆµÔºå‰ΩÜÊòØËΩ¨Á†ÅÂô®BabelÂíåregeneratorÈÉΩÂ∑≤ÁªèÊîØÊåÅÔºåËΩ¨Á†ÅÂêéÂ∞±ËÉΩ‰ΩøÁî®„ÄÇ async ÂáΩÊï∞ÁöÑÁî®Ê≥ïasyncÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™PromiseÂØπË±°ÔºåÂèØ‰ª•‰ΩøÁî®thenÊñπÊ≥ïÊ∑ªÂä†ÂõûË∞ÉÂáΩÊï∞„ÄÇÂΩìÂáΩÊï∞ÊâßË°åÁöÑÊó∂ÂÄôÔºå‰∏ÄÊó¶ÈÅáÂà∞ awaitÂ∞±‰ºöÂÖàËøîÂõûÔºåÁ≠âÂà∞Ëß¶ÂèëÁöÑÂºÇÊ≠•Êìç‰ΩúÂÆåÊàêÔºåÂÜçÊé•ÁùÄÊâßË°åÂáΩÊï∞‰ΩìÂÜÖÂêéÈù¢ÁöÑËØ≠Âè•„ÄÇ ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰æãÂ≠ê„ÄÇ Javascriptasync function getStockPriceByName(name) { var symbol &#x3D; await getStockSymbol(name); var stockPrice &#x3D; await getStockPrice(symbol); return stockPrice;} getStockPriceByName(‚Äògoog‚Äô).then(function (result) { console.log(result);});‰∏äÈù¢‰ª£Á†ÅÊòØ‰∏Ä‰∏™Ëé∑ÂèñËÇ°Á•®Êä•‰ª∑ÁöÑÂáΩÊï∞ÔºåÂáΩÊï∞ÂâçÈù¢ÁöÑasyncÂÖ≥ÈîÆÂ≠óÔºåË°®ÊòéËØ•ÂáΩÊï∞ÂÜÖÈÉ®ÊúâÂºÇÊ≠•Êìç‰Ωú„ÄÇË∞ÉÁî®ËØ•ÂáΩÊï∞Êó∂Ôºå‰ºöÁ´ãÂç≥ËøîÂõû‰∏Ä‰∏™PromiseÂØπË±°„ÄÇ‰∏çËøáÊòØpendingÁä∂ÊÄÅÁöÑPromise,Âú®then‰∏≠Êâç‰ºöÊòØresolveÁä∂ÊÄÅÁöÑPromise. AsyncÂáΩÊï∞ÊúâÂ§öÁßç‰ΩøÁî®ÂΩ¢Âºè„ÄÇ Javascript&#x2F;&#x2F; ÂáΩÊï∞Â£∞Êòéasync function foo() {} &#x2F;&#x2F;ÂáΩÊï∞Ë°®ËææÂºèconst foo &#x3D; async function (){} &#x2F;&#x2F;ÂØπË±°ÁöÑÊñπÊ≥ïlet obj &#x3D; {async foo(){}}obj.foo().then(‚Ä¶) &#x2F;&#x2F; ClassÁöÑÊñπÊ≥ï class Storage{ constructor() { this.cacchePromise &#x3D; caches.opeen(‚Äòavatars‚Äô); } async getAvatar(name) &#123; const cache = await this.cacchePromise; return cache.match(&#39;/avatars/$&#123;name&#125;.jpg&#39;) &#125; } const storage &#x3D; new Storage();storage.getAvatar(‚Äòjake‚Äô).then(..) &#x2F;&#x2F;ÁÆ≠Â§¥ÂáΩÊï∞const foo &#x3D; async () &#x3D;&gt; {}Ê≥®ÊÑèÁÇπÁ¨¨‰∏ÄÁÇπÔºåawaitÂëΩ‰ª§ÂêéÈù¢ÁöÑPromiseÂØπË±°ÔºåËøêË°åÁªìÊûúÂèØËÉΩÊòØrejectedÔºåÈöèÊÑèÊúÄÂ•ΩÊääawaitÂëΩ‰ª§ÊîæÂú®try ‚Ä¶ catch‰ª£Á†ÅÂùó‰∏≠„ÄÇ Javascriptasync function myFunction() { try { await somethingThatReturnsAPromise(); } catch (err) { console.log(err); }} &#x2F;&#x2F; Âè¶‰∏ÄÁßçÂÜôÊ≥ï async function myFunction() { await somethingThatReturnsAPromise() .catch(function (err) { console.log(err); };}Á¨¨‰∫åÁÇπÔºåÂ§ö‰∏™awaitÂëΩ‰ª§ÂêéÈù¢ÁöÑÂºÇÊ≠•Êìç‰ΩúÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ÁªßÂèëÂÖ≥Á≥ªÔºåÊúÄÂ•ΩËÆ©ÂÆÉ‰ª¨ÂêåÊó∂Ëß¶Âèë„ÄÇ Javascript let foo &#x3D; await getFoo();let bar &#x3D; await getBar();‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºågetFooÂíågetBarÊòØ‰∏§‰∏™Áã¨Á´ãÁöÑÂºÇÊ≠•Êìç‰ΩúÔºàÂç≥‰∫í‰∏ç‰æùËµñÔºâÔºåË¢´ÂÜôÊàêÁªßÂèëÂÖ≥Á≥ª„ÄÇËøôÊ†∑ÊØîËæÉËÄóÊó∂ÔºåÂõ†‰∏∫Âè™ÊúâgetFooÂÆåÊàê‰ª•ÂêéÔºåÊâç‰ºöÊâßË°ågetBarÔºåÂÆåÂÖ®ÂèØ‰ª•ËÆ©ÂÆÉ‰ª¨ÂêåÊó∂Ëß¶Âèë„ÄÇ Javascript &#x2F;&#x2F; ÂÜôÊ≥ï‰∏Älet [foo, bar] &#x3D; await Promise.all([getFoo(), getBar()]); &#x2F;&#x2F; ÂÜôÊ≥ï‰∫ålet fooPromise &#x3D; getFoo();let barPromise &#x3D; getBar();let foo &#x3D; await fooPromise;let bar &#x3D; await barPromise;‰∏äÈù¢‰∏§ÁßçÂÜôÊ≥ïÔºågetFooÂíågetBarÈÉΩÊòØÂêåÊó∂Ëß¶ÂèëÔºåËøôÊ†∑Â∞±‰ºöÁº©Áü≠Á®ãÂ∫èÁöÑÊâßË°åÊó∂Èó¥„ÄÇ Á¨¨‰∏âÁÇπÔºåawaitÂëΩ‰ª§Âè™ËÉΩÁî®Âú®asyncÂáΩÊï∞‰πã‰∏≠ÔºåÂ¶ÇÊûúÁî®Âú®ÊôÆÈÄöÂáΩÊï∞ÔºåÂ∞±‰ºöÊä•Èîô„ÄÇ async function dbFuc(db) {let docs &#x3D; [{}, {}, {}]; &#x2F;&#x2F; Êä•Èîôdocs.forEach(function (doc) {await db.post(doc);});}‰∏äÈù¢‰ª£Á†Å‰ºöÊä•ÈîôÔºåÂõ†‰∏∫awaitÁî®Âú®ÊôÆÈÄöÂáΩÊï∞‰πã‰∏≠‰∫Ü„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÂ∞ÜforEachÊñπÊ≥ïÁöÑÂèÇÊï∞ÊîπÊàêasyncÂáΩÊï∞Ôºå‰πüÊúâÈóÆÈ¢ò„ÄÇ async function dbFuc(db) {let docs &#x3D; [{}, {}, {}]; &#x2F;&#x2F; ÂèØËÉΩÂæóÂà∞ÈîôËØØÁªìÊûúdocs.forEach(async function (doc) {await db.post(doc);});}‰∏äÈù¢‰ª£Á†ÅÂèØËÉΩ‰∏ç‰ºöÊ≠£Â∏∏Â∑•‰ΩúÔºåÂéüÂõ†ÊòØËøôÊó∂‰∏â‰∏™db.postÊìç‰ΩúÂ∞ÜÊòØÂπ∂ÂèëÊâßË°åÔºå‰πüÂ∞±ÊòØÂêåÊó∂ÊâßË°åÔºåËÄå‰∏çÊòØÁªßÂèëÊâßË°å„ÄÇÊ≠£Á°ÆÁöÑÂÜôÊ≥ïÊòØÈááÁî®forÂæ™ÁéØ„ÄÇ Javascript async function dbFuc(db) { let docs &#x3D; [{}, {}, {}]; for (let doc of docs) { await db.post(doc); }}Â¶ÇÊûúÁ°ÆÂÆûÂ∏åÊúõÂ§ö‰∏™ËØ∑Ê±ÇÂπ∂ÂèëÊâßË°åÔºåÂèØ‰ª•‰ΩøÁî®Promise.allÊñπÊ≥ï„ÄÇ async function dbFuc(db) {let docs &#x3D; [{}, {}, {}];let promises &#x3D; docs.map((doc) &#x3D;&gt; db.post(doc)); let results &#x3D; await Promise.all(promises);console.log(results);} &#x2F;&#x2F; ÊàñËÄÖ‰ΩøÁî®‰∏ãÈù¢ÁöÑÂÜôÊ≥ï async function dbFuc(db) {let docs &#x3D; [{}, {}, {}];let promises &#x3D; docs.map((doc) &#x3D;&gt; db.post(doc)); let results &#x3D; [];for (let promise of promises) {results.push(await promise);}console.log(results);} ES6Â∞ÜawaitÂ¢ûÂä†‰∏∫‰øùÁïôÂ≠ó„ÄÇ‰ΩøÁî®Ëøô‰∏™ËØç‰Ωú‰∏∫Ê†áËØÜÁ¨¶ÔºåÂú®ES5ÊòØÂêàÊ≥ïÁöÑÔºåÂú®ES6Â∞ÜÊäõÂá∫SyntaxError„ÄÇ ‰∏éPromise„ÄÅGeneratorÁöÑÊØîËæÉPromise APIÔºàthen catchÁ≠âÁ≠âÔºâÂ§™Â§öÔºåÊìç‰ΩúÊú¨Ë∫´ÁöÑËØ≠‰πâÂèçËÄå‰∏çÂÆπÊòìÁúãÂá∫Êù•„ÄÇ GeneratorÂáΩÊï∞ËØ≠‰πâÊØîPromiseÂÜôÊ≥ïÊõ¥Ê∏ÖÊô∞ÔºåÁî®Êà∑ÂÆö‰πâÁöÑÊìç‰ΩúÂÖ®ÈÉ®ÈÉΩÂá∫Áé∞Âú®spawnÂáΩÊï∞ÁöÑÂÜÖÈÉ®„ÄÇËøô‰∏™ÂÜôÊ≥ïÁöÑÈóÆÈ¢òÂú®‰∫éÔºåÂøÖÈ°ªÊúâ‰∏Ä‰∏™‰ªªÂä°ËøêË°åÂô®ÔºåËá™Âä®ÊâßË°åGeneratorÂáΩÊï∞Ôºå‰∏äÈù¢‰ª£Á†ÅÁöÑspawnÂáΩÊï∞Â∞±ÊòØËá™Âä®ÊâßË°åÂô®ÔºåÂÆÉËøîÂõû‰∏Ä‰∏™PromiseÂØπË±°ÔºåËÄå‰∏îÂøÖÈ°ª‰øùËØÅyieldËØ≠Âè•ÂêéÈù¢ÁöÑË°®ËææÂºèÔºåÂøÖÈ°ªËøîÂõû‰∏Ä‰∏™Promise„ÄÇ AsyncÂáΩÊï∞ÁöÑÂÆûÁé∞ÊúÄÁÆÄÊ¥ÅÔºåÊúÄÁ¨¶ÂêàËØ≠‰πâÔºåÂá†‰πéÊ≤°ÊúâËØ≠‰πâ‰∏çÁõ∏ÂÖ≥ÁöÑ‰ª£Á†Å„ÄÇÂÆÉÂ∞ÜGeneratorÂÜôÊ≥ï‰∏≠ÁöÑËá™Âä®ÊâßË°åÂô®ÔºåÊîπÂú®ËØ≠Ë®ÄÂ±ÇÈù¢Êèê‰æõÔºå‰∏çÊö¥Èú≤ÁªôÁî®Êà∑ÔºåÂõ†‰∏∫‰ª£Á†ÅÈáèÊúÄÂ∞ë„ÄÇÂ¶ÇÊûú‰ΩøÁî®GeneratorÂÜôÊ≥ïÔºåËá™Âä®ÊâßË°åÂô®ÈúÄË¶ÅÁî®Êà∑Ëá™Â∑±Êèê‰æõ„ÄÇ ÂÆû‰æãÔºöÊåâÈ°∫Â∫èÂÆåÊàêÂºÇÊ≠•Êìç‰Ωú","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"axios‰∏≠ÊñáÊñáÊ°£","slug":"axios‰∏≠ÊñáÊñáÊ°£","date":"2020-03-17T16:00:00.000Z","updated":"2024-10-12T08:40:56.538Z","comments":true,"path":"2020/03/18/axios‰∏≠ÊñáÊñáÊ°£/","permalink":"https://justsso1.github.io/2020/03/18/axios%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3/","excerpt":"","text":"axios‰∏≠ÊñáÊñáÊ°£‰ªÄ‰πàÊòØaxios?AxiosÊòØ‰∏Ä‰∏™Âü∫‰∫épromiseÁöÑHTTPÂ∫ìÔºåÂèØ‰ª•Áî®Âú®ÊµèËßàÂô®Âíånode.js‰∏≠„ÄÇ ÁâπÊÄß‰ªéÊµèËßàÂô®‰∏≠ÂàõÂª∫XMLHttpRequests‰ªénode.jsÂàõÂª∫httpËØ∑Ê±ÇÊîØÊåÅPromise APIÊã¶Êà™ËØ∑Ê±ÇÂíåÂìçÂ∫îËΩ¨Êç¢ËØ∑Ê±ÇÊï∞ÊçÆÂíåÂìçÂ∫îÊï∞ÊçÆÂèñÊ∂àËØ∑Ê±ÇËá™Âä®ËΩ¨Êç¢JSON Êï∞ÊçÆÂÆ¢Êà∑Á´ØÊîØÊåÅÈò≤Âæ°XSRFaxios APIaxios(config)axios(url[,config])ËØ∑Ê±ÇÊñπÊ≥ïÁöÑÂà´Âêçaxios.request(config)axios.get(url[,config])axios.delete(url[, config])axios.head(url[, config])axios.options(url[, config])axios.post(url[, data[, config]])axios.put(url[, data[, config]])axios.patch(url[, data[, config]])Ê≥®ÊÑèÂú®‰ΩøÁî®Âà´ÂêçÊñπÊ≥ïÊó∂Ôºå url„ÄÅmethod„ÄÅdata Ëøô‰∫õÂ±ûÊÄßÈÉΩ‰∏çÂøÖÂú®ÈÖçÁΩÆ‰∏≠ÊåáÂÆö„ÄÇ Âπ∂ÂèëÂ§ÑÁêÜÂπ∂ÂèëËØ∑Ê±ÇÁöÑÂä©ÊâãÂáΩÊï∞ axios.all(iterable)axios.spread(callback)ÂàõÂª∫ÂÆû‰æãÂèØ‰ª•‰ΩøÁî®Ëá™ÂÆö‰πâÈÖçÁΩÆÊñ∞Âª∫‰∏Ä‰∏™axiosÂÆû‰æã„ÄÇ ‰ΩøÁî® axios.create([config]) ÊñπÊ≥ïÂàõÂª∫ Javascriptconst instance &#x3D; axios.create({ baseURL: ‚Äòhttps://some-domain.com/api/‚Äò, timeout: 1000, headers: {‚ÄòX-Custom-Header‚Äô: ‚Äòfoobar‚Äô}});ÂÆû‰æãÊñπÊ≥ï ‰ª•‰∏ãÊòØÂèØÁî®ÁöÑÂÆû‰æãÊñπÊ≥ï„ÄÇÊåáÂÆöÁöÑÈÖçÁΩÆÂ∞Ü‰∏éÂÆû‰æãÁöÑÈÖçÁΩÆÂêàÂπ∂„ÄÇ axios#request(config)axios#get(url[, config])axios#delete(url[, config])axios#head(url[, config])axios#options(url[, config])axios#post(url[, data[, config]])axios#put(url[, data[, config]])axios#patch(url[, data[, config]])ËØ∑Ê±ÇÈÖçÁΩÆËøô‰∫õÊòØÂàõÂª∫ËØ∑Ê±ÇÊó∂ÂèØ‰ª•Áî®ÁöÑÈÖçÁΩÆÈÄâÈ°π„ÄÇÂè™ÊúâurlÊòØÂøÖÈ°ªÁöÑ„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆömethod,ËØ∑Ê±ÇÂ∞ÜÈªòËÆ§‰ΩøÁî®getÊñπÊ≥ï„ÄÇ Javascript{ &#x2F;&#x2F; ‚Äòurl‚ÄôÊòØÁî®‰∫éËØ∑Ê±ÇÁöÑÊúçÂä°Âô®URL url: ‚Äò&#x2F;user‚Äô, &#x2F;&#x2F;method ÊòØÂàõÂª∫ËØ∑Ê±ÇÊó∂ÁöÑ‰ΩøÁî®ÁöÑÊñπÊ≥ï method: ‚Äòget‚Äô, &#x2F;&#x2F; baseURL Â∞ÜËá™Âä®Âä†Âú®urlÂâçÈù¢ÔºåÈô§ÈùûurlÊòØ‰∏Ä‰∏™ÁªùÂØπURL baseURL: ‚Äòhttps://some-domain.com/api/‚Äò, &#x2F;&#x2F; transformRequest ÂÖÅËÆ∏ÂêëÊúçÂä°Âô®ÂèëÈÄÅÂâçÔºå‰øÆÊîπËØ∑Ê±ÇÊï∞ÊçÆ &#x2F;&#x2F;Âè™ËÉΩÁî®Âú®PUT POST ÂíåPATCH ËøôÂá†‰∏™ËØ∑Ê±ÇÊñπÊ≥ï &#x2F;&#x2F; ÂêéÈù¢Êï∞ÁªÑ‰∏≠ÁöÑÂáΩÊï∞ÂøÖÈ°ªËøîÂõû‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÊàñArrayBufferÊàñStream transformRequest: [function (data, headers) { &#x2F;&#x2F;ÂØπdata ËøõË°å‰ªªÊÑèËΩ¨Êç¢Â§ÑÁêÜ return data; }], transformResponse: [function(data) { &#x2F;&#x2F;ÂØπdata ËøõË°å‰ªªÊÑèËΩ¨Êç¢Â§ÑÁêÜ return data; }], &#x2F;&#x2F;headers ÊòØÂç≥Â∞ÜË¢´ÂèëÈÄÅÁöÑËá™ÂÆö‰πâËØ∑Ê±ÇÂ§¥ headers: {‚ÄòX-Requested-With‚Äô: ‚ÄòXMLHttpRequest‚Äô}, &#x2F;&#x2F;params ÊòØÂç≥Â∞Ü‰∏éËØ∑Ê±Ç‰∏ÄËµ∑ÂèëÈÄÅÁöÑURLÂèÇÊï∞ &#x2F;&#x2F;ÂøÖÈ°ªÊòØ‰∏Ä‰∏™Êó†Ê†ºÂºèÂØπË±°(plain object)Êàñ URLSearchParams ÂØπË±° params: { ID : 213 },&#x2F;&#x2F; paramsSerializer ÊòØ‰∏Ä‰∏™Ë¥üË¥£ params Â∫èÂàóÂåñÁöÑÂáΩÊï∞ &#x2F;&#x2F; (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/) paramsSerializer: function(params) { return Qs.stringify(params, {arrayFormat: ‚Äòbrackets‚Äô}) }, &#x2F;&#x2F; data ÊòØ‰Ωú‰∏∫ËØ∑Ê±Ç‰∏ª‰ΩìË¢´ÂèëÈÄÅÁöÑÊï∞ÊçÆ &#x2F;&#x2F; Âè™ÈÄÇÁî®‰∫éËøô‰∫õËØ∑Ê±ÇÊñπÊ≥ï ‚ÄòPUT‚Äô, ‚ÄòPOST‚Äô, Âíå ‚ÄòPATCH‚Äô &#x2F;&#x2F; Âú®Ê≤°ÊúâËÆæÁΩÆ transformRequest Êó∂ÔºåÂøÖÈ°ªÊòØ‰ª•‰∏ãÁ±ªÂûã‰πã‰∏ÄÔºö &#x2F;&#x2F; - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams &#x2F;&#x2F; - ÊµèËßàÂô®‰∏ìÂ±ûÔºöFormData, File, Blob &#x2F;&#x2F; - Node ‰∏ìÂ±ûÔºö Stream data: { firstName: ‚ÄòFred‚Äô },&#x2F;&#x2F; timeout ÊåáÂÆöËØ∑Ê±ÇË∂ÖÊó∂ÁöÑÊØ´ÁßíÊï∞(0 Ë°®Á§∫Êó†Ë∂ÖÊó∂Êó∂Èó¥) &#x2F;&#x2F; Â¶ÇÊûúËØ∑Ê±ÇËØùË¥π‰∫ÜË∂ÖËøá timeout ÁöÑÊó∂Èó¥ÔºåËØ∑Ê±ÇÂ∞ÜË¢´‰∏≠Êñ≠ timeout: 1000, &#x2F;&#x2F; withCredentials Ë°®Á§∫Ë∑®ÂüüËØ∑Ê±ÇÊó∂ÊòØÂê¶ÈúÄË¶Å‰ΩøÁî®Âá≠ËØÅ withCredentials: false, &#x2F;&#x2F; default &#x2F;&#x2F; adapter ÂÖÅËÆ∏Ëá™ÂÆö‰πâÂ§ÑÁêÜËØ∑Ê±ÇÔºå‰ª•‰ΩøÊµãËØïÊõ¥ËΩªÊùæ &#x2F;&#x2F; ËøîÂõû‰∏Ä‰∏™ promise Âπ∂Â∫îÁî®‰∏Ä‰∏™ÊúâÊïàÁöÑÂìçÂ∫î (Êü•ÈòÖ response docs). adapter: function (config) { &#x2F;* ‚Ä¶ *&#x2F; }, &#x2F;&#x2F; auth Ë°®Á§∫Â∫îËØ•‰ΩøÁî® HTTP Âü∫Á°ÄÈ™åËØÅÔºåÂπ∂Êèê‰æõÂá≠ÊçÆ &#x2F;&#x2F; ËøôÂ∞ÜËÆæÁΩÆ‰∏Ä‰∏™ Authorization Â§¥ÔºåË¶ÜÂÜôÊéâÁé∞ÊúâÁöÑ‰ªªÊÑè‰ΩøÁî® headers ËÆæÁΩÆÁöÑËá™ÂÆö‰πâ AuthorizationÂ§¥ auth: { username: ‚Äòjanedoe‚Äô, password: ‚Äòs00pers3cret‚Äô }, &#x2F;&#x2F; responseType Ë°®Á§∫ÊúçÂä°Âô®ÂìçÂ∫îÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂèØ‰ª•ÊòØ ‚Äòarraybuffer‚Äô, ‚Äòblob‚Äô, ‚Äòdocument‚Äô, ‚Äòjson‚Äô, ‚Äòtext‚Äô, ‚Äòstream‚Äô responseType: ‚Äòjson‚Äô, &#x2F;&#x2F; default &#x2F;&#x2F; responseEncoding indicates encoding to use for decoding responses &#x2F;&#x2F; Note: Ignored for responseType of ‚Äòstream‚Äô or client-side requests responseEncoding: ‚Äòutf8‚Äô, &#x2F;&#x2F; default &#x2F;&#x2F; xsrfCookieName ÊòØÁî®‰Ωú xsrf token ÁöÑÂÄºÁöÑcookieÁöÑÂêçÁß∞ xsrfCookieName: ‚ÄòXSRF-TOKEN‚Äô, &#x2F;&#x2F; default &#x2F;&#x2F; xsrfHeaderName is the name of the http header that carries the xsrf token value xsrfHeaderName: ‚ÄòX-XSRF-TOKEN‚Äô, &#x2F;&#x2F; default &#x2F;&#x2F; onUploadProgress ÂÖÅËÆ∏‰∏∫‰∏ä‰º†Â§ÑÁêÜËøõÂ∫¶‰∫ã‰ª∂ onUploadProgress: function (progressEvent) { &#x2F;&#x2F; Do whatever you want with the native progress event }, &#x2F;&#x2F; onDownloadProgress ÂÖÅËÆ∏‰∏∫‰∏ãËΩΩÂ§ÑÁêÜËøõÂ∫¶‰∫ã‰ª∂ onDownloadProgress: function (progressEvent) { &#x2F;&#x2F; ÂØπÂéüÁîüËøõÂ∫¶‰∫ã‰ª∂ÁöÑÂ§ÑÁêÜ }, &#x2F;&#x2F; maxContentLength ÂÆö‰πâÂÖÅËÆ∏ÁöÑÂìçÂ∫îÂÜÖÂÆπÁöÑÊúÄÂ§ßÂ∞∫ÂØ∏ maxContentLength: 2000, &#x2F;&#x2F; validateStatus ÂÆö‰πâÂØπ‰∫éÁªôÂÆöÁöÑHTTP ÂìçÂ∫îÁä∂ÊÄÅÁ†ÅÊòØ resolve Êàñ reject promise „ÄÇÂ¶ÇÊûú validateStatus ËøîÂõû true (ÊàñËÄÖËÆæÁΩÆ‰∏∫ null Êàñ undefined)Ôºåpromise Â∞ÜË¢´ resolve; Âê¶ÂàôÔºåpromise Â∞ÜË¢´ rejecte validateStatus: function (status) { return status &gt;&#x3D; 200 &amp;&amp; status &lt; 300; &#x2F;&#x2F; default }, &#x2F;&#x2F; maxRedirects ÂÆö‰πâÂú® node.js ‰∏≠ follow ÁöÑÊúÄÂ§ßÈáçÂÆöÂêëÊï∞ÁõÆ &#x2F;&#x2F; Â¶ÇÊûúËÆæÁΩÆ‰∏∫0ÔºåÂ∞Ü‰∏ç‰ºö follow ‰ªª‰ΩïÈáçÂÆöÂêë maxRedirects: 5, &#x2F;&#x2F; default &#x2F;&#x2F; socketPath defines a UNIX Socket to be used in node.js. &#x2F;&#x2F; e.g. ‚Äò&#x2F;var&#x2F;run&#x2F;docker.sock‚Äô to send requests to the docker daemon. &#x2F;&#x2F; Only either socketPath or proxy can be specified. &#x2F;&#x2F; If both are specified, socketPath is used. socketPath: null, &#x2F;&#x2F; default &#x2F;&#x2F; httpAgent Âíå httpsAgent ÂàÜÂà´Âú® node.js ‰∏≠Áî®‰∫éÂÆö‰πâÂú®ÊâßË°å http Âíå https Êó∂‰ΩøÁî®ÁöÑËá™ÂÆö‰πâ‰ª£ÁêÜ„ÄÇÂÖÅËÆ∏ÂÉèËøôÊ†∑ÈÖçÁΩÆÈÄâÈ°πÔºö &#x2F;&#x2F; keepAlive ÈªòËÆ§Ê≤°ÊúâÂêØÁî® httpAgent: new http.Agent({ keepAlive: true }), httpsAgent: new https.Agent({ keepAlive: true }), &#x2F;&#x2F; ‚Äòproxy‚Äô ÂÆö‰πâ‰ª£ÁêÜÊúçÂä°Âô®ÁöÑ‰∏ªÊú∫ÂêçÁß∞ÂíåÁ´ØÂè£ &#x2F;&#x2F; auth Ë°®Á§∫ HTTP Âü∫Á°ÄÈ™åËØÅÂ∫îÂΩìÁî®‰∫éËøûÊé•‰ª£ÁêÜÔºåÂπ∂Êèê‰æõÂá≠ÊçÆ &#x2F;&#x2F; ËøôÂ∞Ü‰ºöËÆæÁΩÆ‰∏Ä‰∏™ Proxy-Authorization Â§¥ÔºåË¶ÜÂÜôÊéâÂ∑≤ÊúâÁöÑÈÄöËøá‰ΩøÁî® header ËÆæÁΩÆÁöÑËá™ÂÆö‰πâ Proxy-Authorization Â§¥„ÄÇ proxy: { host: ‚Äò127.0.0.1‚Äô, port: 9000, auth: { username: ‚Äòmikeymike‚Äô, password: ‚Äòrapunz3l‚Äô } }, &#x2F;&#x2F; cancelToken ÊåáÂÆöÁî®‰∫éÂèñÊ∂àËØ∑Ê±ÇÁöÑ cancel token &#x2F;&#x2F; ÔºàÊü•ÁúãÂêéÈù¢ÁöÑ Cancellation ËøôËäÇ‰∫ÜËß£Êõ¥Â§öÔºâ cancelToken: new CancelToken(function (cancel) { })}ÊèíÊõ≤ÔºöÊàë‰ª¨Âú®ÂÅöjwtÈ™åËØÅÊó∂ÔºåÈÄöÂ∏∏‰ºöÂú®requestÁöÑheader‰∏≠Ê∑ªÂä†‰∏Ä‰∏™tokenÔºåÊòØËøôÊ†∑ÂÜôÁöÑ: Javascriptconst token &#x3D; window.sessionStorage.getItem(‚Äútoken‚Äù);if (token) { config.headers.Authorization &#x3D; Bearer $&#123;token&#125;;}ÈÇ£‰πàËøô‰∏™tokenÁöÑËÆ§ËØÅÂíå‰∏äÊñáÈÖçÁΩÆ‰∏≠ÁöÑauthÊúâ‰ªÄ‰πàÂÖ≥ËÅîÂë¢Ôºü ÂéüÊù•auth ÊòØËøõË°åÁöÑhttpÁî®Êà∑È™åËØÅÔºåtokenÊòØËøõË°åÁöÑÊàë‰ª¨Ëá™Â∑±Á≥ªÁªüÁöÑËÆ§ËØÅÔºåÊòØ‰∏§Á†Å‰∫ã„ÄÇ auth ËÆ§ËØÅÂêéÁöÑheader‰ø°ÊÅØ‰∏ÄËà¨ÊòØËøôÊ†∑ÁöÑÔºöAuthorization: Basic dWVub3NlbjpwYXNzd29yZA&#x3D;&#x3D;È¶ñÈÉ®Â≠óÊÆµ Authorization ÊòØÁî®Êù•ÂëäÁü•ÊúçÂä°Âô®ÔºåÁî®Êà∑‰ª£ÁêÜÁöÑËÆ§ËØÅ‰ø°ÊÅØÔºàËØÅ ‰π¶ÂÄºÔºâ„ÄÇÈÄöÂ∏∏ÔºåÊÉ≥Ë¶ÅÈÄöËøáÊúçÂä°Âô®ËÆ§ËØÅÁöÑÁî®Êà∑‰ª£ÁêÜ‰ºöÂú®Êé•Êî∂Âà∞ËøîÂõûÁöÑ 401 Áä∂ÊÄÅÁ†ÅÂìçÂ∫îÂêéÔºåÊääÈ¶ñÈÉ®Â≠óÊÆµ Authorization Âä†ÂÖ•ËØ∑Ê±Ç‰∏≠„ÄÇÂÖ±Áî®ÁºìÂ≠ò Âú®Êé•Êî∂Âà∞Âê´Êúâ Authorization È¶ñÈÉ®Â≠óÊÆµÁöÑËØ∑Ê±ÇÊó∂ÁöÑÊìç‰ΩúÂ§ÑÁêÜ‰ºöÁï•ÊúâÂ∑Æ ÂºÇËÆ§ËØÅÊñπÊ°àÊòØBasic,authÁî®ÁöÑÊØîËæÉÂ∞ë„ÄÇ ÈÖçÁΩÆÈªòËÆ§ÂÄº‰Ω†ÂèØ‰ª•ÊåáÂÆöÂ∞ÜË¢´Áî®Âú®ÂêÑ‰∏™ËØ∑Ê±ÇÁöÑÈÖçÁΩÆÈªòËÆ§ÂÄº ÂÖ®Â±ÄÁöÑaxiosÈªòËÆ§ÂÄºJavascriptaxios.defaults.baseURL &#x3D; ‚Äòhttps://api.example.com‚Äò;axios.defaults.headers.common[‚ÄòAuthorization‚Äô] &#x3D; Auth_TOKEN;axios.defaults.head.post[‚ÄòContent-Type‚Äô] ‚Äòapplication&#x2F;x-wwww-form-url‚Äô;Ëá™ÂÆö‰πâÂÆû‰æãÈªòËÆ§ÂÄºÊúâ‰∏§ÁßçÊñπÂºè Javascript &#x2F;&#x2F;1.ÂΩì‰Ω†ÂàõÂª∫ÂÆû‰æãÁöÑÊó∂ÂÄôÔºåÂ∞±Âú®ÈÖçÁΩÆconfig‰∏≠ÂÜôÊòéconst instance &#x3D; axios.create({ baseURL: ‚Äòhttps://api.example.com‚Äò}) &#x2F;&#x2F;2. Âú®ÂàõÂª∫ÂÆû‰æã‰πãÂêéÔºåÂÜçÂéª‰øÆÊîπinstance.defaults.headers.common[‚ÄòAuthrization‚Äô] &#x3D; AUTH_TOKEN;ÈÖçÁΩÆÁöÑ‰ºòÂÖàÈ°∫Â∫èËØ∑Ê±ÇÈÖçÁΩÆ &gt; ÂÆû‰æãÈÖçÁΩÆ &gt; ÈªòËÆ§ÈÖçÁΩÆ Êã¶Êà™Âô®Âú®ËØ∑Ê±ÇÊàñÂìçÂ∫îË¢´thenÊàñcatchÂ§ÑÁêÜÂâçÊã¶Êà™ÂÆÉ‰ª¨„ÄÇ Javascript&#x2F;&#x2F; Ê∑ªÂä†ËØ∑Ê±ÇÊã¶Êà™Âô® axios.interceptors.request.use(function (config) { &#x2F;&#x2F; Âú®ÂèëÈÄÅËØ∑Ê±Ç‰πãÂâçÂÅö‰∫õ‰ªÄ‰πà return config;}, function (error){ &#x2F;&#x2F;ÂØπËØ∑Ê±ÇÈîôËØØÂÅö‰∫õ‰ªÄ‰πà return Promise.reeject(error)}) &#x2F;&#x2F; Ê∑ªÂä†ÂìçÂ∫îÊã¶Êà™Âô®axios.interceptors.response.use(function (response){ &#x2F;&#x2F; ÂØπÂìçÂ∫îÊï∞ÊçÆÂÅöÁÇπ‰ªÄ‰πà return response;}, function (error){ &#x2F;&#x2F;ÂØπÂìçÂ∫îÈîôËØØÂÅöÁÇπ‰ªÄ‰πà return Promise.reject(error)})Â¶ÇÊûú‰Ω†ÊÉ≥Âú®Á®çÂêéÁßªÈô§Êã¶Êà™Âô®ÔºåÂèØ‰ª•ËøôÊ†∑Ôºö Javascript const myInterceptor &#x3D; axios.interceptors.request.use(function () {&#x2F;**&#x2F;})axios.interceptors.request.eject(myInterceptor);ÂèØ‰ª•‰∏∫Ëá™ÂÆö‰πâaxiosÂÆû‰æãÊ∑ªÂä†Êã¶Êà™Âô® Javascriptconst instance &#x3D; axios.create();instance.interceptors.request.use(function(){&#x2F;**&#x2F;})ÈîôËØØÂ§ÑÁêÜJavascriptaxios.get(‚Äò&#x2F;user&#x2F;12345‚Äô) .catch(function (error) { if (error.response) { &#x2F;&#x2F; The request was made and the server responded with a status code &#x2F;&#x2F; that falls out of the range of 2xx console.log(error.response.data); console.log(error.response.status); console.log(error.response.headers); } else if (error.request) { &#x2F;&#x2F; The request was made but no response was received &#x2F;&#x2F; error.request is an instance of XMLHttpRequest in the browser and an instance of &#x2F;&#x2F; http.ClientRequest in node.js console.log(error.request); } else { &#x2F;&#x2F; Something happened in setting up the request that triggered an Error console.log(‚ÄòError‚Äô, error.message); } console.log(error.config); });ÂèØ‰ª•‰ΩøÁî®validateStatusÈÖçÁΩÆÈÄâÈ°πÂÆö‰πâ‰∏Ä‰∏™Ëá™ÂÆö‰πâHTTPÁä∂ÊÄÅÁ†ÅÁöÑÈîôËØØËåÉÂõ¥„ÄÇ Javascriptaxios.get(‚Äò&#x2F;user&#x2F;12345‚Äô, { validateStatus: function (status) { return status &lt; 500 }})ÂèñÊ∂à‰ΩøÁî®cancel tokenÂèñÊ∂àËØ∑Ê±Ç AxiosÁöÑcancel token APIÂü∫‰∫écancelable promises proposal,ÂÆÉËøòÂ§Ñ‰∫éÁ¨¨‰∏ÄÈò∂ÊÆµ„ÄÇ ÂèØ‰ª•‰ΩøÁî®CancelToken.sourceÂ∑•ÂéÇÊñπÊ≥ïÂàõÂª∫cancel tokenÔºåÂÉèËøôÊ†∑Ôºö Javascriptconst CancelToken &#x3D; axios.CancelToken;const source &#x3D; CancelToken.source(); axios.get(‚Äò&#x2F;user&#x2F;12345‚Äô, { cancelToken: source.token}).catch(function(){ if(axios.isCancel(thrown)) { console.log(‚ÄòRequest cancled‚Äô, thrown.message); }else{ &#x2F;&#x2F;Â§ÑÁêÜÈîôËØØ }}) axios.post(‚Äò&#x2F;user&#x2F;12345‚Äô, { name: ‚Äònew name‚Äô}, { cancelToken: source.token}) &#x2F;&#x2F; ÂèñÊ∂àËØ∑Ê±ÇÔºàmessage ÂèÇÊï∞ÊòØÂèØÈÄâÁöÑÔºâsource.cancel(‚ÄòOperation canceled by the user.‚Äô);ËøòÂèØ‰ª•ÈÄöËøá‰º†ÈÄí‰∏Ä‰∏™ executor ÂáΩÊï∞Âà∞ CancelToken ÁöÑÊûÑÈÄ†ÂáΩÊï∞Êù•ÂàõÂª∫ cancel tokenÔºö Javascript const CancelToken &#x3D; axios.CancelToken;let cancel; axios.get(‚Äò&#x2F;user&#x2F;12345‚Äô, { cancelToken: new CancelToken(function executor(c) { &#x2F;&#x2F; executor ÂáΩÊï∞Êé•Êî∂‰∏Ä‰∏™ cancel ÂáΩÊï∞‰Ωú‰∏∫ÂèÇÊï∞ cancel &#x3D; c; })}); &#x2F;&#x2F; cancel the requestcancel();Ê≥®ÊÑè: ÂèØ‰ª•‰ΩøÁî®Âêå‰∏Ä‰∏™ cancel token ÂèñÊ∂àÂ§ö‰∏™ËØ∑Ê±Ç ‰ΩøÁî® application&#x2F;x-www-form-urlencoded formatÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåaxiosÂ∞ÜJavaScriptÂØπË±°Â∫èÂàóÂåñ‰∏∫JSON„ÄÇ Ë¶Å‰ª•application &#x2F; x-www-form-urlencodedÊ†ºÂºèÂèëÈÄÅÊï∞ÊçÆÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÈÄâÈ°π‰πã‰∏Ä„ÄÇÂú®ÊµèËßàÂô®ÂíåNode.js‰∏≠Ë¶ÅÊúâ‰∏çÂêåÁöÑÂ§ÑÁêÜÊñπÊ≥ï ÊµèËßàÂô®Âú®ÊµèËßàÂô®‰∏≠ÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®URLSearchParams APIÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö Javascriptconst params &#x3D; new URLSearchParams(); params.append(‚Äòparam1‚Äô,‚Äôvalue1‚Äô);params.append(‚Äòparam2‚Äô,‚Äôvalue2‚Äô); axios.post(‚Äò&#x2F;foo‚Äô, params);ËØ∑Ê≥®ÊÑèÔºåÊâÄÊúâÊµèËßàÂô®ÈÉΩ‰∏çÊîØÊåÅURLSearchParamsÔºàËØ∑ÂèÇÈòÖ caniuse.comÔºâpolyfill(Á°Æ‰øùÂ°´ÂÖÖÂÖ®Â±ÄÁéØÂ¢É) ÊàñËÄÖÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®qsÂ∫ìÁºñÁ†ÅÊï∞ÊçÆÔºö Javascriptconst qs &#x3D; require(‚Äòqs‚Äô);axios.post(‚Äò&#x2F;foo‚Äô, qs.stringify({‚Äòbar‚Äô: 123}));ÊàñËÄÖ‰ª•Âè¶‰∏ÄÁßçÊñπÂºèÔºàES6ÔºâÔºå Javascript import qs from ‚Äòqs‚Äô;const data &#x3D; { ‚Äòbar‚Äô: 123 };const options &#x3D; { method: ‚ÄòPOST‚Äô, headers: { ‚Äòcontent-type‚Äô: ‚Äòapplication&#x2F;x-www-form-urlencoded‚Äô }, data: qs.stringify(data), url,};axios(options);Node.jsÂú®node.js‰∏≠ÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®querystringÊ®°ÂùóÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö Javascriptconst querystring &#x3D; require(‚Äòquerystring‚Äô);axios.post(‚Äòhttp://something.com/‚Äò, querystring.stringify({ foo: ‚Äòbar‚Äô }));ÊÇ®‰πüÂèØ‰ª•‰ΩøÁî®qsÂ∫ì„ÄÇ Pomisesaxios‰æùËµñÂéüÁîüÁöÑES6 Promise ÂÆûÁé∞ËÄåË¢´ÊîØÊåÅÔºåÂ¶ÇÊûú‰Ω†ÁöÑÁéØÂ¢É‰∏çÊîØÊåÅES6 PromiseÂèØ‰ª•‰ΩøÁî®polyfill TypeScriptaxiosÂåÖÊã¨TypeScriptÂÆö‰πâ„ÄÇ Javascriptimport axios from ‚Äòaxios‚Äô;axios.get(‚Äò&#x2F;user?ID&#x3D;12345‚Äô)ËµûÊâ¨axios Ê∑±ÂèóAngularÊèê‰æõÁöÑ $httpÊúçÂä°ÁöÑÂêØÂèë„ÄÇÊúÄÁªàÔºåaxiosÊòØ‰∏∫‰∫ÜÂú®Angular‰πãÂ§ñ‰ΩøÁî®ËÄåÊèê‰æõÁã¨Á´ãÁöÑÁ±ª‰ºº$httpÊúçÂä°ÁöÑ„ÄÇ ÂçèËÆÆMIT","categories":[],"tags":[]},{"title":"GeneratorÂáΩÊï∞","slug":"GeneratorÂáΩÊï∞","date":"2020-03-14T16:00:00.000Z","updated":"2024-10-12T08:40:56.532Z","comments":true,"path":"2020/03/15/GeneratorÂáΩÊï∞/","permalink":"https://justsso1.github.io/2020/03/15/Generator%E5%87%BD%E6%95%B0/","excerpt":"","text":"GeneratorÂáΩÊï∞ÁÆÄ‰ªãGeneratorÂáΩÊï∞ÊòØES6Êèê‰æõÁöÑ‰∏ÄÁßçÂºÇÊ≠•Ëß£ÂÜ≥ÊñπÊ°àÔºåËØ≠Ê≥ïË°å‰∏∫‰∏é‰º†ÁªüÂáΩÊï∞ÂÆåÂÖ®‰∏çÂêå„ÄÇ‰ªéËØ≠Ê≥ï‰∏äËÆ≤ÔºåGeneratorÂáΩÊï∞ÊòØ‰∏Ä‰∏™Áä∂ÊÄÅÊú∫ÔºåÂ∞ÅË£Ö‰∫ÜÂ§ö‰∏™ÂÜÖÈÉ®Áä∂ÊÄÅ„ÄÇ‰ªéÂΩ¢Âºè‰∏äËÆ≤ÔºåGeneratorÂáΩÊï∞ÊòØ‰∏Ä‰∏™ÊôÆÈÄöÂáΩÊï∞Ôºå‰ΩÜÊòØÊúâ‰∏§‰∏™ÁâπÂæÅ„ÄÇ‰∏ÄÊòØÔºåfunctionÂÖ≥ÈîÆÂ≠ó‰∏éÂáΩÊï∞Âêç‰πãÈó¥Êúâ‰∏Ä‰∏™ÊòüÂè∑Ôºõ‰∫åÊòØÔºåÂáΩÊï∞‰ΩìÂÜÖÈÉ®‰ΩøÁî®yieldËØ≠Âè•ÔºåÂÆö‰πâ‰∏çÂêåÁöÑÂÜÖÈÉ®Áä∂ÊÄÅÊâßË°åGeneratorÂáΩÊï∞‰ºöËøîÂõû‰∏Ä‰∏™ÈÅçÂéÜÂô®ÂØπË±°ÔºåË∞ÉÁî®GeneratorÂáΩÊï∞ÂêéÔºåËØ•ÂáΩÊï∞Âπ∂‰∏çÊâßË°åÔºåËøîÂõûÁöÑ‰πü‰∏çÊòØÂáΩÊï∞ËøêË°åÁöÑÁªìÊûúÔºåËÄåÊòØ‰∏Ä‰∏™ÊåáÂêëÂÜÖÈÉ®Áä∂ÊÄÅÁöÑÊåáÈíàÂØπË±°Ôºå‰πüÂ∞±ÊòØÈÅçÂéÜÂô®ÂØπË±°ÔºàIterator ObjectÔºâ„ÄÇ Generator.prototype.throw()GeneratorÂáΩÊï∞ËøîÂõûÁöÑÈÅçÂéÜÂô®ÂØπË±°ÔºåÈÉΩÊúâ‰∏Ä‰∏™throwÊñπÊ≥ïÔºåÂèØ‰ª•Âú®ÂáΩÊï∞‰ΩìÂ§ñÊäõÂá∫ÈîôËØØÔºåÁÑ∂ÂêéÂú®GeneratorÂáΩÊï∞‰ΩìÂÜÖÊçïËé∑„ÄÇÊ≥®ÊÑèÔºå‰∏çË¶ÅÊ∑∑Ê∑ÜÈÅçÂéÜÂô®ÂØπË±°ÁöÑthrowÊñπÊ≥ïÂíåÂÖ®Â±ÄÁöÑthrowÂëΩ‰ª§„ÄÇÂÖ®Â±ÄÁöÑthrowÂëΩ‰ª§Âè™ËÉΩË¢´ÂáΩÊï∞‰ΩìÂ§ñÁöÑcatchËØ≠Âè•ÊçïËé∑„ÄÇ ËøôÁßçÂáΩÊï∞‰ΩìÂÜÖÊçïËé∑ÈîôËØØÁöÑÊú∫Âà∂ÔºåÂ§ßÂ§ßÊñπ‰æø‰∫ÜÂØπÈîôËØØÁöÑÂ§ÑÁêÜ„ÄÇÂ§ö‰∏™yieldËØ≠Âè•ÔºåÂèØ‰ª•Âè™Áî®‰∏Ä‰∏™ try‚Ä¶catch‰ª£Á†ÅÊù•ÊçïËé∑ÈîôËØØ„ÄÇÂ¶ÇÊûú‰ΩøÁî®ÂõûË∞ÉÂáΩÊï∞ÁöÑÂÜôÊ≥ïÔºåÊÉ≥Ë¶ÅÊçïËé∑Â§ö‰∏™ÈîôËØØÔºåÂ∞±‰∏çÂæó‰∏ç‰∏∫ÊØè‰∏™ÂáΩÊï∞ÂÜÖÈÉ®ÂÜô‰∏Ä‰∏™ÈîôËØØÂ§ÑÁêÜËØ≠Âè•ÔºåÁé∞Âú®Âè™Âú®GeneratorÂáΩÊï∞ÂÜÖÈÉ®ÂÜô‰∏ÄÊ¨°catchËØ≠Âè•Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ GeneratorÂáΩÊï∞‰ΩìÂ§ñÊäõÂá∫ÁöÑÈîôËØØÔºåÂèØ‰ª•Âú®ÂáΩÊï∞‰ΩìÂÜÖÊçïËé∑ÔºõÂèçËøáÊù•ÔºåGeneratorÂáΩÊï∞‰ΩìÂÜÖÊäõÂá∫ÁöÑÈîôËØØÔºå‰πüÂèØ‰ª•Ë¢´ÂáΩÊï∞‰ΩìÂ§ñÁöÑcatchÊçïËé∑„ÄÇ‰∏ÄÊó¶GeneratorÊâßË°åËøáÁ®ã‰∏≠ÊäõÂá∫ÈîôËØØÔºå‰∏îÊ≤°ÊúâË¢´ÂÜÖÈÉ®ÊçïËé∑ÔºåÂ∞±‰∏ç‰ºöÂÜçÊâßË°å‰∏ãÂéª‰∫Ü„ÄÇÂ¶ÇÊûúÊ≠§ÂêéËøòË∞ÉÁî®nextÊñπÊ≥ïÔºåÂ∞ÜËøîÂõû‰∏Ä‰∏™valueÂ±ûÊÄßÁ≠â‰∫éundefined„ÄÅdoneÂ±ûÊÄßÁ≠â‰∫étrueÁöÑÂØπË±°ÔºåÂç≥JavaScriptÂºïÊìéËÆ§‰∏∫Ëøô‰∏™GeneratorÂ∑≤ÁªèËøêË°åÁªìÊùü‰∫Ü„ÄÇ Generator.prototype.return()GeneratorÂáΩÊï∞ËøîÂõûÁöÑÈÅçÂéÜÂô®ÂØπË±°ÔºåËøòÊúâ‰∏Ä‰∏™returnÊñπÊ≥ïÔºåÂèØ‰ª•ËøîÂõûÁªôÂÆöÁöÑÂÄºÔºåÂπ∂‰∏îÁªàÁªìÈÅçÂéÜGeneratorÂáΩÊï∞„ÄÇ Javascriptfunction* gen() { yield 1; yield 2; yield 3;} var g &#x3D; gen(); g.next() &#x2F;&#x2F; { value: 1, done: false }g.return(‚Äòfoo‚Äô) &#x2F;&#x2F; { value: ‚Äúfoo‚Äù, done: true }g.next() &#x2F;&#x2F; { value: undefined, done: true }‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÈÅçÂéÜÂô®ÂØπË±°gË∞ÉÁî®returnÊñπÊ≥ïÂêéÔºåËøîÂõûÂÄºÁöÑvalueÂ±ûÊÄßÂ∞±ÊòØreturnÊñπÊ≥ïÁöÑÂèÇÊï∞foo„ÄÇÂπ∂‰∏îÔºåGeneratorÂáΩÊï∞ÁöÑÈÅçÂéÜÂ∞±ÁªàÊ≠¢‰∫ÜÔºåËøîÂõûÂÄºÁöÑdoneÂ±ûÊÄß‰∏∫trueÔºå‰ª•ÂêéÂÜçË∞ÉÁî®nextÊñπÊ≥ïÔºådoneÂ±ûÊÄßÊÄªÊòØËøîÂõûtrue„ÄÇ Â¶ÇÊûúreturnÊñπÊ≥ïË∞ÉÁî®Êó∂Ôºå‰∏çÊèê‰æõÂèÇÊï∞ÔºåÂàôËøîÂõûÂÄºÁöÑvalueÂ±ûÊÄß‰∏∫undefined„ÄÇ Â¶ÇÊûúGeneratorÂáΩÊï∞ÂÜÖÈÉ®Êúâtry‚Ä¶finally‰ª£Á†ÅÂùóÔºåÈÇ£‰πàreturnÊñπÊ≥ï‰ºöÊé®ËøüÂà∞finally‰ª£Á†ÅÂùóÊâßË°åÂÆåÂÜçÊâßË°å„ÄÇ yield* ËØ≠Âè•Âú®‰∏Ä‰∏™GeneratorÂáΩÊï∞ÈáåÊâßË°åÂè¶‰∏Ä‰∏™GeneratorÂáΩÊï∞yield** ÂêéÈù¢ÁöÑGeneratorÂáΩÊï∞ÔºàÊ≤°ÊúâreturnËØ≠Âè•Êó∂ÔºâÔºåÁ≠âÂêå‰∫éÂú®GeneratorÂáΩÊï∞ÂÜÖÈÉ®ÔºåÈÉ®ÁΩ≤‰∏Ä‰∏™for‚Ä¶ofÂæ™ÁéØ„ÄÇÂÖ∂ÂÆûÔºåyield*ÂêéÈù¢ÁöÑGeneratorÂáΩÊï∞ÔºàÊ≤°ÊúâreturnËØ≠Âè•Êó∂ÔºâÔºå‰∏çËøáÊòØfor‚Ä¶ofÁöÑ‰∏ÄÁßçÁÆÄÂÜôÂΩ¢ÂºèÔºåÂÆåÂÖ®ÂèØ‰ª•Áî®ÂêéËÄÖÊõø‰ª£ÂâçËÄÖ„ÄÇÂèç‰πãÔºåÂàôÈúÄË¶ÅÁî®var value = yield iteratorÁöÑÂΩ¢ÂºèËé∑ÂèñreturnËØ≠Âè•ÁöÑÂÄº„ÄÇ Â¶ÇÊûúyieldÂêéÈù¢Ë∑üÁùÄ‰∏Ä‰∏™Êï∞ÁªÑÔºåÁî±‰∫éÊï∞ÁªÑÂéüÁîüÊîØÊåÅÈÅçÂéÜÂô®ÔºåÂõ†Ê≠§Â∞±‰ºöÈÅçÂéÜÊï∞ÁªÑÊàêÂëò„ÄÇ ÂÆûÈôÖ‰∏äÔºå‰ªª‰ΩïÊï∞ÊçÆÁªìÊûÑÂè™Ë¶ÅÊúâIteratorÊé•Âè£ÔºåÂ∞±ÂèØ‰ª•Ë¢´yieldÈÅçÂéÜ„ÄÇ ‰ªª‰ΩïÊï∞ÊçÆÁªìÊûÑÔºåÂè™Ë¶ÅÊúâIteratorÊé•Âè£ÔºåÂ∞±ÂèØ‰ª•Ë¢´ yield*ÈÅçÂéÜ„ÄÇ Â¶ÇÊûúË¢´‰ª£ÁêÜÁöÑGeneratorÊúâreturnËØ≠Âè•ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•Âêë‰ª£ÁêÜÂÆÉÁöÑGeneratorÂáΩÊï∞ËøîÂõûÊï∞ÊçÆ„ÄÇ yield*ÂëΩ‰ª§ÂèØ‰ª•ÂæàÊñπ‰æøÁöÑÂèñÂá∫ÂµåÂ•óÊï∞ÁªÑÁöÑÊàêÂëò„ÄÇ Javascriptfunction* iterTree(tree) { if (Array.isArray(tree)) { for(let i&#x3D;0; i &lt; tree.length; i++) { yield* iterTree(tree[i]); } } else { yield tree; }} const tree &#x3D; [ ‚Äòa‚Äô, [‚Äòb‚Äô, ‚Äòc‚Äô], [‚Äòd‚Äô, ‚Äòe‚Äô] ]; for(let x of iterTree(tree)) { console.log(x);}‰ΩøÁî®yield* ÂëΩ‰ª§ÈÅçÂéÜÂÆåÂÖ®‰∫åÂèâÊ†ë„ÄÇ Javascript next ÊñπÊ≥ïÁöÑÂèÇÊï∞yieldËØ≠Âè•Êú¨Ë∫´Ê≤°ÊúâËøîÂõûÂÄºÔºåÊàñËÄÖËØ¥ÊÄªÊòØËøîÂõûundeefined.nextÊñπÊ≥ïÂèØ‰ª•Â∏¶‰∏Ä‰∏™ÂèÇÊï∞ÔºåËØ•ÂèÇÊï∞Â∞±‰ºöË¢´ÂΩì‰Ωú‰∏ä‰∏Ä‰∏™yieldËØ≠Âè•ÁöÑËøîÂõûÂÄº„ÄÇ Javascriptfunction *f() { for (var i &#x3D; 0; true, i++){ var rest &#x3D; yield i; if(rest){ i &#x3D; -1; } }} var g &#x3D; f();g.next() &#x2F;&#x2F;{value: 0, done: false}g.next() &#x2F;&#x2F;{value: 1, done: false}g.next(true) &#x2F;&#x2F;{value: 0, doneL false}‰∏äÈù¢‰ª£Á†ÅÂÖàÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂèØ‰ª•Êó†ÈôêËøêË°åÁöÑGeneratorÂáΩÊï∞fÔºåÂ¶ÇÊûúnextÊñπÊ≥ïÊ≤°ÊúâÂèÇÊï∞ÔºåÊØèÊ¨°ËøêË°åÂà∞yieldËØ≠Âè•ÔºåÂèòÈáèresetÁöÑÂÄºÊÄªÊòØundefined„ÄÇÂΩìnextÊñπÊ≥ïÂ∏¶‰∏Ä‰∏™ÂèÇÊï∞trueÊó∂ÔºåÂΩìÂâçÁöÑÂèòÈáèresetÂ∞±Ë¢´ÈáçÁΩÆ‰∏∫Ëøô‰∏™ÂèÇÊï∞ÔºàÂç≥trueÔºâÔºåÂõ†Ê≠§i‰ºöÁ≠â‰∫é-1Ôºå‰∏ã‰∏ÄËΩÆÂæ™ÁéØÂ∞±‰ºö‰ªé-1ÂºÄÂßãÈÄíÂ¢û„ÄÇ Ëøô‰∏™ÂäüËÉΩÊúâÂæàÈáçË¶ÅÁöÑËØ≠Ê≥ïÊÑè‰πâ„ÄÇGeneratorÂáΩÊï∞‰ªéÊöÇÂÅúÁä∂ÊÄÅÂà∞ÊÅ¢Â§çËøêË°åÔºåÂÆÉÁöÑ‰∏ä‰∏ãÊñáÁä∂ÊÄÅÔºàcontextÔºâÊòØ‰∏çÂèòÁöÑ„ÄÇÈÄöËøánextÊñπÊ≥ïÁöÑÂèÇÊï∞ÔºåÂ∞±ÊúâÂäûÊ≥ïÂú®GeneratorÂáΩÊï∞ÂºÄÂßãËøêË°å‰πãÂêéÔºåÁªßÁª≠ÂêëÂáΩÊï∞‰ΩìÂÜÖÈÉ®Ê≥®ÂÖ•ÂÄº„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂèØ‰ª•Âú®GeneratorÂáΩÊï∞ËøêË°åÁöÑ‰∏çÂêåÈò∂ÊÆµÔºå‰ªéÂ§ñÈÉ®ÂêëÂÜÖÈÉ®Ê≥®ÂÖ•‰∏çÂêåÁöÑÂÄºÔºå‰ªéËÄåË∞ÉÊï¥ÂáΩÊï∞Ë°å‰∏∫„ÄÇ ‰Ωú‰∏∫ÂØπË±°Â±ûÊÄßÁöÑGeneratorÂáΩÊï∞Â¶ÇÊûú‰∏Ä‰∏™ÂØπË±°ÁöÑÂ±ûÊÄßÊòØGeneratorÂáΩÊï∞ÔºåÂèØ‰ª•ÁÆÄÂÜôÊàê‰∏ãÈù¢ÁöÑÂΩ¢Âºè„ÄÇ Javascript let obj &#x3D; { myGeneratorMethod() {&#x2F;&#x2F;¬∑¬∑¬∑ }}; &#x2F;&#x2F;Á≠â‰ª∑let obj &#x3D; { myGeneratorMethod: function* () { &#x2F;&#x2F; ¬∑¬∑¬∑ }};GeneratorÂáΩÊï∞ËøîÂõûÁöÑÊÄªÊòØÈÅçÂéÜÂô®ÂØπË±°ÔºåËÄå‰∏çÊòØthisÂØπË±°„ÄÇËøô‰∏™ÈÅçÂéÜÂô®ÊòØGeneratorÂáΩÊï∞ÁöÑÂÆû‰æãÔºå‰πüÁªßÊâø‰∫ÜGeneratorÂáΩÊï∞ÁöÑprototypeÂØπË±°‰∏äÁöÑÊñπÊ≥ï„ÄÇ GeneratorÂáΩÊï∞‰∏çËÉΩË∑ünewÂëΩ‰ª§‰∏ÄËµ∑‰ΩøÁî®Ôºå‰ºöÊä•Èîô„ÄÇ Â∫îÁî®Âú∫ÊôØÂºÇÊ≠•Êìç‰ΩúÁöÑÂêåÊ≠•ÂåñË°®ËææÊéßÂà∂ÊµÅÁÆ°ÁêÜÈÉ®ÁΩ≤IteratorÊé•Âè£ÔºåÊú¨Ë¥®‰∏äÊòØ‰∏ÄÊ†∑ÁöÑÔºåÈÉΩÊòØÈÅçÂéÜÂô®Áúã‰ΩúÊï∞ÊçÆÁªìÊûÑÔºåÁ°ÆÂàáÁöÑËØ¥ÔºåÁúã‰ΩúÊï∞ÁªÑÁªìÊûÑÂõ†‰∏∫GeneratorÂáΩÊï∞ÂèØ‰ª•ËøîÂõû‰∏ÄÁ≥ªÂàóÁöÑÂÄºÔºåËøôÊÑèÂë≥ÁùÄÂÆÉÂèØ‰ª•ÂØπ‰ªªÊÑèË°®ËææÂºèÔºåÊèê‰æõÁ±ª‰ººÊï∞ÁªÑÁöÑÊé•Âè£„ÄÇJavascriptfunction *doStuff() { yield fs.readFile.bind(null, ‚Äòhello.txt‚Äô); yield fs.readFile.bind(null, ‚Äòworld.txt‚Äô); yield fs.readFile.bind(null, ‚Äòand-such.txt‚Äô);}‰∏äÈù¢‰ª£Á†ÅÂ∞±ÊòØ‰æùÊ¨°ËøîÂõû‰∏â‰∏™ÂáΩÊï∞Ôºå‰ΩÜÊòØÁî±‰∫é‰ΩøÁî®‰∫ÜGeneratorÂáΩÊï∞ÔºåÂØºËá¥ÂèØ‰ª•ÂÉèÂ§ÑÁêÜÊï∞ÁªÑÈÇ£Ê†∑ÔºåÂ§ÑÁêÜËøô‰∏â‰∏™ËøîÂõûÁöÑÂáΩÊï∞„ÄÇ Javascript for (task of doStuff()) { &#x2F;&#x2F; taskÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂèØ‰ª•ÂÉèÂõûË∞ÉÂáΩÊï∞ÈÇ£Ê†∑‰ΩøÁî®ÂÆÉ}ÂÆûÈôÖ‰∏äÔºåÂ¶ÇÊûúÁî®ES5Ë°®ËææÔºåÂÆåÂÖ®ÂèØ‰ª•Áî®Êï∞ÁªÑÊ®°ÊãüGeneratorÁöÑËøôÁßçÁî®Ê≥ï„ÄÇ Javascriptfunction doStuff() { return [ fs.readFile.bind(null, ‚Äòhello.txt‚Äô), fs.readFile.bind(null, ‚Äòworld.txt‚Äô), fs.readFile.bind(null, ‚Äòand-such.txt‚Äô) ];}‰∏äÈù¢ÁöÑÂáΩÊï∞ÔºåÂèØ‰ª•Áî®‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑfor‚Ä¶ofÂæ™ÁéØÂ§ÑÁêÜÔºÅ‰∏§Áõ∏‰∏ÄÊØîËæÉÔºåÂ∞±‰∏çÈöæÁúãÂá∫Generator‰ΩøÂæóÊï∞ÊçÆÊàñËÄÖÊìç‰ΩúÔºåÂÖ∑Â§á‰∫ÜÁ±ª‰ººÊï∞ÁªÑÁöÑÊé•Âè£„ÄÇ","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"IteratorÂíåfor...ofÂæ™ÁéØ","slug":"IteratorÂíåfor...ofÂæ™ÁéØ","date":"2020-03-11T16:00:00.000Z","updated":"2024-10-16T04:06:52.505Z","comments":true,"path":"2020/03/12/IteratorÂíåfor...ofÂæ™ÁéØ/","permalink":"https://justsso1.github.io/2020/03/12/Iterator%E5%92%8Cfor...of%E5%BE%AA%E7%8E%AF/","excerpt":"","text":"IteratorÂíåfor‚Ä¶ofÂæ™ÁéØIteratorÂíåforÔºàÈÅçÂéÜÂô®ÔºâÊ¶ÇÂøµ Âá∫Áé∞ÁöÑÂéüÂõ†ES6 ‰∏≠Êúâ4ÁßçË°®Á§∫‚ÄùÈõÜÂêà‚ÄùÁöÑÊï∞ÊçÆÁªìÊûÑÔºå‰∏ªË¶ÅÊòØÊï∞ÁªÑArray ÂØπË±°Object Set MapÔºåÁî®Êà∑ÂèØ‰ª•ÂÆö‰πâËá™Â∑±ÂæóÊï∞ÊçÆÁªìÊûÑÔºåÊØîÂ¶ÇSetÈáåÂµåÂ•óMap,MapÈáåÂµåÂ•óObjectÔºåËøôÊ†∑Â∞±ÈúÄË¶Å‰∏ÄÁßçÁªü‰∏ÄÁöÑÊé•Âè£Êú∫Âà∂ÔºåÊù•Â§ÑÁêÜÊâÄÊúâ‰∏çÂêåÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÈÅçÂéÜÂô®ÔºàIteratorÔºâÂ∞±ÊòØËøôÊ†∑‰∏ÄÁßçÊú∫Âà∂ÔºåÂÆÉÊòØ‰∏ÄÁßçÊé•Âè£Ôºå‰∏∫ÂêÑÁßç‰∏çÂêåÁöÑÊï∞ÊçÆÁªìÊûÑÊèê‰æõÁªü‰∏ÄÁöÑËÆøÈóÆÊú∫Âà∂„ÄÇ‰ªª‰ΩïÊï∞ÊçÆÁªìÊûÑÂè™Ë¶ÅÈÉ®ÁΩ≤IteratorÊé•Âè£ÔºåÂ∞±ÂèØ‰ª•ÂÆåÊàêÈÅçÂéÜÊìç‰ΩúÔºàÂç≥‰æùÊ¨°Â§ÑÁêÜËØ•Êï∞ÊçÆÁªìÊûÑÁöÑÊâÄÊúâÊàêÂëòÔºâ„ÄÇ 2.IteratorÁöÑ‰ΩúÁî®‰∏∫ÂêÑÁßçÊï∞ÊçÆÁªìÊûÑÔºåÊèê‰æõ‰∏Ä‰∏™Áªü‰∏ÄÁöÑ„ÄÅÁÆÄ‰æøÁöÑËÆøÈóÆÊé•Âè£‰ΩøÂæóÊï∞ÊçÆÁªìÊûÑÁöÑÊàêÂëòËÉΩÂ§üÊåâÊüêÁßçÊ¨°Â∫èÊéíÂàóES6ÂàõÈÄ†‰∫Ü‰∏ÄÁßçÊñ∞ÁöÑÈÅçÂéÜÂëΩ‰ª§for‚Ä¶ofÂæ™ÁéØÔºåIteratorÊé•Âè£‰∏ªË¶Å‰æõfor‚Ä¶ofÊ∂àË¥πÂéüÁîüÂÖ∑Â§áIteratorÊé•Âè£ÁöÑÊï∞ÊçÆÁªìÊûÑÂú®ES6‰∏≠ÔºåÊúâ‰∏âÁ±ªÊï∞ÊçÆÁªìÊûÑÂéüÁîüÂÖ∑Â§áIteratorÊé•Âè£ÔºöÊï∞ÁªÑ„ÄÅÊüê‰∫õÁ±ª‰ººÊï∞ÁªÑÁöÑÂØπË±°„ÄÅSetÂíåMapÁªìÊûÑ„ÄÇÂèØ‰ª•Ë¢´for‚Ä¶ofÂæ™ÁéØÈÅçÂéÜÔºåËøô‰∫õÊï∞ÊçÆÁªìÊûÑÂéüÁîüÂ∞±ÈÉ®ÁΩ≤‰∫ÜSymbol iteratorÂ±ûÊÄßÔºåÂá°ÊòØÈÉ®ÁΩ≤‰∫ÜSymbol iteratorÂ±ûÊÄßÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ∞±Áß∞‰∏∫ÈÉ®ÁΩ≤‰∫ÜÈÅçÂéÜÂô®Êé•Âè£ÔºåË∞ÉÁî®Ëøô‰∏™Êé•Âè£Â∞±‰ºöËøîÂõû‰∏Ä‰∏™ÈÅçÂéÜÂô®ÂØπË±°„ÄÇ Êï∞ÊçÆÁªìÊûÑÁöÑÈªòËÆ§IteratorÊé•Âè£ÈÅçÂéÜÂô®ÁöÑÊ†πÊú¨ÁâπÂæÅ‰∏äÊòØÂê´Êúâ next()ÊñπÊ≥ï„ÄÇ ÂΩì‰ΩøÁî®for‚Ä¶ofÂæ™ÁéØÈÅçÂéÜÊüêÁßçÊï∞ÊçÆÁªìÊûÑÊó∂ÔºåËØ•Âæ™ÁéØ‰ºöËá™Âä®ÂéªÂØªÊâæIteratorÊé•Âè£„ÄÇ ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÂè™Ë¶ÅÈÉ®ÁΩ≤‰∫ÜIteratorÊé•Âè£ÔºåÊàë‰ª¨Â∞±Áß∞ËøôÁßçÊï∞ÊçÆÁªìÊûÑÊòØ‚ÄùÂèØÈÅçÂéÜÁöÑ‚ÄúÔºàiterableÔºâ„ÄÇ Javascriptlet arr &#x3D; [‚Äòa‚Äô, ‚Äòb‚Äô, ‚Äòc‚Äô];let iter &#x3D; arrSymbol.iterator; iter.next() &#x2F;&#x2F; { value: ‚Äòa‚Äô, done: false }iter.next() &#x2F;&#x2F; { value: ‚Äòb‚Äô, done: false }iter.next() &#x2F;&#x2F; { value: ‚Äòc‚Äô, done: false }iter.next() &#x2F;&#x2F; { value: undefined, done: true }‰∏äÈù¢ÊèêÂà∞ÔºåÂéüÁîüÂ∞±ÈÉ®ÁΩ≤IteratorÊé•Âè£ÁöÑÊï∞ÊçÆÁªìÊûÑÊúâ‰∏âÁ±ªÔºåÂØπ‰∫éËøô‰∏âÁ±ªÊï∞ÊçÆÁªìÊûÑÔºå‰∏çÁî®Ëá™Â∑±ÂÜôÈÅçÂéÜÂô®ÁîüÊàêÂáΩÊï∞Ôºåfor‚Ä¶ofÂæ™ÁéØ‰ºöËá™Âä®ÈÅçÂéÜÂÆÉ‰ª¨ÔºåÊâßË°åÈÅçÂéÜÂô®ÂØπË±°ÁöÑnext()ÊñπÊ≥ï Èô§Ê≠§‰πãÂ§ñÔºåÂÖ∂‰ªñÊï∞ÊçÆÁªìÊûÑÔºà‰∏ªË¶ÅÊòØÂØπË±°ÔºâÁöÑIteratorÊé•Âè£ÔºåÈÉΩÈúÄË¶ÅËá™Â∑±Âú®Symbol.iteratorÂ±ûÊÄß‰∏äÈù¢ÈÉ®ÁΩ≤ÔºåËøôÊ†∑Êâç‰ºöË¢´for‚Ä¶ofÂæ™ÁéØÈÅçÂéÜ„ÄÇ ÂØπË±°ÔºàObjectÔºâ‰πãÊâÄ‰ª•Ê≤°ÊúâÈªòËÆ§ÈÉ®ÁΩ≤IteratorÊé•Âè£ÔºåÊòØÂõ†‰∏∫ÂØπË±°ÁöÑÂì™‰∏™Â±ûÊÄßÂÖàÈÅçÂéÜÔºåÂì™‰∏™Â±ûÊÄßÂêéÈÅçÂéÜÊòØ‰∏çÁ°ÆÂÆöÁöÑÔºåÈúÄË¶ÅÂºÄÂèëËÄÖÊâãÂä®ÊåáÂÆö„ÄÇÊú¨Ë¥®‰∏äÔºåÈÅçÂéÜÂô®ÊòØ‰∏ÄÁßçÁ∫øÊÄßÂ§ÑÁêÜÔºåÂØπ‰∫é‰ªª‰ΩïÈùûÁ∫øÊÄßÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÈÉ®ÁΩ≤ÈÅçÂéÜÂô®Êé•Âè£ÔºåÂ∞±Á≠â‰∫éÈÉ®ÁΩ≤‰∏ÄÁßçÁ∫øÊÄßËΩ¨Êç¢„ÄÇ‰∏çËøáÔºå‰∏•Ê†ºÂú∞ËØ¥ÔºåÂØπË±°ÈÉ®ÁΩ≤ÈÅçÂéÜÂô®Êé•Âè£Âπ∂‰∏çÊòØÂæàÂøÖË¶ÅÔºåÂõ†‰∏∫ËøôÊó∂ÂØπË±°ÂÆûÈôÖ‰∏äË¢´ÂΩì‰ΩúMapÁªìÊûÑ‰ΩøÁî®ÔºåES5Ê≤°ÊúâMapÁªìÊûÑÔºåËÄåES6ÂéüÁîüÊèê‰æõ‰∫Ü„ÄÇ ‰∏Ä‰∏™ÂØπË±°Â¶ÇÊûúË¶ÅÊúâÂèØË¢´for‚Ä¶ofÂæ™ÁéØË∞ÉÁî®ÁöÑIteratorÊé•Âè£ÔºåÂ∞±ÂøÖÈ°ªÂú®Symbol.iteratorÁöÑÂ±ûÊÄß‰∏äÈÉ®ÁΩ≤ÈÅçÂéÜÂô®ÁîüÊàêÊñπÊ≥ïÔºàÂéüÂûãÈìæ‰∏äÁöÑÂØπË±°ÂÖ∑ÊúâËØ•ÊñπÊ≥ï‰πüÂèØÔºâ„ÄÇ ÈÄöËøáÈÅçÂéÜÂô®ÂÆûÁé∞ÊåáÈíàÁªìÊûÑÁöÑ‰æãÂ≠êÔºö Javascriptfunction Object(value){ this.value&#x3D; value; this.next &#x3D; null;}Obj.prototype[Symbol.iterator] &#x3D; function() { var iterator &#x3D; { next: next }; var current &#x3D; this; function next() { if (current) { var value &#x3D; current.value; current &#x3D; current.next; return { done: false, value: value }; } else { return { done: true }; } } return iterator;} var one &#x3D; new Obj(1);var two &#x3D; new Obj(2);var three &#x3D; new Obj(3); one.next &#x3D; two;two.next &#x3D; three; for (var i of one){ console.log(i);}&#x2F;&#x2F; 1&#x2F;&#x2F; 2&#x2F;&#x2F; 3Ë∞ÉÁî®IteratorÊé•Âè£ÁöÑÂú∫ÂêàÊúâ‰∏Ä‰∫õÂú∫Âêà‰ºöÈªòËÆ§Ë∞ÉÁî®IteratorÊé•Âè£ÔºàÂç≥Symbol.iteratorÊñπÊ≥ïÔºâÔºåÈô§‰∫Ü‰∏ãÊñá‰ºö‰ªãÁªçÁöÑfor ‚Ä¶ ofÂæ™ÁéØÔºåËøòÊúâÂá†‰∏™Âà´ÁöÑÂú∫Âêà„ÄÇ Ëß£ÊûÑËµãÂÄº[first,‚Ä¶ rest] Êâ©Â±ïËøêÁÆóÁ¨¶‚Ä¶ yieldyield* ÂêéÈù¢Ë∑üÁöÑÊòØ‰∏Ä‰∏™ÂèØÈÅçÂéÜÁöÑÁªìÊûÑÔºåÂÆÉ‰ºöË∞ÉÁî®ËØ•ÁªìÊûÑÁöÑÈÅçÂéÜÂô®Êé•Âè£„ÄÇ Javascript let generator &#x3D; function* () { yield 1; yield* [2,3,4]; yield 5;}; var iterator &#x3D; generator(); iterator.next() &#x2F;&#x2F; { value: 1, done: false }iterator.next() &#x2F;&#x2F; { value: 2, done: false }iterator.next() &#x2F;&#x2F; { value: 3, done: false }iterator.next() &#x2F;&#x2F; { value: 4, done: false }iterator.next() &#x2F;&#x2F; { value: 5, done: false }iterator.next() &#x2F;&#x2F; { value: undefined, done: true }4. ÂÖ∂‰ªñÂú∫Âêà Áî±‰∫éÊï∞ÁªÑÁöÑÈÅçÂéÜ‰ºöË∞ÉÁî®ÈÅçÂéÜÂô®Êé•Âè£ÔºåÊâÄ‰ª•‰ªª‰ΩïÊé•ÂèóÊï∞ÁªÑ‰Ωú‰∏∫ÂèÇÊï∞ÁöÑÂú∫ÂêàÔºåÂÖ∂ÂÆûÈÉΩË∞ÉÁî®‰∫ÜÈÅçÂéÜÂô®Êé•Âè£„ÄÇ for‚Ä¶ofArray.from()Map() Set() WeakMap() WeakSet(),ÔºàÊØîÂ¶Çnew Map([[‚Äòa‚Äô,1],[‚Äòb‚Äô,2]])ÔºâPromise.all()Promise.race()Â≠óÁ¨¶‰∏≤ÁöÑIteratorÊé•Âè£IteratorÊé•Âè£‰∏éGeneratorÂáΩÊï∞Symbol.IteratorÊñπÊ≥ïÁöÑÊúÄÁÆÄÂçïÂÆûÁé∞ÔºåËøòÊòØ‰ΩøÁî®‰∏Ä‰∏ãGeneratorÂáΩÊï∞ Set MapÁªìÊûÑMapÈÅçÂéÜËøîÂõûÁöÑÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºå0‰ΩçÊòØÈîÆÂêçÔºå1‰ΩçÊòØÈîÆÂÄº ‰∏éÂÖ∂‰ªñÈÅçÂéÜËØ≠Ê≥ïÁöÑÊØîËæÉ‰ª•Êï∞ÁªÑ‰∏∫‰æãÔºåJavaScriptÊèê‰æõÂ§öÁßçÈÅçÂéÜËØ≠Ê≥ï„ÄÇÊúÄÂéüÂßãÁöÑÂÜôÊ≥ïÂ∞±ÊòØforÂæ™ÁéØ„ÄÇ Javascript for (var index &#x3D; 0; index &lt; myArray.length; index++) { console.log(myArray[index]);}ËøôÁßçÂÜôÊ≥ïÊØîËæÉÈ∫ªÁÉ¶ÔºåÂõ†Ê≠§Êï∞ÁªÑÊèê‰æõÂÜÖÁΩÆÁöÑforEachÊñπÊ≥ï„ÄÇ Javascript myArray.forEach(function (value) { console.log(value);});ËøôÁßçÂÜôÊ≥ïÁöÑÈóÆÈ¢òÂú®‰∫éÔºåÊó†Ê≥ï‰∏≠ÈÄîË∑≥Âá∫forEachÂæ™ÁéØÔºåbreakÂëΩ‰ª§ÊàñreturnÂëΩ‰ª§ÈÉΩ‰∏çËÉΩÂ•èÊïà„ÄÇ for‚Ä¶inÂæ™ÁéØÂèØ‰ª•ÈÅçÂéÜÊï∞ÁªÑÁöÑÈîÆÂêç„ÄÇ Javascript for (var index in myArray) { console.log(myArray[index]);}for‚Ä¶inÂæ™ÁéØÊúâÂá†‰∏™Áº∫ÁÇπ„ÄÇ Êï∞ÁªÑÁöÑÈîÆÂêçÊòØÊï∞Â≠óÔºå‰ΩÜÊòØfor‚Ä¶inÂæ™ÁéØÊòØ‰ª•Â≠óÁ¨¶‰∏≤‰Ωú‰∏∫ÈîÆÂêç‚Äú0‚Äù„ÄÅ‚Äú1‚Äù„ÄÅ‚Äú2‚ÄùÁ≠âÁ≠â„ÄÇfor‚Ä¶inÂæ™ÁéØ‰∏ç‰ªÖÈÅçÂéÜÊï∞Â≠óÈîÆÂêçÔºåËøò‰ºöÈÅçÂéÜÊâãÂä®Ê∑ªÂä†ÁöÑÂÖ∂‰ªñÈîÆÔºåÁîöËá≥ÂåÖÊã¨ÂéüÂûãÈìæ‰∏äÁöÑÈîÆ„ÄÇÊüê‰∫õÊÉÖÂÜµ‰∏ãÔºåfor‚Ä¶inÂæ™ÁéØ‰ºö‰ª•‰ªªÊÑèÈ°∫Â∫èÈÅçÂéÜÈîÆÂêç„ÄÇÊÄª‰πãÔºåfor‚Ä¶inÂæ™ÁéØ‰∏ªË¶ÅÊòØ‰∏∫ÈÅçÂéÜÂØπË±°ËÄåËÆæËÆ°ÁöÑÔºå‰∏çÈÄÇÁî®‰∫éÈÅçÂéÜÊï∞ÁªÑ„ÄÇ for‚Ä¶ofÂæ™ÁéØÁõ∏ÊØî‰∏äÈù¢Âá†ÁßçÂÅöÊ≥ïÔºåÊúâ‰∏Ä‰∫õÊòæËëóÁöÑ‰ºòÁÇπ„ÄÇ Javascriptfor (let value of myArray) { console.log(value);}ÊúâÁùÄÂêåfor‚Ä¶in‰∏ÄÊ†∑ÁöÑÁÆÄÊ¥ÅËØ≠Ê≥ïÔºå‰ΩÜÊòØÊ≤°Êúâfor‚Ä¶inÈÇ£‰∫õÁº∫ÁÇπ„ÄÇ‰∏çÂêåÁî®‰∫éforEachÊñπÊ≥ïÔºåÂÆÉÂèØ‰ª•‰∏ébreak„ÄÅcontinueÂíåreturnÈÖçÂêà‰ΩøÁî®„ÄÇÊèê‰æõ‰∫ÜÈÅçÂéÜÊâÄÊúâÊï∞ÊçÆÁªìÊûÑÁöÑÁªü‰∏ÄÊìç‰ΩúÊé•Âè£„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰ΩøÁî®breakËØ≠Âè•ÔºåË∑≥Âá∫for‚Ä¶ofÂæ™ÁéØÁöÑ‰æãÂ≠ê„ÄÇ Javascript for (var n of fibonacci) { if (n &gt; 1000) break; console.log(n);}‰∏äÈù¢ÁöÑ‰æãÂ≠êÔºå‰ºöËæìÂá∫ÊñêÊ≥¢Á∫≥Â•ëÊï∞ÂàóÂ∞è‰∫éÁ≠â‰∫é1000ÁöÑÈ°π„ÄÇÂ¶ÇÊûúÂΩìÂâçÈ°πÂ§ß‰∫é1000ÔºåÂ∞±‰ºö‰ΩøÁî®breakËØ≠Âè•Ë∑≥Âá∫for‚Ä¶ofÂæ™ÁéØ„ÄÇ","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"Symbol","slug":"Symbol","date":"2020-03-11T16:00:00.000Z","updated":"2024-10-16T04:06:46.810Z","comments":true,"path":"2020/03/12/Symbol/","permalink":"https://justsso1.github.io/2020/03/12/Symbol/","excerpt":"","text":"Symbol‰∏ÄÂè•ËØù‰ªãÁªçSymbolÔºöSymbolÊòØES6ÁöÑÁ¨¨‰∏ÉÁßçÂéüÂßãÊï∞ÊçÆÁ±ªÂûãÔºå(ÂâçÂÖ≠ÁßçÊòØ Null Undefined Boolean String Number Object)ÔºåË°®Á§∫Áã¨‰∏ÄÊó†‰∫åÁöÑÂÄº„ÄÇ Ê¶ÇËø∞ Âá∫Áé∞ÁöÑÂéüÂõ†ES5ÂØπË±°ÁöÑÂ±ûÊÄßÈÉΩÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºå‰∏∫‰∫ÜÈÅøÂÖçÂ±ûÊÄßÂêçÂÜ≤Á™Å„ÄÅ‰∏çÂá∫Áé∞ÂêåÂêçÁöÑÂ±ûÊÄßÔºåES6ÂàõÂª∫‰∫ÜÊñ∞ÁöÑÂéüÂßãÊï∞ÊçÆÁ±ªÂûãSymbol Â¶Ç‰ΩïËé∑Âæó‰∏Ä‰∏™SymbolÂÄºÈÄöËøá SymbolÂáΩÊï∞ÂàõÂª∫Ôºå‰∏çËÉΩ‰ΩøÁî® new ÂëΩ‰ª§ÔºåÂê¶ÂàôÊä•Èîô„ÄÇÂõ†‰∏∫ÁîüÊàêÁöÑSymbol‰∏çÊòØÂØπË±°ÔºåËÄåÊòØ‰∏Ä‰∏™ÂéüÂßãÊï∞ÊçÆÁ±ªÂûãÔºåÁ±ª‰ºº‰∏ÄÁßçÂ≠óÁ¨¶‰∏≤ÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇ Javascriptlet s&#x3D; Symbol()typeof s&#x2F;&#x2F; ‚Äúsymbol‚Äù3. SymbolÂáΩÊï∞ÁöÑÂèÇÊï∞ÊúâÂì™Âá†ÁßçÊó†ÂèÇÂ≠óÁ¨¶‰∏≤Ôºå Áî®Êù•ÊèèËø∞(description) SymbolÂÄºÂØπË±°Ôºå‰ºöË∞ÉÁî®ÂØπË±°ÁöÑtoString()ÔºåÂ∞ÜÂÖ∂ËΩ¨ÂåñÊàêÂ≠óÁ¨¶‰∏≤ÔºåÁî®Êù•ÊèèËø∞SymbolÂÄº„ÄÇ4. Symbol ÂÄºÁöÑÊØîËæÉSymbol ÂáΩÊï∞‰∏≠ÁöÑÂèÇÊï∞ÔºåÂè™ÊòØÁî®Êù•ÂÅöÊèèËø∞Á¨¶ÔºåÔºàÂØπÁ®ãÂ∫èÂëòÊàñËÄÖÊéßÂà∂Âè∞ÊúâÁî®ÔºåÊñπ‰æøÂå∫ÂàÜÔºâÔºå‰ΩÜÊòØÊ≤°Êúâ‰ªª‰Ωï‰∏§‰∏™ SymbolÁöÑÂÄºÁõ∏Á≠âÔºåSymbol‰ª£Ë°®Áã¨‰∏ÄÊó†‰∫åÁöÑÂÄº„ÄÇÂ∞±ÁÆó‰∏§‰∏™ÈÉΩÊó†ÂèÇÁöÑSymbol ÊàñËÄÖÂèÇÊï∞Áõ∏ÂêåÁöÑSymbol‰πüÊòØ‰∏çÁõ∏Á≠âÁöÑ„ÄÇ ÊÄé‰πàÊàê‰∏∫ÂØπË±°ÁöÑÂ±ûÊÄßÂêç‰ΩøÁî®ÊñπÊã¨Âè∑[] ÊàñËÄÖ Object.defineProperty ÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™SymbolÂÄº‰Ωú‰∏∫ÂØπË±°ÁöÑÂ±ûÊÄß„ÄÇ SymbolÂÄºÁî®‰ΩúÂØπË±°Â±ûÊÄßÂêçÊó∂Ôºå‰∏çËÉΩÁî®ÁÇπÊìç‰ΩúÁ¨¶ÔºåÂõ†‰∏∫ÁÇπÊìç‰ΩúÁ¨¶ÂêéÈù¢ÊÄªÊòØÂ≠óÁ¨¶‰∏≤„ÄÇ Ê≥®ÊÑèÔºö Symbol‰Ωú‰∏∫ÂØπË±°Â±ûÊÄßÊó∂ÔºåÊòØÂÖ¨ÂºÄÂ±ûÊÄßÔºå‰∏çÊòØÁßÅÊúâÂ±ûÊÄß„ÄÇ ÂÆûÊàòÔºö È≠îÊúØÂ≠óÁ¨¶‰∏≤ Javascript var shapeType &#x3D; { triangle: ‚ÄòTriangle‚Äô}; function getArea(shape, options) { var area &#x3D; 0; switch (shape) { case shapeType.triangle: area &#x3D; .5 * options.width * options.height; break; } return area;} getArea(shapeType.triangle, { width: 100, height: 100 });ÂèØ‰ª•ÂèëÁé∞shapeType.triangleÁ≠â‰∫éÂì™‰∏™ÂÄºÂπ∂‰∏çÈáçË¶ÅÔºåÂè™Ë¶ÅÁ°Æ‰øù‰∏ç‰ºöË∑üÂÖ∂‰ªñshapeTypeÂ±ûÊÄßÁöÑÂÄºÂÜ≤Á™ÅÂç≥ÂèØ„ÄÇÂõ†Ê≠§ÔºåËøôÈáåÂ∞±ÂæàÈÄÇÂêàÊîπÁî®SymbolÂÄº„ÄÇ Javascriptconst shapeType &#x3D; { triangle: Symbol()};‰∏äÈù¢‰ª£Á†Å‰∏≠ÔºåÈô§‰∫ÜÂ∞ÜshapeType.triangleÁöÑÂÄºËÆæ‰∏∫‰∏Ä‰∏™SymbolÔºåÂÖ∂‰ªñÂú∞ÊñπÈÉΩ‰∏çÁî®‰øÆÊîπ„ÄÇ Â±ûÊÄßÂêçÁöÑÈÅçÂéÜÔºåÂ¶ôÁî®SymbolÂ±ûÊÄß‰∏çËÉΩË¢´Â∏∏ËßÑÁöÑÊñπÊ≥ïÈÅçÂéÜÂà∞Ôºåfor ‚Ä¶ in Object.getOwnPropertyNames() Object.keys() ÈÉΩ‰∏çËÉΩÈÅçÂéÜÂà∞SymbolÂ±ûÊÄßÂêçÔºå‰ΩÜÊòØObject.getOwnPropertySymbolsÂèØ‰ª•Ëé∑ÂèñÂà∞SymbolÂ±ûÊÄßÂêçÔºåÊâÄ‰ª•Âà©Áî®Ëøô‰∏™ÁâπÊÄßÊàë‰ª¨ÂèØ‰ª•ÂÅö‰∏Ä‰∫õÈùûÁßÅÊúâÁöÑÔºå‰ΩÜÊòØÂèàÂè™ÊÉ≥ËÆ©ÂÜÖÈÉ®ËÆøÈóÆÂà∞ÁöÑÂ±ûÊÄßÂêç„ÄÇ Symbol.for(), Symbol.keyFor()Symbol.for()‰πüÊòØ‰ºöÁîüÊàê‰∏Ä‰∏™SymbolÁöÑÂÄºÔºå‰ΩÜÊòØÂíåSymbol()ÊúâÂå∫Âà´„ÄÇSymbol.for()ÂÆÉ‰ºöÂú®ÂÖ®Â±ÄÁéØÂ¢É‰∏≠ÁôªÂΩï‰Ω†ÂàõÂª∫ÁöÑËøô‰∏™SymbolÂÄºÔºå‰ª•‰æõÂêéÈù¢ÁöÑSymbol.for()Êü•Êâæ„ÄÇÊâÄ‰ª•Symbol.for()‰∏ç‰ºöÊØèÊ¨°Ë∞ÉÁî®Â∞±ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ Symbol Á±ªÂûãÁöÑÂÄºÔºåËÄåÊòØ‰ºöÂÖàÊ£ÄÊü•ÁªôÂÆöÁöÑkeyÊòØÂê¶Â∑≤ÁªèÂ≠òÂú®ÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®Êâç‰ºöÊñ∞Âª∫‰∏Ä‰∏™ÂÄº„ÄÇËÄåSymbol()‰ºöÊØèÊ¨°ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑSymbolÂÄº„ÄÇ Symbol.keyForÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™Â∑≤ÁôªËÆ∞ÁöÑ Symbol Á±ªÂûãÂÄºÁöÑkey„ÄÇ Javascriptvar s1 &#x3D; Symbol.for(‚Äúfoo‚Äù);Symbol.keyFor(s1) &#x2F;&#x2F; ‚Äúfoo‚Äù var s2 &#x3D; Symbol(‚Äúfoo‚Äù);Symbol.keyFor(s2) &#x2F;&#x2F; undefinedÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåSymbol.for‰∏∫SymbolÂÄºÁôªËÆ∞ÁöÑÂêçÂ≠óÔºåÊòØÂÖ®Â±ÄÁéØÂ¢ÉÁöÑÔºåÂèØ‰ª•Âú®‰∏çÂêåÁöÑ iframe Êàñ service worker ‰∏≠ÂèñÂà∞Âêå‰∏Ä‰∏™ÂÄº„ÄÇ Javascriptiframe &#x3D; document.createElement(‚Äòiframe‚Äô);iframe.src &#x3D; String(window.location);document.body.appendChild(iframe); iframe.contentWindow.Symbol.for(‚Äòfoo‚Äô) &#x3D;&#x3D;&#x3D; Symbol.for(‚Äòfoo‚Äô)&#x2F;&#x2F; true‰∏äÈù¢‰ª£Á†Å‰∏≠Ôºåiframe Á™óÂè£ÁîüÊàêÁöÑ Symbol ÂÄºÔºåÂèØ‰ª•Âú®‰∏ªÈ°µÈù¢ÂæóÂà∞„ÄÇ ÂÆûÊàòÔºö Ê®°ÂùóÁöÑ Singleton Ê®°Âºè ÔºàSingleton n.Áã¨ÁîüÂ≠êÔºâ Âà©Áî®Symbol.for()Âú®ÂÖ®Â±ÄÁéØÂ¢É‰∏ãÂè™Êúâ‰∏Ä‰∏™Ôºå‰∏îË¶ÅÈÄöËøáSymbol.keyFor()ÊñπÊ≥ïÊù•ÊâæÂà∞„ÄÇ‰ΩÜÊòØËøô‰∏™‰πüÂ≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºå‰πü‰∏çÂèØÈù†ÔºåÂÜçËÆÆ„ÄÇ ÂÜÖÁΩÆÁöÑSymbolÂÄºSymbolÂÄºÂèØ‰ª•Ëá™Â∑±ÂÆö‰πâ‰πãÂ§ñÔºåES6 ËøòÊèê‰æõ‰∫Ü11‰∏™ÂÜÖÁΩÆÁöÑSymbolÂÄºÔºåÊåáÂêëËØ≠Ë®ÄÂÜÖÈÉ®‰ΩøÁî®ÁöÑÊñπÊ≥ï„ÄÇ Symbol.iteratorÂØπË±°ÁöÑSymbol.iteratorÂ±ûÊÄßÔºåÊåáÂêëËØ•ÂØπË±°ÁöÑÈªòËÆ§ÈÅçÂéÜÂô®ÊñπÊ≥ï„ÄÇ Javascriptvar myIterator &#x3D; {}; myIterator[Symbol.iterator] &#x3D; function*(){ yield 1; yield 2; yield 3;} [‚Ä¶ myIterator] &#x2F;&#x2F;[1,2,3] &#x2F;&#x2F;‚Ä¶ Êìç‰ΩúÁ¨¶ÔºåÂÖ∂ÂÆûÊòØ‰ΩøÁî®‰∫Üfor of Â∞ÜmyIteratorÂÖ®ÈÉ®ÈÅçÂéÜ‰∏ÄÈÅçÂØπË±°ËøõË°åfor‚Ä¶ofÂæ™ÁéØÊó∂Ôºå‰ºöË∞ÉÁî®Symbol.iteratorÊñπÊ≥ïÔºåËøîÂõûËØ•ÂØπË±°ÁöÑÈªòËÆ§ÈÅçÂéÜÂô®ÔºåËØ¶ÁªÜ‰ªãÁªçÂèÇËßÅ„ÄäIteratorÂíåfor‚Ä¶ofÂæ™ÁéØ„Äã‰∏ÄÁ´†„ÄÇ 1234567891011121314151617181920class Collection &#123; *[Symbol.iterator]() &#123; let i = 0; while(this[i] !== undefined) &#123; yield this[i]; ++i; &#125; &#125;&#125;let myCollection = new Collection();myCollection[0] = 1;myCollection[1] = 2;for(let value of myCollection) &#123; console.log(value);&#125;// 1// 2","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"cookie session jwt token","slug":"cookie session jwt token","date":"2020-03-11T16:00:00.000Z","updated":"2024-10-12T08:40:56.538Z","comments":true,"path":"2020/03/12/cookie session jwt token/","permalink":"https://justsso1.github.io/2020/03/12/cookie%20session%20jwt%20token/","excerpt":"","text":"cookie session jwt tokencookie Âíåsession ÁªìÂêàËÆ§ËØÅtoken ËÆ§ËØÅjwt ËÆ§ËØÅÊâ´Á†ÅËÆ§ËØÅOauth2 ËÆ§ËØÅÂçïÁÇπÁôªÂΩïLDAP ËÆ§ËØÅcookie „ÄÅsessionÈáçÁÇπÔºö Âú®Áà∂ÂüüÂêç‰∏ãËÆæÁΩÆcookieÔºåÂú®‰ªñÁöÑ‰∫åÁ∫ßÂ≠êÂüüÂêçÂèØ‰ª•Ëé∑ÂèñÂà∞ÔºåËøôÊ†∑ÂèØ‰ª•ÂÖ±‰∫´cookiecookie Â∫îËØ•ËÆæÁΩÆhttponlyÂ±ûÊÄß ,Èò≤Ê≠¢Ë∑®Á´ôÊîªÂáªXSSreadonlyÈóÆÈ¢òÔºö Âú®‰∫éÂêéÂè∞Ë¶ÅÂ≠òÂÇ®sessionÊï∞ÊçÆÔºåÊï∞ÊçÆÈáèËøáÂ§ß‰ºöÊòØ‰∏ÄÁßçÈóÆÈ¢òÔºåÂ¶ÇÊûúÁî®Ë¥üËΩΩÂùáË°°Ôºå‰∏ÄÊó¶ÈÇ£‰∏™Ë¥üË¥£sessionÁöÑÊú∫Âô®ÊåÇ‰∫ÜÔºåÂ∞±‰ºöÂá∫Áé∞ÈóÆÈ¢òÔºåÊâÄÊúâ‰∫∫ÁöÑÁôªÂΩïÊÄÅÂ∞±Â§±Êïà‰∫ÜJWTËÆ§ËØÅ„ÄÅTokenËÆ§ËØÅJWT ÂÖ®Áß∞ÊòØJSON Web TokenÔºå‰∏ÄÁßçÊó†Áä∂ÊÄÅÁöÑËÆ§ËØÅÊñπÂºè„ÄÇ JWTËß£ÂÜ≥ÁöÑ‰∏çÊòØÊï∞ÊçÆ‰º†ËæìÂÆâÂÖ®JWTËß£ÂÜ≥ÁöÑÊòØÊúçÂä°Á´Øcookie „ÄÅsessionÂ≠òÂÇ®ÔºåËøôÁßçÂâçÂêéÁ´ØÊúâÁä∂ÊÄÅÁöÑÈóÆÈ¢òÂ∏∏Áî®ÁöÑTokenÂíåJWTËÆ§ËØÅÊòØÊúâ‰∏ÄÂÆöÂ∑ÆÂà´ÁöÑJWTÂíåTokenÊúâ‰∏ÄÂÆöÁöÑÂ∑ÆÂà´ÔºåJWTÈÄÇÂêà‰∏ÄÊ¨°ÊÄßÈ™åËØÅÔºåÊØîÊñπÈÇÆ‰ª∂ÊøÄÊ¥ªÔºåTokenÈÄÇÂêàÊàë‰ª¨‰∏ÄËà¨ÁöÑAPIËØ∑Ê±Ç„ÄÇ Â∏∏ËßÅÊµÅÁ®ãÁî®Êà∑ÂèëËµ∑ËØ∑Ê±ÇÁôªÂΩïÔºåÊúçÂä°Á´ØÈ™åËØÅÂêéÔºåÈÄöËøáJWTÁîüÊàê‰∏Ä‰∏™TokenÔºåÂπ∂ËøîÂõûÁªôÂâçÁ´ØÂâçÁ´ØÂ≠òÂÇ®Ëµ∑Êù•Ôºå‰∏ÄËà¨Â≠òÂú®sessionStorage‰∏≠ÂêéÁª≠APIËØ∑Ê±ÇÈÉΩÂ∏¶‰∏äËøô‰∏™TokenÔºåÊúçÂä°Á´ØÈÄöËøáËøô‰∏™TokenÊù•È™åÊòéË∫´‰ªΩTokenÊúâ‰∏Ä‰∏™Êó∂ÊïàÊÄßÔºåËøá‰∫ÜÊó∂Èó¥ÈúÄË¶ÅÈáçÊñ∞Ëé∑ÂèñÔºåÊâÄ‰ª•‰∏ÄËà¨ÂâçÁ´Ø‰ºöÂú®AjaxÁöÑËØ∑Ê±ÇÂÅö‰∏™Áªü‰∏ÄÁöÑintreceptorsÁªÑÊàêJavascriptHeader.Payload.SignatureHeader Javascript{ ‚Äúalg‚Äù: ‚ÄúHS256‚ÄùÔºå &#x2F;&#x2F; Ê†áËÆ∞Á≠æÂêçÁöÑÁÆóÊ≥ï ‚Äútyp‚Äù: ‚ÄúJWT‚Äù}Payload Javascript { ‚Äúsub‚Äù: ‚Äú1234567890‚ÄùÔºå &#x2F;&#x2F; payload ËøôÈáåÊòØÂ≠òÊàë‰ª¨ÁöÑÊñπÂ≠òÊîæÁöÑÁî®Êà∑‰ø°ÊÅØ ‚Äúname‚Äù: ‚ÄúJohn Doe‚ÄùÔºå ‚Äúadmin‚Äù: falseÔºå exp: number &#x2F;&#x2F; ËøáÊúüÊó∂Èó¥ &#x2F;&#x2F; ‚Ä¶‚Ä¶}SignatureÁ≠æÂêçÔºöÂØÜÈí•Â•ΩÂ•Ω‰øùÂ≠òÔºå‰º™‰ª£Á†ÅÂ±ïÁ§∫Ôºö Javascriptconst signature &#x3D; HMACSHA256( base64UrlEncode(Header)+‚Äù.‚Äù+base64UrlEncode(Plyload)+‚Äù.‚Äù+ secret);res.send({signature: signature})Âõ†‰∏∫ Header„ÄÅPayload ÂÆûÈôÖÊòØ‰∏™ Base64 ËøáÁöÑÔºåÊâÄ‰ª•ÊãøÂà∞ÂêéÁªèËøá Base64 Ëß£Á†ÅÂêéÊòØÂèØ‰ª•ÁúãÂà∞ÂÆûÈôÖÂÜÖÂÆπÁöÑÔºåÊâÄ‰ª•ÈöêÁßÅÊï∞ÊçÆ‰∏çË¶ÅÊîæÂú® Payload ÈáåÔºåPayload Â≠òÊîæÁî®Êà∑ÁöÑÂü∫Êú¨‰ø°ÊÅØÔºåuserId„ÄÅuserName„ÄÅmail Âï•ÁöÑ„ÄÇ ÈÄöÂ∏∏Êàë‰πàÊÅ©Âú®Ë∞ÉÁî®ÂêéÁ´ØAPIÁöÑÊó∂ÂÄôÔºåÈÉΩÂè™Êúâ‰∏Ä‰∏™Â∏∏Â∏∏ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÊ≤°ÊúâËßÅÂà∞Ëøô‰∏™x.x.xÁöÑ‰∏âÊÆµÂºèÈòøÔºü ËøôÊòØÂõ†‰∏∫Êàë‰ª¨Âú®ÂÆ¢Êà∑Á´ØÂ≠òÂÇ®ÁöÑ‰∫ãTokenÔºåÂç≥‰∏äÊñáËØ¥ÁöÑSignature ÂØπ‰∫é API ËØ∑Ê±Ç Header Ëøô‰∏™ÂÖ∂ÂÆûÊòØÂ§ö‰ΩôÁöÑÔºåÂè™Ë¶ÅÊàëÁöÑ Token ËÉΩÂîØ‰∏ÄÊ†áËÆ∞ÊòØÂì™‰∏™Áî®Êà∑Â∞±ÂèØ‰ª•Ôºå‰πü‰∏çÈúÄË¶ÅÈ™åÁ≠æËøô‰∏™ÊµÅÁ®ãÁöÑÔºåÊàëÂè™ÈúÄË¶ÅÂú® Redis Â≠òÂÇ®Áî®Êà∑ Âíå Token ÁöÑÂÖ≥Á≥ªÂ∞±Â•ΩÔºåÊâÄ‰ª• JWT Âíå Token ÁöÑÂ∑ÆÂà´ÊòØÔºåJWT ‰∏çÈúÄË¶ÅÂú®ÂêéÁ´ØÂ≠òÂÇ®Áî®Êà∑Âíå Signature ÁöÑÂÖ≥Á≥ªÔºåÂè™ÈúÄË¶ÅÂÅö‰∏™È™åÁ≠æÂ∞±ÂèØ‰ª•ÊâÄ‰ª• JWT ÈÄÇÂêàÂÅö‰∏ÄÊ¨°Ë°åÈ™åËØÅÔºåÊØîÊñπÈÇÆÁÆ±ÊøÄÊ¥ªË¥¶Âè∑ÔºåToken ÈÄÇÂêàÂÅö API ËØ∑Ê±ÇËÆ§ËØÅ„ÄÇ 2 ËÄÖÁöÑÂ∑ÆÂà´Â∞±ÊòØ Token ÈúÄË¶ÅÊúçÂä°Á´ØÂ≠òÂÇ® Token ÂíåÁî®Êà∑ÁöÑÂÖ≥Á≥ªÔºåJWT ‰∏çÈúÄË¶ÅÔºåËøô‰∫åËÄÖÂØπ‰∫éÂâçÁ´ØÂºÄÂèëËÄÖÊù•ËØ¥ÔºåÂú®Ë∞ÉÁî®ÊñπÂºè‰∏äÊ≤°ÊúâÂ∑ÆÂà´„ÄÇ ÂÆâÂÖ®ÊÄßÁõ∏ÂÖ≥ Áº©Áü≠ Token ÊúâÊïàÊó∂Èó¥secret ÂÆöÊó∂ÊõøÊç¢‰ΩøÁî® HTTPS Âä†ÂØÜÂçèËÆÆÂØπÊ†áÂáÜÂ≠óÊÆµ iss„ÄÅsub„ÄÅaud„ÄÅnbf„ÄÅexp ËøõË°åÊ†°È™åÂèÇËÄÉÔºöhttps://www.jianshu.com/p/8f7009456abc OAuth2 ËÆ§ËØÅÁ¨¨‰∏âÊñπÁôªÂΩï","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"lodashÂ∏∏Áî®ÊñπÊ≥ï","slug":"lodashÂ∏∏Áî®ÊñπÊ≥ï","date":"2020-03-10T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2020/03/11/lodashÂ∏∏Áî®ÊñπÊ≥ï/","permalink":"https://justsso1.github.io/2020/03/11/lodash%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/","excerpt":"","text":"lodashÂ∏∏Áî®ÊñπÊ≥ïObject_.get(object, path, [defaultValue]) Ê†πÊçÆ objectÂØπË±°ÁöÑpathË∑ØÂæÑËé∑ÂèñÂÄº„ÄÇ Â¶ÇÊûúËß£Êûê value ÊòØ undefined ‰ºö‰ª• defaultValue Âèñ‰ª£„ÄÇ Ê∑ªÂä†ÁâàÊú¨3.7.0 ÂèÇÊï∞ object (Object): Ë¶ÅÊ£ÄÁ¥¢ÁöÑÂØπË±°„ÄÇ path (Array|string): Ë¶ÅËé∑ÂèñÂ±ûÊÄßÁöÑË∑ØÂæÑ„ÄÇ [defaultValue] (*): Â¶ÇÊûúËß£ÊûêÂÄºÊòØ undefined ÔºåËøôÂÄº‰ºöË¢´ËøîÂõû„ÄÇ ËøîÂõû (*): ËøîÂõûËß£ÊûêÁöÑÂÄº„ÄÇ ‰æãÂ≠ê Javascript var object &#x3D; { ‚Äòa‚Äô: [{ ‚Äòb‚Äô: { ‚Äòc‚Äô: 3 } }] }; _.get(object, ‚Äòa[0].b.c‚Äô);&#x2F;&#x2F; &#x3D;&gt; 3 _.get(object, [‚Äòa‚Äô, ‚Äò0‚Äô, ‚Äòb‚Äô, ‚Äòc‚Äô]);&#x2F;&#x2F; &#x3D;&gt; 3 _.get(object, ‚Äòa.b.c‚Äô, ‚Äòdefault‚Äô);&#x2F;&#x2F; &#x3D;&gt; ‚Äòdefault‚ÄôArray_.tail(array) Ëé∑ÂèñÈô§‰∫ÜarrayÊï∞ÁªÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†‰ª•Â§ñÁöÑÂÖ®ÈÉ®ÂÖÉÁ¥†„ÄÇ Ê∑ªÂä†ÁâàÊú¨4.0.0 ÂèÇÊï∞array (Array): Ë¶ÅÊ£ÄÁ¥¢ÁöÑÊï∞ÁªÑ„ÄÇËøîÂõû(Array): ËøîÂõû array Êï∞ÁªÑÁöÑÂàáÁâáÔºàÈô§‰∫ÜarrayÊï∞ÁªÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†‰ª•Â§ñÁöÑÂÖ®ÈÉ®ÂÖÉÁ¥†Ôºâ„ÄÇ ‰æãÂ≠ê Javascript_.tail([1, 2, 3]);&#x2F;&#x2F; &#x3D;&gt; [2, 3]Util_.flow([funcs]) ÂàõÂª∫‰∏Ä‰∏™ÂáΩÊï∞„ÄÇ ËøîÂõûÁöÑÁªìÊûúÊòØË∞ÉÁî®Êèê‰æõÂáΩÊï∞ÁöÑÁªìÊûúÔºåthis ‰ºöÁªëÂÆöÂà∞ÂàõÂª∫ÂáΩÊï∞„ÄÇ ÊØè‰∏Ä‰∏™ËøûÁª≠Ë∞ÉÁî®Ôºå‰º†ÂÖ•ÁöÑÂèÇÊï∞ÈÉΩÊòØÂâç‰∏Ä‰∏™ÂáΩÊï∞ËøîÂõûÁöÑÁªìÊûú„ÄÇ Ê∑ªÂä†ÁâàÊú¨3.0.0 ÂèÇÊï∞ [funcs] (‚Ä¶(Function|Function[])): Ë¶ÅË∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇ ËøîÂõû (Function): ËøîÂõûÊñ∞ÁöÑÂáΩÊï∞„ÄÇ ‰æãÂ≠ê Javascript function square(n) { return n * n;} var addSquare &#x3D; .flow([.add, square]);addSquare(1, 2);&#x2F;&#x2F; &#x3D;&gt; 9","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"Áî±JSÁªßÊâøÊâÄÊÉ≥","slug":"Áî±JSÁªßÊâøÊâÄÊÉ≥","date":"2020-03-08T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/03/09/Áî±JSÁªßÊâøÊâÄÊÉ≥/","permalink":"https://justsso1.github.io/2020/03/09/%E7%94%B1JS%E7%BB%A7%E6%89%BF%E6%89%80%E6%83%B3/","excerpt":"","text":"Áî±JSÁªßÊâøÊâÄÊÉ≥ÂéüÂûãJavaScript ‰∏çÂåÖÂê´‰º†ÁªüÁöÑÁ±ªÁªßÊâøÊ®°ÂûãÔºåËÄåÊòØ‰ΩøÁî® prototype ÂéüÂûãÊ®°Âûã„ÄÇ ËôΩÁÑ∂ËøôÁªèÂ∏∏Ë¢´ÂΩì‰ΩúÊòØ JavaScript ÁöÑÁº∫ÁÇπË¢´ÊèêÂèäÔºåÂÖ∂ÂÆûÂü∫‰∫éÂéüÂûãÁöÑÁªßÊâøÊ®°ÂûãÊØî‰º†ÁªüÁöÑÁ±ªÁªßÊâøËøòË¶ÅÂº∫Â§ß„ÄÇ ÂÆûÁé∞‰º†ÁªüÁöÑÁ±ªÁªßÊâøÊ®°ÂûãÊòØÂæàÁÆÄÂçïÔºå‰ΩÜÊòØÂÆûÁé∞ JavaScript ‰∏≠ÁöÑÂéüÂûãÁªßÊâøÂàôË¶ÅÂõ∞ÈöæÁöÑÂ§ö„ÄÇ Áî±‰∫é JavaScript ÊòØÂîØ‰∏Ä‰∏Ä‰∏™Ë¢´ÂπøÊ≥õ‰ΩøÁî®ÁöÑÂü∫‰∫éÂéüÂûãÁªßÊâøÁöÑËØ≠Ë®ÄÔºåÊâÄ‰ª•ÁêÜËß£‰∏§ÁßçÁªßÊâøÊ®°ÂºèÁöÑÂ∑ÆÂºÇÊòØÈúÄË¶Å‰∏ÄÂÆöÊó∂Èó¥ÁöÑ„ÄÇ Á¨¨‰∏Ä‰∏™‰∏çÂêå‰πãÂ§ÑÂú®‰∫é JavaScript ‰ΩøÁî®ÂéüÂûãÈìæÁöÑÁªßÊâøÊñπÂºè„ÄÇ Ê≥®ÊÑè: ÁÆÄÂçïÁöÑ‰ΩøÁî® Bar.prototype = Foo.prototype Â∞Ü‰ºöÂØºËá¥‰∏§‰∏™ÂØπË±°ÂÖ±‰∫´Áõ∏ÂêåÁöÑÂéüÂûã„ÄÇ Âõ†Ê≠§ÔºåÊîπÂèò‰ªªÊÑè‰∏Ä‰∏™ÂØπË±°ÁöÑÂéüÂûãÈÉΩ‰ºöÂΩ±ÂìçÂà∞Âè¶‰∏Ä‰∏™ÂØπË±°ÁöÑÂéüÂûãÔºåÂú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãËøô‰∏çÊòØÂ∏åÊúõÁöÑÁªìÊûú„ÄÇ 1234567891011121314151617181920212223242526function Foo() &#123; this.value = 42;&#125;Foo.prototype = &#123; method: function() &#123;&#125;&#125;;function Bar() &#123;&#125;// ËÆæÁΩÆBarÁöÑprototypeÂ±ûÊÄß‰∏∫FooÁöÑÂÆû‰æãÂØπË±°Bar.prototype = new Foo();Bar.prototype.foo = &#x27;Hello World&#x27;;// ‰øÆÊ≠£Bar.prototype.constructor‰∏∫BarÊú¨Ë∫´Bar.prototype.constructor = Bar;var test = new Bar() // ÂàõÂª∫BarÁöÑ‰∏Ä‰∏™Êñ∞ÂÆû‰æã// ÂéüÂûãÈìætest [BarÁöÑÂÆû‰æã] Bar.prototype [FooÁöÑÂÆû‰æã] &#123; foo: &#x27;Hello World&#x27; &#125; Foo.prototype &#123;method: ...&#125;; Object.prototype &#123;toString: ... /* etc. */&#125;; Ê≥®ÊÑè: ‰∏çË¶Å‰ΩøÁî® Bar.prototype = FooÔºåÂõ†‰∏∫Ëøô‰∏ç‰ºöÊâßË°å Foo ÁöÑÂéüÂûãÔºåËÄåÊòØÊåáÂêëÂáΩÊï∞ Foo„ÄÇ Âõ†Ê≠§ÂéüÂûãÈìæÂ∞Ü‰ºöÂõûÊ∫ØÂà∞ Function.prototype ËÄå‰∏çÊòØ Foo.prototypeÔºåÂõ†Ê≠§ method Â∞Ü‰∏ç‰ºöÂú® Bar ÁöÑÂéüÂûãÈìæ‰∏ä„ÄÇ ‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºåtest ÂØπË±°‰ªé Bar.prototype Âíå Foo.prototype ÁªßÊâø‰∏ãÊù•ÔºõÂõ†Ê≠§Ôºå ÂÆÉËÉΩËÆøÈóÆ Foo ÁöÑÂéüÂûãÊñπÊ≥ï method„ÄÇÂêåÊó∂ÔºåÂÆÉ‰πüËÉΩÂ§üËÆøÈóÆÈÇ£‰∏™ÂÆö‰πâÂú®ÂéüÂûã‰∏äÁöÑ Foo ÂÆû‰æãÂ±ûÊÄß value„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØ new Bar() ‰∏ç‰ºöÂàõÈÄ†Âá∫‰∏Ä‰∏™Êñ∞ÁöÑ Foo ÂÆû‰æãÔºåËÄåÊòØ ÈáçÂ§ç‰ΩøÁî®ÂÆÉÂéüÂûã‰∏äÁöÑÈÇ£‰∏™ÂÆû‰æãÔºõÂõ†Ê≠§ÔºåÊâÄÊúâÁöÑ BarÂÆû‰æãÈÉΩ‰ºöÂÖ±‰∫´Áõ∏ÂêåÁöÑ value Â±ûÊÄß„ÄÇ Â±ûÊÄßÊü•ÊâæÂΩìÊü•Êâæ‰∏Ä‰∏™ÂØπË±°ÁöÑÂ±ûÊÄßÊó∂ÔºåJavaScript ‰ºöÂêë‰∏äÈÅçÂéÜÂéüÂûãÈìæÔºåÁõ¥Âà∞ÊâæÂà∞ÁªôÂÆöÂêçÁß∞ÁöÑÂ±ûÊÄß‰∏∫Ê≠¢„ÄÇ Âà∞Êü•ÊâæÂà∞ËææÂéüÂûãÈìæÁöÑÈ°∂ÈÉ® - ‰πüÂ∞±ÊòØ Object.prototype - ‰ΩÜÊòØ‰ªçÁÑ∂Ê≤°ÊúâÊâæÂà∞ÊåáÂÆöÁöÑÂ±ûÊÄßÔºåÂ∞±‰ºöËøîÂõû undefined„ÄÇ ÂéüÂûãÂ±ûÊÄßÂΩìÂéüÂûãÂ±ûÊÄßÁî®Êù•ÂàõÂª∫ÂéüÂûãÈìæÊó∂ÔºåÂèØ‰ª•Êää‰ªª‰ΩïÁ±ªÂûãÁöÑÂÄºËµãÁªôÂÆÉÔºàprototypeÔºâ„ÄÇ ÁÑ∂ËÄåÂ∞ÜÂéüÂ≠êÁ±ªÂûãËµãÁªô prototype ÁöÑÊìç‰ΩúÂ∞Ü‰ºöË¢´ÂøΩÁï•„ÄÇ 12function Foo() &#123;&#125;Foo.prototype = 1; // Êó†Êïà ËÄåÂ∞ÜÂØπË±°ËµãÂÄºÁªô prototypeÔºåÊ≠£Â¶Ç‰∏äÈù¢ÁöÑ‰æãÂ≠êÊâÄÁ§∫ÔºåÂ∞Ü‰ºöÂä®ÊÄÅÁöÑÂàõÂª∫ÂéüÂûãÈìæ„ÄÇ ÊÄßËÉΩÂ¶ÇÊûú‰∏Ä‰∏™Â±ûÊÄßÂú®ÂéüÂûãÈìæÁöÑ‰∏äÁ´ØÔºåÂàôÂØπ‰∫éÊü•ÊâæÊó∂Èó¥Â∞ÜÂ∏¶Êù•‰∏çÂà©ÂΩ±Âìç„ÄÇÁâπÂà´ÁöÑÔºåËØïÂõæËé∑Âèñ‰∏Ä‰∏™‰∏çÂ≠òÂú®ÁöÑÂ±ûÊÄßÂ∞Ü‰ºöÈÅçÂéÜÊï¥‰∏™ÂéüÂûãÈìæ„ÄÇ Âπ∂‰∏îÔºåÂΩì‰ΩøÁî® for in Âæ™ÁéØÈÅçÂéÜÂØπË±°ÁöÑÂ±ûÊÄßÊó∂ÔºåÂéüÂûãÈìæ‰∏äÁöÑÊâÄÊúâÂ±ûÊÄßÈÉΩÂ∞ÜË¢´ËÆøÈóÆ„ÄÇ Êâ©Â±ïÂÜÖÁΩÆÁ±ªÂûãÁöÑÂéüÂûã‰∏Ä‰∏™ÈîôËØØÁâπÊÄßË¢´ÁªèÂ∏∏‰ΩøÁî®ÔºåÈÇ£Â∞±ÊòØÊâ©Â±ï Object.prototype ÊàñËÄÖÂÖ∂‰ªñÂÜÖÁΩÆÁ±ªÂûãÁöÑÂéüÂûãÂØπË±°„ÄÇ ËøôÁßçÊäÄÊúØË¢´Áß∞‰πã‰∏∫ monkey patching Âπ∂‰∏î‰ºöÁ†¥ÂùèÂ∞ÅË£Ö„ÄÇËôΩÁÑ∂ÂÆÉË¢´ÂπøÊ≥õÁöÑÂ∫îÁî®Âà∞‰∏Ä‰∫õ JavaScript Á±ªÂ∫ì‰∏≠ÊØîÂ¶Ç Prototype, ‰ΩÜÊòØÊàë‰ªçÁÑ∂‰∏çËÆ§‰∏∫‰∏∫ÂÜÖÁΩÆÁ±ªÂûãÊ∑ªÂä†‰∏Ä‰∫õÈùûÊ†áÂáÜÁöÑÂáΩÊï∞ÊòØ‰∏™Â•Ω‰∏ªÊÑè„ÄÇ Êâ©Â±ïÂÜÖÁΩÆÁ±ªÂûãÁöÑÂîØ‰∏ÄÁêÜÁî±ÊòØ‰∏∫‰∫ÜÂíåÊñ∞ÁöÑ JavaScript ‰øùÊåÅ‰∏ÄËá¥ÔºåÊØîÂ¶Ç Array.forEach„ÄÇ ÊÄªÁªìÂú®ÂÜôÂ§çÊùÇÁöÑ JavaScript Â∫îÁî®‰πãÂâçÔºåÂÖÖÂàÜÁêÜËß£ÂéüÂûãÈìæÁªßÊâøÁöÑÂ∑•‰ΩúÊñπÂºèÊòØÊØè‰∏™ JavaScript Á®ãÂ∫èÂëòÂøÖ‰øÆÁöÑÂäüËØæ„ÄÇ Ë¶ÅÊèêÈò≤ÂéüÂûãÈìæËøáÈïøÂ∏¶Êù•ÁöÑÊÄßËÉΩÈóÆÈ¢òÔºåÂπ∂Áü•ÈÅìÂ¶Ç‰ΩïÈÄöËøáÁº©Áü≠ÂéüÂûãÈìæÊù•ÊèêÈ´òÊÄßËÉΩ„ÄÇ Êõ¥Ëøõ‰∏ÄÊ≠•ÔºåÁªùÂØπ‰∏çË¶ÅÊâ©Â±ïÂÜÖÁΩÆÁ±ªÂûãÁöÑÂéüÂûãÔºåÈô§ÈùûÊòØ‰∏∫‰∫ÜÂíåÊñ∞ÁöÑ JavaScript ÂºïÊìéÂÖºÂÆπ„ÄÇ hasOwnProperty ÂáΩÊï∞‰∏∫‰∫ÜÂà§Êñ≠‰∏Ä‰∏™ÂØπË±°ÊòØÂê¶ÂåÖÂê´Ëá™ÂÆö‰πâÂ±ûÊÄßËÄå‰∏çÊòØÂéüÂûãÈìæ‰∏äÁöÑÂ±ûÊÄßÔºå Êàë‰ª¨ÈúÄË¶Å‰ΩøÁî®ÁªßÊâøËá™ Object.prototype ÁöÑ hasOwnProperty ÊñπÊ≥ï„ÄÇ Ê≥®ÊÑè: ÈÄöËøáÂà§Êñ≠‰∏Ä‰∏™Â±ûÊÄßÊòØÂê¶ undefined ÊòØ‰∏çÂ§üÁöÑ„ÄÇ Âõ†‰∏∫‰∏Ä‰∏™Â±ûÊÄßÂèØËÉΩÁ°ÆÂÆûÂ≠òÂú®ÔºåÂè™‰∏çËøáÂÆÉÁöÑÂÄºË¢´ËÆæÁΩÆ‰∏∫ undefined„ÄÇ hasOwnProperty ÊòØ JavaScript ‰∏≠ÂîØ‰∏Ä‰∏Ä‰∏™Â§ÑÁêÜÂ±ûÊÄß‰ΩÜÊòØ‰∏çÊü•ÊâæÂéüÂûãÈìæÁöÑÂáΩÊï∞„ÄÇ 123456789// ‰øÆÊîπObject.prototypeObject.prototype.bar = 1; var foo = &#123;goo: undefined&#125;;foo.bar; // 1&#x27;bar&#x27; in foo; // truefoo.hasOwnProperty(&#x27;bar&#x27;); // falsefoo.hasOwnProperty(&#x27;goo&#x27;); // true Âè™Êúâ hasOwnProperty ÂèØ‰ª•ÁªôÂá∫Ê≠£Á°ÆÂíåÊúüÊúõÁöÑÁªìÊûúÔºåËøôÂú®ÈÅçÂéÜÂØπË±°ÁöÑÂ±ûÊÄßÊó∂‰ºöÂæàÊúâÁî®„ÄÇ Ê≤°ÊúâÂÖ∂ÂÆÉÊñπÊ≥ïÂèØ‰ª•Áî®Êù•ÊéíÈô§ÂéüÂûãÈìæ‰∏äÁöÑÂ±ûÊÄßÔºåËÄå‰∏çÊòØÂÆö‰πâÂú®ÂØπË±°Ëá™Ë∫´‰∏äÁöÑÂ±ûÊÄß„ÄÇ hasOwnProperty ‰Ωú‰∏∫Â±ûÊÄßJavaScript ‰∏ç‰ºö‰øùÊä§ hasOwnProperty Ë¢´ÈùûÊ≥ïÂç†Áî®ÔºåÂõ†Ê≠§Â¶ÇÊûú‰∏Ä‰∏™ÂØπË±°Á¢∞Â∑ßÂ≠òÂú®Ëøô‰∏™Â±ûÊÄßÔºå Â∞±ÈúÄË¶Å‰ΩøÁî®Â§ñÈÉ®ÁöÑ hasOwnProperty ÂáΩÊï∞Êù•Ëé∑ÂèñÊ≠£Á°ÆÁöÑÁªìÊûú„ÄÇ 1234567891011var foo = &#123; hasOwnProperty: function() &#123; return false; &#125;, bar: &#x27;Here be dragons&#x27;&#125;;foo.hasOwnProperty(&#x27;bar&#x27;); // ÊÄªÊòØËøîÂõû false// ‰ΩøÁî®ÂÖ∂ÂÆÉÂØπË±°ÁöÑ hasOwnPropertyÔºåÂπ∂Â∞ÜÂÖ∂‰∏ä‰∏ãÊñáËÆæÁΩÆ‰∏∫foo(&#123;&#125;).hasOwnProperty.call(foo, &#x27;bar&#x27;); // true ÁªìËÆ∫ÂΩìÊ£ÄÊü•ÂØπË±°‰∏äÊüê‰∏™Â±ûÊÄßÊòØÂê¶Â≠òÂú®Êó∂ÔºåhasOwnProperty ÊòØÂîØ‰∏ÄÂèØÁî®ÁöÑÊñπÊ≥ï„ÄÇ ÂêåÊó∂Âú®‰ΩøÁî® for in loop ÈÅçÂéÜÂØπË±°Êó∂ÔºåÊé®ËçêÊÄªÊòØ‰ΩøÁî® hasOwnProperty ÊñπÊ≥ïÔºå ËøôÂ∞Ü‰ºöÈÅøÂÖçÂéüÂûãÂØπË±°Êâ©Â±ïÂ∏¶Êù•ÁöÑÂπ≤Êâ∞„ÄÇ for in Âæ™ÁéØÂíå in Êìç‰ΩúÁ¨¶‰∏ÄÊ†∑Ôºåfor in Âæ™ÁéØÂêåÊ†∑Âú®Êü•ÊâæÂØπË±°Â±ûÊÄßÊó∂ÈÅçÂéÜÂéüÂûãÈìæ‰∏äÁöÑÊâÄÊúâÂ±ûÊÄß„ÄÇ Ê≥®ÊÑè: for in Âæ™ÁéØ‰∏ç‰ºöÈÅçÂéÜÈÇ£‰∫õ enumerable ËÆæÁΩÆ‰∏∫ false ÁöÑÂ±ûÊÄßÔºõÊØîÂ¶ÇÊï∞ÁªÑÁöÑ length Â±ûÊÄß„ÄÇ 1234567// ‰øÆÊîπ Object.prototypeObject.prototype.bar = 1;var foo = &#123;moo: 2&#125;;for(var i in foo) &#123; console.log(i); // ËæìÂá∫‰∏§‰∏™Â±ûÊÄßÔºöbar Âíå moo&#125; Áî±‰∫é‰∏çÂèØËÉΩÊîπÂèò for in Ëá™Ë∫´ÁöÑË°å‰∏∫ÔºåÂõ†Ê≠§ÊúâÂøÖË¶ÅËøáÊª§Âá∫ÈÇ£‰∫õ‰∏çÂ∏åÊúõÂá∫Áé∞Âú®Âæ™ÁéØ‰Ωì‰∏≠ÁöÑÂ±ûÊÄßÔºå ËøôÂèØ‰ª•ÈÄöËøá Object.prototype ÂéüÂûã‰∏äÁöÑ hasOwnPropertyÂáΩÊï∞Êù•ÂÆåÊàê„ÄÇ Ê≥®ÊÑè: Áî±‰∫é for in ÊÄªÊòØË¶ÅÈÅçÂéÜÊï¥‰∏™ÂéüÂûãÈìæÔºåÂõ†Ê≠§Â¶ÇÊûú‰∏Ä‰∏™ÂØπË±°ÁöÑÁªßÊâøÂ±ÇÊ¨°Â§™Ê∑±ÁöÑËØù‰ºöÂΩ±ÂìçÊÄßËÉΩ„ÄÇ ‰ΩøÁî® hasOwnProperty ËøáÊª§123456// foo ÂèòÈáèÊòØ‰∏ä‰æã‰∏≠ÁöÑfor(var i in foo) &#123; if (foo.hasOwnProperty(i)) &#123; console.log(i); &#125;&#125; Ëøô‰∏™ÁâàÊú¨ÁöÑ‰ª£Á†ÅÊòØÂîØ‰∏ÄÊ≠£Á°ÆÁöÑÂÜôÊ≥ï„ÄÇÁî±‰∫éÊàë‰ª¨‰ΩøÁî®‰∫Ü hasOwnPropertyÔºåÊâÄ‰ª•ËøôÊ¨°Âè™ËæìÂá∫ moo„ÄÇ Â¶ÇÊûú‰∏ç‰ΩøÁî® hasOwnPropertyÔºåÂàôËøôÊÆµ‰ª£Á†ÅÂú®ÂéüÁîüÂØπË±°ÂéüÂûãÔºàÊØîÂ¶Ç Object.prototypeÔºâË¢´Êâ©Â±ïÊó∂ÂèØËÉΩ‰ºöÂá∫Èîô„ÄÇ ‰∏Ä‰∏™ÂπøÊ≥õ‰ΩøÁî®ÁöÑÁ±ªÂ∫ì Prototype Â∞±Êâ©Â±ï‰∫ÜÂéüÁîüÁöÑ JavaScript ÂØπË±°„ÄÇ Âõ†Ê≠§ÔºåÂΩìËøô‰∏™Á±ªÂ∫ìË¢´ÂåÖÂê´Âú®È°µÈù¢‰∏≠Êó∂Ôºå‰∏ç‰ΩøÁî® hasOwnProperty ËøáÊª§ÁöÑ for in Âæ™ÁéØÈöæÂÖç‰ºöÂá∫ÈóÆÈ¢ò„ÄÇ ÊÄªÁªìÊé®ËçêÊÄªÊòØ‰ΩøÁî® hasOwnProperty„ÄÇ‰∏çË¶ÅÂØπ‰ª£Á†ÅËøêË°åÁöÑÁéØÂ¢ÉÂÅö‰ªª‰ΩïÂÅáËÆæÔºå‰∏çË¶ÅÂÅáËÆæÂéüÁîüÂØπË±°ÊòØÂê¶Â∑≤ÁªèË¢´Êâ©Â±ï‰∫Ü„ÄÇ ÊûÑÈÄ†ÂáΩÊï∞„ÄÅÂéüÂûãÂØπË±°ÂíåÂÆû‰æã‰πãÈó¥ÁöÑÂÖ≥Á≥ªÊØè‰∏™ÊûÑÈÄ†ÂáΩÊï∞ÈÉΩÊúâ‰∏Ä‰∏™prototypeÂ±ûÊÄßÊåáÂêëÂéüÂûãÂØπË±°ÔºåÂéüÂûãÂØπË±°Êúâ‰∏Ä‰∏™ÊåáÈíàÔºàconstructorÔºâÊåáÂêëÊûÑÈÄ†ÂáΩÊï∞ÔºåÂÆû‰æãÊúâ‰∏Ä‰∏™ __proto__ ÁöÑÊåáÈíàÊåáÂêëÂéüÂûãÂØπË±°ÔºåÂÆû‰æã‰∏≠ÁöÑconstructorÂ±ûÊÄß‰ºöÈÅµ‰ªéÂéüÂûãÂØπË±°ÁöÑconstructorÂ±ûÊÄßÁöÑÂÄº„ÄÇ JSÁªßÊâøÂéüÂõ†ÂæàÂ§öÈù¢ÂêëÂØπË±°ÁöÑËØ≠Ë®ÄÈÉΩÊîØÊåÅ‰∏§ÁßçÁªßÊâøÊñπÂºèÔºöÊé•Âè£ÁªßÊâøÂíåÂÆûÁé∞ÁªßÊâø„ÄÇÊé•Âè£ÁªßÊâøÂè™ÊîØÊåÅÊñπÊ≥ïÁ≠æÂêçÔºåËÄåÂÆûÁé∞ÁªßÊâøÂàôÁªßÊâøÂÆûÈôÖÁöÑÊñπÊ≥ï„ÄÇÁî±‰∫éÂáΩÊï∞Ê≤°ÊúâÁ≠æÂêçÔºåECMAScriptÂè™ÊîØÊåÅÂÆûÁé∞ÁªßÊâøÔºåËÄå‰∏îÂÖ∂ÂÆûÁé∞ÁªßÊâø‰∏ªË¶ÅÊòØ‰æùÈù†ÂéüÂûãÈìæÊù•ÂÆûÁé∞ÁöÑ„ÄÇ ÂéüÂûãÈìæÂéüÂûãÈìæÁöÑÂü∫Êú¨Ê¶ÇÂøµÔºö ÂÆû‰æãÂíåÂéüÂûãÂØπË±°ÊòØÊúâÁõ¥Êé•ÂÖ≥Á≥ªÁöÑÔºåËÄåÂíåÊûÑÈÄ†ÂáΩÊï∞Ê≤°ÊúâÁõ¥Êé•ÂÖ≥Á≥ªÔºåÊâÄ‰ª•ÂéüÂûãÂØπË±°ÊòØÂè¶Â§ñ‰∏Ä‰∏™ÂØπË±°ÁöÑÂÆû‰æãÁöÑÊó∂ÂÄôÔºåÂéüÂûãÈìæÂÖ∂ÂÆûÂ∞±Âª∂‰º∏‰∫ÜÔºåÂ¶ÇÊ≠§Â±ÇÂ±ÇÈÄíËøõÔºåÂ∞±ÊûÑÊàê‰∫ÜÂÆû‰æãÂíåÂéüÂûãÁöÑÈìæÊù°„ÄÇ ÁªßÊâøÂÆûÁé∞ÁöÑÊú¨Ë¥®ÊòØÈáçÂÜôÂéüÂûãÂØπË±°Ôºå‰ª£‰πã‰ª•‰∏Ä‰∏™Êñ∞Á±ªÂûãÁöÑÂÆû‰æã„ÄÇ 123456789101112131415161718function SuperType()&#123; this.property = true;&#125;SuperType.prototype.getSuperValue = function()&#123; return this.property;&#125;;function SubType()&#123; this.subproperty = false;&#125;//ÁªßÊâø‰∫Ü SuperTypeSubType.prototype = new SuperType();SubType.prototype.getSubValue = function ()&#123; return this.subproperty;&#125;;var instance = new SubType();alert(instance.getSuperValue()); ‰ª•‰∏ä‰ª£Á†ÅÂÆö‰πâ‰∫Ü‰∏§‰∏™Á±ªÂûã:SuperType Âíå SubType„ÄÇÊØè‰∏™Á±ªÂûãÂàÜÂà´Êúâ‰∏Ä‰∏™Â±ûÊÄßÂíå‰∏Ä‰∏™ÊñπÊ≥ï„ÄÇÂÆÉ‰ª¨ÁöÑ‰∏ªË¶ÅÂå∫Âà´ÊòØ SubType ÁªßÊâø‰∫Ü SuperTypeÔºåËÄåÁªßÊâøÊòØÈÄöËøáÂàõÂª∫ SuperType ÁöÑÂÆû‰æãÔºåÂπ∂Â∞ÜËØ•ÂÆû‰æãËµãÁªôSubType.prototype ÂÆûÁé∞ÁöÑ„ÄÇÂÆûÁé∞ÁöÑÊú¨Ë¥®ÊòØÈáçÂÜôÂéüÂûãÂØπË±°Ôºå‰ª£‰πã‰ª•‰∏Ä‰∏™Êñ∞Á±ªÂûãÁöÑÂÆû‰æã„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂéüÊù•Â≠òÂú®‰∫é SuperType ÁöÑÂÆû‰æã‰∏≠ÁöÑÊâÄÊúâÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåÁé∞Âú®‰πüÂ≠òÂú®‰∫é SubType.prototype ‰∏≠‰∫Ü„ÄÇÂú®Á°ÆÁ´ã‰∫ÜÁªßÊâøÂÖ≥Á≥ª‰πãÂêéÔºåÊàë‰ª¨Áªô SubType.prototype Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™ÊñπÊ≥ïÔºåËøôÊ†∑Â∞±Âú®ÁªßÊâø‰∫Ü SuperType ÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÁöÑÂü∫Á°Ä‰∏äÂèàÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™Êñ∞ÊñπÊ≥ï„ÄÇËøô‰∏™‰æãÂ≠ê‰∏≠ÁöÑÂÆû‰æã‰ª•ÂèäÊûÑÈÄ†ÂáΩÊï∞ÂíåÂéüÂûã‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂ¶Ç‰∏ãÂõæ„ÄÇ Âú®‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÔºåÊàë‰ª¨Ê≤°Êúâ‰ΩøÁî® SubType ÈªòËÆ§Êèê‰æõÁöÑÂéüÂûãÔºåËÄåÊòØÁªôÂÆÉÊç¢‰∫Ü‰∏Ä‰∏™Êñ∞ÂéüÂûã;Ëøô‰∏™Êñ∞ÂéüÂûãÂ∞±ÊòØ SuperType ÁöÑÂÆû‰æã„ÄÇ‰∫éÊòØÔºåÊñ∞ÂéüÂûã‰∏ç‰ªÖÂÖ∑Êúâ‰Ωú‰∏∫‰∏Ä‰∏™ SuperType ÁöÑÂÆû‰æãÊâÄÊã•ÊúâÁöÑÂÖ®ÈÉ®Â±ûÊÄßÂíåÊñπÊ≥ïÔºåËÄå‰∏îÂÖ∂ÂÜÖÈÉ®ËøòÊúâ‰∏Ä‰∏™ÊåáÈíàÔºåÊåáÂêë‰∫Ü SuperType ÁöÑÂéüÂûã„ÄÇÊúÄÁªàÁªìÊûúÂ∞±ÊòØËøôÊ†∑ÁöÑ:instance ÊåáÂêë SubType ÁöÑÂéüÂûãÔºåSubType ÁöÑÂéüÂûãÂèàÊåáÂêë SuperType ÁöÑÂéüÂûã„ÄÇgetSuperValue()ÊñπÊ≥ï‰ªçÁÑ∂ËøòÂú®SuperType.prototype ‰∏≠Ôºå‰ΩÜ property Âàô‰Ωç‰∫éSubType.prototype ‰∏≠„ÄÇËøôÊòØÂõ†‰∏∫ property ÊòØ‰∏Ä‰∏™ÂÆû‰æãÂ±ûÊÄßÔºåËÄå getSuperValue()ÂàôÊòØ‰∏Ä‰∏™ÂéüÂûãÊñπÊ≥ï„ÄÇÊó¢ÁÑ∂SubType.prototype Áé∞Âú®ÊòØ SuperTypeÁöÑÂÆû‰æãÔºåÈÇ£‰πà property ÂΩìÁÑ∂Â∞±‰Ωç‰∫éËØ•ÂÆû‰æã‰∏≠‰∫Ü„ÄÇÊ≠§Â§ñÔºåË¶ÅÊ≥®ÊÑè instance.constructor Áé∞Âú®ÊåáÂêëÁöÑ ÊòØ SuperTypeÔºåËøôÊòØÂõ†‰∏∫ÂéüÊù• SubType.prototype ‰∏≠ÁöÑ constructor Ë¢´ÈáçÂÜô‰∫ÜÁöÑÁºòÊïÖ( ÂÆûÈôÖ‰∏äÔºå‰∏çÊòØ SubType ÁöÑÂéüÂûãÁöÑ constructor Â±ûÊÄßË¢´ÈáçÂÜô‰∫ÜÔºåËÄåÊòØ SubType ÁöÑÂéüÂûãÊåáÂêë‰∫ÜÂè¶‰∏Ä‰∏™ÂØπË±°‚Äî‚ÄîSuperType ÁöÑÂéüÂûãÔºåËÄåËøô‰∏™ÂéüÂûãÂØπË±°ÁöÑ constructor Â±ûÊÄßÊåáÂêëÁöÑÊòØ SuperType„ÄÇ)„ÄÇ ÈÄöËøáÂÆûÁé∞ÂéüÂûãÈìæÔºåÊú¨Ë¥®‰∏äÊâ©Â±ï‰∫ÜÊú¨Á´†ÂâçÈù¢‰ªãÁªçÁöÑÂéüÂûãÊêúÁ¥¢Êú∫Âà∂„ÄÇËØªËÄÖÂ§ßÊ¶ÇËøòËÆ∞ÂæóÔºåÂΩì‰ª•ËØªÂèñÊ®°ÂºèËÆø ÈóÆ‰∏Ä‰∏™ÂÆû‰æãÂ±ûÊÄßÊó∂ÔºåÈ¶ñÂÖà‰ºöÂú®ÂÆû‰æã‰∏≠ÊêúÁ¥¢ËØ•Â±ûÊÄß„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ËØ•Â±ûÊÄßÔºåÂàô‰ºöÁªßÁª≠ÊêúÁ¥¢ÂÆû‰æãÁöÑÂéüÂûã„ÄÇÂú® ÈÄöËøáÂéüÂûãÈìæÂÆûÁé∞ÁªßÊâøÁöÑÊÉÖÂÜµ‰∏ãÔºåÊêúÁ¥¢ËøáÁ®ãÂ∞±Âæó‰ª•Ê≤øÁùÄÂéüÂûãÈìæÁªßÁª≠Âêë‰∏ä„ÄÇÂ∞±Êãø‰∏äÈù¢ÁöÑ‰æãÂ≠êÊù•ËØ¥ÔºåË∞ÉÁî® instance.getSuperValue()‰ºöÁªèÂéÜ‰∏â‰∏™ÊêúÁ¥¢Ê≠•È™§:1)ÊêúÁ¥¢ÂÆû‰æã;2)ÊêúÁ¥¢ SubType.prototype; 3)ÊêúÁ¥¢ SuperType.prototypeÔºåÊúÄÂêé‰∏ÄÊ≠•Êâç‰ºöÊâæÂà∞ËØ•ÊñπÊ≥ï„ÄÇÂú®Êâæ‰∏çÂà∞Â±ûÊÄßÊàñÊñπÊ≥ïÁöÑÊÉÖÂÜµ‰∏ãÔºåÊêúÁ¥¢Ëøá Á®ãÊÄªÊòØË¶Å‰∏ÄÁéØ‰∏ÄÁéØÂú∞ÂâçË°åÂà∞ÂéüÂûãÈìæÊú´Á´ØÊâç‰ºöÂÅú‰∏ãÊù•„ÄÇ 1. Âà´ÂøòËÆ∞ÈªòËÆ§ÁöÑÂéüÂûã ‰∫ãÂÆû‰∏äÔºåÂâçÈù¢‰æãÂ≠ê‰∏≠Â±ïÁ§∫ÁöÑÂéüÂûãÈìæËøòÂ∞ë‰∏ÄÁéØ„ÄÇÊàë‰ª¨Áü•ÈÅìÔºåÊâÄÊúâÂºïÁî®Á±ªÂûãÈªòËÆ§ÈÉΩÁªßÊâø‰∫Ü ObjectÔºåËÄåËøô‰∏™ÁªßÊâø‰πüÊòØÈÄöËøáÂéüÂûãÈìæÂÆûÁé∞ÁöÑ„ÄÇÂ§ßÂÆ∂Ë¶ÅËÆ∞‰ΩèÔºåÊâÄÊúâÂáΩÊï∞ÁöÑÈªòËÆ§ÂéüÂûãÈÉΩÊòØ Object ÁöÑÂÆû‰æãÔºåÂõ†Ê≠§ÈªòËÆ§ÂéüÂûãÈÉΩ‰ºöÂåÖÂê´‰∏Ä‰∏™ÂÜÖÈÉ®ÊåáÈíàÔºåÊåáÂêë Object.prototype„ÄÇËøô‰πüÊ≠£ÊòØÊâÄÊúâËá™ÂÆö‰πâÁ±ªÂûãÈÉΩ‰ºöÁªßÊâø toString()„ÄÅvalueOf()Á≠âÈªòËÆ§ÊñπÊ≥ïÁöÑÊ†πÊú¨ÂéüÂõ†„ÄÇÊâÄ‰ª•ÔºåÊàë‰ª¨ËØ¥‰∏äÈù¢‰æãÂ≠êÂ±ïÁ§∫ÁöÑÂéüÂûãÈìæ‰∏≠ËøòÂ∫îËØ•ÂåÖÊã¨Âè¶Â§ñ‰∏Ä‰∏™ÁªßÊâøÂ±ÇÊ¨°„ÄÇ ‰∏ÄÂè•ËØùÔºåSubType ÁªßÊâø‰∫Ü SuperTypeÔºåËÄå SuperType ÁªßÊâø‰∫Ü Object„ÄÇÂΩìË∞ÉÁî® instance.toString() Êó∂ÔºåÂÆûÈôÖ‰∏äË∞ÉÁî®ÁöÑÊòØ‰øùÂ≠òÂú® Object.prototype ‰∏≠ÁöÑÈÇ£‰∏™ÊñπÊ≥ï„ÄÇ 2.Á°ÆÂÆöÂéüÂûãÂíåÂÆû‰æãÁöÑÂÖ≥Á≥ª ÂèØ‰ª•ÈÄöËøá‰∏§ÁßçÊñπÂºèÊù•Á°ÆÂÆöÂéüÂûãÂíåÂÆû‰æã‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇÁ¨¨‰∏ÄÁßçÊñπÂºèÊòØ‰ΩøÁî® instanceof Êìç‰ΩúÁ¨¶ÔºåÂè™Ë¶ÅÁî® Ëøô‰∏™Êìç‰ΩúÁ¨¶Êù•ÊµãËØïÂÆû‰æã‰∏éÂéüÂûãÈìæ‰∏≠Âá∫Áé∞ËøáÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÁªìÊûúÂ∞±‰ºöËøîÂõû true„ÄÇ‰ª•‰∏ãÂá†Ë°å‰ª£Á†ÅÂ∞±ËØ¥Êòé‰∫ÜËøô ‰∏ÄÁÇπ„ÄÇ 123alert(instance instanceof Object); //truealert(instance instanceof SuperType); //truealert(instance instanceof SubType); //true Áî±‰∫éÂéüÂûãÈìæÁöÑÂÖ≥Á≥ªÔºåÊàë‰ª¨ÂèØ‰ª•ËØ¥ instance ÊòØ Object„ÄÅSuperType Êàñ SubType ‰∏≠‰ªª‰Ωï‰∏Ä‰∏™Á±ªÂûã ÁöÑÂÆû‰æã„ÄÇÂõ†Ê≠§ÔºåÊµãËØïËøô‰∏â‰∏™ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÁªìÊûúÈÉΩËøîÂõû‰∫Ü true„ÄÇ Á¨¨‰∫åÁßçÊñπÂºèÊòØ‰ΩøÁî® isPrototypeOf()ÊñπÊ≥ï„ÄÇÂêåÊ†∑ÔºåÂè™Ë¶ÅÊòØÂéüÂûãÈìæ‰∏≠Âá∫Áé∞ËøáÁöÑÂéüÂûãÔºåÈÉΩÂèØ‰ª•ËØ¥ÊòØËØ• ÂéüÂûãÈìæÊâÄÊ¥æÁîüÁöÑÂÆû‰æãÁöÑÂéüÂûãÔºåÂõ†Ê≠§ isPrototypeOf()ÊñπÊ≥ï‰πü‰ºöËøîÂõû trueÔºåÂ¶Ç‰∏ãÊâÄÁ§∫„ÄÇ 123alert(Object.prototype.isPrototypeOf(instance)); //truealert(SuperType.prototype.isPrototypeOf(instance)); //true alert(SubType.prototype.isPrototypeOf(instance)); //true 3.Ë∞®ÊÖéÁöÑÂÆö‰πâÊñπÊ≥ï Â≠êÁ±ªÂûãÊúâÊó∂ÂÄôÈúÄË¶ÅÈáçÂÜôË∂ÖÁ±ªÂûã‰∏≠ÁöÑÊüê‰∏™ÊñπÊ≥ïÔºåÊàñËÄÖÈúÄË¶ÅÊ∑ªÂä†Ë∂ÖÁ±ªÂûã‰∏≠‰∏çÂ≠òÂú®ÁöÑÊüê‰∏™ÊñπÊ≥ï„ÄÇ‰ΩÜ‰∏çÁÆ°ÊÄéÊ†∑ÔºåÁªôÂéüÂûãÊ∑ªÂä†ÊñπÊ≥ïÁöÑ‰ª£Á†Å‰∏ÄÂÆöË¶ÅÊîæÂú®ÊõøÊç¢ÂéüÂûãÁöÑËØ≠Âè•‰πãÂêé„ÄÇÊù•Áúã‰∏ãÈù¢ÁöÑ‰æãÂ≠ê„ÄÇ 1234567891011121314151617181920function SuperType()&#123; this.property = true;&#125;SuperType.prototype.getSuperValue = function()&#123; return this.property;&#125;;function SubType()&#123; this.subproperty = false;&#125;//ÁªßÊâø‰∫Ü SuperTypeSubType.prototype = new SuperType();//Ê∑ªÂä†Êñ∞ÊñπÊ≥ïSubType.prototype.getSubValue = function ()&#123; return this.subproperty;&#125;;//ÈáçÂÜôË∂ÖÁ±ªÂûã‰∏≠ÁöÑÊñπÊ≥ï SubType.prototype.getSuperValue = function ()&#123; return false;&#125;;var instance = new SubType();alert(instance.getSuperValue()); //false Âú®‰ª•‰∏ä‰ª£Á†Å‰∏≠ÔºåÂä†Á≤óÁöÑÈÉ®ÂàÜÊòØ‰∏§‰∏™ÊñπÊ≥ïÁöÑÂÆö‰πâ„ÄÇÁ¨¨‰∏Ä‰∏™ÊñπÊ≥ï getSubValue()Ë¢´Ê∑ªÂä†Âà∞‰∫Ü SubType‰∏≠„ÄÇÁ¨¨‰∫å‰∏™ÊñπÊ≥ï getSuperValue()ÊòØÂéüÂûãÈìæ‰∏≠Â∑≤ÁªèÂ≠òÂú®ÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïÔºå‰ΩÜÈáçÂÜôËøô‰∏™ÊñπÊ≥ïÂ∞Ü‰ºöÂ±èËîΩÂéüÊù•ÁöÑÈÇ£‰∏™ÊñπÊ≥ï„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂΩìÈÄöËøá SubType ÁöÑÂÆû‰æãË∞ÉÁî® getSuperValue()Êó∂ÔºåË∞ÉÁî®ÁöÑÂ∞±ÊòØËøô‰∏™ÈáçÊñ∞ÂÆö‰πâÁöÑÊñπÊ≥ï;‰ΩÜÈÄöËøá SuperType ÁöÑÂÆû‰æãË∞ÉÁî® getSuperValue()Êó∂ÔºåËøò‰ºöÁªßÁª≠Ë∞ÉÁî®ÂéüÊù•ÁöÑÈÇ£‰∏™ÊñπÊ≥ï„ÄÇËøôÈáåË¶ÅÊ†ºÂ§ñÊ≥®ÊÑèÁöÑÊòØÔºåÂøÖÈ°ªÂú®Áî® SuperType ÁöÑÂÆû‰æãÊõøÊç¢ÂéüÂûã‰πãÂêéÔºåÂÜçÂÆö‰πâËøô‰∏§‰∏™ÊñπÊ≥ï„ÄÇ ËøòÊúâ‰∏ÄÁÇπÈúÄË¶ÅÊèêÈÜíËØªËÄÖÔºåÂç≥Âú®ÈÄöËøáÂéüÂûãÈìæÂÆûÁé∞ÁªßÊâøÊó∂Ôºå‰∏çËÉΩ‰ΩøÁî®ÂØπË±°Â≠óÈù¢ÈáèÂàõÂª∫ÂéüÂûãÊñπÊ≥ï„ÄÇÂõ†‰∏∫ËøôÊ†∑ÂÅöÂ∞±‰ºöÈáçÂÜôÂéüÂûãÈìæÔºåÂ¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊâÄÁ§∫„ÄÇ 1234567891011121314151617181920function SuperType()&#123; this.property = true;&#125;SuperType.prototype.getSuperValue = function()&#123; return this.property;&#125;;function SubType()&#123; this.subproperty = false;&#125;//ÁªßÊâø‰∫Ü SuperTypeSubType.prototype = new SuperType();//‰ΩøÁî®Â≠óÈù¢ÈáèÊ∑ªÂä†Êñ∞ÊñπÊ≥ïÔºå‰ºöÂØºËá¥‰∏ä‰∏ÄË°å‰ª£Á†ÅÊó†Êïà SubType.prototype = &#123; getSubValue : function ()&#123; return this.subproperty;&#125;, someOtherMethod : function ()&#123; return false;&#125; &#125;;var instance = new SubType();alert(instance.getSuperValue()); //error! ‰ª•‰∏ä‰ª£Á†ÅÂ±ïÁ§∫‰∫ÜÂàöÂàöÊää SuperType ÁöÑÂÆû‰æãËµãÂÄºÁªôÂéüÂûãÔºåÁ¥ßÊé•ÁùÄÂèàÂ∞ÜÂéüÂûãÊõøÊç¢Êàê‰∏Ä‰∏™ÂØπË±°Â≠óÈù¢ÈáèËÄåÂØºËá¥ÁöÑÈóÆÈ¢ò„ÄÇÁî±‰∫éÁé∞Âú®ÁöÑÂéüÂûãÂåÖÂê´ÁöÑÊòØ‰∏Ä‰∏™ Object ÁöÑÂÆû‰æãÔºåËÄåÈùû SuperType ÁöÑÂÆû‰æãÔºåÂõ†Ê≠§Êàë‰ª¨ËÆæÊÉ≥‰∏≠ÁöÑÂéüÂûãÈìæÂ∑≤ÁªèË¢´ÂàáÊñ≠‚Äî‚ÄîSubType Âíå SuperType ‰πãÈó¥Â∑≤ÁªèÊ≤°ÊúâÂÖ≥Á≥ª‰∫Ü„ÄÇ 4.ÂéüÂûãÈìæÁöÑÈóÆÈ¢òÔºàÂéüÂûã‰∏≠ÁöÑÂºïÁî®Á±ªÂûãÂ±ûÊÄß‰ºöÂÖ±‰∫´ÔºåÊØîÂ¶ÇÊï∞ÁªÑÔºâ ÂéüÂûãÈìæËôΩÁÑ∂ÂæàÂº∫Â§ßÔºåÂèØ‰ª•Áî®ÂÆÉÊù•ÂÆûÁé∞ÁªßÊâøÔºå‰ΩÜÂÆÉ‰πüÂ≠òÂú®‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇÂÖ∂‰∏≠ÔºåÊúÄ‰∏ªË¶ÅÁöÑÈóÆÈ¢òÊù•Ëá™ÂåÖÂê´ÂºïÁî®Á±ªÂûãÂÄºÁöÑÂéüÂûã„ÄÇÊÉ≥ÂøÖÂ§ßÂÆ∂ËøòËÆ∞ÂæóÔºåÊàë‰ª¨ÂâçÈù¢‰ªãÁªçËøáÂåÖÂê´ÂºïÁî®Á±ªÂûãÂÄºÁöÑÂéüÂûãÂ±ûÊÄß‰ºöË¢´ÊâÄÊúâÂÆû‰æãÂÖ±‰∫´;ËÄåËøô‰πüÊ≠£ÊòØ‰∏∫‰ªÄ‰πàË¶ÅÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÔºåËÄå‰∏çÊòØÂú®ÂéüÂûãÂØπË±°‰∏≠ÂÆö‰πâÂ±ûÊÄßÁöÑÂéüÂõ†„ÄÇÂú®ÈÄöËøáÂéüÂûãÊù•ÂÆûÁé∞ÁªßÊâøÊó∂ÔºåÂéüÂûãÂÆûÈôÖ‰∏ä‰ºöÂèòÊàêÂè¶‰∏Ä‰∏™Á±ªÂûãÁöÑÂÆû‰æã„ÄÇ‰∫éÊòØÔºåÂéüÂÖàÁöÑÂÆû‰æãÂ±ûÊÄß‰πüÂ∞±È°∫ÁêÜÊàêÁ´†Âú∞ÂèòÊàê‰∫ÜÁé∞Âú®ÁöÑÂéüÂûãÂ±ûÊÄß‰∫Ü„ÄÇ‰∏ãÂàó‰ª£Á†ÅÂèØ‰ª•Áî®Êù•ËØ¥ÊòéËøô‰∏™ÈóÆÈ¢ò„ÄÇ 1234567891011121314function SuperType()&#123; this.colors = [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;]; &#125;function SubType()&#123;&#125;//ÁªßÊâø‰∫Ü SuperTypeSubType.prototype = new SuperType();var instance1 = new SubType(); instance1.colors.push(&quot;black&quot;); alert(instance1.colors); //&quot;red,blue,green,black&quot;var instance2 = new SubType(); alert(instance2.colors); //&quot;red,blue,green,black&quot; Ëøô‰∏™‰æãÂ≠ê‰∏≠ÁöÑ SuperType ÊûÑÈÄ†ÂáΩÊï∞ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ colors Â±ûÊÄßÔºåËØ•Â±ûÊÄßÂåÖÂê´‰∏Ä‰∏™Êï∞ÁªÑ(ÂºïÁî®Á±ªÂûãÂÄº)„ÄÇ SuperType ÁöÑÊØè‰∏™ÂÆû‰æãÈÉΩ‰ºöÊúâÂêÑËá™ÂåÖÂê´Ëá™Â∑±Êï∞ÁªÑÁöÑ colors Â±ûÊÄß„ÄÇÂΩì SubType ÈÄöËøáÂéüÂûãÈìæÁªßÊâø‰∫Ü SuperType ‰πãÂêéÔºåSubType.prototype Â∞±ÂèòÊàê‰∫Ü SuperType ÁöÑ‰∏Ä‰∏™ÂÆû‰æãÔºåÂõ†Ê≠§ÂÆÉ‰πüÊã•Êúâ‰∫Ü‰∏Ä‰∏™ÂÆÉËá™ Â∑±ÁöÑ colors Â±ûÊÄß‚Äî‚ÄîÂ∞±Ë∑ü‰∏ìÈó®ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ SubType.prototype.colors Â±ûÊÄß‰∏ÄÊ†∑„ÄÇ‰ΩÜÁªìÊûúÊòØ‰ªÄ‰πà Âë¢?ÁªìÊûúÊòØ SubType ÁöÑÊâÄÊúâÂÆû‰æãÈÉΩ‰ºöÂÖ±‰∫´Ëøô‰∏Ä‰∏™ colors Â±ûÊÄß„ÄÇËÄåÊàë‰ª¨ÂØπ instance1.colors ÁöÑ‰øÆÊîπ ËÉΩÂ§üÈÄöËøá instance2.colors ÂèçÊò†Âá∫Êù•ÔºåÂ∞±Â∑≤ÁªèÂÖÖÂàÜËØÅÂÆû‰∫ÜËøô‰∏ÄÁÇπ„ÄÇ ÂéüÂûãÈìæÁöÑÁ¨¨‰∫å‰∏™ÈóÆÈ¢òÊòØ:Âú®ÂàõÂª∫Â≠êÁ±ªÂûãÁöÑÂÆû‰æãÊó∂Ôºå‰∏çËÉΩÂêëË∂ÖÁ±ªÂûãÁöÑÊûÑÈÄ†ÂáΩÊï∞‰∏≠‰º†ÈÄíÂèÇÊï∞„ÄÇÂÆûÈôÖ‰∏äÔºå Â∫îËØ•ËØ¥ÊòØÊ≤°ÊúâÂäûÊ≥ïÂú®‰∏çÂΩ±ÂìçÊâÄÊúâÂØπË±°ÂÆû‰æãÁöÑÊÉÖÂÜµ‰∏ãÔºåÁªôË∂ÖÁ±ªÂûãÁöÑÊûÑÈÄ†ÂáΩÊï∞‰º†ÈÄíÂèÇÊï∞„ÄÇÊúâÈâ¥‰∫éÊ≠§ÔºåÂÜçÂä†‰∏ä ÂâçÈù¢ÂàöÂàöËÆ®ËÆ∫ËøáÁöÑÁî±‰∫éÂéüÂûã‰∏≠ÂåÖÂê´ÂºïÁî®Á±ªÂûãÂÄºÊâÄÂ∏¶Êù•ÁöÑÈóÆÈ¢òÔºåÂÆûË∑µ‰∏≠ÂæàÂ∞ë‰ºöÂçïÁã¨‰ΩøÁî®ÂéüÂûãÈìæ„ÄÇ ÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞Âú®Ëß£ÂÜ≥ÂéüÂûã‰∏≠ÂåÖÂê´ÂºïÁî®Á±ªÂûãÂÄºÊâÄÂ∏¶Êù•ÈóÆÈ¢òÁöÑËøáÁ®ã‰∏≠ÔºåÂºÄÂèë‰∫∫ÂëòÂºÄÂßã‰ΩøÁî®‰∏ÄÁßçÂè´ÂÅöÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞ (constructor stealing)ÁöÑÊäÄÊúØ(ÊúâÊó∂ÂÄô‰πüÂè´ÂÅö‰º™ÈÄ†ÂØπË±°ÊàñÁªèÂÖ∏ÁªßÊâø)„ÄÇËøôÁßçÊäÄÊúØÁöÑÂü∫Êú¨ÊÄùÊÉ≥Áõ∏ÂΩìÁÆÄÂçïÔºåÂç≥ Âú®Â≠êÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂÜÖÈÉ®Ë∞ÉÁî®Ë∂ÖÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞„ÄÇÂà´Âøò‰∫ÜÔºåÂáΩÊï∞Âè™‰∏çËøáÊòØÂú®ÁâπÂÆöÁéØÂ¢É‰∏≠ÊâßË°å‰ª£Á†ÅÁöÑÂØπË±°Ôºå Âõ†Ê≠§ÈÄöËøá‰ΩøÁî® apply()Âíå call()ÊñπÊ≥ï‰πüÂèØ‰ª•Âú®(Â∞ÜÊù•)Êñ∞ÂàõÂª∫ÁöÑÂØπË±°‰∏äÊâßË°åÊûÑÈÄ†ÂáΩÊï∞ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫: 123456789101112131415function SuperType()&#123; this.colors = [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;];&#125; function SubType()&#123; //ÁªßÊâø‰∫Ü SuperType SuperType.call(this);&#125;var instance1 = new SubType();instance1.colors.push(&quot;black&quot;);alert(instance1.colors); //&quot;red,blue,green,black&quot;var instance2 = new SubType();alert(instance2.colors); //&quot;red,blue,green&quot; ‰ª£Á†Å‰∏≠Âä†Á≤óÁöÑÈÇ£‰∏ÄË°å‰ª£Á†Å‚ÄúÂÄüË∞É‚Äù‰∫ÜË∂ÖÁ±ªÂûãÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇÈÄöËøá‰ΩøÁî® call()ÊñπÊ≥ï(Êàñ apply()ÊñπÊ≥ï‰πüÂèØ‰ª•)ÔºåÊàë‰ª¨ÂÆûÈôÖ‰∏äÊòØÂú®(Êú™Êù•Â∞ÜË¶Å)Êñ∞ÂàõÂª∫ÁöÑ SubType ÂÆû‰æãÁöÑÁéØÂ¢É‰∏ãË∞ÉÁî®‰∫Ü SuperType ÊûÑÈÄ†ÂáΩÊï∞„ÄÇËøôÊ†∑‰∏ÄÊù•ÔºåÂ∞±‰ºöÂú®Êñ∞ SubType ÂØπË±°‰∏äÊâßË°å SuperType()ÂáΩÊï∞‰∏≠ÂÆö‰πâÁöÑÊâÄÊúâÂØπË±°ÂàùÂßãÂåñ‰ª£Á†Å„ÄÇÁªìÊûúÔºåSubType ÁöÑÊØè‰∏™ÂÆû‰æãÂ∞±ÈÉΩ‰ºöÂÖ∑ÊúâËá™Â∑±ÁöÑ colors Â±ûÊÄßÁöÑÂâØÊú¨‰∫Ü„ÄÇ ‰º†ÈÄíÂèÇÊï∞ Áõ∏ÂØπ‰∫éÂéüÂûãÈìæËÄåË®ÄÔºåÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞Êúâ‰∏Ä‰∏™ÂæàÂ§ßÁöÑ‰ºòÂäøÔºåÂç≥ÂèØ‰ª•Âú®Â≠êÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂêëË∂ÖÁ±ªÂûãÊûÑÈÄ†ÂáΩ Êï∞‰º†ÈÄíÂèÇÊï∞„ÄÇÁúã‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠ê„ÄÇ 12345678910111213function SuperType(name)&#123; this.name = name;&#125;function SubType()&#123; //ÁªßÊâø‰∫Ü SuperTypeÔºåÂêåÊó∂Ëøò‰º†ÈÄí‰∫ÜÂèÇÊï∞ SuperType.call(this, &quot;Nicholas&quot;); //ÂÆû‰æãÂ±ûÊÄß this.age = 29;&#125;var instance = new SubType();alert(instance.name); //&quot;Nicholas&quot;;alert(instance.age); //29 ‰ª•‰∏ä‰ª£Á†Å‰∏≠ÁöÑ SuperType Âè™Êé•Âèó‰∏Ä‰∏™ÂèÇÊï∞ nameÔºåËØ•ÂèÇÊï∞‰ºöÁõ¥Êé•ËµãÁªô‰∏Ä‰∏™Â±ûÊÄß„ÄÇÂú® SubType ÊûÑÈÄ† ÂáΩÊï∞ÂÜÖÈÉ®Ë∞ÉÁî® SuperType ÊûÑÈÄ†ÂáΩÊï∞Êó∂ÔºåÂÆûÈôÖ‰∏äÊòØ‰∏∫ SubType ÁöÑÂÆû‰æãËÆæÁΩÆ‰∫Ü name Â±ûÊÄß„ÄÇ‰∏∫‰∫ÜÁ°Æ‰øù SuperType ÊûÑÈÄ†ÂáΩÊï∞‰∏ç‰ºöÈáçÂÜôÂ≠êÁ±ªÂûãÁöÑÂ±ûÊÄßÔºåÂèØ‰ª•Âú®Ë∞ÉÁî®Ë∂ÖÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞ÂêéÔºåÂÜçÊ∑ªÂä†Â∫îËØ•Âú®Â≠êÁ±ªÂûã‰∏≠ ÂÆö‰πâÁöÑÂ±ûÊÄß„ÄÇ ÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÈóÆÈ¢ò Â¶ÇÊûú‰ªÖ‰ªÖÊòØÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞ÔºåÈÇ£‰πà‰πüÂ∞ÜÊó†Ê≥ïÈÅøÂÖçÊûÑÈÄ†ÂáΩÊï∞Ê®°ÂºèÂ≠òÂú®ÁöÑÈóÆÈ¢ò‚Äî‚ÄîÊñπÊ≥ïÈÉΩÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂÆö ‰πâÔºåÂõ†Ê≠§ÂáΩÊï∞Â§çÁî®Â∞±Êó†‰ªéË∞àËµ∑‰∫Ü„ÄÇËÄå‰∏îÔºåÂú®Ë∂ÖÁ±ªÂûãÁöÑÂéüÂûã‰∏≠ÂÆö‰πâÁöÑÊñπÊ≥ïÔºåÂØπÂ≠êÁ±ªÂûãËÄåË®Ä‰πüÊòØ‰∏çÂèØËßÅÁöÑÔºåÁªì ÊûúÊâÄÊúâÁ±ªÂûãÈÉΩÂè™ËÉΩ‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞Ê®°Âºè„ÄÇËÄÉËôëÂà∞Ëøô‰∫õÈóÆÈ¢òÔºåÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÊäÄÊúØ‰πüÊòØÂæàÂ∞ëÂçïÁã¨‰ΩøÁî®ÁöÑ„ÄÇ ÁªÑÂêàÁªßÊâøÁªÑÂêàÁªßÊâø(combination inheritance)ÔºåÊúâÊó∂ÂÄô‰πüÂè´ÂÅö‰º™ÁªèÂÖ∏ÁªßÊâøÔºåÊåáÁöÑÊòØÂ∞ÜÂéüÂûãÈìæÂíåÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÊäÄÊúØÁªÑÂêàÂà∞‰∏ÄÂùóÔºå‰ªéËÄåÂèëÊå•‰∫åËÄÖ‰πãÈïøÁöÑ‰∏ÄÁßçÁªßÊâøÊ®°Âºè„ÄÇÂÖ∂ËÉåÂêéÁöÑÊÄùË∑ØÊòØ‰ΩøÁî®ÂéüÂûãÈìæÂÆûÁé∞ÂØπÂéüÂûãÂ±ûÊÄßÂíåÊñπÊ≥ïÁöÑÁªßÊâøÔºåËÄåÈÄöËøáÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞Êù•ÂÆûÁé∞ÂØπÂÆû‰æãÂ±ûÊÄßÁöÑÁªßÊâø„ÄÇËøôÊ†∑ÔºåÊó¢ÈÄöËøáÂú®ÂéüÂûã‰∏äÂÆö‰πâÊñπÊ≥ïÂÆûÁé∞‰∫ÜÂáΩÊï∞Â§çÁî®ÔºåÂèàËÉΩÂ§ü‰øùËØÅÊØè‰∏™ÂÆû‰æãÈÉΩÊúâÂÆÉËá™Â∑±ÁöÑÂ±ûÊÄß„ÄÇ‰∏ãÈù¢Êù•Áúã‰∏Ä‰∏™‰æãÂ≠ê„ÄÇ 1234567891011121314151617181920212223242526272829303132333435 function SuperType(name)&#123; this.name = name; this.colors = [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;];&#125;SuperType.prototype.sayName = function()&#123; alert(this.name);&#125; function SubType(name, age)&#123; //ÁªßÊâøÂ±ûÊÄß SuperType.call(this, name); this.age = age;&#125;//ÁªßÊâøÊñπÊ≥ïSubType.prototype = new SuperType(); //ËøôÂùóÔºåSubType.prototype.constructorÊòØSupertypeSubType.prototype.constructor = SubType; //ËøôÂùóÔºåÊâãÂä®ÊîπÂÜô‰∫ÜSubType.prototype.constructor‰∏∫ //SubTypeSubType.prototype.sayAge = function()&#123; alert(this.age);&#125;;var instance1 = new SubType(&quot;Nicholas&quot;, 29);instance1.colors.push(&quot;black&quot;);alert(instance1.colors); //&quot;red,blue,green,black&quot;instance1.sayName(); //&quot;Nicholas&quot;;instance1.sayAge(); //29 var instance2 = new SubType(&quot;Greg&quot;, 27);alert(instance2.colors);//&quot;red,blue,green&quot;instance2.sayName();//&quot;Greg&quot;;instance2.sayAge(); //27 Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåSuperType ÊûÑÈÄ†ÂáΩÊï∞ÂÆö‰πâ‰∫Ü‰∏§‰∏™Â±ûÊÄß:name Âíå colors„ÄÇSuperType ÁöÑÂéüÂûãÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÊñπÊ≥ï sayName()„ÄÇSubType ÊûÑÈÄ†ÂáΩÊï∞Âú®Ë∞ÉÁî® SuperType ÊûÑÈÄ†ÂáΩÊï∞Êó∂‰º†ÂÖ•‰∫Ü name ÂèÇÊï∞ÔºåÁ¥ßÊé•ÁùÄÂèàÂÆö‰πâ‰∫ÜÂÆÉËá™Â∑±ÁöÑÂ±ûÊÄß age„ÄÇÁÑ∂ÂêéÔºåÂ∞Ü SuperType ÁöÑÂÆû‰æãËµãÂÄºÁªô SubType ÁöÑÂéüÂûãÔºåÁÑ∂ÂêéÂèàÂú®ËØ•Êñ∞ÂéüÂûã‰∏äÂÆö‰πâ‰∫ÜÊñπÊ≥ï sayAge()„ÄÇËøôÊ†∑‰∏ÄÊù•ÔºåÂ∞±ÂèØ‰ª•ËÆ©‰∏§‰∏™‰∏çÂêåÁöÑ SubType ÂÆû‰æãÊó¢ÂàÜÂà´Êã•ÊúâËá™Â∑±Â±ûÊÄß‚Äî‚ÄîÂåÖÊã¨ colors Â±ûÊÄßÔºåÂèàÂèØ‰ª•‰ΩøÁî®Áõ∏ÂêåÁöÑÊñπÊ≥ï‰∫Ü„ÄÇ ÁªÑÂêàÁªßÊâøÈÅøÂÖç‰∫ÜÂéüÂûãÈìæÂíåÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÁº∫Èô∑ÔºåËûçÂêà‰∫ÜÂÆÉ‰ª¨ÁöÑ‰ºòÁÇπÔºåÊàê‰∏∫ JavaScript ‰∏≠ÊúÄÂ∏∏Áî®ÁöÑÁªßÊâøÊ®°Âºè„ÄÇËÄå‰∏îÔºåinstanceof Âíå isPrototypeOf()‰πüËÉΩÂ§üÁî®‰∫éËØÜÂà´Âü∫‰∫éÁªÑÂêàÁªßÊâøÂàõÂª∫ÁöÑÂØπË±° ÂéüÂûãÂºèÁªßÊâøÈÅìÊ†ºÊãâÊñØ¬∑ÂÖãÁΩóÂÖãÁ¶èÂæ∑Âú® 2006 Âπ¥ÂÜô‰∫Ü‰∏ÄÁØáÊñáÁ´†ÔºåÈ¢ò‰∏∫ Prototypal Inheritance in JavaScript (JavaScript 10‰∏≠ÁöÑÂéüÂûãÂºèÁªßÊâø)„ÄÇÂú®ËøôÁØáÊñáÁ´†‰∏≠Ôºå‰ªñ‰ªãÁªç‰∫Ü‰∏ÄÁßçÂÆûÁé∞ÁªßÊâøÁöÑÊñπÊ≥ïÔºåËøôÁßçÊñπÊ≥ïÂπ∂Ê≤°Êúâ‰ΩøÁî®‰∏•Ê†ºÊÑè‰πâ‰∏äÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇ‰ªñÁöÑÊÉ≥Ê≥ïÊòØÂÄüÂä©ÂéüÂûãÂèØ‰ª•Âü∫‰∫éÂ∑≤ÊúâÁöÑÂØπË±°ÂàõÂª∫Êñ∞ÂØπË±°ÔºåÂêåÊó∂Ëøò‰∏çÂøÖÂõ†Ê≠§ÂàõÂª∫Ëá™ÂÆö‰πâÁ±ªÂûã„ÄÇ‰∏∫‰∫ÜËææÂà∞Ëøô‰∏™ÁõÆÁöÑÔºå‰ªñÁªôÂá∫‰∫ÜÂ¶Ç‰∏ãÂáΩÊï∞„ÄÇ 12345function object(o)&#123; function F() &#123;&#125; F.prototype = o; return new F();&#125; Âú® object()ÂáΩÊï∞ÂÜÖÈÉ®ÔºåÂÖàÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏¥Êó∂ÊÄßÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÁÑ∂ÂêéÂ∞Ü‰º†ÂÖ•ÁöÑÂØπË±°‰Ωú‰∏∫Ëøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂéüÂûãÔºåÊúÄÂêéËøîÂõû‰∫ÜËøô‰∏™‰∏¥Êó∂Á±ªÂûãÁöÑ‰∏Ä‰∏™Êñ∞ÂÆû‰æã„ÄÇ‰ªéÊú¨Ë¥®‰∏äËÆ≤Ôºåobject()ÂØπ‰º†ÂÖ•ÂÖ∂‰∏≠ÁöÑÂØπË±°ÊâßË°å‰∫Ü‰∏ÄÊ¨°ÊµÖÂ§çÂà∂„ÄÇ 12345678910111213var person = &#123; name: &quot;Nicholas&quot;, friends: [&quot;Shelby&quot;, &quot;Court&quot;, &quot;Van&quot;]&#125;;var anotherPerson = object(person);anotherPerson.name = &quot;Greg&quot;;anotherPerson.friends.push(&quot;Rob&quot;);var yetAnotherPerson = object(person);yetAnotherPerson.name = &quot;Linda&quot;;yetAnotherPerson.friends.push(&quot;Barbie&quot;);alert(person.friends); //&quot;Shelby,Court,Van,Rob,Barbie&quot; ÂÖãÁΩóÂÖãÁ¶èÂæ∑‰∏ªÂº†ÁöÑËøôÁßçÂéüÂûãÂºèÁªßÊâøÔºåË¶ÅÊ±Ç‰Ω†ÂøÖÈ°ªÊúâ‰∏Ä‰∏™ÂØπË±°ÂèØ‰ª•‰Ωú‰∏∫Âè¶‰∏Ä‰∏™ÂØπË±°ÁöÑÂü∫Á°Ä„ÄÇÂ¶ÇÊûúÊúâËøô‰πà ‰∏Ä‰∏™ÂØπË±°ÁöÑËØùÔºåÂèØ‰ª•ÊääÂÆÉ‰º†ÈÄíÁªô object()ÂáΩÊï∞ÔºåÁÑ∂ÂêéÂÜçÊ†πÊçÆÂÖ∑‰ΩìÈúÄÊ±ÇÂØπÂæóÂà∞ÁöÑÂØπË±°Âä†‰ª•‰øÆÊîπÂç≥ÂèØ„ÄÇÂú®Ëøô ‰∏™‰æãÂ≠ê‰∏≠ÔºåÂèØ‰ª•‰Ωú‰∏∫Âè¶‰∏Ä‰∏™ÂØπË±°Âü∫Á°ÄÁöÑÊòØ person ÂØπË±°Ôºå‰∫éÊòØÊàë‰ª¨ÊääÂÆÉ‰º†ÂÖ•Âà∞ object()ÂáΩÊï∞‰∏≠ÔºåÁÑ∂ÂêéËØ• ÂáΩÊï∞Â∞±‰ºöËøîÂõû‰∏Ä‰∏™Êñ∞ÂØπË±°„ÄÇËøô‰∏™Êñ∞ÂØπË±°Â∞Ü person ‰Ωú‰∏∫ÂéüÂûãÔºåÊâÄ‰ª•ÂÆÉÁöÑÂéüÂûã‰∏≠Â∞±ÂåÖÂê´‰∏Ä‰∏™Âü∫Êú¨Á±ªÂûãÂÄºÂ±ûÊÄß Âíå‰∏Ä‰∏™ÂºïÁî®Á±ªÂûãÂÄºÂ±ûÊÄß„ÄÇËøôÊÑèÂë≥ÁùÄ person.friends ‰∏ç‰ªÖÂ±û‰∫é person ÊâÄÊúâÔºåËÄå‰∏î‰πü‰ºöË¢´ anotherPerson ‰ª•Âèä yetAnotherPerson ÂÖ±‰∫´„ÄÇÂÆûÈôÖ‰∏äÔºåËøôÂ∞±Áõ∏ÂΩì‰∫éÂèàÂàõÂª∫‰∫Ü person ÂØπË±°ÁöÑ‰∏§‰∏™ÂâØÊú¨„ÄÇ ECMAScript 5 ÈÄöËøáÊñ∞Â¢û Object.create()ÊñπÊ≥ïËßÑËåÉÂåñ‰∫ÜÂéüÂûãÂºèÁªßÊâø„ÄÇËøô‰∏™ÊñπÊ≥ïÊé•Êî∂‰∏§‰∏™ÂèÇÊï∞:‰∏Ä ‰∏™Áî®‰ΩúÊñ∞ÂØπË±°ÂéüÂûãÁöÑÂØπË±°Âíå(ÂèØÈÄâÁöÑ)‰∏Ä‰∏™‰∏∫Êñ∞ÂØπË±°ÂÆö‰πâÈ¢ùÂ§ñÂ±ûÊÄßÁöÑÂØπË±°„ÄÇÂú®‰º†ÂÖ•‰∏Ä‰∏™ÂèÇÊï∞ÁöÑÊÉÖÂÜµ‰∏ãÔºå Object.create()‰∏é object()ÊñπÊ≥ïÁöÑË°å‰∏∫Áõ∏Âêå„ÄÇ 12345678910111213var person = &#123; name: &quot;Nicholas&quot;, friends: [&quot;Shelby&quot;, &quot;Court&quot;, &quot;Van&quot;]&#125;;var anotherPerson = Object.create(person);anotherPerson.name = &quot;Greg&quot;;anotherPerson.friends.push(&quot;Rob&quot;);var yetAnotherPerson = Object.create(person);yetAnotherPerson.name = &quot;Linda&quot;;yetAnotherPerson.friends.push(&quot;Barbie&quot;);alert(person.friends); //&quot;Shelby,Court,Van,Rob,Barbie&quot; Object.create()ÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰∏é Object.defineProperties()ÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞Ê†ºÂºèÁõ∏Âêå:ÊØè‰∏™Â±ûÊÄßÈÉΩÊòØÈÄöËøáËá™Â∑±ÁöÑÊèèËø∞Á¨¶ÂÆö‰πâÁöÑ„ÄÇ‰ª•ËøôÁßçÊñπÂºèÊåáÂÆöÁöÑ‰ªª‰ΩïÂ±ûÊÄßÈÉΩ‰ºöË¶ÜÁõñÂéüÂûãÂØπË±°‰∏äÁöÑÂêåÂêçÂ±ûÊÄß„ÄÇ‰æãÂ¶Ç: 1234567891011var person = &#123; name: &quot;Nicholas&quot;, friends: [&quot;Shelby&quot;, &quot;Court&quot;, &quot;Van&quot;]&#125;;var anotherPerson = Object.create(person, &#123; name: &#123; value: &quot;Greg&quot; &#125;&#125;);alert(anotherPerson.name); //&quot;Greg&quot; ÊîØÊåÅ Object.create()ÊñπÊ≥ïÁöÑÊµèËßàÂô®Êúâ IE9+„ÄÅFirefox 4+„ÄÅSafari 5+„ÄÅOpera 12+Âíå Chrome„ÄÇ Âú®Ê≤°ÊúâÂøÖË¶ÅÂÖ¥Â∏àÂä®‰ºóÂú∞ÂàõÂª∫ÊûÑÈÄ†ÂáΩÊï∞ÔºåËÄåÂè™ÊÉ≥ËÆ©‰∏Ä‰∏™ÂØπË±°‰∏éÂè¶‰∏Ä‰∏™ÂØπË±°‰øùÊåÅÁ±ª‰ººÁöÑÊÉÖÂÜµ‰∏ãÔºåÂéüÂûãÂºè ÁªßÊâøÊòØÂÆåÂÖ®ÂèØ‰ª•ËÉú‰ªªÁöÑ„ÄÇ‰∏çËøáÂà´Âøò‰∫ÜÔºåÂåÖÂê´ÂºïÁî®Á±ªÂûãÂÄºÁöÑÂ±ûÊÄßÂßãÁªàÈÉΩ‰ºöÂÖ±‰∫´Áõ∏Â∫îÁöÑÂÄºÔºåÂ∞±ÂÉè‰ΩøÁî®ÂéüÂûãÊ®° Âºè‰∏ÄÊ†∑„ÄÇ ÂØÑÁîüÂºèÁªßÊâøÂØÑÁîüÂºè(parasitic)ÁªßÊâøÊòØ‰∏éÂéüÂûãÂºèÁªßÊâøÁ¥ßÂØÜÁõ∏ÂÖ≥ÁöÑ‰∏ÄÁßçÊÄùË∑ØÔºåÂπ∂‰∏îÂêåÊ†∑‰πüÊòØÁî±ÂÖãÁΩóÂÖãÁ¶èÂæ∑Êé®ËÄåÂπø‰πãÁöÑ„ÄÇÂØÑÁîüÂºèÁªßÊâøÁöÑÊÄùË∑Ø‰∏éÂØÑÁîüÊûÑÈÄ†ÂáΩÊï∞ÂíåÂ∑•ÂéÇÊ®°ÂºèÁ±ª‰ººÔºåÂç≥ÂàõÂª∫‰∏Ä‰∏™‰ªÖÁî®‰∫éÂ∞ÅË£ÖÁªßÊâøËøáÁ®ãÁöÑÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞Âú®ÂÜÖÈÉ®‰ª•ÊüêÁßçÊñπÂºèÊù•Â¢ûÂº∫ÂØπË±°ÔºåÊúÄÂêéÂÜçÂÉèÁúüÂú∞ÊòØÂÆÉÂÅö‰∫ÜÊâÄÊúâÂ∑•‰Ωú‰∏ÄÊ†∑ËøîÂõûÂØπË±°„ÄÇ‰ª•‰∏ã‰ª£Á†ÅÁ§∫ËåÉ‰∫ÜÂØÑÁîüÂºèÁªßÊâøÊ®°Âºè„ÄÇ 1234567function createAnother(original)&#123; var clone=object(original); //ÈÄöËøáË∞ÉÁî®ÂáΩÊï∞ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂØπË±° clone.sayHi = function()&#123; //‰ª•ÊüêÁßçÊñπÂºèÊù•Â¢ûÂº∫Ëøô‰∏™ÂØπË±° alert(&quot;hi&quot;); &#125;; return clone; //ËøîÂõûËøô‰∏™ÂØπË±°&#125; Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåcreateAnother()ÂáΩÊï∞Êé•Êî∂‰∫Ü‰∏Ä‰∏™ÂèÇÊï∞Ôºå‰πüÂ∞±ÊòØÂ∞ÜË¶Å‰Ωú‰∏∫Êñ∞ÂØπË±°Âü∫Á°ÄÁöÑÂØπË±°„ÄÇÁÑ∂ÂêéÔºåÊääËøô‰∏™ÂØπË±°(original)‰º†ÈÄíÁªô object()ÂáΩÊï∞ÔºåÂ∞ÜËøîÂõûÁöÑÁªìÊûúËµãÂÄºÁªô clone„ÄÇÂÜç‰∏∫ clone ÂØπË±°Ê∑ªÂä†‰∏Ä‰∏™Êñ∞ÊñπÊ≥ï sayHi()ÔºåÊúÄÂêéËøîÂõû clone ÂØπË±°„ÄÇÂèØ‰ª•ÂÉè‰∏ãÈù¢ËøôÊ†∑Êù•‰ΩøÁî® createAnother()ÂáΩÊï∞: 123456var person = &#123; name: &quot;Nicholas&quot;, friends: [&quot;Shelby&quot;, &quot;Court&quot;, &quot;Van&quot;]&#125;;var anotherPerson = createAnother(person);anotherPerson.sayHi(); //&quot;hi&quot; Ëøô‰∏™‰æãÂ≠ê‰∏≠ÁöÑ‰ª£Á†ÅÂü∫‰∫é person ËøîÂõû‰∫Ü‰∏Ä‰∏™Êñ∞ÂØπË±°‚Äî‚ÄîanotherPerson„ÄÇÊñ∞ÂØπË±°‰∏ç‰ªÖÂÖ∑Êúâ person ÁöÑÊâÄÊúâÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåËÄå‰∏îËøòÊúâËá™Â∑±ÁöÑ sayHi()ÊñπÊ≥ï„ÄÇ Âú®‰∏ªË¶ÅËÄÉËôëÂØπË±°ËÄå‰∏çÊòØËá™ÂÆö‰πâÁ±ªÂûãÂíåÊûÑÈÄ†ÂáΩÊï∞ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂØÑÁîüÂºèÁªßÊâø‰πüÊòØ‰∏ÄÁßçÊúâÁî®ÁöÑÊ®°Âºè„ÄÇÂâçÈù¢Á§∫ËåÉÁªßÊâøÊ®°ÂºèÊó∂‰ΩøÁî®ÁöÑ object()ÂáΩÊï∞‰∏çÊòØÂøÖÈúÄÁöÑ;‰ªª‰ΩïËÉΩÂ§üËøîÂõûÊñ∞ÂØπË±°ÁöÑÂáΩÊï∞ÈÉΩÈÄÇÁî®‰∫éÊ≠§Ê®°Âºè„ÄÇ ‰ΩøÁî®ÂØÑÁîüÂºèÁªßÊâøÊù•‰∏∫ÂØπË±°Ê∑ªÂä†ÂáΩÊï∞Ôºå‰ºöÁî±‰∫é‰∏çËÉΩÂÅöÂà∞ÂáΩÊï∞Â§çÁî®ËÄåÈôç‰ΩéÊïàÁéá;Ëøô‰∏ÄÁÇπ‰∏éÊûÑÈÄ†ÂáΩÊï∞Ê®°ÂºèÁ±ª‰ºº„ÄÇ ÂØÑÁîüÁªÑÂêàÂºèÁªßÊâøÂâçÈù¢ËØ¥ËøáÔºåÁªÑÂêàÁªßÊâøÊòØ JavaScript ÊúÄÂ∏∏Áî®ÁöÑÁªßÊâøÊ®°Âºè;‰∏çËøáÔºåÂÆÉ‰πüÊúâËá™Â∑±ÁöÑ‰∏çË∂≥„ÄÇÁªÑÂêàÁªßÊâøÊúÄÂ§ßÁöÑÈóÆÈ¢òÂ∞±ÊòØÊó†ËÆ∫‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÔºåÈÉΩ‰ºöË∞ÉÁî®‰∏§Ê¨°Ë∂ÖÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞:‰∏ÄÊ¨°ÊòØÂú®ÂàõÂª∫Â≠êÁ±ªÂûãÂéüÂûãÁöÑÊó∂ÂÄôÔºåÂè¶‰∏ÄÊ¨°ÊòØÂú®Â≠êÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞ÂÜÖÈÉ®„ÄÇÊ≤°ÈîôÔºåÂ≠êÁ±ªÂûãÊúÄÁªà‰ºöÂåÖÂê´Ë∂ÖÁ±ªÂûãÂØπË±°ÁöÑÂÖ®ÈÉ®ÂÆû‰æãÂ±ûÊÄßÔºå‰ΩÜÊàë‰ª¨‰∏çÂæó‰∏çÂú®Ë∞ÉÁî®Â≠êÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞Êó∂ÈáçÂÜôËøô‰∫õÂ±ûÊÄß„ÄÇÂÜçÊù•Áúã‰∏ÄÁúã‰∏ãÈù¢ÁªÑÂêàÁªßÊâøÁöÑ‰æãÂ≠ê„ÄÇ 1234567891011121314151617181920function SuperType(name)&#123; this.name = name; this.colors = [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;];&#125;SuperType.prototype.sayName = function()&#123; alert(this.name);&#125;;function SubType(name, age)&#123; SuperType.call(this, name); //Á¨¨‰∫åÊ¨°Ë∞ÉÁî®SuperType() this.age = age;&#125;SubType.prototype = new SuperType(); //Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî®SuperType()SubType.prototype.constructor = SubType;SubType.prototype.sayAge = function()&#123; alert(this.age);&#125;; Âä†Á≤óÂ≠ó‰ΩìÁöÑË°å‰∏≠ÊòØË∞ÉÁî® SuperType ÊûÑÈÄ†ÂáΩÊï∞ÁöÑ‰ª£Á†Å„ÄÇÂú®Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî® SuperType ÊûÑÈÄ†ÂáΩÊï∞Êó∂ÔºåSubType.prototype ‰ºöÂæóÂà∞‰∏§‰∏™Â±ûÊÄß:name Âíå colors;ÂÆÉ‰ª¨ÈÉΩÊòØ SuperType ÁöÑÂÆû‰æãÂ±ûÊÄßÔºåÂè™‰∏çËøá Áé∞Âú®‰Ωç‰∫é SubType ÁöÑÂéüÂûã‰∏≠„ÄÇÂΩìË∞ÉÁî® SubType ÊûÑÈÄ†ÂáΩÊï∞Êó∂ÔºåÂèà‰ºöË∞ÉÁî®‰∏ÄÊ¨° SuperType ÊûÑÈÄ†ÂáΩÊï∞ÔºåËøô ‰∏ÄÊ¨°ÂèàÂú®Êñ∞ÂØπË±°‰∏äÂàõÂª∫‰∫ÜÂÆû‰æãÂ±ûÊÄß nameÂíåcolors„ÄÇ‰∫éÊòØÔºåËøô‰∏§‰∏™Â±ûÊÄßÂ∞±Â±èËîΩ‰∫ÜÂéüÂûã‰∏≠ÁöÑ‰∏§‰∏™ÂêåÂêçÂ±û ÊÄß„ÄÇÂõæ 6-6 Â±ïÁ§∫‰∫Ü‰∏äËø∞ËøáÁ®ã„ÄÇ Â¶ÇÂõæ 6-6 ÊâÄÁ§∫ÔºåÊúâ‰∏§ÁªÑ name Âíå colors Â±ûÊÄß:‰∏ÄÁªÑÂú®ÂÆû‰æã‰∏äÔºå‰∏ÄÁªÑÂú® SubType ÂéüÂûã‰∏≠„ÄÇËøôÂ∞±ÊòØË∞É Áî®‰∏§Ê¨° SuperType ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÁªìÊûú„ÄÇÂ•ΩÂú®Êàë‰ª¨Â∑≤ÁªèÊâæÂà∞‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÊñπÊ≥ï‚Äî‚ÄîÂØÑÁîüÁªÑÂêàÂºèÁªßÊâø„ÄÇ ÊâÄË∞ìÂØÑÁîüÁªÑÂêàÂºèÁªßÊâøÔºåÂç≥ÈÄöËøáÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞Êù•ÁªßÊâøÂ±ûÊÄßÔºåÈÄöËøáÂéüÂûãÈìæÁöÑÊ∑∑ÊàêÂΩ¢ÂºèÊù•ÁªßÊâøÊñπÊ≥ï„ÄÇÂÖ∂ËÉåÂêéÁöÑÂü∫Êú¨ÊÄùË∑ØÊòØ:‰∏çÂøÖ‰∏∫‰∫ÜÊåáÂÆöÂ≠êÁ±ªÂûãÁöÑÂéüÂûãËÄåË∞ÉÁî®Ë∂ÖÁ±ªÂûãÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÊàë‰ª¨ÊâÄÈúÄË¶ÅÁöÑÊó†ÈùûÂ∞±ÊòØË∂ÖÁ±ªÂûãÂéüÂûãÁöÑ‰∏Ä‰∏™ÂâØÊú¨ËÄåÂ∑≤„ÄÇÊú¨Ë¥®‰∏äÔºåÂ∞±ÊòØ‰ΩøÁî®ÂØÑÁîüÂºèÁªßÊâøÊù•ÁªßÊâøË∂ÖÁ±ªÂûãÁöÑÂéüÂûãÔºåÁÑ∂ÂêéÂÜçÂ∞ÜÁªìÊûúÊåáÂÆöÁªôÂ≠êÁ±ªÂûãÁöÑÂéüÂûã„ÄÇÂØÑÁîüÁªÑÂêàÂºèÁªßÊâøÁöÑÂü∫Êú¨Ê®°ÂºèÂ¶Ç‰∏ãÊâÄÁ§∫„ÄÇ 12345function inheritPrototype(subType, superType)&#123; var prototype = object(superType.prototype); prototype.constructor = subType; subType.prototype = prototype;&#125; Ëøô‰∏™Á§∫‰æã‰∏≠ÁöÑ inheritPrototype()ÂáΩÊï∞ÂÆûÁé∞‰∫ÜÂØÑÁîüÁªÑÂêàÂºèÁªßÊâøÁöÑÊúÄÁÆÄÂçïÂΩ¢Âºè„ÄÇËøô‰∏™ÂáΩÊï∞Êé•Êî∂‰∏§‰∏™ÂèÇÊï∞:Â≠êÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞ÂíåË∂ÖÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞„ÄÇÂú®ÂáΩÊï∞ÂÜÖÈÉ®ÔºåÁ¨¨‰∏ÄÊ≠•ÊòØÂàõÂª∫Ë∂ÖÁ±ªÂûãÂéüÂûãÁöÑ‰∏Ä‰∏™ÂâØÊú¨„ÄÇÁ¨¨‰∫åÊ≠•ÊòØ‰∏∫ÂàõÂª∫ÁöÑÂâØÊú¨Ê∑ªÂä† constructor Â±ûÊÄßÔºå‰ªéËÄåÂº•Ë°•Âõ†ÈáçÂÜôÂéüÂûãËÄåÂ§±ÂéªÁöÑÈªòËÆ§ÁöÑ constructor Â±ûÊÄß„ÄÇÊúÄÂêé‰∏ÄÊ≠•ÔºåÂ∞ÜÊñ∞ÂàõÂª∫ÁöÑÂØπË±°(Âç≥ÂâØÊú¨)ËµãÂÄºÁªôÂ≠êÁ±ªÂûãÁöÑÂéüÂûã„ÄÇËøôÊ†∑ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Áî®Ë∞ÉÁî® inherit- Prototype()ÂáΩÊï∞ÁöÑËØ≠Âè•ÔºåÂéªÊõøÊç¢ÂâçÈù¢‰æãÂ≠ê‰∏≠‰∏∫Â≠êÁ±ªÂûãÂéüÂûãËµãÂÄºÁöÑËØ≠Âè•‰∫ÜÔºå‰æãÂ¶Ç: 123456789101112131415function SuperType(name)&#123; this.name = name; this.colors = [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;];&#125;SuperType.prototype.sayName = function()&#123; alert(this.name);&#125;;function SubType(name, age)&#123; SuperType.call(this, name); this.age = age;&#125;inheritPrototype(SubType, SuperType);SubType.prototype.sayAge = function()&#123; alert(this.age); &#125;; Ëøô‰∏™‰æãÂ≠êÁöÑÈ´òÊïàÁéá‰ΩìÁé∞Âú®ÂÆÉÂè™Ë∞ÉÁî®‰∫Ü‰∏ÄÊ¨° SuperType ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂπ∂‰∏îÂõ†Ê≠§ÈÅøÂÖç‰∫ÜÂú® SubType.prototype ‰∏äÈù¢ÂàõÂª∫‰∏çÂøÖË¶ÅÁöÑ„ÄÅÂ§ö‰ΩôÁöÑÂ±ûÊÄß„ÄÇ‰∏éÊ≠§ÂêåÊó∂ÔºåÂéüÂûãÈìæËøòËÉΩ‰øùÊåÅ‰∏çÂèò;Âõ†Ê≠§ÔºåËøòËÉΩÂ§üÊ≠£Â∏∏‰ΩøÁî®instanceof Âíå isPrototypeOf()„ÄÇÂºÄÂèë‰∫∫ÂëòÊôÆÈÅçËÆ§‰∏∫ÂØÑÁîüÁªÑÂêàÂºèÁªßÊâøÊòØÂºïÁî®Á±ªÂûãÊúÄÁêÜÊÉ≥ÁöÑÁªßÊâøËåÉÂºè„ÄÇ ÊÄªÁªìECMAScript ÊîØÊåÅÈù¢ÂêëÂØπË±°(OO)ÁºñÁ®ãÔºå‰ΩÜ‰∏ç‰ΩøÁî®Á±ªÊàñËÄÖÊé•Âè£„ÄÇÂØπË±°ÂèØ‰ª•Âú®‰ª£Á†ÅÊâßË°åËøáÁ®ã‰∏≠ÂàõÂª∫Âíå Â¢ûÂº∫ÔºåÂõ†Ê≠§ÂÖ∑ÊúâÂä®ÊÄÅÊÄßËÄåÈùû‰∏•Ê†ºÂÆö‰πâÁöÑÂÆû‰Ωì„ÄÇÂú®Ê≤°ÊúâÁ±ªÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•ÈááÁî®‰∏ãÂàóÊ®°ÂºèÂàõÂª∫ÂØπË±°„ÄÇ Â∑•ÂéÇÊ®°ÂºèÔºå‰ΩøÁî®ÁÆÄÂçïÁöÑÂáΩÊï∞ÂàõÂª∫ÂØπË±°Ôºå‰∏∫ÂØπË±°Ê∑ªÂä†Â±ûÊÄßÂíåÊñπÊ≥ïÔºåÁÑ∂ÂêéËøîÂõûÂØπË±°„ÄÇËøô‰∏™Ê®°ÂºèÂêéÊù• Ë¢´ÊûÑÈÄ†ÂáΩÊï∞Ê®°ÂºèÊâÄÂèñ‰ª£„ÄÇ ÊûÑÈÄ†ÂáΩÊï∞Ê®°ÂºèÔºåÂèØ‰ª•ÂàõÂª∫Ëá™ÂÆö‰πâÂºïÁî®Á±ªÂûãÔºåÂèØ‰ª•ÂÉèÂàõÂª∫ÂÜÖÁΩÆÂØπË±°ÂÆû‰æã‰∏ÄÊ†∑‰ΩøÁî® new Êìç‰ΩúÁ¨¶„ÄÇ‰∏ç ËøáÔºåÊûÑÈÄ†ÂáΩÊï∞Ê®°Âºè‰πüÊúâÁº∫ÁÇπÔºåÂç≥ÂÆÉÁöÑÊØè‰∏™ÊàêÂëòÈÉΩÊó†Ê≥ïÂæóÂà∞Â§çÁî®ÔºåÂåÖÊã¨ÂáΩÊï∞„ÄÇÁî±‰∫éÂáΩÊï∞ÂèØ‰ª•‰∏çÂ±Ä Èôê‰∫é‰ªª‰ΩïÂØπË±°(Âç≥‰∏éÂØπË±°ÂÖ∑ÊúâÊùæÊï£ËÄ¶ÂêàÁöÑÁâπÁÇπ)ÔºåÂõ†Ê≠§Ê≤°ÊúâÁêÜÁî±‰∏çÂú®Â§ö‰∏™ÂØπË±°Èó¥ÂÖ±‰∫´ÂáΩÊï∞„ÄÇ ÂéüÂûãÊ®°ÂºèÔºå‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞ÁöÑprototypeÂ±ûÊÄßÊù•ÊåáÂÆöÈÇ£‰∫õÂ∫îËØ•ÂÖ±‰∫´ÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ï„ÄÇÁªÑÂêà‰ΩøÁî®ÊûÑÈÄ† ÂáΩÊï∞Ê®°ÂºèÂíåÂéüÂûãÊ®°ÂºèÊó∂Ôºå‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞ÂÆö‰πâÂÆû‰æãÂ±ûÊÄßÔºåËÄå‰ΩøÁî®ÂéüÂûãÂÆö‰πâÂÖ±‰∫´ÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ï„ÄÇ ‚Äã JavaScript ‰∏ªË¶ÅÈÄöËøáÂéüÂûãÈìæÂÆûÁé∞ÁªßÊâø„ÄÇÂéüÂûãÈìæÁöÑÊûÑÂª∫ÊòØÈÄöËøáÂ∞Ü‰∏Ä‰∏™Á±ªÂûãÁöÑÂÆû‰æãËµãÂÄºÁªôÂè¶‰∏Ä‰∏™ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂéüÂûãÂÆûÁé∞ÁöÑ„ÄÇËøôÊ†∑ÔºåÂ≠êÁ±ªÂûãÂ∞±ËÉΩÂ§üËÆøÈóÆË∂ÖÁ±ªÂûãÁöÑÊâÄÊúâÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåËøô‰∏ÄÁÇπ‰∏éÂü∫‰∫éÁ±ªÁöÑÁªßÊâøÂæàÁõ∏‰ºº„ÄÇ ÂéüÂûãÈìæÁöÑÈóÆÈ¢òÊòØÂØπË±°ÂÆû‰æãÂÖ±‰∫´ÊâÄÊúâÁªßÊâøÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåÂõ†Ê≠§‰∏çÈÄÇÂÆúÂçïÁã¨‰ΩøÁî®„ÄÇËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÁöÑÊäÄÊúØÊòØÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂç≥Âú®Â≠êÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂÜÖÈÉ®Ë∞ÉÁî®Ë∂ÖÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•ÂÅöÂà∞ÊØè‰∏™ÂÆû‰æãÈÉΩÂÖ∑ÊúâËá™Â∑±ÁöÑ Â±ûÊÄßÔºåÂêåÊó∂ËøòËÉΩ‰øùËØÅÂè™‰ΩøÁî®ÊûÑÈÄ†ÂáΩÊï∞Ê®°ÂºèÊù•ÂÆö‰πâÁ±ªÂûã„ÄÇ‰ΩøÁî®ÊúÄÂ§öÁöÑÁªßÊâøÊ®°ÂºèÊòØÁªÑÂêàÁªßÊâøÔºåËøôÁßçÊ®°Âºè‰ΩøÁî® ÂéüÂûãÈìæÁªßÊâøÂÖ±‰∫´ÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåËÄåÈÄöËøáÂÄüÁî®ÊûÑÈÄ†ÂáΩÊï∞ÁªßÊâøÂÆû‰æãÂ±ûÊÄß„ÄÇ ‚Äã Ê≠§Â§ñÔºåËøòÂ≠òÂú®‰∏ãÂàóÂèØ‰æõÈÄâÊã©ÁöÑÁªßÊâøÊ®°Âºè„ÄÇ ÂéüÂûãÂºèÁªßÊâøÔºåÂèØ‰ª•Âú®‰∏çÂøÖÈ¢ÑÂÖàÂÆö‰πâÊûÑÈÄ†ÂáΩÊï∞ÁöÑÊÉÖÂÜµ‰∏ãÂÆûÁé∞ÁªßÊâøÔºåÂÖ∂Êú¨Ë¥®ÊòØÊâßË°åÂØπÁªôÂÆöÂØπË±°ÁöÑÊµÖÂ§çÂà∂„ÄÇËÄåÂ§çÂà∂ÂæóÂà∞ÁöÑÂâØÊú¨ËøòÂèØ‰ª•ÂæóÂà∞Ëøõ‰∏ÄÊ≠•ÊîπÈÄ†„ÄÇ ÂØÑÁîüÂºèÁªßÊâøÔºå‰∏éÂéüÂûãÂºèÁªßÊâøÈùûÂ∏∏Áõ∏‰ººÔºå‰πüÊòØÂü∫‰∫éÊüê‰∏™ÂØπË±°ÊàñÊüê‰∫õ‰ø°ÊÅØÂàõÂª∫‰∏Ä‰∏™ÂØπË±°ÔºåÁÑ∂ÂêéÂ¢ûÂº∫ÂØπË±°ÔºåÊúÄÂêéËøîÂõûÂØπË±°„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥ÁªÑÂêàÁªßÊâøÊ®°ÂºèÁî±‰∫éÂ§öÊ¨°Ë∞ÉÁî®Ë∂ÖÁ±ªÂûãÊûÑÈÄ†ÂáΩÊï∞ËÄåÂØºËá¥ÁöÑ‰ΩéÊïàÁéáÈóÆÈ¢òÔºåÂèØ‰ª•Â∞ÜËøô‰∏™Ê®°Âºè‰∏éÁªÑÂêàÁªßÊâø‰∏ÄËµ∑‰ΩøÁî®„ÄÇ ÂØÑÁîüÁªÑÂêàÂºèÁªßÊâøÔºåÈõÜÂØÑÁîüÂºèÁªßÊâøÂíåÁªÑÂêàÁªßÊâøÁöÑ‰ºòÁÇπ‰∏é‰∏ÄË∫´ÔºåÊòØÂÆûÁé∞Âü∫‰∫éÁ±ªÂûãÁªßÊâøÁöÑÊúÄÊúâÊïàÊñπÂºè„ÄÇ","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"Âà©Áî®GitLabËá™Âä®ÂåñÈÉ®ÁΩ≤","slug":"Âà©Áî®GitLabËá™Âä®ÂåñÈÉ®ÁΩ≤","date":"2020-02-29T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2020/03/01/Âà©Áî®GitLabËá™Âä®ÂåñÈÉ®ÁΩ≤/","permalink":"https://justsso1.github.io/2020/03/01/%E5%88%A9%E7%94%A8GitLab%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/","excerpt":"","text":"Êàë‰∫ÜËß£Âà∞GitLab‰∏äÈù¢Êúâ‰∏§ÁßçÊñπÂºèÂèØ‰ª•ÂÅöÂà∞Ëá™Âä®ÂåñÈÉ®ÁΩ≤ÔºåwebhooksÂíåGitLab CI&#x2F;CD„ÄÇwebhooksËÉΩÂÆåÊàêÁöÑ‰∫ãÊÉÖ‰πüÊØîËæÉÂçï‰∏ÄÔºåÂÆÉÁöÑÂéüÁêÜÂ∞±ÊòØÔºöwebhooksÊèê‰æõ‰∏Ä‰∏™ÁΩëÁªúÈí©Â≠êÔºåÂΩì‰Ω†ÁöÑgit‰ªìÂ∫ìËß¶ÂèëÊüê‰∫õÂä®‰ΩúÊØîÂ¶ÇpushÊó∂Ôºå‰ºöËß¶ÂèëÊâßË°å‰∏Ä‰∏™ËÑöÊú¨ÔºåËÑöÊú¨‰∏≠‰ºöÊúâgit pull ÈáçÂêØÂ∫îÁî®Á≠â‰∏Ä‰∫õÊìç‰Ωú„ÄÇGitLab CI&#x2F;CDÊòØÊåÅÁª≠ÈõÜÊàê„ÄÅÊåÅÁª≠ÈÉ®ÁΩ≤ÔºåÁÆÄÂçïÊù•ËÆ≤ÊåÅÁª≠ÈõÜÊàêË∑üÂ§ö‰∫∫Âêà‰ΩúÔºåÂ§ö‰∏™Ë¥¶Êà∑Êèê‰∫§gitÊúâÂÖ≥ÔºåÊåÅÁª≠ÈÉ®ÁΩ≤Ôºå‰ºöÁªèËøáËá™Âä®ÊµãËØïÔºåËá™Âä®ÊâìÂåÖÊìç‰ΩúÔºåÂèØ‰ª•ÊâìÊàêËÉΩÂ§üÈÉ®ÁΩ≤ÁöÑÁä∂ÊÄÅÔºåÊâÄ‰ª•CI&#x2F;CDÂÅöÁöÑ‰∫ãÊÉÖÊØîwebhooksÂ§öÂæàÂ§öÔºåÂèØ‰ª•ËØ¥Ôºå‰∫åËÄÖËß£ÂÜ≥ÈóÆÈ¢òÁöÑÂú∫ÊôØÊó∂‰∏çÂêåÁöÑ„ÄÇÂú®ÂÆûÈôÖÁöÑÁîü‰∫ß‰∏≠Âë¢Ôºå‰∏Ä‰∏™È°πÁõÆÁöÑÈÉ®ÁΩ≤Ë¶ÅËÄÉËôëÂà∞‰ª£Á†ÅÂêàÂπ∂„ÄÅÁéØÂ¢ÉÈÖçÁΩÆÁöÑÔºåÊâÄ‰ª•ÊòæËÄåÊòìËßÅÔºåGitLab CI&#x2F;CDÊõ¥Êª°Ë∂≥Áé∞Âú®ÁöÑÈúÄÊ±Ç„ÄÇ Êó¢ÁÑ∂ÈÉΩÊÉ≥Ëá™Âä®ÂåñÈÉ®ÁΩ≤‰∫ÜÔºåÈÇ£Âπ≤ËÑÜÂ∞±ÊêûÁöÑÂΩªÂ∫ï‰∏ÄÁÇπÂêßÔºåÂà©Áî®GitLab CI&#x2F;CDÂÅö‰∏ÄÂ•óËá™Âä®ÂåñÈÉ®ÁΩ≤Ôºå‰ªéÊ≠§ËøúÁ¶ª‰∫∫ËÇâÈÉ®ÁΩ≤„ÄÇ CI&#x2F;CD ‰ªÄ‰πàÊòØCI&#x2F;CD?ÊåÅÁª≠ÈõÜÊàêÂèØ‰ª•ÈÄöËøáËá™Âä®ËøêË°åÊµãËØïÊù•Â∏ÆÂä©Ê£ÄÊµã‰ª£Á†ÅÁº∫Èô∑ÔºåËÄåÊåÅÁª≠ÈÉ®ÁΩ≤ÂèØ‰ª•Â∏ÆÂä©ÊÇ®ÂêëÁîü‰∫ßÁéØÂ¢É‰∫§‰ªò‰ª£Á†Å„ÄÇ Âú®ËøôÈáåÊàëÊÉ≥‰ΩøÁî®shellËÑöÊú¨ÂëΩ‰ª§Â∞±ËÉΩËææÂà∞Ëá™Âä®ÈÉ®ÁΩ≤È°πÁõÆÁöÑÁõÆÁöÑÔºåÊöÇÊó∂‰∏ç‰ΩøÁî®dockerÔºåËôΩÁÑ∂dockerÊõ¥Â•ΩËß£ÂÜ≥ÁéØÂ¢ÉÂÖºÂÆπÈóÆÈ¢òÔºå‰ΩÜÊòØÁõÆÂâçÊúçÂä°Âô®‰∏äÈù¢Â∑≤ÁªèÈÉ®ÁΩ≤‰∫ÜÂ•ΩÂá†‰∏™È°πÁõÆ‰∫ÜÔºåÁéØÂ¢É‰πüÊòØÊê≠Âª∫Â•ΩÁöÑÔºåÊâÄ‰ª•ÊöÇÊó∂Ë∑≥ËøádockerÔºåÊääGitLab CI&#x2F;CDÈÖçÁΩÆÂ•ΩÂ∞±OK ‰ªé8.0ÁâàÂºÄÂßãÔºåGitLab ÊåÅÁª≠ÈõÜÊàêÔºàCIÔºâÂ∑≤ÂÆåÂÖ®ÈõÜÊàêÂà∞GitLabÊú¨Ë∫´ÔºåÂπ∂‰∏îÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂú®ÊâÄÊúâÈ°πÁõÆ‰∏äÈÉΩÂêØÁî®„ÄÇÂÆÉÂÖ∑ÊúâÊåÅÁª≠ÈÉ®ÁΩ≤ÂíåÊåÅÁª≠‰∫§‰ªòÁöÑÂäüËÉΩÔºåÂèØÁî®‰∫éÊûÑÂª∫„ÄÅÊµãËØïÂíåÈÉ®ÁΩ≤‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫èÔºå‰∏ãÈù¢ÊòØGitLab CI&#x2F;CDÊµÅÁ®ãÂõæ„ÄÇ Ê≠•È™§‰∏ÄÔºöÂõ†‰∏∫GitLabÂ∑≤ÁªèÈõÜÊàê‰∫ÜCI ÔºåÊâÄ‰ª•Êàë‰ª¨Âú®È°πÁõÆÁöÑÊ†πÁõÆÂΩï‰∏ãÔºåÂàõÂª∫‰∏Ä‰∏™.gitlab-ci.ymlÊñá‰ª∂Âç≥ÂèØÔºå‰æøÂèØËß¶ÂèëCIËøáÁ®ã Ê≠•È™§‰∫åÔºöÈÖçÁΩÆGitLab Runner,ÂÆÉÁõ∏ÂΩì‰∫é‰∏Ä‰∏™ËøêË°åËΩØ‰ª∂ÔºåÂéªÊåâÁÖßgitlab-ci.yml‰∏≠ÂÜôÁöÑÂëΩ‰ª§ÂéªÊâßË°å„ÄÇGitLab RunnerÂèÇËÄÉÊñáÊ°£Ôºö https://docs.gitlab.com/runner/Êàë‰ΩøÁî®Âêå‰∏ÄÂè∞ÊúçÂä°Âô®‰Ωú‰∏∫Runner,ÂÖ∂ÂÆûÊúÄÂ•Ω‰∏çË¶ÅÁî®Âêå‰∏ÄÂè∞ÊúçÂä°Âô®ÂÅöRunner,ÂÆÉ‰ºöÂç†Áî®‰∏Ä‰∫õËµÑÊ∫êÔºåÊúâÂèØËÉΩ‰ºöÂΩ±ÂìçÁîü‰∫ßÁéØÂ¢É„ÄÇ ÂÖàËØ¥Êòé‰∏Ä‰∏ãÊàëÊúçÂä°Âô®ÁöÑÈ¢ùÁéØÂ¢ÉÔºöubuntuÁ≥ªÁªü ÂÆâË£ÖRunnerÊàëÈÄâÊã©RepositoriesÊñπÂºècurl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh | sudo bash sudo apt-get install gitlab-runner Ê≥®ÂÜåRunnerÊ≥®ÂÜåÊó∂ÈúÄË¶Å‰Ω†È°πÁõÆÁöÑtokenÔºåÂÖàÊù•ÊãøÂà∞tokenÔºåÂú®È°πÁõÆ‰ªìÂ∫ìÁöÑËÆæÁΩÆ&gt;CI&gt;RunnerÂ±ïÂºÄÔºåÁúãÂà∞Â∑¶‰æßÊúâ‚ÄùÊåáÂÆöÁöÑRunner‚ÄùÔºå‰∏ãÈù¢ÊúâtokenÂ•ΩÔºåÊúçÂä°Âô®‰∏äËøêË°åÂ¶Ç‰∏ãÔºö Shellscriptsudo gitlab-runner registerEnter your GitLab instance URL: ShellscriptPlease enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )https://gitlab.comShellscriptPlease enter the gitlab-ci token for this runnerËæìÂÖ•‰Ω†ÁöÑtokenÁÑ∂ÂêéÊòØËÆ©‰Ω†ËæìÂÖ•description Âíå tagÔºåtagÁöÑ‰ΩúÁî®ÊòØÂΩì‰Ω†ÁöÑÊèê‰∫§Êúâ‰Ω†ËÆæÁΩÆÁöÑtagÊó∂Ôºå‰πüÂ∞±ÊòØÈÄâÂÆöËøô‰∏™RunnerËøêË°å„ÄÇ ËæìÂÖ•Runner executor ShellscriptPlease enter the executor: ssh, docker+machine, docker-ssh+machine, kubernetes, docker, parallels, virtualbox, docker-ssh, shell:shellËøôÈáåÊàëÈÄâÊã©‰∫Üshell ÁÑ∂Âêé‰∏çÂá∫ÊÑèÂ§ñÂ∞±‰ºöÊ≥®ÂÜåÊàêÂäü ÁÑ∂ÂêéÂõûÂà∞gitlab‰ªìÂ∫ìÊü•ÁúãÔºårunnerÊòØÂê¶ÊàêÂäü GitLab Runner ‰ºöËá™Âä®ÁöÑÂàõÂª∫‰∏Ä‰∏™gitlab runnerÁî®Êà∑ÔºåÁÑ∂Âêé‰Ω†ÁöÑCI Êìç‰Ωú‰ºöÊúâËøô‰∏™Áî®Êà∑ËøêË°å Â•ΩÔºåÊé•‰∏ãÊù•ÁºñÂÜô.gitlab-ci.yml Êñá‰ª∂Ôºö Yaml stages: build deploy cache: key: ${CI_BUILD_REF_NAME} paths: - node_modules build_all: stage: build tags: - tags script: - echo ‚Äòbuild_all‚Äô - pwd deploy_all: stage: deploy only: - master tags: - tags script: - cnpm install - pm2 restart qiniu when: manual allow_failure: falseÊàëÊØè‰∏™stageÈÉΩÊâì‰∫Ütag tags: - tagsËøôÊ†∑ÂèØ‰ª•Ëß¶Âèë‰Ω†ÊåáÂÆöÁöÑrunnerÔºå‰∏çÁÑ∂ÁöÑËØùÔºågitlab ciÂ∞±‰ºöÈÄâËøêË°åÁöÑÊúÄÂø´ÁöÑÈÇ£‰∏™runnerÔºåÂæÄÂæÄÂ∞±‰ºöÈÄâÂÆöÂÖ±‰∫´runner‰∫Ü„ÄÇ ÊàëËøòÂÅö‰∫ÜÁºìÂ≠òÔºö Yamlcache: key: ${CI_BUILD_REF_NAME} paths: - node_modulesÊàëÁöÑÈ°πÁõÆÁöÑnodejsÂÜôÁöÑÂêéÂè∞È°πÁõÆÔºåÁÑ∂Âêé‰ΩøÁî®pm2Áª¥Êä§ËøõÁ®ã„ÄÇ deployÈò∂ÊÆµÊàëÈÄâÊã©ÔºåÊâãÂä®Ëß¶ÂèëÔºå‰∏çÂèØÂ§±Ë¥•ÔºåÁ°Æ‰øùÁ∫ø‰∏ä‰∏ç‰ºöÂá∫Áé∞ÈóÆÈ¢ò„ÄÇ ËøôÊ†∑ÔºåÂΩìpushÂà∞GitLabÊó∂Ôºå‰ºöËá™Âä®Ëß¶ÂèëCI&#x2F;CD Áî±‰∫éÊàëÁöÑdeployÈúÄË¶ÅÊâãÂä®Ëß¶ÂèëÔºåÊâÄ‰ª•ÂæóËá™Â∑±ÂéªÁÇπÂáªÊåâÈíÆ ÊâßË°åÊàêÂäü ÊµÅÊ∞¥Á∫ø‰πüÊòæÁ§∫ÊàêÂäü‰∫Ü","categories":[],"tags":[]},{"title":"Ê∑±ÂÖ•ÁêÜËß£css‰∏≠ÁöÑÂ±ÇÂè†‰∏ä‰∏ãÊñáÂíåÂ±ÇÂè†È°∫Â∫è","slug":"Ê∑±ÂÖ•ÁêÜËß£CSS‰∏≠ÁöÑÂ±ÇÂè†‰∏ä‰∏ãÊñáÂíåÂ±ÇÂè†È°∫Â∫è","date":"2020-02-27T16:00:00.000Z","updated":"2024-10-12T08:40:56.550Z","comments":true,"path":"2020/02/28/Ê∑±ÂÖ•ÁêÜËß£CSS‰∏≠ÁöÑÂ±ÇÂè†‰∏ä‰∏ãÊñáÂíåÂ±ÇÂè†È°∫Â∫è/","permalink":"https://justsso1.github.io/2020/02/28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3CSS%E4%B8%AD%E7%9A%84%E5%B1%82%E5%8F%A0%E4%B8%8A%E4%B8%8B%E6%96%87%E5%92%8C%E5%B1%82%E5%8F%A0%E9%A1%BA%E5%BA%8F/","excerpt":"","text":"Â∫ïÂ±ÇÈúÄË¶Å‰∫ÜËß£ÁöÑÁü•ËØÜÔºöÊµèËßàÂô®ÁöÑÂàÜÂ±ÇÊ∏≤ÊüìÊúâÁâπÁÇπÁöÑÂú∫ÊôØÔºötransformÂíåfixedÂÆö‰Ωç","categories":[{"name":"css","slug":"css","permalink":"https://justsso1.github.io/categories/css/"}],"tags":[]},{"title":"ÊµÖÊã∑Ë¥ù‰∏éÊ∑±Êã∑Ë¥ùÊÄªÁªì","slug":"ÊµÖÊã∑Ë¥ù‰∏éÊ∑±Êã∑Ë¥ùÊÄªÁªì","date":"2020-02-25T16:00:00.000Z","updated":"2024-10-16T04:07:01.950Z","comments":true,"path":"2020/02/26/ÊµÖÊã∑Ë¥ù‰∏éÊ∑±Êã∑Ë¥ùÊÄªÁªì/","permalink":"https://justsso1.github.io/2020/02/26/%E6%B5%85%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%80%BB%E7%BB%93/","excerpt":"","text":"js\bËøõÈò∂-ÊµÖÊã∑Ë¥ù‰∏éÊ∑±Êã∑Ë¥ùÊÄªÁªì.mdÊµÖÊã∑Ë¥ùÁöÑÊñπÂºèÔºöObject.assign()ÁÆÄÂçïÁöÑÊää‰∏Ä‰∏™ÂØπË±°ÁöÑÁ¨¨‰∏ÄÂ±ÇÂ±ûÊÄßÂ§çÂà∂Âà∞Âè¶‰∏Ä‰∏™ÂØπË±°‰∏äÔºåÂ¶ÇÊûúÂ±ûÊÄßÊòØ‰∏Ä‰∏™ÂºïÁî®Á±ªÂûãÔºåÂ§çÂà∂ÁöÑÂÖ∂ÂÆûÂè™ÊòØÊåáÈíàÂú∞ÂùÄÔºåÊåáÂêëÁöÑËøòÊòØÂêå‰∏Ä‰∏™ÂºïÁî®Á±ªÂûãÔºåÂ∏¶Êù•ÁöÑÈóÆÈ¢òÊòØÔºåÊîπÂèòÂÖ∂‰∏≠‰∏Ä‰∏™ÂØπË±°‰ºöÂΩ±ÂìçÂè¶‰∏Ä‰∏™ÂØπË±°„ÄÇ ‰ª£Á†ÅÂÆûÁé∞ÊµÖÊã∑Ë¥ùÊ∑±Êã∑Ë¥ùÁöÑÊñπÂºèÔºöÊ∑±Êã∑Ë¥ùÁÆÄ‰ªãÁöÑËØ¥Â∞±ÊòØÊµÖÊã∑Ë¥ù+ÈÄíÂΩí„ÄÇÈÅçÂéÜÂØπË±°ÁöÑÊØè‰∏Ä‰∏™Â±ûÊÄßÔºåÂ¶ÇÊûúÂ±ûÊÄßÊòØÂü∫Êú¨Á±ªÂûãÔºåÂ∞±ÊòØÁõ¥Êé•Êã∑Ë¥ùÂà∞Êñ∞ÁöÑÂØπË±°‰∏≠ÔºõÂ¶ÇÊûúÂ±ûÊÄßÊòØÂºïÁî®Á±ªÂûãÔºåÂ∞±Ëøõ‰∏ÄÊ≠•ÈÄíÂΩíÁöÑË∞ÉÁî®ËØ•Â±ûÊÄßÔºåÁõ¥Âà∞ÂÖ®ÈÉ®ÈÅçÂéÜÂÆåÔºåËøôÊ†∑Â∞±ÂÆåÊàê‰∫ÜÊ∑±Êã∑Ë¥ù„ÄÇ JSON.parse()+JSON.string()ÈóÆÈ¢òÔºö ‰ºöÊúâÂµåÂ•óÂæ™ÁéØÈóÆÈ¢ò 1 ‰ª£Á†ÅÂÆûÁé∞ÈÄíÂΩíÊ∑±Êã∑Ë¥ùÂèÇËÄÉÈìæÊé• Ôºö„ÄêËøõÈò∂4-3Êúü„ÄëÈù¢ËØïÈ¢ò‰πãÂ¶Ç‰ΩïÂÆûÁé∞‰∏Ä‰∏™Ê∑±Êã∑Ë¥ù","categories":[],"tags":[]},{"title":"react‰∏≠ÁöÑ‰∫ã‰ª∂","slug":"‰∫ã‰ª∂event","date":"2019-11-16T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2019/11/17/‰∫ã‰ª∂event/","permalink":"https://justsso1.github.io/2019/11/17/%E4%BA%8B%E4%BB%B6event/","excerpt":"","text":"Event ‰∫ã‰ª∂ÂÜíÊ≥° ÂíåÂéüÁîüdom‰∫ã‰ª∂ÁöÑÂå∫Âà´","categories":[],"tags":[]},{"title":"ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂºÄÂèëÁªèÈ™å‰πãÁôªÂΩï","slug":"ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂºÄÂèëÁªèÈ™å‰πãÁôªÈôÜ","date":"2019-11-15T16:00:00.000Z","updated":"2024-10-12T08:40:56.549Z","comments":true,"path":"2019/11/16/ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂºÄÂèëÁªèÈ™å‰πãÁôªÈôÜ/","permalink":"https://justsso1.github.io/2019/11/16/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E4%B9%8B%E7%99%BB%E9%99%86/","excerpt":"","text":"Â∞èÁ®ãÂ∫è‰∏ÄËà¨ÊòØÂú®app onLaunchÁ®ãÂ∫èÂàùÂßãÂåñÊó∂ÔºåÊ£ÄÊµãÁî®Êà∑ÊòØÂê¶ÁôªÂΩïËøáÔºåÔºàÊü•ÁúãlocalStorage‰∏≠ÊòØÂê¶ÊúâÁôªÂΩïÊ†áÂøóÔºâÔºåÁÑ∂Âêéwx.checkSession() Êé•Âè£Êù•Âà§Êñ≠session_keyÊòØÂê¶ËøáÊúü‰Ωú‰∏∫Áî®Êà∑ÁôªÂΩïÁä∂ÊÄÅÊòØÂê¶ËøáÊúüÔºåÊ≤°ÊúâËøáÊúüÂ∞±Áõ¥Êé•ËøõË°å‰∏ã‰∏ÄÊ≠•ÔºåËøáÊúü‰∫ÜÂÖàÂéªÈáçÊñ∞ÁôªÂΩïÂÜçËøõË°å‰∏ã‰∏ÄÊ≠•Êìç‰Ωú„ÄÇ ÁôªÂΩïÁ≥ªÁªüËÆæËÆ°ÊñπÈù¢ÔºåÊó†ËÆ∫ÊòØÂ∞èÁ®ãÂ∫èËøòÊòØappÂàÜ‰∏∫‰∏§ÁßçÔºö ‰∏ÄÁßçÊòØÈ¶ñÈ°µ‰∏≠ÊòØÂê¶ÊúâÂíåÁî®Êà∑Áõ∏ÂÖ≥ÁöÑ‰ø°ÊÅØËé∑ÂèñÂ±ïÁ§∫Ê®°ÂùóÔºàÊØîÂ¶ÇËé∑ÂèñÁî®Êà∑ÁöÑÊä•ÂêçËØæÁ®ãÔºå‰ªªÂä°ÔºåÊâáË¥ùÈòÖËØªappÔºå‰∏çËÉåÂçïËØçappÔºâÔºåËøôÁßçÈúÄË¶ÅÂú®Á®ãÂ∫èÂêØÂä®Êó∂Ê£ÄÊµãsessionÊòØÂê¶ËøáÊúüÔºåÂ¶ÇÊûúËøáÊúü‰∫ÜÔºåËøôÊó∂Â∫îËØ•Âú®ËøõÂÖ•È¶ñÈ°µÂâçÔºåÂ∞±Êà™Êñ≠Áî®Êà∑Êìç‰ΩúÔºà‰∏çÁÑ∂ÔºåÁî®Êà∑Ëé∑Âèñ‰∏çÂà∞Â±û‰∫é‰ªñÁöÑÊ≠£Á°Æ‰ø°ÊÅØÔºâÔºåÁïåÈù¢ÁªôÂá∫‰∏Ä‰∏™ÊèêÁ§∫ËøõË°åÈáçÊñ∞ÁôªÈôÜÊàñËÄÖË∑ØÁî±Ë∑≥ËΩ¨Âà∞ÈáçÊñ∞ÁôªÈôÜÁïåÈù¢ÔºåÁôªÂΩïÂÆåÊàê‰πãÂêéÂÜçËøîÂõûÂà∞È¶ñÈ°µ„ÄÇ Âè¶‰∏ÄÁßçÊòØÈ¶ñÈ°µ‰∏≠Ê≤°ÊúâÂíåÁî®Êà∑Áõ∏ÂÖ≥ÁöÑ‰ø°ÊÅØÔºàÊØîÂ¶ÇËé∑ÂèñÁî®Êà∑ÁöÑÊä•ÂêçËØæÁ®ãÔºåÂ§ßÂ§öÈÉΩÊòØÁ≥ªÁªüÁöÑÊé®ËçêÁõ∏ÂÖ≥ÔºåÂàÜÁ±ªÂ±ïÁ§∫‰ø°ÊÅØÔºåÊØîÂ¶ÇÁæéÂõ¢appÔºâÔºåÁî®Êà∑ÁöÑ‰ø°ÊÅØ‰∏ÄËà¨ÊîæÂú® ÂÖ∂‰ªñÁöÑtabÔºàÊàëÁöÑÈ°µÈù¢Ôºâ‰∏≠Ôºå ËøôÁßçÂ∞±‰∏çÈúÄË¶ÅÂÅö‰∏Ä‰∏™ÊòéÊòæÁöÑsession_keyËøáÊúüÁöÑÈáçÊñ∞ÁôªÈôÜÊ®°ÂºèÔºåÂõ†‰∏∫‰πãÊâÄ‰ª•Ë¶ÅÈáçÊñ∞ÁôªÂΩï‰∏ªË¶ÅÊòØÂíåÁî®Êà∑ÁöÑ‰ø°ÊÅØÊúâÂÖ≥Á≥ªÔºåÈ¶ñÈ°µ‰∏çÈúÄË¶ÅËé∑ÂèñÁî®Êà∑‰ø°ÊÅØÔºåÂ∞±Ê≤°ÂøÖË¶ÅÂÅöÂá∫‰∏Ä‰∏™ÊèêÁ§∫Ë¶ÅÁî®Êà∑ÈáçÊñ∞ÁôªÂΩïÔºå‰∏ÄËà¨ÊòØÂú®Áî®Êà∑Êó†ÊÑüÁü•ÁöÑÊÉÖÂÜµ‰∏ãÔºåÁ≥ªÁªüËá™Âä®ËøõË°å‰∫ÜÈáçÊñ∞ÁôªÂΩïÔºåÊú¨Âú∞Â≠òÂÇ®ÊúÄÊñ∞ÁöÑÁôªÂΩïÊ†áÂøó„ÄÇÂΩìÁî®Êà∑ÊâãÂä®ÂàáÊç¢Âà∞Âà∞ÂÖ∂‰ªñtabÁöÑÊó∂ÂÄôÔºåappÊú¨Âú∞Â∑≤ÁªèËøõË°åËøáÈáçÊñ∞ÁôªÈôÜ‰∫ÜÔºåÁî®Êà∑ÂèØ‰ª•‰∏çÂèóÂπ≤Êâ∞ÁöÑÁªßÁª≠‰ΩøÁî®app„ÄÇ ÂÆûÈôÖ‰∏æ‰æã1. ÊÄùË∑Ø 1ÔºâÁî®Êà∑ÁôªÂΩïÊÄÅËøáÊúüÊó∂Èó¥Â¶Ç‰ΩïËÆæÁΩÆÔºü ËøôÈáåÊàë‰ª¨Âú®ÂâçÁ´ØËøõË°åÊéßÂà∂ÔºåÂç≥Âà©Áî®wx.checkSession() Êé•Âè£Êù•Âà§Êñ≠session_key ÊòØÂê¶ËøáÊúüÊù•‰Ωú‰∏∫Áî®Êà∑ÁôªÂΩïÊÄÅÊòØÂê¶ËøáÊúüÁöÑÊ†áÂøó„ÄÇÂ¶ÇÊûúËøáÊúü‰∫ÜÔºåÂàôË∑≥ËΩ¨Âà∞Áªü‰∏ÄÁöÑÁôªÂΩïÈ°µÈù¢ÂºïÂØºÁî®Êà∑ÁÇπÂáªÊåâÈíÆÈáçÊñ∞ÊéàÊùÉÁôªÂΩïÔºåÈáçÊñ∞ÁôªÂΩï‰πãÂêésession_key ‰ºöÂà∑Êñ∞ÔºåÁõ∏ÂΩì‰∫éÂú®Ëé∑ÂèñÁî®Êà∑ÊúÄÊñ∞‰ø°ÊÅØÁöÑÂêåÊó∂ÈáçÊñ∞ËÆæÂÆö‰∫ÜËøáÊúüÊó∂Èó¥„ÄÇ Ôºà2ÔºâonShow() ‰∏éonLoad() Â∞èÁ®ãÂ∫èjs ‰∏≠ÊúâonShow ‰∏éonLoad‰∏§Áßç‰∫ã‰ª∂„ÄÇ‰∏§Áßç‰∫ã‰ª∂ÁöÑÂå∫Âà´Â∞±Âú®‰∫éonLoad ÊØèÊ¨°ÊâìÂºÄÂ∞èÁ®ãÂ∫èÂè™Âä†ËΩΩ‰∏ÄÊ¨°ÔºåË∑≥ËΩ¨Âà∞ÂÖ∂‰ªñÈ°µÈù¢ÂÜçÂõûÊù•ÁöÑÊó∂ÂÄôËøô‰∏™‰∫ã‰ª∂Â∞±‰∏ç‰ºöÂÜçËß¶Âèë„ÄÇËÄåonShow ÂàôÊØèÊ¨°ËøõÂÖ•È°µÈù¢ÈÉΩ‰ºöËß¶ÂèëÔºåÊâÄ‰ª•Êàë‰ª¨Âú®ËøõÂÖ•ÊØè‰∏™È°µÈù¢Ê£ÄÊü•Áî®Êà∑ÁôªÂΩïÊÄÅÊòØÂê¶ËøáÊúüÁöÑ‰ª£Á†ÅÈúÄË¶ÅÊîæÂú®onShow ‰∏≠„ÄÇ Ôºà3ÔºâÈáçÊñ∞ÁôªÂΩïËøáÁ®ãÂàÜÊûê Â¶ÇÊûúÁî®Êà∑ÁôªÂΩïÊÄÅËøáÊúüÔºåÂàôÈúÄË¶ÅËøõË°åÈáçÊñ∞ÁôªÂΩï„ÄÇÂâçÁ´ØÂºïÂØºÁî®Êà∑ÁÇπÂáªÊåâÈíÆËß¶ÂèëgetUserInfo Ëé∑ÂèñÊúÄÊñ∞Áî®Êà∑‰ø°ÊÅØ -&gt; ÂâçÁ´ØË∞ÉÁî®wx.login() Ëé∑Âèñcode -&gt; ÂâçÁ´ØÂ∞Ücode ÂèëÈÄÅÁªôÂêéÁ´ØËé∑Âèñopenid Âíåseesion_key -&gt; ÂêéÁ´ØÂÜôsession Âπ∂ËøîÂõûÂØπÂ∫îsession ÁöÑÂîØ‰∏ÄÊ†áÂøó -&gt; ÂâçÁ´ØÂ≠òÂÇ®Ëøô‰∏™ÂîØ‰∏ÄÊ†áÂøó„ÄÇ 2. ‰ª£Á†ÅÂÆû‰æã Âú®ÊØè‰∏™È°µÈù¢ÁöÑonShow ‰∫ã‰ª∂‰∏≠Ê∑ªÂä†‰ª•‰∏ã‰ª£Á†ÅÊù•Ê£ÄÊü•ÂΩìÂâçÁî®Êà∑ÁôªÂΩïÊÄÅÊòØÂê¶ËøáÊúü: 1`wx.checkSession(&#123;`` ``success: ``function` `() &#123;`` ``//session_key Êú™ËøáÊúüÔºåÂπ∂‰∏îÂú®Êú¨ÁîüÂëΩÂë®Êúü‰∏ÄÁõ¥ÊúâÊïà`` ``return` `;`` ``&#125;,`` ``fail: ``function` `() &#123;`` ``// session_key Â∑≤ÁªèÂ§±ÊïàÔºåÈúÄË¶ÅÈáçÊñ∞ÊâßË°åÁôªÂΩïÊµÅÁ®ã`` ``wx.navigateTo(&#123;`` ``url: ``&quot;/pages/authorize/index&quot;`` ``&#125;)`` ``&#125;``&#125;)` Âõ†‰∏∫ËøõÂÖ•ÊØè‰∏™È°µÈù¢‰∏≠ÈÉΩÈúÄË¶ÅËøõË°åÁî®Êà∑ÁôªÂΩïÊÄÅÊòØÂê¶ËøáÊúüÁöÑÊ£ÄÊü•ÔºåÊâÄ‰ª•ÈúÄË¶ÅÊúâ‰∏Ä‰∏™ÂÖ¨ÂÖ±ÁöÑÊéàÊùÉÈ°µÈù¢ÔºåÂΩìÊ£ÄÊü•‰∏çÂêåËøáÁöÑÊó∂ÂÄôÔºåÂ∞±Ë∑≥ËΩ¨Âà∞Ëøô‰∏™ÊéàÊùÉÈ°µÈù¢ÂºïÂØºÁî®Êà∑ÈáçÊñ∞ËøõË°åÊéàÊùÉÔºåÊéàÊùÉÈ°µÈù¢authorize ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö wxml 12345&lt;view class=&quot;container&quot;&gt; &lt;view style=&#x27;width:100%;padding-left:30rpx;font-size: 28rpx;margin-top:30rpx;&#x27;&gt;1„ÄÅÂêåÊÑèÂΩìÂâçÂ∞èÁ®ãÂ∫èËé∑ÂèñÊàëÁöÑÂæÆ‰ø°Â§¥ÂÉèÔºõ&lt;/view&gt; &lt;view style=&#x27;width:100%;padding-left:30rpx;font-size: 28rpx;margin-top:30rpx;&#x27;&gt;2„ÄÅÂêåÊÑèÂΩìÂâçÂ∞èÁ®ãÂ∫èËé∑ÂèñÊàëÁöÑÂæÆ‰ø°ÊòµÁß∞Á≠âÂÖ∂‰ªñ‰ø°ÊÅØÔºõ&lt;/view&gt; &lt;button open-type=&quot;getUserInfo&quot; bindgetuserinfo=&quot;bindGetUserInfo&quot; class=&quot;save-btn&quot;&gt;ÊéàÊùÉÁôªÂΩï&lt;/button&gt;&lt;/view&gt; wxss 123456789101112131415161718page&#123; height: 100%;&#125;.container&#123; background-color: #f5f5f9; justify-content: initial;&#125;.save-btn&#123; width: 690rpx; height: 80rpx; line-height: 80rpx; text-align: center; margin-top:30rpx; border-radius: 6rpx; box-sizing: border-box; background-color: #e64340; color:#fff;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152// pages/authorize/index.jsvar app = getApp();let Domain = app.globalData.domain;Page(&#123; /** * È°µÈù¢ÁöÑÂàùÂßãÊï∞ÊçÆ */ data: &#123; &#125;, /** * ÁîüÂëΩÂë®ÊúüÂáΩÊï∞--ÁõëÂê¨È°µÈù¢Âä†ËΩΩ */ onLoad: function (options) &#123; &#125;, /** * ÁîüÂëΩÂë®ÊúüÂáΩÊï∞--ÁõëÂê¨È°µÈù¢ÂàùÊ¨°Ê∏≤ÊüìÂÆåÊàê */ onReady: function () &#123; &#125;, /** * ÁîüÂëΩÂë®ÊúüÂáΩÊï∞--ÁõëÂê¨È°µÈù¢ÊòæÁ§∫ */ onShow: function () &#123; &#125;, /** * ÁîüÂëΩÂë®ÊúüÂáΩÊï∞--ÁõëÂê¨È°µÈù¢ÈöêËóè */ onHide: function () &#123; &#125;, /** * ÁîüÂëΩÂë®ÊúüÂáΩÊï∞--ÁõëÂê¨È°µÈù¢Âç∏ËΩΩ */ onUnload: function () &#123; &#125;, /** * È°µÈù¢Áõ∏ÂÖ≥‰∫ã‰ª∂Â§ÑÁêÜÂáΩÊï∞--ÁõëÂê¨Áî®Êà∑‰∏ãÊãâÂä®‰Ωú */ onPullDownRefresh: function () &#123; &#125;, /** * È°µÈù¢‰∏äÊãâËß¶Â∫ï‰∫ã‰ª∂ÁöÑÂ§ÑÁêÜÂáΩÊï∞ */ onReachBottom: function () &#123; &#125;, /** * Áî®Êà∑ÁÇπÂáªÂè≥‰∏äËßíÂàÜ‰∫´ */ onShareAppMessage: function () &#123; &#125;, bindGetUserInfo: function (e) &#123; // Ëé∑ÂæóÊúÄÊñ∞ÁöÑÁî®Êà∑‰ø°ÊÅØ if (!e.detail.userInfo)&#123; return; &#125; wx.setStorageSync(&#x27;userInfo&#x27;, e.detail.userInfo) this.checkSessionAndLogin(); &#125;, /* ËøôÈáå‰ΩøÁî®openid ‰Ωú‰∏∫‰∏éÂêéÁ´Øsession ËøûÊé•ÁöÑÊ†áÂøó Ê£ÄÊü•ÊòØÂê¶Â≠òÂú®openidÔºåÂç≥‰πãÂâçÊòØÂê¶ÁôªÂΩïËøá Â¶ÇÊûúÁôªÂΩïËøáÔºåÊ£ÄÊü•session_key ÊòØÂê¶ËøáÊúü Â¶ÇÊûúËøáÊúü‰∫ÜÔºåremove openid ÈáçÊñ∞ÊâßË°ålogin Âπ∂Â∞ÜÁî®Êà∑‰ø°ÊÅØÂèëÈÄÅÂà∞ÊúçÂä°Âô®Á´ØÊõ¥Êñ∞ Â¶ÇÊûúÊ≤°ËøáÊúüÂàôËøîÂõû Â¶ÇÊûúÊ≤°ÁôªÂΩïËøáÂàôÊâßË°ålogin Âπ∂Â∞ÜÁî®Êà∑‰ø°ÊÅØÂèëÈÄÅÂà∞ÊúçÂä°Âô®Êõ¥Êñ∞ */ checkSessionAndLogin: function () &#123; let that = this; let thisOpenId = wx.getStorageSync(&#x27;openid&#x27;); // Â∑≤ÁªèËøõË°å‰∫ÜÁôªÂΩïÔºåÊ£ÄÊü•ÁôªÂΩïÊòØÂê¶ËøáÊúü if (thisOpenId) &#123; console.log(&#x27;have openid&#x27;) wx.checkSession(&#123; success: function () &#123; //session_key Êú™ËøáÊúüÔºåÂπ∂‰∏îÂú®Êú¨ÁîüÂëΩÂë®Êúü‰∏ÄÁõ¥ÊúâÊïà wx.navigateBack(&#123;&#125;); &#125;, fail: function () &#123; console.log(&#x27;but session_key expired&#x27;); // session_key Â∑≤ÁªèÂ§±ÊïàÔºåÈúÄË¶ÅÈáçÊñ∞ÊâßË°åÁôªÂΩïÊµÅÁ®ã wx.removeStorageSync(&#x27;openid&#x27;); //ËøôÈáå‰ºöËÆ©openidÂú®Êú¨Âú∞‰∏çÂ≠òÂú®ÔºåÈÄö‰∏çËøáifÂà§Êñ≠Ôºå‰ªéËÄåËµ∞elseÈÄªËæëÔºåËøõË°åÁôªÂΩï that.checkSessionAndLogin(); &#125; &#125;) &#125; else &#123; // Ê≤°ÊúâËøõË°åÁôªÂΩïÂàôÂÖàËøõË°åÁôªÂΩïÊìç‰Ωú console.log(&#x27;do not have openid&#x27;); that.loginAndGetOpenid(); &#125; &#125;, // ÊâßË°åÁôªÂΩïÊìç‰ΩúÂπ∂Ëé∑ÂèñÁî®Êà∑openId loginAndGetOpenid: function () &#123; console.log(&#x27;do login and get openid&#x27;); let that = this; wx.login(&#123; success: function (res) &#123; if (res.code) &#123; wx.request(&#123; url: Domain + &#x27;/user/wx_login&#x27;, data: &#123; code: res.code &#125;, success: function (res) &#123; res = res.data; console.log(res) // ‰øùÂ≠òopenIdÔºåÂπ∂Â∞ÜÁî®Êà∑‰ø°ÊÅØÂèëÈÄÅÁªôÂêéÁ´Ø if (res.code === 0) &#123; wx.showModal(&#123; title: &#x27;set openid&#x27;, content: res.data, &#125;) wx.setStorageSync(&#x27;openid&#x27;, res.data); that.sendUserInfoToServer(); &#125; else &#123; wx.showModal(&#123; title: &#x27;Sorry&#x27;, content: &#x27;Áî®Êà∑ÁôªÂΩïÂ§±Ë¥•~&#x27;, &#125;) &#125; &#125; &#125;) &#125; &#125; &#125;) &#125;, sendUserInfoToServer: function () &#123; console.log(&#x27;now send user info to server&#x27;); let userInfo = wx.getStorageSync(&#x27;userInfo&#x27;); let thisOpenId = wx.getStorageSync(&#x27;openid&#x27;); userInfo.openid =thisOpenId; wx.request(&#123; url: Domain + &#x27;/user/updateUser&#x27;, method: &#x27;POST&#x27;, dataType: &#x27;json&#x27;, data: userInfo, success: function (res) &#123; res = res.data; if (res.code === 0) &#123; wx.navigateBack(&#123;&#125;); &#125; else &#123; wx.showModal(&#123; title: &#x27;Sorry&#x27;, content: &#x27;ÂêåÊ≠•‰ø°ÊÅØÂá∫Èîô~&#x27;, &#125;) &#125; &#125; &#125;) &#125;&#125;) Âè¶Â§ñÔºåunionIDÁöÑËé∑Âèñ‰πüÊòØÊúâÂøÖË¶ÅÁöÑUnionID Êú∫Âà∂ËØ¥ÊòéÂ¶ÇÊûúÂºÄÂèëËÄÖÊã•ÊúâÂ§ö‰∏™ÁßªÂä®Â∫îÁî®„ÄÅÁΩëÁ´ôÂ∫îÁî®„ÄÅÂíåÂÖ¨‰ºóÂ∏êÂè∑ÔºàÂåÖÊã¨Â∞èÁ®ãÂ∫èÔºâÔºåÂèØÈÄöËøá UnionID Êù•Âå∫ÂàÜÁî®Êà∑ÁöÑÂîØ‰∏ÄÊÄßÔºåÂõ†‰∏∫Âè™Ë¶ÅÊòØÂêå‰∏Ä‰∏™ÂæÆ‰ø°ÂºÄÊîæÂπ≥Âè∞Â∏êÂè∑‰∏ãÁöÑÁßªÂä®Â∫îÁî®„ÄÅÁΩëÁ´ôÂ∫îÁî®ÂíåÂÖ¨‰ºóÂ∏êÂè∑ÔºàÂåÖÊã¨Â∞èÁ®ãÂ∫èÔºâÔºåÁî®Êà∑ÁöÑ UnionID ÊòØÂîØ‰∏ÄÁöÑ„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂêå‰∏ÄÁî®Êà∑ÔºåÂØπÂêå‰∏Ä‰∏™ÂæÆ‰ø°ÂºÄÊîæÂπ≥Âè∞‰∏ãÁöÑ‰∏çÂêåÂ∫îÁî®ÔºåunionidÊòØÁõ∏ÂêåÁöÑ„ÄÇ UnionIDËé∑ÂèñÈÄîÂæÑÁªëÂÆö‰∫ÜÂºÄÂèëËÄÖÂ∏êÂè∑ÁöÑÂ∞èÁ®ãÂ∫èÔºåÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÈÄîÂæÑËé∑Âèñ UnionID„ÄÇ Ë∞ÉÁî®Êé•Âè£ wx.getUserInfoÔºå‰ªéËß£ÂØÜÊï∞ÊçÆ‰∏≠Ëé∑Âèñ UnionID„ÄÇÊ≥®ÊÑèÊú¨Êé•Âè£ÈúÄË¶ÅÁî®Êà∑ÊéàÊùÉÔºåËØ∑ÂºÄÂèëËÄÖÂ¶•ÂñÑÂ§ÑÁêÜÁî®Êà∑ÊãíÁªùÊéàÊùÉÂêéÁöÑÊÉÖÂÜµ„ÄÇ Â¶ÇÊûúÂºÄÂèëËÄÖÂ∏êÂè∑‰∏ãÂ≠òÂú®Âêå‰∏ª‰ΩìÁöÑÂÖ¨‰ºóÂè∑ÔºåÂπ∂‰∏îËØ•Áî®Êà∑Â∑≤ÁªèÂÖ≥Ê≥®‰∫ÜËØ•ÂÖ¨‰ºóÂè∑„ÄÇÂºÄÂèëËÄÖÂèØ‰ª•Áõ¥Êé•ÈÄöËøá wx.login + code2Session Ëé∑ÂèñÂà∞ËØ•Áî®Êà∑ UnionIDÔºåÊó†È°ªÁî®Êà∑ÂÜçÊ¨°ÊéàÊùÉ„ÄÇ Â¶ÇÊûúÂºÄÂèëËÄÖÂ∏êÂè∑‰∏ãÂ≠òÂú®Âêå‰∏ª‰ΩìÁöÑÂÖ¨‰ºóÂè∑ÊàñÁßªÂä®Â∫îÁî®ÔºåÂπ∂‰∏îËØ•Áî®Êà∑Â∑≤ÁªèÊéàÊùÉÁôªÂΩïËøáËØ•ÂÖ¨‰ºóÂè∑ÊàñÁßªÂä®Â∫îÁî®„ÄÇÂºÄÂèëËÄÖ‰πüÂèØ‰ª•Áõ¥Êé•ÈÄöËøá wx.login + code2Session Ëé∑ÂèñÂà∞ËØ•Áî®Êà∑ UnionID ÔºåÊó†È°ªÁî®Êà∑ÂÜçÊ¨°ÊéàÊùÉ„ÄÇ Áî®Êà∑Âú®Â∞èÁ®ãÂ∫èÔºàÊöÇ‰∏çÊîØÊåÅÂ∞èÊ∏∏ÊàèÔºâ‰∏≠ÊîØ‰ªòÂÆåÊàêÂêéÔºåÂºÄÂèëËÄÖÂèØ‰ª•Áõ¥Êé•ÈÄöËøágetPaidUnionIdÊé•Âè£Ëé∑ÂèñËØ•Áî®Êà∑ÁöÑ UnionIDÔºåÊó†ÈúÄÁî®Êà∑ÊéàÊùÉ„ÄÇÊ≥®ÊÑèÔºöÊú¨Êé•Âè£‰ªÖÂú®Áî®Êà∑ÊîØ‰ªòÂÆåÊàêÂêéÁöÑ5ÂàÜÈíüÂÜÖÊúâÊïàÔºåËØ∑ÂºÄÂèëËÄÖÂ¶•ÂñÑÂ§ÑÁêÜ„ÄÇ Â∞èÁ®ãÂ∫èÁ´ØË∞ÉÁî®‰∫ëÂáΩÊï∞Êó∂ÔºåÂ¶ÇÊûúÂºÄÂèëËÄÖÂ∏êÂè∑‰∏ãÂ≠òÂú®Âêå‰∏ª‰ΩìÁöÑÂÖ¨‰ºóÂè∑ÔºåÂπ∂‰∏îËØ•Áî®Êà∑Â∑≤ÁªèÂÖ≥Ê≥®‰∫ÜËØ•ÂÖ¨‰ºóÂè∑ÔºåÂèØÂú®‰∫ëÂáΩÊï∞‰∏≠ÈÄöËøá cloud.getWXContext Ëé∑Âèñ UnionID„ÄÇ Â∞èÁ®ãÂ∫èÁ´ØË∞ÉÁî®‰∫ëÂáΩÊï∞Êó∂ÔºåÂ¶ÇÊûúÂºÄÂèëËÄÖÂ∏êÂè∑‰∏ãÂ≠òÂú®Âêå‰∏ª‰ΩìÁöÑÂÖ¨‰ºóÂè∑ÊàñÁßªÂä®Â∫îÁî®ÔºåÂπ∂‰∏îËØ•Áî®Êà∑Â∑≤ÁªèÊéàÊùÉÁôªÂΩïËøáËØ•ÂÖ¨‰ºóÂè∑ÊàñÁßªÂä®Â∫îÁî®Ôºå‰πüÂèØÂú®‰∫ëÂáΩÊï∞‰∏≠ÈÄöËøá cloud.getWXContext Ëé∑Âèñ UnionID„ÄÇ","categories":[{"name":"ÂæÆ‰ø°ÂºÄÂèë","slug":"ÂæÆ‰ø°ÂºÄÂèë","permalink":"https://justsso1.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"ÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ÁªèÈ™åÂàÜ‰∫´","slug":"ÂæÆ‰ø°ÂºÄÂèë-ÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ÁªèÈ™åÂàÜ‰∫´","date":"2019-11-15T16:00:00.000Z","updated":"2024-10-12T08:40:56.549Z","comments":true,"path":"2019/11/16/ÂæÆ‰ø°ÂºÄÂèë-ÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ÁªèÈ™åÂàÜ‰∫´/","permalink":"https://justsso1.github.io/2019/11/16/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91-%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%B9%B3%E5%8F%B0%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/","excerpt":"","text":"ÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ÁªèÈ™å ÂæÆ‰ø°ÁîüÊÄÅÁöÑÁπÅËç£‰∏éÂ§çÊùÇ‰πüÊòØÂπ∂Â≠òÁöÑ„ÄÇ2018Âπ¥Â∞èÁ®ãÂ∫èÂíåÂ∞èÊ∏∏ÊàèÁöÑÁÅ´ÁàÜÔºå‰πüÂèØ‰ª•ËØ¥ÊòéÂæÆ‰ø°ÁîüÊÄÅË∂äÊù•Ë∂äÁπÅËç£ÔºåÂæÆ‰ø°Ë∂ÖÁ∫ßapp\bÁªôÊàë‰ª¨ÁöÑÁîüÊ¥ªÂ∏¶Êù•‰∫Ü\bÂæàÂ§öÁöÑ\b‰æøÂà©ÔºåÂêåÊó∂ÊúâÂæàÂ§öÁöÑ‰ºÅ‰∏öÂíåËá™Áî±Â∑•‰ΩúËÄÖ‰πü‰æùËµñ‰∫éÂæÆ‰ø°ÁöÑÁîüÊÄÅÁéØÂ¢ÉÔºåÂèëÂ±ïÂÖ¨Âè∏ÂíåËá™Â∑±„ÄÇ ÊàëÊé•Ëß¶ÂæÆ‰ø°ÂºÄÂèëÂø´Êúâ‰∏ÄÂπ¥‰∫ÜÔºåÂØπ‰∫éÂæÆ‰ø°ÁöÑÁîüÊÄÅÁéØÂ¢ÉÊúâ‰∏ÄÂÆöÁöÑ‰∫ÜËß£„ÄÇ‰∏ªË¶ÅÂÅöÂæÆ‰ø°ÊúçÂä°Âè∑ÁöÑÂºÄÂèëÔºå‰πüÂÅöËøáÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁöÑÂºÄÂèëÔºåÂæÆ‰ø°ÂÖ¨‰ºóÂè∑ÁöÑÂºÄÂèëÔºåÂú®Â∑•‰ΩúËøáÁ®ã‰∏≠ÁßØÁ¥Ø‰∫ÜÂæàÂ§öÁöÑÁªèÈ™åÔºåËÆ∞ÂΩïÂú®ËøôÁâáÊñáÁ´†‰∏≠„ÄÇ ÂæÆ‰ø°ÁöÑÁîüÊÄÅÁéØÂ¢ÉÁöÑÂÖ≥Á≥ªÂ±ÇÁ∫ßÂ¶Ç‰∏ãÔºö ÂæÆ‰ø°ÂºÄÊîæÂπ≥Âè∞ ÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ ËÆ¢ÈòÖÂè∑ ÊúçÂä°Âè∑ ÂÖ¨‰ºóÂè∑ÂºÄÂèë Â∞èÁ®ãÂ∫è&#x2F;Â∞èÊ∏∏Êàè ‰ºÅ‰∏öÂæÆ‰ø° Âú®Áî≥ËØ∑ÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ÁöÑÊó∂ÂÄôÔºåË¶Å‰∫ÜËß£\bÊØèÁßçË¥¶Âè∑Á±ªÂûãÂèØ‰ª•ÂÅöÂì™‰∫õ‰∫ãÊÉÖÔºå‰∏çÂèØ‰ª•ÂÅöÂì™‰∫õ‰∫ãÊÉÖÔºåËÉΩ‰∏çËÉΩÊª°Ë∂≥‰Ω†ÁöÑÈúÄÊ±ÇÔºåÂê¶ÂàôÂêéÊúüË¶ÅÊîπÁöÑËØùÔºåË¥πÊó∂Ë¥πÂäõÔºåÊúâÂèØËÉΩÂâçÊúüÁöÑÁßØÁ¥ØÁöÑÁ≤â‰∏ùÈÉΩÁôΩË¥π‰∫Ü„ÄÇ ÊúçÂä°Âè∑ÁöÑÊúâÊõ¥Â§öÁöÑÊé•Âè£ÊùÉÈôêÔºå‰ª•Êª°Ë∂≥ÂºÄÂèëËÄÖÁöÑÈúÄÊ±ÇÔºåÊúâ‰∏Ä‰∫õÊùÉÈôêÈúÄÊ±ÇÁªèËøáËÆ§ËØÅÊâçÂèØ‰ª•ÔºåÊØîÂ¶ÇÂæÆ‰ø°ÊîØ‰ªòÂäüËÉΩ„ÄÇ \bÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ÊäÄÊúØÊñáÊ°£ ÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞Êé•Âè£Ë∞ÉËØïÂ∑•ÂÖ∑ ÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞Êé•Âè£ÊµãËØïÂ∏êÂè∑Áî≥ËØ∑ ÈÄöÂ∏∏ÂæÆ‰ø°ÊúçÂä°Âè∑‰∏≠ÂÜÖÂµåÂæàÂ§öÁΩëÈ°µÔºåÂ§ßÂ§öÊï∞ÊòØspaÔºåËé∑ÂèñÁî®Êà∑ÁöÑ‰ø°ÊÅØ‰ª•Êª°Ë∂≥‰∏öÂä°ÂºÄÂèë„ÄÇ ÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ÔºåÂ∞±ÊòØÁÆ°ÁêÜÂæÆ‰ø°ÊúçÂä°Âè∑ ËµÑÊ∫ê‰∏≠ÂøÉÊòØÂæÆ‰ø°ÂºÄÊîæÂπ≥Âè∞ÂºÄÂèëËÄÖÊâÄÈúÄÊâÄÊúâÁõ∏ÂÖ≥ËµÑÊ∫êÁöÑÊ±áÈõÜÂú∞ÔºåÂåÖÊã¨Ôºö ÁßªÂä®Â∫îÁî®ÂºÄÂèë ÁΩëÁ´ôÂ∫îÁî®ÂºÄÂèë ÂÖ¨‰ºóÂ∏êÂè∑ÂºÄÂèë ÂÖ¨‰ºóÂè∑ÊúçÂä°ÂºÄÂèë Áî®Êà∑ÂêëÂÖ¨‰ºóÂ∏êÂè∑ÂèëÈÄÅÊ∂àÊÅØÊó∂ÔºåÂÖ¨‰ºóÂ∏êÂè∑ÊñπÊî∂Âà∞ÁöÑÊ∂àÊÅØÂèëÈÄÅËÄÖÊòØ‰∏Ä‰∏™OpenIDÔºåÊòØ‰ΩøÁî®Áî®Êà∑ÂæÆ‰ø°Âè∑Âä†ÂØÜÂêéÁöÑÁªìÊûúÔºåÊØè‰∏™Áî®Êà∑ÂØπÊØè‰∏™ÂÖ¨‰ºóÂ∏êÂè∑Êúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑOpenID„ÄÇ ÂæÆ‰ø°ÂÖ¨‰ºóÂ∏êÂè∑Êé•Âè£Âè™ÊîØÊåÅ80Êé•Âè£„ÄÇ UnionID Êú∫Âà∂ËØ¥ÊòéÂ¶ÇÊûúÂºÄÂèëËÄÖÊã•ÊúâÂ§ö‰∏™ÁßªÂä®Â∫îÁî®„ÄÅÁΩëÁ´ôÂ∫îÁî®„ÄÅÂíåÂÖ¨‰ºóÂ∏êÂè∑ÔºàÂåÖÊã¨Â∞èÁ®ãÂ∫èÔºâÔºåÂèØÈÄöËøá UnionID Êù•Âå∫ÂàÜÁî®Êà∑ÁöÑÂîØ‰∏ÄÊÄßÔºåÂõ†‰∏∫Âè™Ë¶ÅÊòØÂêå‰∏Ä‰∏™ÂæÆ‰ø°ÂºÄÊîæÂπ≥Âè∞Â∏êÂè∑‰∏ãÁöÑÁßªÂä®Â∫îÁî®„ÄÅÁΩëÁ´ôÂ∫îÁî®ÂíåÂÖ¨‰ºóÂ∏êÂè∑ÔºàÂåÖÊã¨Â∞èÁ®ãÂ∫èÔºâÔºåÁî®Êà∑ÁöÑ UnionID ÊòØÂîØ‰∏ÄÁöÑ„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂêå‰∏ÄÁî®Êà∑ÔºåÂØπÂêå‰∏Ä‰∏™ÂæÆ‰ø°ÂºÄÊîæÂπ≥Âè∞‰∏ãÁöÑ‰∏çÂêåÂ∫îÁî®ÔºåunionidÊòØÁõ∏ÂêåÁöÑ„ÄÇ ÂºÄÂèëËøáÁ®ã‰∏≠ÔºåÂèØ‰ª•Áî≥ËØ∑‰∏Ä‰∏™ÊµãËØïÂè∑ÔºåÂæÆ‰ø°ËøôÂùóÂÅöÁöÑ‰πüÊòØÂæàË¥¥ÂøÉ‰∫Ü„ÄÇÁôªÈôÜÊµãËØïÂè∑","categories":[{"name":"ÂæÆ‰ø°ÂºÄÂèë","slug":"ÂæÆ‰ø°ÂºÄÂèë","permalink":"https://justsso1.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"Redux","slug":"reactÂ≠¶‰π†-Redux","date":"2019-11-11T16:00:00.000Z","updated":"2024-10-16T04:06:47.187Z","comments":true,"path":"2019/11/12/reactÂ≠¶‰π†-Redux/","permalink":"https://justsso1.github.io/2019/11/12/react%E5%AD%A6%E4%B9%A0-Redux/","excerpt":"","text":"ReduxÊ†áÁ≠æÔºàÁ©∫Ê†ºÂàÜÈöîÔºâÔºö redux Áä∂ÊÄÅÁÆ°ÁêÜ Finally, to tie state and actions together, we write a function called a reducer.ÊúÄÂêéÔºå‰∏∫‰∫ÜÂ∞ÜÁä∂ÊÄÅÂíåÂä®‰ΩúËÅîÁ≥ªÂú®‰∏ÄËµ∑ÔºåÊàë‰ª¨ÁºñÂÜô‰∫Ü‰∏Ä‰∏™Âêç‰∏∫reducerÁöÑÂáΩÊï∞„ÄÇ it‚Äôs just a function that takes state and action as arguments, and returns the next state of the appÂÆÉÂè™ÊòØ‰∏Ä‰∏™Â∞ÜÁä∂ÊÄÅÂíåÂä®‰Ωú‰Ωú‰∏∫ÂèÇÊï∞ÁöÑÂáΩÊï∞ÔºåÂπ∂ËøîÂõûÂ∫îÁî®Á®ãÂ∫èÁöÑ‰∏ã‰∏Ä‰∏™Áä∂ÊÄÅ„ÄÇ Three Principles ‰∏â‰∏™ÂéüÂàô Redux ÂèØ‰ª•Áî®‰∏â‰∏™Âü∫Êú¨ÁöÑÂéüÂàôÊù•ÊèèËø∞Ôºö Single source of truth Âçï‰∏ÄÊù•Ê∫êÁöÑÁúüÁêÜ The state of your whole application is stored in an object tree within a single store. store.getState() State is read-only Áä∂ÊÄÅÂè™ËØª The only way to change the state is to emit an action, an object describing what happened. ÊîπÂèòÁä∂ÊÄÅÁöÑÂîØ‰∏ÄÊñπÊ≥ïÊòØÂèëÂá∫‰∏Ä‰∏™Âä®‰ΩúÔºå‰∏Ä‰∏™ÊèèËø∞ÊâÄÂèëÁîü‰∫ãÊÉÖÁöÑÂØπË±°„ÄÇ Changes are made with pure functions ‰ΩøÁî®Á∫ØÂáΩÊï∞ÊîπÂèò To specify how the state tree is transformed by actions, you write pure reducers. Ë¶ÅÊåáÂÆöÁä∂ÊÄÅÊ†ëÂ¶Ç‰ΩïÈÄöËøáÊìç‰ΩúËøõË°åËΩ¨Êç¢ÔºåÊÇ®ÈúÄË¶ÅÁºñÂÜôÁ∫ØÁ≤πÁöÑreducers„ÄÇ You can start with a single reducer, and as your app grows, split it off into smaller reducers that manage specific parts of the state tree. Because reducers are just functions, you can control the order in which they are called, pass additional data, or even make reusable reducers for common tasks such as pagination ‰Ω†ÂèØ‰ª•‰ªé‰∏Ä‰∏™ÁÆÄÂåñÁ®ãÂ∫èÂºÄÂßãÔºåÈöèÁùÄÂ∫îÁî®Á®ãÂ∫èÁöÑÂ¢ûÈïøÔºå‰Ω†ÂèØ‰ª•ÊääÂÆÉÊãÜÂàÜÊàêÊõ¥Â∞èÁöÑÁÆÄÂåñÁ®ãÂ∫èÊù•ÁÆ°ÁêÜÁä∂ÊÄÅÊ†ëÁöÑÁâπÂÆöÈÉ®ÂàÜ„ÄÇÂõ†‰∏∫ËøòÂéüÂâÇÂè™ÊòØÂáΩÊï∞ÔºåÊâÄ‰ª•ÊÇ®ÂèØ‰ª•ÊéßÂà∂ÂÆÉ‰ª¨Ë¢´Ë∞ÉÁî®ÁöÑÈ°∫Â∫èÔºå‰º†ÈÄíÈ¢ùÂ§ñÁöÑÊï∞ÊçÆÔºåÁîöËá≥ÂèØ‰ª•‰∏∫Â∏∏ËßÅÁöÑ‰ªªÂä°(Â¶ÇÂàÜÈ°µ)Âà∂‰ΩúÂèØÈáçÁî®ÁöÑËøòÂéüÂâÇ„ÄÇ 123import &#123; combineReducers, createStore &#125; from &#x27;redux&#x27;const reducer = combineReducers(&#123; visibilityFilter, todos &#125;)const store = createStore(reducer) Learning Resourcesconnect function Taking Advantage of combineReducers selector functions Stack Overflow: Why do we need middleware for async flow in Redux? Connect ÂáΩÊï∞Â∞ÜreactÁªÑ‰ª∂ËøûÊé•Âà∞reduxÂ≠òÂÇ® connectÊòØredux-reactÂ∫ìÁöÑÂáΩÊï∞ÔºåËøô‰∏™ÂáΩÊï∞Êèê‰æõ‰∫ÜÂæàÂ§ö‰ºòÂåñÂéªÈòªÊ≠¢‰∏çÂøÖË¶ÅÁöÑÊõ¥Êñ∞ÔºåÊèêÂçáreactÊÄßËÉΩ„ÄÇ ÂÆÉÂèØ‰ª•Êé•Âèó‰∏§‰∏™ÂáΩÊï∞ mapStateToProps(state, ownProps) ,mapDispatchToProps(dispatch, ownProps) Provider ÁªÑ‰ª∂ Provider Êù•Ëá™react-reduxÂ∫ìÔºåÂèØ‰ª•Â∞Üstore‰º†ÈÄíÁªôÂ∫îÁî®‰∏≠ÊâÄÊúâÁöÑÂÆπÂô®ÁªÑ‰ª∂ÔºåËÄåÊó†ÈúÄÊòæÁ§∫‰º†ÈÄíÂÆÉÔºåÂè™ÈúÄÂú®Ê∏≤ÊüìÊ†πÁªÑ‰ª∂ÁöÑÊó∂ÂÄô‰ΩøÁî®ÂÆÉ‰∏ÄÊ¨°„ÄÇ 123&lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt;&lt;/Provider&gt; reduxÁöÑÈ´òÁ∫ß‰ΩøÁî®ÊñπÊ≥ï ÂºÇÊ≠•ÁöÑAction‰ΩøÁî®‰∏≠Èó¥‰ª∂MiddlewaremiddlewareÊèê‰æõÁöÑÊòØ‰∏Ä‰∏™‰Ωç‰∫éactionË¢´ÂèëËµ∑‰πãÂêéÔºåÂà∞Ëææreducer‰πãÂâçÁöÑÊâ©Â±ï„ÄÇ‰Ω†ÂèØ‰ª•Âà©Áî®redux middlerÊù•ËøõË°åÊó•ÂøóËÆ∞ÂΩïÔºåÂàõÂª∫Â¥©Ê∫ÉÊä•ÂëäÔºåË∞ÉÁî®ÂºÇÊ≠•Êé•Âè£ÊàñËÄÖË∑ØÁî±Á≠âÁ≠â„ÄÇ","categories":[],"tags":[]},{"title":"ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÊîØ‰ªò","slug":"ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂºÄÂèë-ÂæÆ‰ø°ÊîØ‰ªò","date":"2019-10-27T16:00:00.000Z","updated":"2024-10-12T08:40:56.549Z","comments":true,"path":"2019/10/28/ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂºÄÂèë-ÂæÆ‰ø°ÊîØ‰ªò/","permalink":"https://justsso1.github.io/2019/10/28/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91-%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/","excerpt":"","text":"ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂºÄÂèë-ÂæÆ‰ø°ÊîØ‰ªòÂæÆ‰ø°Â∞èÁ®ãÂ∫èÊîØ‰ªòÂºÄÂèëÊ≠•È™§ÂíåH5ÊîØ‰ªòÈùûÂ∏∏Á±ª‰ºº„ÄÇ ÊàëÂÖàËØ¥ËØ¥Âú®ÂºÄÂèë‰πãÂâçÁöÑÂáÜÂ§áÂ∑•‰ΩúÂêßÔºåÂõ†‰∏∫ËøôÂùó‰πüÂæàÈáçË¶ÅÁöÑ„ÄÇ È¶ñÂÖàÔºåÂ¶ÇÊûúÊ≤°ÊúâÂæÆ‰ø°ÊîØ‰ªòÂïÜÊà∑Âè∑ÁöÑËØùÔºåÈúÄË¶ÅÂéªÁî≥ËØ∑‰∏Ä‰∏™ÂæÆ‰ø°ÊîØ‰ªòÂïÜÊà∑Âπ≥Âè∞Ë¥¶Âè∑ÔºåÈúÄË¶ÅÊ†πÊçÆ‰Ω†Ë¶ÅÁî≥ËØ∑Ë¥¶Âè∑Á±ªÂûãÂáÜÂ§áÁõ∏Â∫îÁöÑÊùêÊñô„ÄÇ Êèê‰∫§ÊùêÊñôÂÆ°Ê†∏ÔºåÂ§ßÁ∫¶1-2Â∑•‰ΩúÊó•ÔºåÊùêÊñôÈÄöËøá‰πãÂêéÔºåÂ∞±ÊòØÂú®Á∫øÁ≠æÁΩ≤ÂçèËÆÆ ÈÄöËøá‰πãÂêéÔºåÂú®ÂïÜÊà∑Âπ≥Âè∞‰∏≠ÁªëÂÆö‰Ω†ÁöÑÂ∞èÁ®ãÂ∫èappid ÂÅöÂÆå‰ª•‰∏äËøô‰∫õÔºåÂ∞±ÂèØ‰ª•ÂºÄÂßãÂºÄÂèë‰∫Ü„ÄÇ ÂºÄÂèëÊ≠•È™§Â¶Ç‰∏ãÔºö Áªü‰∏Ä‰∏ãÂçï https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=9_1 Â∫îÁî®Âú∫ÊôØ ÂïÜÊà∑Âú®Â∞èÁ®ãÂ∫è‰∏≠ÂÖàË∞ÉÁî®ËØ•Êé•Âè£Âú®ÂæÆ‰ø°ÊîØ‰ªòÊúçÂä°ÂêéÂè∞ÁîüÊàêÈ¢ÑÊîØ‰ªò‰∫§ÊòìÂçïÔºåËøîÂõûÊ≠£Á°ÆÁöÑÈ¢ÑÊîØ‰ªò‰∫§ÊòìÂêéË∞ÉËµ∑ÊîØ‰ªò„ÄÇËøô‰∏ÄÊ≠•ÁöÑÁõÆÂú∞Â∞±ÊòØËé∑Âèñprepay_id,ÂÆÉÊòØÈ¢ÑÊîØ‰ªò‰∫§ÊòìÂõûËØùÊ†áËØÜ„ÄÇÂ∞Üprepay_id‰º†ÁªôÂâçÂè∞ÔºåÂâçÂè∞Ë∞ÉÁî®js-sdk„ÄÇ Êé•Âè£ÈìæÊé• URLÂú∞ÂùÄÔºöhttps://api.mch.weixin.qq.com/pay/unifiedorder ‚Äã ÊòØÂê¶ÈúÄË¶ÅËØÅ‰π¶ ‚Äã Âê¶ Êúâ‰∏ÄÁÇπËøòÊòØË¶ÅËØ¥‰∏Ä‰∏ãÔºå1„ÄÅËØ∑Ê±ÇÂèÇÊï∞‰∏≠ÁöÑspbill_create_ipÁªàÁ´ØIP ÔºåÂèØ‰ª•ÂÜô‰Ω†ÊúçÂä°Âô®ÁöÑipÂú∞ÂùÄ„ÄÇ2„ÄÅÂèØ‰ª•‰ΩøÁî®xml2jsÊääxmlËß£ÊûêÂá∫Êù• 12345678910111213141516171819202122232425262728293031323334353637383940let body = productItem.title || &#x27;ÂêØÂæ∑ÂõΩÈôÖÊïôËÇ≤ËßÑÂàíÈô¢Âá∫ÂìÅ&#x27;; //ÂïÜÂìÅÊèèËø∞ let url = &#x27;https://api.mch.weixin.qq.com/pay/unifiedorder&#x27;; let nonce_str = getRanId(32); let out_trade_no = &quot;&quot; + new Date().getTime() + Math.floor(Math.random() * 10); let client_ip = &quot;118.190.153.113&quot;; let notify_url = &#x27;https://wordcamp.ibt.tel/index&#x27;; let trade_type = &#x27;JSAPI&#x27;; let openid = await getOpenId(ctx); let stringA = `appid=$&#123;MiniProgram.appId&#125;&amp;body=$&#123;body&#125;&amp;mch_id=$&#123;mch_id&#125;&amp;nonce_str=$&#123;nonce_str&#125;&amp;notify_url=$&#123;notify_url&#125;&amp;openid=$&#123;openid&#125;&amp;out_trade_no=$&#123;out_trade_no&#125;&amp;spbill_create_ip=$&#123;client_ip&#125;&amp;total_fee=$&#123;total_fee&#125;&amp;trade_type=$&#123;trade_type&#125;`; let stringSighTemp = stringA + &quot;&amp;key=‰Ω†ÁöÑÂïÜÊà∑Âπ≥Âè∞ÁöÑkey&quot;; let sign = md5(stringSighTemp).toUpperCase(); let xml = `&lt;xml&gt; &lt;appid&gt;$&#123;MiniProgram.appId&#125;&lt;/appid&gt; &lt;body&gt;$&#123;body&#125;&lt;/body&gt; &lt;mch_id&gt;$&#123;mch_id&#125;&lt;/mch_id&gt; &lt;nonce_str&gt;$&#123;nonce_str&#125;&lt;/nonce_str&gt; &lt;notify_url&gt;$&#123;notify_url&#125;&lt;/notify_url&gt; &lt;openid&gt;$&#123;openid&#125;&lt;/openid&gt; &lt;out_trade_no&gt;$&#123;out_trade_no&#125;&lt;/out_trade_no&gt; &lt;spbill_create_ip&gt;$&#123;client_ip&#125;&lt;/spbill_create_ip&gt; &lt;total_fee&gt;$&#123;total_fee&#125;&lt;/total_fee&gt; &lt;trade_type&gt;$&#123;trade_type&#125;&lt;/trade_type&gt; &lt;sign&gt;$&#123;sign&#125;&lt;/sign&gt;&lt;/xml&gt;`; console.log(xml); let res = await axios(&#123; method: &#x27;post&#x27;, url: url, data: xml, responseType: &#x27;text/xml&#x27;, headers: &#123; &#x27;Content-Type&#x27;: &#x27;text/xml&#x27; &#125;, body: &#123; &#x27;content-type&#x27;: &#x27;text/xml&#x27; &#125; &#125;); let parseObj = await xml2js.parseStringPromise(res.data); ctx.body = parseObj 2.Â∞èÁ®ãÂ∫èË∞ÉËµ∑ÊîØ‰ªòapi https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=7_7&amp;index=5 Ëøô‰∏ÄÊ≠•‰∏≠‰ºöÁî®Âà∞‰∏ä‰∏ÄÊ≠•‰∏≠ËøîÂõûÁöÑÊï∞ÊçÆÔºåprepay_id 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556let appid = res.data.xml.appid[0]; let prepay_id = res.data.xml.prepay_id[0]; let nonce_str = res.data.xml.nonce_str[0]; let stringA = &quot;appId=&quot; + appid + &quot;&amp;nonceStr=&quot; + nonce_str + &quot;&amp;package=prepay_id=&quot; + prepay_id + &quot;&amp;signType=MD5&amp;timeStamp=&quot; + timeStamp; var stringSignTemp = stringA + &quot;&amp;key=‰Ω†ÁöÑÂïÜÊà∑Âπ≥Âè∞ÁöÑkey&quot;; let paySign = md5(stringSignTemp).toUpperCase(); let that = this; wx.requestPayment(&#123; timeStamp: timeStamp, nonceStr: nonce_str, package: `prepay_id=$&#123;prepay_id&#125;`, signType: &#x27;MD5&#x27;, paySign: paySign, success(res) &#123; console.log(res, &#x27;Áî®Êà∑ÊîØ‰ªòÊàêÂäü&#x27;); myrequest.post(addProductOrder, &#123; productId: productId, actualMoney: that.state.productDetail.price &#125;).then(res =&gt; &#123; console.log(res, 77); if (res.data.code === 200) &#123; that.setState(&#123; toastStatus: &quot;success&quot;, toastText: &quot;‰∏ãÂçïÊàêÂäü&quot;, toastOpen: true &#125;, () =&gt; &#123; setTimeout(() =&gt; &#123; wx.navigateTo(&#123; url: `../orderData/orderData?productId=$&#123;that.state.productDetail.id&#125;&amp;type=product` &#125;) &#125;, 1500) &#125;) &#125; else &#123; that.setState(&#123; toastStatus: &quot;error&quot;, toastText: &quot;‰∏ãÂçïÂ§±Ë¥•&quot;, toastOpen: true &#125;) &#125; &#125;) &#125;, fail(res) &#123; console.log(res, &#x27;Áî®Êà∑ÂèñÊ∂àÊîØ‰ªò&#x27;); that.setState(&#123; toastStatus: &quot;error&quot;, toastText: &quot;ÊÇ®Â∑≤ÂèñÊ∂àÊîØ‰ªò&quot;, toastOpen: true &#125;); &#125;, complete(res) &#123; console.log(res, &#x27;complete&#x27;) &#125; &#125;)&#125; Â∞èÁ®ãÂ∫èÂæÆ‰ø°ÊîØ‰ªòË¶ÅÊØîH5ÊîØ‰ªòÂèãÂ•ΩÂæàÂ§öÔºåÂç≥‰ΩøÊòØÂú®ÂºÄÂèëÈò∂ÊÆµÔºåÂºÄÂèëËÄÖ‰πüÊòØÂèØ‰ª•Áî®Ëá™Â∑±ÁöÑÊâãÊú∫Êâ´Á†ÅËøõË°åÊîØ‰ªòÊù•Ë∞ÉËØïÔºå‰∏çÁî®ËÆæÁΩÆ‰ªª‰ΩïÁöÑ‰ª£ÁêÜÔºåÈùûÂ∏∏Ê£í„ÄÇ","categories":[{"name":"ÂæÆ‰ø°ÂºÄÂèë","slug":"ÂæÆ‰ø°ÂºÄÂèë","permalink":"https://justsso1.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"ArrayBuffer","slug":"es6-ArrayBuffer","date":"2019-10-05T16:00:00.000Z","updated":"2024-10-12T08:40:56.540Z","comments":true,"path":"2019/10/06/es6-ArrayBuffer/","permalink":"https://justsso1.github.io/2019/10/06/es6-ArrayBuffer/","excerpt":"","text":"es6-ArrayBufferArrayBufferÂØπË±°ÊòØ‰ªÄ‰πàArrayBufferÂØπË±°‰ª£Ë°®Â≠òÂÇ®‰∫åËøõÂà∂Êï∞ÊçÆÁöÑ‰∏ÄÊÆµÂÜÖÂ≠òÔºåÂÆÉ‰∏çËÉΩÁõ¥Êé•ËØªÂÜôÔºåÂè™ËÉΩÈÄöËøáËßÜÂõæÔºàDataViewËßÜÂõæÊàñËÄÖTypedArrayËßÜÂõæÔºâÊù•ËØªÂÜôÔºåËßÜÂõæÁöÑ‰ΩúÁî®ÊòØ‰ª•ÊåáÂÆöÊ†ºÂºèËß£ËØª‰∫åËøõÂà∂Êï∞ÊçÆ„ÄÇ ArrayBuffer‰πüÊòØ‰∏Ä‰∏™ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂèØ‰ª•ÂàÜÈÖç‰∏ÄÊÆµÂ≠òÂÇ®Êï∞ÊçÆÁöÑËøûÁª≠ÂÜÖÂ≠òÂå∫Âüü„ÄÇ 1const buf = new ArrayBuffer(32); ‰∏äÈù¢‰ª£Á†ÅÁîüÊàê‰∫Ü‰∏ÄÊÆµ 32 Â≠óËäÇÁöÑÂÜÖÂ≠òÂå∫ÂüüÔºåÊØè‰∏™Â≠óËäÇÁöÑÂÄºÈªòËÆ§ÈÉΩÊòØ 0„ÄÇÂèØ‰ª•ÁúãÂà∞ÔºåArrayBufferÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂèÇÊï∞ÊòØÊâÄÈúÄË¶ÅÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÔºàÂçï‰ΩçÂ≠óËäÇÔºâ„ÄÇ ‰∏∫‰∫ÜËØªÂÜôËøôÊÆµÂÜÖÂÆπÔºåÈúÄË¶Å‰∏∫ÂÆÉÊåáÂÆöËßÜÂõæ„ÄÇDataViewËßÜÂõæÁöÑÂàõÂª∫ÔºåÈúÄË¶ÅÊèê‰æõArrayBufferÂØπË±°ÂÆû‰æã‰Ωú‰∏∫ÂèÇÊï∞„ÄÇ 123const buf = new ArrayBuffer(32);const dataView = new DataView(buf);dataView.getUint8(0) // 0 ‰∏äÈù¢‰ª£Á†ÅÂØπ‰∏ÄÊÆµ 32 Â≠óËäÇÁöÑÂÜÖÂ≠òÔºåÂª∫Á´ãDataViewËßÜÂõæÔºåÁÑ∂Âêé‰ª•‰∏çÂ∏¶Á¨¶Âè∑ÁöÑ 8 ‰ΩçÊï¥Êï∞Ê†ºÂºèÔºå‰ªéÂ§¥ËØªÂèñ 8 ‰Ωç‰∫åËøõÂà∂Êï∞ÊçÆÔºåÁªìÊûúÂæóÂà∞ 0ÔºåÂõ†‰∏∫ÂéüÂßãÂÜÖÂ≠òÁöÑArrayBufferÂØπË±°ÔºåÈªòËÆ§ÊâÄÊúâ‰ΩçÈÉΩÊòØ 0„ÄÇ Âè¶‰∏ÄÁßçTypedArrayËßÜÂõæÔºå‰∏éDataViewËßÜÂõæÁöÑ‰∏Ä‰∏™Âå∫Âà´ÊòØÔºåÂÆÉ‰∏çÊòØ‰∏Ä‰∏™ÊûÑÈÄ†ÂáΩÊï∞ÔºåËÄåÊòØ‰∏ÄÁªÑÊûÑÈÄ†ÂáΩÊï∞Ôºå‰ª£Ë°®‰∏çÂêåÁöÑÊï∞ÊçÆÊ†ºÂºè„ÄÇ 12345678const buffer = new ArrayBuffer(12);const x1 = new Int32Array(buffer);x1[0] = 1;const x2 = new Uint8Array(buffer);x2[0] = 2;x1[0] // 2 ‰∏äÈù¢‰ª£Á†ÅÂØπÂêå‰∏ÄÊÆµÂÜÖÂ≠òÔºåÂàÜÂà´Âª∫Á´ã‰∏§ÁßçËßÜÂõæÔºö32 ‰ΩçÂ∏¶Á¨¶Âè∑Êï¥Êï∞ÔºàInt32ArrayÊûÑÈÄ†ÂáΩÊï∞ÔºâÂíå 8 ‰Ωç‰∏çÂ∏¶Á¨¶Âè∑Êï¥Êï∞ÔºàUint8ArrayÊûÑÈÄ†ÂáΩÊï∞Ôºâ„ÄÇÁî±‰∫é‰∏§‰∏™ËßÜÂõæÂØπÂ∫îÁöÑÊòØÂêå‰∏ÄÊÆµÂÜÖÂ≠òÔºå‰∏Ä‰∏™ËßÜÂõæ‰øÆÊîπÂ∫ïÂ±ÇÂÜÖÂ≠òÔºå‰ºöÂΩ±ÂìçÂà∞Âè¶‰∏Ä‰∏™ËßÜÂõæ„ÄÇ TypedArrayËßÜÂõæÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÈô§‰∫ÜÊé•ÂèóArrayBufferÂÆû‰æã‰Ωú‰∏∫ÂèÇÊï∞ÔºåËøòÂèØ‰ª•Êé•ÂèóÊôÆÈÄöÊï∞ÁªÑ‰Ωú‰∏∫ÂèÇÊï∞ÔºåÁõ¥Êé•ÂàÜÈÖçÂÜÖÂ≠òÁîüÊàêÂ∫ïÂ±ÇÁöÑArrayBufferÂÆû‰æãÔºåÂπ∂ÂêåÊó∂ÂÆåÊàêÂØπËøôÊÆµÂÜÖÂ≠òÁöÑËµãÂÄº„ÄÇ 12345const typedArray = new Uint8Array([0,1,2]);typedArray.length // 3typedArray[0] = 5;typedArray // [5, 1, 2] ‰∏äÈù¢‰ª£Á†Å‰ΩøÁî®TypedArrayËßÜÂõæÁöÑUint8ArrayÊûÑÈÄ†ÂáΩÊï∞ÔºåÊñ∞Âª∫‰∏Ä‰∏™‰∏çÂ∏¶Á¨¶Âè∑ÁöÑ 8 ‰ΩçÊï¥Êï∞ËßÜÂõæ„ÄÇÂèØ‰ª•ÁúãÂà∞ÔºåUint8ArrayÁõ¥Êé•‰ΩøÁî®ÊôÆÈÄöÊï∞ÁªÑ‰Ωú‰∏∫ÂèÇÊï∞ÔºåÂØπÂ∫ïÂ±ÇÂÜÖÂ≠òÁöÑËµãÂÄºÂêåÊó∂ÂÆåÊàê„ÄÇ Â≠òÂÇ®Âçï‰ΩçÊç¢ÁÆóArrayBufferÁöÑÂÆû‰æãÊñπÊ≥ï ArrayBuffer.prototype.byteLength ArrayBuffer.prototype.slice(start,end) ArrayBufferÁöÑÈùôÊÄÅÊñπÊ≥ï ArrayBuffer.isView() ArrayBufferÊúâ‰∏Ä‰∏™ÈùôÊÄÅÊñπÊ≥ïisViewÔºåËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÔºåË°®Á§∫ÂèÇÊï∞ÊòØÂê¶‰∏∫ArrayBufferÁöÑËßÜÂõæÂÆû‰æã„ÄÇËøô‰∏™ÊñπÊ≥ïÂ§ßËá¥Áõ∏ÂΩì‰∫éÂà§Êñ≠ÂèÇÊï∞ÔºåÊòØÂê¶‰∏∫TypedArrayÂÆû‰æãÊàñDataViewÂÆû‰æã„ÄÇ 12345const buffer = new ArrayBuffer(8);ArrayBuffer.isView(buffer) // falseconst v = new Int32Array(buffer);ArrayBuffer.isView(v) // true ‰∫åËøõÂà∂Êï∞ÁªÑÁöÑÂ∫îÁî®FileApiFileÊé•Âè£ÂíåFileReaderÂØπË±°„ÄÇ ÂáÜÂ§áÂ∑•‰Ωú 12345&lt;input type=&quot;file&quot; id=&quot;files&quot; multiple /&gt;&lt;div id=&quot;list&quot;&gt;&lt;/div&gt;&lt;div id=&quot;images&quot;&gt;&lt;/div&gt;&lt;!-- File APIÁõ∏ÂÖ≥Êìç‰ΩúÂÜôÂú®‰∫Üscript.js‰∏≠ --&gt;&lt;script src=&quot;./script.js&quot;&gt;&lt;/script&gt; FileÂØπË±°ÊòØÁâπÊÆäÁ±ªÂûãÁöÑblob„ÄÇÈúÄË¶ÅÂú®ÊµèËßàÂô®‰∏≠Ê£ÄÊµãÂÖ∂ÂÖºÂÆπÊÄß„ÄÇ 123if (!(window.File &amp;&amp; window.FileReader &amp;&amp; window.FileList &amp;&amp; window.Blob)) &#123; throw new Error(&quot;ÂΩìÂâçÊµèËßàÂô®ÂØπFileAPIÁöÑÊîØÊåÅ‰∏çÂÆåÂñÑ&quot;);&#125; Êñá‰ª∂Â±ûÊÄß-Fileevent.target.files ÊòØ‰∏Ä‰∏™FileListÂØπË±°ÔºåÂÆÉÊòØ‰∏Ä‰∏™Áî±FileÂØπË±°ÁªÑÊàêÁöÑÂàóË°®„ÄÇ ÊØè‰∏™ File ÂØπË±°Ôºå‰øùÂ≠òÁùÄÈÄâ‰∏≠ÁöÑÂØπÂ∫îÊñá‰ª∂ÁöÑÂ±ûÊÄß„ÄÇÂ∏∏Áî®ÁöÑÊúâÔºö nameÔºöÊñá‰ª∂ÂêçtypeÔºöÊñá‰ª∂Á±ªÂûãsizeÔºöÊñá‰ª∂Â§ßÂ∞è‰∏ãÈù¢ÔºåÈÄöËøá type Â±ûÊÄßÔºåËøáÊª§ÊéâÈùûÂõæÁâáÁ±ªÂûãÁöÑÊñá‰ª∂ÔºåÂè™Â±ïÁ§∫ÂõæÁâáÁ±ªÂûãÊñá‰ª∂ÁöÑ‰ø°ÊÅØÔºö fileReaderÂØπÂ∫îÁöÑeventÁöÑËØ¶ÁªÜÂÜÖÂÆπÂú®consoleÊéßÂà∂Âè∞ÊâìÂç∞Â¶Ç‰∏ãÔºö 12345678910111213141516171819ProgressEvent &#123;isTrusted: true, lengthComputable: true, loaded: 6121, total: 6121, type: &quot;load&quot;, ‚Ä¶&#125;bubbles: falsecancelBubble: falsecancelable: falsecomposed: falsecurrentTarget: FileReader &#123;readyState: 2, result: &quot;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD‚Ä¶iM0kREBEWWjOecYRokiIgIiICIiCpFJE2jQiIiRERSl//2Q==&quot;, error: null, onprogress: null, onloadstart: ∆í, ‚Ä¶&#125;defaultPrevented: falseeventPhase: 0isTrusted: truelengthComputable: trueloaded: 6121path: []returnValue: truesrcElement: FileReader &#123;readyState: 2, result: &quot;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD‚Ä¶iM0kREBEWWjOecYRokiIgIiICIiCpFJE2jQiIiRERSl//2Q==&quot;, error: null, onprogress: null, onloadstart: ∆í, ‚Ä¶&#125;target: FileReader &#123;readyState: 2, result: &quot;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD‚Ä¶iM0kREBEWWjOecYRokiIgIiICIiCpFJE2jQiIiRERSl//2Q==&quot;, error: null, onprogress: null, onloadstart: ∆í, ‚Ä¶&#125;timeStamp: 4294.750000000931total: 6121type: &quot;load&quot;__proto__: ProgressEvent FileReaderÊúâ‰ª•‰∏ãÂá†‰∏™ÁõëÂê¨‰∫ã‰ª∂„ÄÇ onloadstart onload onloadend onprgress ÈÄöËøá lengthComputable``total``loadedËøôÂá†‰∏™Â±ûÊÄßÂèØ‰ª•ÂÅöÂà∞ÁõëÂê¨Êñá‰ª∂Âä†ËΩΩËøõÂ∫¶„ÄÇ ÁõëÂê¨Êñá‰ª∂Âä†ËΩΩËøõÂ∫¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677if (!(window.File &amp;&amp; window.FileReader &amp;&amp; window.FileList &amp;&amp; window.Blob)) &#123; throw new Error(&quot;ÂΩìÂâçÊµèËßàÂô®ÂØπFileApiÊîØÊåÅ‰∏çÂÆåÂñÑ&quot;);&#125;function handleFileSelect(e) &#123; const &#123;files&#125; = e.target; console.log(&#x27;ÈÄâÂèñÊñá‰ª∂‰∏™Êï∞Ôºö&#x27;, files.length); console.log(files); let vm = document.createDocumentFragment(); let innerHtml = &#x27;&#x27;; let loaded = 0, total = files.length; for (let file of files) &#123; innerHtml += `&lt;li&gt; &lt;strong&gt;$&#123;file.name&#125;&lt;/strong&gt; &lt;span&gt;$&#123;file.type&#125;&lt;/span&gt; &lt;span&gt;$&#123;file.size&#125; bytes&lt;/span&gt; &lt;/li&gt;`; const reader = new FileReader(); reader.onloadstart = function (ev) &#123; handleLoadStart(ev, file) &#125;; reader.onload = function (ev) &#123; handleOnLoad(ev, file) &#125;; reader.onprogress = ev =&gt; handleOnProgress(ev, file); reader.onloadend = function (ev) &#123; handleLoadEnd(ev, file) &#125;; reader.readAsDataURL(file); &#125; const handleLoadStart = function (ev, file) &#123; console.log(&#x27;&gt;&gt;&gt; start load&#x27;, file.name) &#125;; const handleOnLoad = function (ev, file) &#123; console.log(&#x27;&gt;&gt;&gt; Load file&#x27;, file.name); const img = document.createElement(&#x27;img&#x27;); img.height = 150; img.width = 250; img.src = ev.target.result; vm.appendChild(img); loaded++; if (loaded === total) &#123; document.querySelector(&#x27;#images&#x27;).appendChild(vm); &#125; &#125;; const handleOnProgress = function (ev, file) &#123; if (!ev.lengthComputable) &#123; return; &#125; console.log(ev); //ËÆ°ÁÆóËøõÂ∫¶ÔºåÂ±ïÁ§∫ÁôæÂàÜÊØî let percent = Math.round((ev.loaded / ev.total) * 100); console.log(&#x27;&gt;&gt;&gt; Loading&#x27;, file.name, &#x27;progress is &#x27;, percent, &#x27;%&#x27;); &#125;; const handleLoadEnd = function (ev, file) &#123; console.log(&#x27;&gt;&gt;&gt; End Load&#x27;, file.name) &#125;; document.querySelector(&#x27;#list&#x27;).innerHTML = `&lt;ul&gt;$&#123;innerHtml&#125;&lt;/ul&gt;`;&#125;document.querySelector(&#x27;#files&#x27;).addEventListener(&#x27;change&#x27;, handleFileSelect, false); Â§ßÊñá‰ª∂ÂàÜÁâáFileÊòØBlobÂØπË±°ÁöÑ‰∏Ä‰∏™Áâπ‰æãÔºåÂèØ‰ª•‰ΩøÁî®slice()Êù•Êà™ÂèñÊñá‰ª∂ ÊãñÊãΩ‰∏ä‰º†ÊãñÊãΩ‰∏ä‰º†‰∏ªË¶Å‰ºöÁî®Âà∞ÁöÑÁü•ËØÜÁÇπÊúâÔºöÊãñÊãΩdrog|dropÔºåFileAPI ËØªÂèñÊñá‰ª∂ÔºåformData Drag&amp;Drop : HTML5Âü∫‰∫éÊãñÊãΩÁöÑ‰∫ã‰ª∂Êú∫Âà∂. File API : ÂèØ‰ª•ÂæàÊñπ‰æøÁöÑËÆ© Web Â∫îÁî®ËÆøÈóÆÊñá‰ª∂ÂØπË±°ÔºåFile API ÂåÖÊã¨FileList„ÄÅBlob„ÄÅFile„ÄÅFileReader„ÄÅURI schemeÔºåÊú¨Êñá‰∏ªË¶ÅËÆ≤Ëß£ÊãñÊãΩ‰∏ä‰º†‰∏≠Áî®Âà∞ÁöÑ FileList Âíå FileReader Êé•Âè£„ÄÇ FormData : FormData ÊòØÂü∫‰∫é XMLHttpRequest Level 2ÁöÑÊñ∞Êé•Âè£ÔºåÂèØ‰ª•Êñπ‰æø web Â∫îÁî®Ê®°Êãü Form Ë°®ÂçïÊï∞ÊçÆÔºåÊúÄÈáçË¶ÅÁöÑÊòØÂÆÉÊîØÊåÅÊñá‰ª∂ÁöÑ‰∫åËøõÂà∂ÊµÅÊï∞ÊçÆÔºåËøôÊ†∑Êàë‰ª¨Â∞±ËÉΩÂ§üÈÄöËøáÂÆÉÊù•ÂÆûÁé∞ AJAX ÂêëÂêéÁ´ØÂèëÈÄÅÊñá‰ª∂Êï∞ÊçÆ‰∫Ü„ÄÇ H5ÂéüÁîüÁöÑDragÂíåDrop‰∫ã‰ª∂H5ÂéüÁîüÊèê‰æõÊãñÊãΩÊìç‰ΩúÔºå‰∏çÂøÖ‰ΩøÁî®Èº†Ê†á‰∫ã‰ª∂Êù•Ê®°Êãü„ÄÇ DragÂíåDropÂåÖÊã¨‰ª•‰∏ã‰∫ã‰ª∂Ôºö dragstartÔºö Ë¶ÅË¢´ÊãñÊãΩÁöÑÂÖÉÁ¥†ÂºÄÂßãÊãñÊãΩÊó∂Ëß¶ÂèëÔºåËøô‰∏™‰∫ã‰ª∂ÂØπË±°ÊòØË¢´ÊãñÊãΩÂÖÉÁ¥†dragenterÔºö ÊãñÊãΩÂÖÉÁ¥†ËøõÂÖ•ÁõÆÊ†áÂÖÉÁ¥†Êó∂Ëß¶ÂèëÔºåËøô‰∏™‰∫ã‰ª∂ÂØπË±°ÊòØÁõÆÊ†áÂÖÉÁ¥†dragoverÔºö ÊãñÊãΩÊüêÂÖÉÁ¥†Âú®ÁõÆÊ†áÂÖÉÁ¥†‰∏äÁßªÂä®Êó∂Ëß¶ÂèëÔºåËøô‰∏™‰∫ã‰ª∂ÂØπË±°ÊòØÁõÆÊ†áÂÖÉÁ¥†dragleaveÔºö ÊãñÊãΩÊüêÂÖÉÁ¥†Á¶ªÂºÄÁõÆÊ†áÂÖÉÁ¥†Êó∂Ëß¶ÂèëÔºåËøô‰∏™‰∫ã‰ª∂ÂØπË±°ÊòØÁõÆÊ†áÂÖÉÁ¥†dragendÔºö Âú®drop‰πãÂêéËß¶ÂèëÔºåÂ∞±ÊòØÊãñÊãΩÂÆåÊØïÊó∂Ëß¶ÂèëÔºåËøô‰∏™‰∫ã‰ª∂ÂØπË±°ÊòØË¢´ÊãñÊãΩÂÖÉÁ¥†dropÔºöÂ∞ÜË¢´ÊãñÊãΩÂÖÉÁ¥†ÊîæÂú®ÁõÆÊ†áÂÖÉÁ¥†ÂÜÖÊó∂Ëß¶ÂèëÔºåËøô‰∏™‰∫ã‰ª∂ÂØπË±°ÊòØÁõÆÊ†áÂÖÉÁ¥†ÂÆåÊàê‰∏ÄÊ¨°ÊàêÂäüÈ°µÈù¢ÂÖÉÁ¥†ÊãñÊãΩÁöÑË°å‰∏∫‰∫ã‰ª∂ËøáÁ®ãÔºö dragstart ‚Äì&gt; dragenter ‚Äì&gt; dragover ‚Äì&gt; drop ‚Äì&gt; dragend &#x2F;&#x2F;Ë¶ÅÊÉ≥ÂÆûÁé∞ÊãñÊãΩÔºåÈ¶ñÈ°µÈúÄË¶ÅÈòªÊ≠¢ÊµèËßàÂô®ÈªòËÆ§Ë°å‰∏∫Ôºå‰∏ÄÂÖ±Âõõ‰∏™‰∫ã‰ª∂ $(document).on({ dragleave:function(e){ &#x2F;&#x2F;ÊãñÁ¶ª e.preventDefault(); }, drop:function(e){ &#x2F;&#x2F;Êîæ‰∏ã e.preventDefault(); }, dragenter:function(e){ &#x2F;&#x2F;ÊãñËøõ e.preventDefault(); }, dragover:function(e){ &#x2F;&#x2F;ÊãñÊù•ÊãñÂéª e.preventDefault(); }}); ÊãñÊãΩÂØπ‰∫éÊµèËßàÂô®ÁöÑÈªòËÆ§Ë°å‰∏∫ÊòØÊâìÂºÄËØ•Êñá‰ª∂„ÄÇ File API ‰∏≠ÁöÑ FileList Êé•Âè£,ÂÆÉ‰∏ªË¶ÅÈÄöËøá‰∏§‰∏™ÈÄîÂæÑËé∑ÂèñÊú¨Âú∞Êñá‰ª∂ÂàóË°®Ôºö‰∏ÄÁßçÊòØ ÁöÑË°®ÂçïÂΩ¢ÂºèÔºå‰∏ÄÁßçÊòØ e.dataTransfer.files ÊãñÊãΩ‰∫ã‰ª∂‰º†ÈÄíÁöÑÊñá‰ª∂‰ø°ÊÅØ Á§∫‰æã‰ª£Á†ÅÔºö 1234&lt;div style=&quot;position: relative&quot;&gt; &lt;div id=&quot;container&quot;&gt;ÊãñÊãΩ‰∏ä‰º†&lt;/div&gt; &lt;input type=&quot;file&quot; style=&quot;position: absolute;left: 0;top: 0&quot;&gt;&lt;/div&gt; 12345678910111213141516171819202122232425262728293031323334353637//ÊãñÊãΩ‰∏ä‰º†//ÈòªÊ≠¢ÊµèËßàÂô®ÊãñÊãΩÈªòËÆ§Ë°å‰∏∫document.ondragleave = (e) =&gt; &#123; //ËÑ±Á¶ª e.preventDefault()&#125;;document.ondragover = (e) =&gt; &#123; //ÊâòÊù•ÊâòÂéª e.preventDefault(); document.querySelector(&#x27;#container&#x27;).classList.add(&#x27;over&#x27;);&#125;;document.ondragenter = (e) =&gt; &#123; //ÊãñËøõ e.preventDefault(); document.querySelector(&#x27;#container&#x27;).classList.add(&#x27;over&#x27;);&#125;;document.ondrop = (e) =&gt; &#123; // ÊâòÂêéÊîæ e.preventDefault(); document.querySelector(&#x27;#container&#x27;).classList.add(&#x27;over&#x27;);&#125;;let contaienr = document.querySelector(&#x27;#container&#x27;);contaienr.addEventListener(&#x27;dragover&#x27;, handleDragover, false);contaienr.addEventListener(&#x27;drop&#x27;, handleDrop, false);function handleDragover(event) &#123; event.stopPropagation(); //ÂÅúÊ≠¢ÂÜíÊ≥° event.preventDefault(); //ÈòªÊ≠¢ÈªòËÆ§Ë°å‰∏∫ console.log(&#x27;&gt;&gt;&gt; dragover...&#x27;)&#125;function handleDrop(event) &#123; event.stopPropagation(); event.preventDefault(); /***** ËÆøÈóÆÊãñÊãΩÊñá‰ª∂ *****/ const files = event.dataTransfer.files; console.log(files); /**********/&#125;","categories":[{"name":"es6","slug":"es6","permalink":"https://justsso1.github.io/categories/es6/"}],"tags":[]},{"title":"hook","slug":"reactÂ≠¶‰π†-hook","date":"2019-08-14T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2019/08/15/reactÂ≠¶‰π†-hook/","permalink":"https://justsso1.github.io/2019/08/15/react%E5%AD%A6%E4%B9%A0-hook/","excerpt":"","text":"reactÂ≠¶‰π†-HookHookÊòØ‰ªÄ‰πàHookÊòØreact 16.8 Êñ∞Â¢ûÁöÑÁâπÊÄßÔºåÂèØ‰ª•ËÆ©‰Ω†Âú®‰∏çÁºñÂÜôclassÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ΩøÁî®state‰ª•ÂèäÂÖ∂‰ªñÁöÑReactÁâπÊÄß„ÄÇ React ÈúÄË¶Å‰∏∫ÂÖ±‰∫´Áä∂ÊÄÅÈÄªËæëÊèê‰æõÊõ¥Â•ΩÁöÑÂéüÁîüÈÄîÂæÑ„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî® Hook ‰ªéÁªÑ‰ª∂‰∏≠ÊèêÂèñÁä∂ÊÄÅÈÄªËæëÔºå‰ΩøÂæóËøô‰∫õÈÄªËæëÂèØ‰ª•ÂçïÁã¨ÊµãËØïÂπ∂Â§çÁî®„ÄÇHook ‰Ωø‰Ω†Âú®Êó†ÈúÄ‰øÆÊîπÁªÑ‰ª∂ÁªìÊûÑÁöÑÊÉÖÂÜµ‰∏ãÂ§çÁî®Áä∂ÊÄÅÈÄªËæë„ÄÇ Ëøô‰ΩøÂæóÂú®ÁªÑ‰ª∂Èó¥ÊàñÁ§æÂå∫ÂÜÖÂÖ±‰∫´ Hook ÂèòÂæóÊõ¥‰æøÊç∑„ÄÇ Hook ÊòØËÉΩËÆ©‰Ω†Âú®ÂáΩÊï∞ÁªÑ‰ª∂‰∏≠‚ÄúÈí©ÂÖ•‚Äù React ÁâπÊÄßÁöÑÂáΩÊï∞„ÄÇÂÆÉ‰ª¨ÂêçÂ≠óÈÄöÂ∏∏ÈÉΩ‰ª• use ÂºÄÂßã„ÄÇ Hook: useStateÂΩìÊàë‰ª¨‰ΩøÁî® useState ÂÆö‰πâ state ÂèòÈáèÊó∂ÂÄôÔºåÂÆÉËøîÂõû‰∏Ä‰∏™Êúâ‰∏§‰∏™ÂÄºÁöÑÂÖÉÁªÑ„ÄÇÁ¨¨‰∏Ä‰∏™ÂÄºÊòØÂΩìÂâçÁöÑ stateÔºåÁ¨¨‰∫å‰∏™ÂÄºÊòØÊõ¥Êñ∞ state ÁöÑÂáΩÊï∞„ÄÇÊàë‰ª¨‰ΩøÁî®Êï∞ÁªÑËß£ÊûÑÊää‰ªñ‰ª¨ÂàÜÁ¶ªÂá∫Êù•„ÄÇ Á¨¨‰∫å‰∏™ÂÄºÊòØÊîπÂèòstateÁöÑÂáΩÊï∞Ôºå ‰ΩÜÊòØÂÆÉ‰∏ç‰ºöÊääÊñ∞ÁöÑ state ÂíåÊóßÁöÑ state ËøõË°åÂêàÂπ∂„ÄÇËÄåÊòØÁõ¥Êé•ÊõøÊç¢ÂÆÉ„ÄÇ classÁöÑthis.setStateÂíå useStateÁöÑÂå∫Âà´Ôºöthis.setState({}) Ôºö Êñ∞ÁöÑstate ÂíåÊóßÁöÑstateËøõË°åÂêàÂπ∂ useState(ÂÄº) Ôºö Êñ∞ÁöÑstate Áõ¥Êé•ÊõøÊç¢ÊóßÁöÑstate HooK: useEffectEffect Hook Âú®ÂáΩÊï∞ÁªÑ‰ª∂‰∏≠ÔºåÊâßË°åÂâØ‰ΩúÁî®Êìç‰ΩúÔºåÂπ∂‰∏îÂÆÉ‰∏é class ‰∏≠ÁöÑÁîüÂëΩÂë®ÊúüÂáΩÊï∞ÊûÅ‰∏∫Á±ª‰ºº„ÄÇ Êï∞ÊçÆËé∑ÂèñÔºåËÆæÁΩÆËÆ¢ÈòÖ‰ª•ÂèäÊâãÂä®Êõ¥Êîπ React ÁªÑ‰ª∂‰∏≠ÁöÑ DOM ÈÉΩÂ±û‰∫éÂâØ‰ΩúÁî®„ÄÇ‰∏çÁÆ°‰Ω†Áü•‰∏çÁü•ÈÅìËøô‰∫õÊìç‰ΩúÔºåÊàñÊòØ‚ÄúÂâØ‰ΩúÁî®‚ÄùËøô‰∏™ÂêçÂ≠óÔºåÂ∫îËØ•ÈÉΩÂú®ÁªÑ‰ª∂‰∏≠‰ΩøÁî®ËøáÂÆÉ‰ª¨„ÄÇ Â¶ÇÊûú‰Ω†ÁÜüÊÇâ React class ÁöÑÁîüÂëΩÂë®ÊúüÂáΩÊï∞Ôºå‰Ω†ÂèØ‰ª•Êää useEffect Hook ÁúãÂÅö componentDidMountÔºåcomponentDidUpdate Âíå componentWillUnmount Ëøô‰∏â‰∏™ÂáΩÊï∞ÁöÑÁªÑÂêà„ÄÇ Âú®react‰∏≠Êúâ‰∏§ÁßçÂ∏∏ËßÅÁöÑÂâØ‰ΩúÁî®Êìç‰ΩúÔºö ÈúÄË¶ÅÊ∏ÖÈô§ÁöÑÂíå‰∏çÈúÄË¶ÅÊ∏ÖÈô§ÁöÑ„ÄÇ Êó†ÈúÄÊ∏ÖÊ•öÁöÑÊìç‰ΩúÔºö React Êõ¥Êñ∞ DOM ‰πãÂêéËøêË°å‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑ‰ª£Á†ÅÔºåÊØîÂ¶ÇÂèëÈÄÅÁΩëÁªúËØ∑Ê±ÇÔºåÊâãÂä®ÂèòÊõ¥ DOMÔºåËÆ∞ÂΩïÊó•ÂøóÔºåËøô‰∫õÈÉΩÊòØÂ∏∏ËßÅÁöÑÊó†ÈúÄÊ∏ÖÈô§ÁöÑÊìç‰Ωú„ÄÇÂõ†‰∏∫Êàë‰ª¨Âú®ÊâßË°åÂÆåËøô‰∫õÊìç‰Ωú‰πãÂêéÔºåÂ∞±ÂèØ‰ª•ÂøΩÁï•‰ªñ‰ª¨‰∫Ü„ÄÇ ‰∏∫‰ªÄ‰πàÂú®ÁªÑ‰ª∂ÂÜÖÈÉ®Ë∞ÉÁî® useEffectÔºü Â∞Ü useEffect ÊîæÂú®ÁªÑ‰ª∂ÂÜÖÈÉ®ËÆ©Êàë‰ª¨ÂèØ‰ª•Âú® effect ‰∏≠Áõ¥Êé•ËÆøÈóÆ count state ÂèòÈáèÔºàÊàñÂÖ∂‰ªñ propsÔºâ„ÄÇÊàë‰ª¨‰∏çÈúÄË¶ÅÁâπÊÆäÁöÑ API Êù•ËØªÂèñÂÆÉ ‚Äî‚Äî ÂÆÉÂ∑≤Áªè‰øùÂ≠òÂú®ÂáΩÊï∞‰ΩúÁî®Âüü‰∏≠„ÄÇHook ‰ΩøÁî®‰∫Ü JavaScript ÁöÑÈó≠ÂåÖÊú∫Âà∂ÔºåËÄå‰∏çÁî®Âú® JavaScript Â∑≤ÁªèÊèê‰æõ‰∫ÜËß£ÂÜ≥ÊñπÊ°àÁöÑÊÉÖÂÜµ‰∏ãÔºåËøòÂºïÂÖ•ÁâπÂÆöÁöÑ React API„ÄÇ useEffect ‰ºöÂú®ÊØèÊ¨°Ê∏≤ÊüìÂêéÈÉΩÊâßË°åÂêóÔºü ÊòØÁöÑÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂÆÉÂú®Á¨¨‰∏ÄÊ¨°Ê∏≤Êüì‰πãÂêéÂíåÊØèÊ¨°Êõ¥Êñ∞‰πãÂêéÈÉΩ‰ºöÊâßË°å„ÄÇÔºàÊàë‰ª¨Á®çÂêé‰ºöË∞àÂà∞Â¶Ç‰ΩïÊéßÂà∂ÂÆÉ„ÄÇÔºâ‰Ω†ÂèØËÉΩ‰ºöÊõ¥ÂÆπÊòìÊé•Âèó effect ÂèëÁîüÂú®‚ÄúÊ∏≤Êüì‰πãÂêé‚ÄùËøôÁßçÊ¶ÇÂøµÔºå‰∏çÁî®ÂÜçÂéªËÄÉËôë‚ÄúÊåÇËΩΩ‚ÄùËøòÊòØ‚ÄúÊõ¥Êñ∞‚Äù„ÄÇReact ‰øùËØÅ‰∫ÜÊØèÊ¨°ËøêË°å effect ÁöÑÂêåÊó∂ÔºåDOM ÈÉΩÂ∑≤ÁªèÊõ¥Êñ∞ÂÆåÊØï„ÄÇ ÊØèÊ¨°Êàë‰ª¨ÈáçÊñ∞Ê∏≤ÊüìÔºåÈÉΩ‰ºöÁîüÊàêÊñ∞ÁöÑ effectÔºåÊõøÊç¢Êéâ‰πãÂâçÁöÑ„ÄÇÊüêÁßçÊÑè‰πâ‰∏äËÆ≤Ôºåeffect Êõ¥ÂÉèÊòØÊ∏≤ÊüìÁªìÊûúÁöÑ‰∏ÄÈÉ®ÂàÜ ‚Äî‚Äî ÊØè‰∏™ effect ‚ÄúÂ±û‰∫é‚Äù‰∏ÄÊ¨°ÁâπÂÆöÁöÑÊ∏≤Êüì„ÄÇ 123456789101112131415161718192021222324252627import React, &#123;useState, useEffect&#125; from &#x27;react&#x27;;function MyEffect() &#123; const [count, setCount] = useState(0); // Similar to componentDidMount and componentDidUpdate: useEffect(() =&gt; &#123; // Update the document title using the browser API document.title = &#x27;this is &#x27; + count + &#x27;.&#x27; &#125;); return ( &lt;div&gt; &lt;p&gt; The count is &#123;count&#125; &lt;/p&gt; &lt;button onClick=&#123;() =&gt; &#123; setCount(count + 1) &#125;&#125;&gt;ÁÇπÂáª+1 &lt;/button&gt; &lt;/div&gt; )&#125;export default MyEffect; ÈúÄË¶ÅÊ∏ÖÈô§ÁöÑÂâØ‰ΩúÁî®Ôºå‰æãÂè•ËÆ¢ÈòÖÂ§ñÈÉ®Êï∞ÊçÆÊ∫ê„ÄÇÂèØ‰ª•Èò≤Ê≠¢ÂºïËµ∑ÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ 12345678910111213141516171819202122import React, &#123; useState, useEffect &#125; from &#x27;react&#x27;;function FriendStatus(props) &#123; const [isOnline, setIsOnline] = useState(null); useEffect(() =&gt; &#123; function handleStatusChange(status) &#123; setIsOnline(status.isOnline); &#125; ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange); // Specify how to clean up after this effect: return function cleanup() &#123; ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange); &#125;; &#125;); if (isOnline === null) &#123; return &#x27;Loading...&#x27;; &#125; return isOnline ? &#x27;Online&#x27; : &#x27;Offline&#x27;;&#125; ‰∏∫‰ªÄ‰πàË¶ÅÂú® effect ‰∏≠ËøîÂõû‰∏Ä‰∏™ÂáΩÊï∞Ôºü ËøôÊòØ effect ÂèØÈÄâÁöÑÊ∏ÖÈô§Êú∫Âà∂„ÄÇÊØè‰∏™ effect ÈÉΩÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™Ê∏ÖÈô§ÂáΩÊï∞„ÄÇÂ¶ÇÊ≠§ÂèØ‰ª•Â∞ÜÊ∑ªÂä†ÂíåÁßªÈô§ËÆ¢ÈòÖÁöÑÈÄªËæëÊîæÂú®‰∏ÄËµ∑„ÄÇÂÆÉ‰ª¨ÈÉΩÂ±û‰∫é effect ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ React ‰ΩïÊó∂Ê∏ÖÈô§ effectÔºü React ‰ºöÂú®ÁªÑ‰ª∂Âç∏ËΩΩÁöÑÊó∂ÂÄôÊâßË°åÊ∏ÖÈô§Êìç‰Ωú„ÄÇÊ≠£Â¶Ç‰πãÂâçÂ≠¶Âà∞ÁöÑÔºåeffect Âú®ÊØèÊ¨°Ê∏≤ÊüìÁöÑÊó∂ÂÄôÈÉΩ‰ºöÊâßË°å„ÄÇËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πà React ‰ºöÂú®ÊâßË°åÂΩìÂâç effect ‰πãÂâçÂØπ‰∏ä‰∏Ä‰∏™ effect ËøõË°åÊ∏ÖÈô§„ÄÇ Âπ∂‰∏çÈúÄË¶ÅÁâπÂÆöÁöÑ‰ª£Á†ÅÊù•Â§ÑÁêÜÊõ¥Êñ∞ÈÄªËæëÔºåÂõ†‰∏∫ useEffect ÈªòËÆ§Â∞±‰ºöÂ§ÑÁêÜ„ÄÇÂÆÉ‰ºöÂú®Ë∞ÉÁî®‰∏Ä‰∏™Êñ∞ÁöÑ effect ‰πãÂâçÂØπÂâç‰∏Ä‰∏™ effect ËøõË°åÊ∏ÖÁêÜ Âπ∂‰∏çÊòØÂøÖÈ°ª‰∏∫ effect ‰∏≠ËøîÂõûÁöÑÂáΩÊï∞ÂëΩÂêç„ÄÇËøôÈáåÊàë‰ª¨Â∞ÜÂÖ∂ÂëΩÂêç‰∏∫ cleanup ÊòØ‰∏∫‰∫ÜË°®ÊòéÊ≠§ÂáΩÊï∞ÁöÑÁõÆÁöÑÔºå‰ΩÜÂÖ∂ÂÆû‰πüÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™ÁÆ≠Â§¥ÂáΩÊï∞ÊàñËÄÖÁªôËµ∑‰∏Ä‰∏™Âà´ÁöÑÂêçÂ≠ó„ÄÇ Â∞èÁªì‰∫ÜËß£‰∫Ü useEffect ÂèØ‰ª•Âú®ÁªÑ‰ª∂Ê∏≤ÊüìÂêéÂÆûÁé∞ÂêÑÁßç‰∏çÂêåÁöÑÂâØ‰ΩúÁî®„ÄÇÊúâ‰∫õÂâØ‰ΩúÁî®ÂèØËÉΩÈúÄË¶ÅÊ∏ÖÈô§ÔºåÊâÄ‰ª•ÈúÄË¶ÅËøîÂõû‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂÖ∂‰ªñÁöÑ effect ÂèØËÉΩ‰∏çÂøÖÊ∏ÖÈô§ÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅËøîÂõû„ÄÇeffect Hook ‰ΩøÁî®Âêå‰∏Ä‰∏™ API Êù•Êª°Ë∂≥Ëøô‰∏§ÁßçÊÉÖÂÜµ„ÄÇ ÊèêÁ§∫: ÈÄöËøáË∑≥Ëøá Effect ËøõË°åÊÄßËÉΩ‰ºòÂåñÂ¶ÇÊûúÊüê‰∫õÁâπÂÆöÂÄºÂú®‰∏§Ê¨°ÈáçÊ∏≤Êüì‰πãÈó¥Ê≤°ÊúâÂèëÁîüÂèòÂåñÔºå‰Ω†ÂèØ‰ª•ÈÄöÁü• React Ë∑≥ËøáÂØπ effect ÁöÑË∞ÉÁî®ÔºåÂè™Ë¶Å‰º†ÈÄíÊï∞ÁªÑ‰Ωú‰∏∫ useEffect ÁöÑÁ¨¨‰∫å‰∏™ÂèØÈÄâÂèÇÊï∞Âç≥ÂèØ: 123useEffect(() =&gt; &#123; document.title = `You clicked $&#123;count&#125; times`;&#125;, [count]); // ‰ªÖÂú® count Êõ¥ÊîπÊó∂Êõ¥Êñ∞ 12345678910useEffect(() =&gt; &#123; function handleStatusChange(status) &#123; setIsOnline(status.isOnline); &#125; ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange); return () =&gt; &#123; ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange); &#125;;&#125;, [props.friend.id]); // ‰ªÖÂú® props.friend.id ÂèëÁîüÂèòÂåñÊó∂ÔºåÈáçÊñ∞ËÆ¢ÈòÖ Ëá™ÂÆö‰πâhook","categories":[{"name":"react","slug":"react","permalink":"https://justsso1.github.io/categories/react/"}],"tags":[]},{"title":"ÁÆÄÂçï‰∏âÊ≠•ÈÖçÁΩÆhttpsÁΩëÁ´ô","slug":"ÁÆÄÂçï‰∏âÊ≠•ÈÖçÁΩÆhttpsÁΩëÁ´ô","date":"2019-06-13T16:00:00.000Z","updated":"2024-10-14T10:20:25.730Z","comments":true,"path":"2019/06/14/ÁÆÄÂçï‰∏âÊ≠•ÈÖçÁΩÆhttpsÁΩëÁ´ô/","permalink":"https://justsso1.github.io/2019/06/14/%E7%AE%80%E5%8D%95%E4%B8%89%E6%AD%A5%E9%85%8D%E7%BD%AEhttps%E7%BD%91%E7%AB%99/","excerpt":"","text":"ÁÆÄÂçï‰∏âÊ≠•ÈÖçÁΩÆhttpsÁΩëÁ´ôÁ¨¨‰∏ÄÊ≠•ÔºöÁî≥ËØ∑SSLËØÅ‰π¶sslËØÅ‰π¶ÊòØ‰∏ÄÁßçÂä†ÂØÜÂçèËÆÆ„ÄÇÂ§ßÈÉ®ÂàÜ‰ºÅ‰∏öÁ∫ßÁöÑSSLËØÅ‰π¶ÈÉΩÊòØÈúÄË¶ÅÊî∂Ë¥πÁöÑÔºå‰∏™‰∫∫‰ΩøÁî®ÁöÑSSLËØÅ‰π¶ÔºåÊúâ‰∏Ä‰∫õÊòØÂÖçË¥πÁöÑ„ÄÇÂÉèÈòøÈáå‰∫ë„ÄÅËÖæËÆØ‰∫ëÈÉΩÊúâÊèê‰æõÂÖçË¥πËØÅ‰π¶Áî≥ËØ∑ÁöÑÊé•Âè£„ÄÇ ÊàëÈááÁî®ÂæóÊòØÈòøÈáå‰∫ëÔºåÁôªÈôÜÈòøÈáå‰∫ëË¥¶Âè∑‰πãÂêéÔºåÂú® **ÈòøÈáå‰∫ë„ÄãÊéßÂà∂Âè∞„ÄãÊàëÁöÑ‰∫ë‰∫ßÂìÅ„ÄãSSLËØÅ‰π¶(Â∫îÁî®ÂÆâÂÖ®)**‰∏ãÔºåËøõÂÖ•ËØ•È°µÈù¢„ÄÇ ÁÇπÂáªË¥≠‰π∞ËØÅ‰π¶ÊåâÈíÆ ÈÄâÊã©ÂÖçË¥πÂûã DV SSL Â°´ÂÜô‰∏™‰∫∫‰ø°ÊÅØÔºåÈÖçÁΩÆÂüüÂêç‰ø°ÊÅØ ÈÖçÁΩÆÂüüÂêçÊéàÊùÉÈ™åËØÅÔºåËøô‰∏ÄÊ≠•ÔºåÂ¶ÇÊûú‰Ω†ÈÄâÊã©ÁöÑÊòØÈòøÈáå‰∫ëÂüüÂêçÁöÑËØùÔºåÂÆÉ‰ºöËá™Âä®Â∏Æ‰Ω†Â¢ûÂä†‰∏ÄÊù°TXTËÆ∞ÂΩï ÂÅöÂÆå‰ª•‰∏äÊ≠•È™§ÔºåÂ∞±‰ºöÂèëÁé∞Âú®ÂüüÂêçÁöÑdnsËß£Êûê‰∏ãÈù¢Â§ö‰∫Ü‰∏ÄÊù°TXTËÆ∞ÂΩï„ÄÇËØÅ‰π¶ÁöÑÁä∂ÊÄÅÂèòÊàêÂ∑≤Á≠æÂèë‰πãÂêéÔºåÂ∞±ÂèØ‰ª•ÊääËØÅ‰π¶‰∏ãËΩΩÂà∞Êú¨Âú∞„ÄÇ Á¨¨‰∫åÊ≠•ÔºöÈÖçÁΩÆnginxÊúçÂä°Âô®ÊàëÁöÑÊúçÂä°Âô®ÊòØnginx ÔºåÊâÄ‰ª•Êú¨ÊñáÊèê‰æõÁöÑÊòØnginx ÁöÑÈÖçÁΩÆÊñπÊ≥ï„ÄÇÊää‰∏ãËΩΩ‰∏ãÊù•ÁöÑËØÅ‰π¶(ÂåÖÊã¨ .pemÊñá‰ª∂Âíå .keyÊñá‰ª∂)‰∏ä‰º†Âà∞ÊúçÂä°Âô®nginxÂÆâË£ÖÁöÑ‰ΩçÁΩÆÔºå‰∏ÄËà¨ÊòØÂú® /etc/nginx‰∏ãÔºåÊàëÊîæÂú®sslÁõÆÂΩï‰∏ã„ÄÇ Á¨¨‰∏âÊ≠•Ôºö‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ÔºåÈáçÂêØnginx12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455server &#123; listen 80; server_name xxx.com; root /home/xxx; index index.html index.htm index.nginx-debian.html; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; #rewrite ^(.*)$ http://$host$1 permanent; location / &#123; root /; proxy_pass http://localhost:3003; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection &#x27;upgrade&#x27;; proxy_set_header Host $host; proxy_cache_bypass $http_upgrade; client_max_body_size 1000m;# try_files $uri $uri/ =404; &#125;&#125;server &#123; listen 443 ssl; server_name xxx.com; ssl on; root /home/xxx; index index.html index.htm index.nginx-debian.html; ssl_certificate ssl/2353222_wordcamp.ibt.tel.pem; //‰∏ªË¶ÅÊîπËøôÂÑø ssl_certificate_key ssl/2353222_wordcamp.ibt.tel.key; //‰∏ªË¶ÅÊîπËøôÂÑø ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; location / &#123; root /; proxy_pass http://localhost:3003; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection &#x27;upgrade&#x27;; proxy_set_header Host $host; proxy_cache_bypass $http_upgrade; # try_files $uri $uri/ =404; &#125;&#125; ‰øùÂ≠òÈÖçÁΩÆÊñá‰ª∂ÂêéÔºåÈáçÂêØNginxÔºönginx -s reload„ÄÇ ‰πãÂêéÂ∞±ÂèØ‰ª•‰ΩøÁî®httpsËÆøÈóÆÊàë‰ª¨ÁöÑÁΩëÂùÄ‰∫Ü„ÄÇ","categories":[],"tags":[]},{"title":"ÂºÇÊ≠•ÁöÑÂèëÂ±ïÂéÜÂè≤","slug":"ÂâçÁ´ØÂøÖÂ§á-ÂºÇÊ≠•ÁöÑÂèëÂ±ïÂéÜÂè≤","date":"2019-06-02T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2019/06/03/ÂâçÁ´ØÂøÖÂ§á-ÂºÇÊ≠•ÁöÑÂèëÂ±ïÂéÜÂè≤/","permalink":"https://justsso1.github.io/2019/06/03/%E5%89%8D%E7%AB%AF%E5%BF%85%E5%A4%87-%E5%BC%82%E6%AD%A5%E7%9A%84%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2/","excerpt":"","text":"ÂâçÁ´ØÂøÖÂ§á-ÂºÇÊ≠•ÁöÑÂèëÂ±ïÂéÜÂè≤ÂõûÊéâ callback‰æãÂ≠êÔºö jqueryÁªèÂÖ∏ÁöÑÂÜôÊ≥ï promisepromiseÊòØ‰ªÄ‰πàÔºü javascritpÁöÑ‰∏Ä‰∏™ÂÜÖÁΩÆÂØπË±° generatorasync await","categories":[],"tags":[]},{"title":"ÂáΩÊï∞ËäÇÊµÅ‰∏éÂáΩÊï∞Èò≤Êäñ","slug":"ÂâçÁ´ØÂøÖÂ§á-ÂáΩÊï∞ËäÇÊµÅ‰∏éÂáΩÊï∞Èò≤Êäñ","date":"2019-06-01T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2019/06/02/ÂâçÁ´ØÂøÖÂ§á-ÂáΩÊï∞ËäÇÊµÅ‰∏éÂáΩÊï∞Èò≤Êäñ/","permalink":"https://justsso1.github.io/2019/06/02/%E5%89%8D%E7%AB%AF%E5%BF%85%E5%A4%87-%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%E4%B8%8E%E5%87%BD%E6%95%B0%E9%98%B2%E6%8A%96/","excerpt":"","text":"ÂáΩÊï∞ËäÇÊµÅ‰∏éÂáΩÊï∞Èò≤ÊäñÂ∫îÁî®Âú∫ÊôØÂáΩÊï∞ËäÇÊµÅÂíåÈò≤ÊäñÂú®ÂºÄÂèë‰∏≠ÈùûÂ∏∏Â∏∏ËßÅÔºåÊµèËßàÂô®È°µÈù¢ÊªöÂä® „ÄÅ InputËæìÂÖ• „ÄÅ window.onresize„ÄÅÈº†Ê†á‰∫ã‰ª∂( onmouseoverÔºâÁ≠âÔºåÊÄªÁªìÊù•ËØ¥ÊòØÂú®Áü≠Êó∂Èó¥ÂÜÖËß¶ÂèëÈùûÂ∏∏È¢ëÁπÅÁöÑ‰∫ã‰ª∂„ÄÇ Ê¶ÇÂøµÂáΩÊï∞ËäÇÊµÅÔºàthrottleÔºâ Êüê‰∏™ÂáΩÊï∞Âú®‰∏ÄÂÆöÊó∂Èó¥Èó¥ÈöîÂÜÖÔºà‰æãÂ¶Ç 3 ÁßíÔºâÂè™ÊâßË°å‰∏ÄÊ¨°ÔºåÂú®Ëøô 3 ÁßíÂÜÖ Êó†ËßÜÂêéÊù•‰∫ßÁîüÁöÑÂáΩÊï∞Ë∞ÉÁî®ËØ∑Ê±ÇÔºå‰πü‰∏ç‰ºöÂª∂ÈïøÊó∂Èó¥Èó¥Èöî ‰∏ªË¶ÅÊÄùË∑ØÔºöÈ¢ÑÂÖàËÆæÂÆö‰∏Ä‰∏™ÊâßË°åÂë®ÊúüÔºåÂΩìË∞ÉÁî®Âä®‰ΩúÁöÑÊó∂ÂàªÂ§ß‰∫éÁ≠â‰∫éÊâßË°åÂë®ÊúüÂàôÊâßË°åËØ•Âä®‰ΩúÔºåÁÑ∂ÂêéËøõÂÖ•‰∏ã‰∏Ä‰∏™Êñ∞Âë®Êúü„ÄÇ ÂáΩÊï∞Èò≤ÊäñÔºàdebounceÔºâ ÂΩìË∞ÉÁî®Âä®‰ΩúËøánÊØ´ÁßíÂêéÔºåÊâç‰ºöÊâßË°åËØ•Âä®‰ΩúÔºåËã•Âú®ËøônÊØ´ÁßíÂÜÖÂèàË∞ÉÁî®Ê≠§Âä®‰ΩúÂàôÂ∞ÜÈáçÊñ∞ËÆ°ÁÆóÊâßË°åÊó∂Èó¥ ÂÖ∂Ê¶ÇÂøµÂÖ∂ÂÆûÊòØ‰ªéÊú∫Ê¢∞ÂºÄÂÖ≥ÂíåÁªßÁîµÂô®ÁöÑ‚ÄúÂéªÂºπË∑≥‚ÄùÔºàdebounceÔºâË°çÁîü Âá∫Êù•ÁöÑÔºåÂü∫Êú¨ÊÄùË∑ØÂ∞±ÊòØÊääÂ§ö‰∏™‰ø°Âè∑ÂêàÂπ∂‰∏∫‰∏Ä‰∏™‰ø°Âè∑„ÄÇ ÂáΩÊï∞ËäÇÊµÅÔºàthrottleÔºâ‰∏é ÂáΩÊï∞Èò≤ÊäñÔºàdebounceÔºâÈÉΩÊòØ‰∏∫‰∫ÜÈôêÂà∂ÂáΩÊï∞ÁöÑÊâßË°åÈ¢ëÊ¨°Ôºå‰ª•‰ºòÂåñÂáΩÊï∞Ëß¶ÂèëÈ¢ëÁéáËøáÈ´òÂØºËá¥ÁöÑÂìçÂ∫îÈÄüÂ∫¶Ë∑ü‰∏ç‰∏äËß¶ÂèëÈ¢ëÁéáÔºåÂá∫Áé∞Âª∂ËøüÔºåÂÅáÊ≠ªÊàñÂç°È°øÁöÑÁé∞Ë±°„ÄÇ ËØ¥‰∏Ä‰∏ãÊàëÁöÑÁêÜËß£Ôºö ËäÇÊµÅÁöÑÁâπÁÇπÔºö ÊúâÊó∂Èó¥ËßÑÂæãÁöÑË∞ÉÁî®„ÄÇ Èò≤ÊäñÁöÑÁâπÁÇπÔºö ÂØÜÈõÜÊÄßÊìç‰Ωú‰πãÂêéÊâçËß¶ÂèëË∞ÉÁî®„ÄÇÁ¨¨‰∫åÊ¨°ÂØÜÈõÜÊÄßÊìç‰ΩúÂíåÁ¨¨‰∏ÄÊ¨°ÊúâÊó∂Èó¥Èó¥Èöî ËäÇÊµÅÈÄÇÁî®ÊÉÖÂÜµËß¶ÂèëÂæàÈ¢ëÁπÅÁöÑÂú∫ÊôØÔºöÂ¶ÇwindowÂØπË±°ÁöÑresize„ÄÅscroll‰∫ã‰ª∂ÔºåÊãñÊãΩÊó∂ÁöÑmousemove‰∫ã‰ª∂ Èò≤ÊäñÈÄÇÁî®ÊÉÖÂÜµÈ™åËØÅÊñáÂ≠óËæìÂÖ•„ÄÅËá™Âä®ÂÆåÊàêÁöÑkeyup‰∫ã‰ª∂ÔºåÊèê‰∫§ÊåâÈíÆÁöÑÁÇπÂáª‰∫ã‰ª∂ ÂÆûÁé∞1. ÂáΩÊï∞ËäÇÊµÅÂáΩÊï∞ËäÇÊµÅÊääË¶ÅËß¶ÂèëÁöÑÂáΩÊï∞Ê†πÊçÆÊó∂Èó¥ÊÆµÂàíÂàÜÂºÄÊù•ÔºåÈÇ£‰πàÂ∞±Êúâ‰∏§ÁßçÊñπÊ≥ïÂÆûÁé∞Ôºö Êó∂Èó¥Êà≥ËÆ∞ÂΩïÊ≥ï„ÄÇÂáΩÊï∞ÊØè‰∏ÄÊ¨°ÊâßË°åÊó∂ÔºåÈÉΩÂíå‰∏ä‰∏ÄÊ¨°ÊâßË°åÁöÑÊó∂Èó¥ÂÅöÂ∑ÆÔºåÂ¶ÇÊûúÂ§ß‰∫éÊó∂Èó¥Èó¥ÈöîÔºåÈÇ£‰πàÊâßË°åÊìç‰ΩúÔºåËÆ∞ÂΩïÂΩìÂâçÊó∂Èó¥Êà≥Ôºå‰∏ã‰∏ÄÊ¨°Ë∞ÉÁî®Êó∂ÔºåËøêÁî®ÂêåÊ†∑ÁöÑÊñπÊ≥ïÔºå‰ª•Ê≠§Á±ªÊé®„ÄÇ setTimeout ÂÆöÊó∂Âô®Ê≥ï„ÄÇÂáΩÊï∞ÊâßË°åÊó∂ÔºåÂà§Êñ≠ÂΩìÂâçÊúâÊ≤°ÊúâÂÆöÊó∂Âô®ÔºåÂ¶ÇÊûúÊúâÔºåËØ¥ÊòéÂú®Êó∂Èó¥ÊÆµÂÜÖÔºå‰∏çÊìç‰Ωú„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÔºåÈÇ£‰πàÊâßË°åÊìç‰ΩúÔºåÂπ∂‰∏îÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂÆöÊó∂Âô®setTimeoutÔºåÂπ∂ËÆæÁΩÆÂ•ΩÊ∂àÈô§Êó∂Èó¥„ÄÇ Á¨¨‰∏ÄÁßçÂÜôÊ≥ïÔºö 123456789101112131415161718//ËäÇÊµÅÂáΩÊï∞ÔºåÊó∂Èó¥Êà≥Ê≥ïfunction fn1(fn, wait) &#123; let lastTime = 0; return function (...args) &#123; let nowTime = new Date().getTime(); if ((nowTime - lastTime) &gt; wait) &#123; lastTime = nowTime; //ÊâßË°å‰Ω†ÁöÑ‰ª£Á†Å fn.apply(this, args); //ËøôÈáåÊää event ÂØπË±°‰º†ÈÄíËøõÂéª &#125; &#125; &#125; let betterFn = fn1((e) =&gt; &#123; console.log(&#x27;hello world&#x27;); console.log(e); &#125;, 3000); window.onscroll = betterFn; Á¨¨‰∫åÁßçÂÜôÊ≥ïÔºö 12345678910111213//ËäÇÊµÅÂáΩÊï∞ÔºåÂÆöÊó∂Âô®Ê≥ïlet timer = null;let number = 0; function fn() &#123; if (!timer) &#123; console.log(&#x27;hello world&#x27;); timer = setTimeout(() =&gt; &#123; timer = null; &#125;, 3000) &#125; &#125; // window.onscroll = fn; ‰∏∫‰∫ÜÊõ¥Âä†Áõ¥ËßÇÁöÑÁúãÂáΩÊï∞ËäÇÊµÅÁöÑË∞ÉÁî®ËßÑÂæãÔºåÊàëÊ∑ªÂä†‰∫Ü‰ª•‰∏ãÊ£ÄÊµãÂáΩÊï∞„ÄÇ 1234567//Ê£ÄÊµãÂáΩÊï∞let timer2 = setInterval(() =&gt; &#123; console.log(number++);&#125;, 1000);setTimeout(() =&gt; &#123; clearInterval(timer2)&#125;, 20000); 2.ÂáΩÊï∞Èò≤ÊäñÔºàdebounceÔºâ1234567891011121314function _debounce(fn,wait)&#123; var timer = null; return function()&#123; clearTimeout(timer); //ÊØèÊ¨°ÂØÜÈõÜÊìç‰ΩúÈÉΩ‰ºöÊ∏ÖÈô§ÊéâÂÆöÊó∂Âô®ÔºåÂè™ÊúâÊúÄÂêé‰∏ÄÊ¨°ÁöÑÊâßË°åÔºåÊ≤°Êúâ„Äê‰∏ã‰∏ÄÊ¨°„ÄëÊù•Ê∏ÖÈô§ÔºåÊâÄ‰ª•‰ºöÂú®wait‰πãÂêéÔºåÊâßË°åÂõûÊéâÂáΩÊï∞ timer = setTimeout(()=&gt;&#123; fn() &#125;,wait) &#125;&#125;function _log()&#123; console.log(1)&#125;window.onscroll = _debounce(_log,500) 3. ÂáΩÊï∞ËäÇÊµÅÔºàthrottleÔºâ[ÂçáÁ∫ßÁâà]‰ªîÁªÜÊÉ≥ÊÉ≥Ôºå‰∏äÈù¢ÁöÑÈò≤ÊäñÊñπÂºèËøòÊòØÊúâ‰∏ÄÂÆöÁöÑÁº∫ÁÇπ„ÄÇÂ¶ÇÊûúÈ°µÈù¢ÂæàÈïøÔºåÊàë‰ª¨‰∏ÄÁõ¥Âú®ÊªöÂä®È°µÈù¢ÔºåÈÇ£_logÊñπÊ≥ïÂ∞±‰∏ÄÁõ¥‰∏ç‰ºöË¢´ÊâßË°å„ÄÇÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•ÂçáÁ∫ß‰∏Ä‰∏ã‰∏äËø∞ÁöÑÈò≤ÊäñÊñπÊ≥ï„ÄÇ 12345678910111213141516171819202122232425function _throttle(fn,wait,time)&#123; var previous = null; //ËÆ∞ÂΩï‰∏ä‰∏ÄÊ¨°ËøêË°åÁöÑÊó∂Èó¥ var timer = null; return function()&#123; var now = +new Date(); if(!previous) previous = now; //ÂΩì‰∏ä‰∏ÄÊ¨°ÊâßË°åÁöÑÊó∂Èó¥‰∏éÂΩìÂâçÁöÑÊó∂Èó¥Â∑ÆÂ§ß‰∫éËÆæÁΩÆÁöÑÊâßË°åÈó¥ÈöîÊó∂ÈïøÁöÑËØùÔºåÂ∞±‰∏ªÂä®ÊâßË°å‰∏ÄÊ¨° if(now - previous &gt; time)&#123; clearTimeout(timer); fn(); previous = now;// ÊâßË°åÂáΩÊï∞ÂêéÔºåÈ©¨‰∏äËÆ∞ÂΩïÂΩìÂâçÊó∂Èó¥ &#125;else&#123; clearTimeout(timer); timer = setTimeout(function()&#123; fn(); &#125;,wait); &#125; &#125;&#125;function _log()&#123; console.log(1)&#125;window.onscroll = _debounce(_log,500,2000)","categories":[{"name":"ÂâçÁ´ØÂøÖÂ§á","slug":"ÂâçÁ´ØÂøÖÂ§á","permalink":"https://justsso1.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BF%85%E5%A4%87/"}],"tags":[]},{"title":"ÂØπË±°ÂßîÊâò","slug":"js-Âü∫Á°Ä ÂØπË±°ÂßîÊâò","date":"2019-05-14T16:00:00.000Z","updated":"2024-10-16T04:06:53.094Z","comments":true,"path":"2019/05/15/js-Âü∫Á°Ä ÂØπË±°ÂßîÊâò/","permalink":"https://justsso1.github.io/2019/05/15/js-%E5%9F%BA%E7%A1%80%20%E5%AF%B9%E8%B1%A1%E5%A7%94%E6%89%98/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"reactÁîüÂëΩÂë®Êúü","slug":"reactÂ≠¶‰π†-ÁîüÂëΩÂë®Êúü","date":"2019-05-07T16:00:00.000Z","updated":"2024-10-16T04:06:48.705Z","comments":true,"path":"2019/05/08/reactÂ≠¶‰π†-ÁîüÂëΩÂë®Êúü/","permalink":"https://justsso1.github.io/2019/05/08/react%E5%AD%A6%E4%B9%A0-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","excerpt":"","text":"reactÂ≠¶‰π†-ÁîüÂëΩÂë®Êúüv16.8.6classÁªÑ‰ª∂Êèê‰æõ‰∫ÜÊõ¥Âä†‰∏∞ÂØåÁöÑÂäüËÉΩÔºåÈúÄË¶ÅÁªßÊâøReact.Component ÁîüÂëΩÂë®ÊúüÈÄüÊü•Ë°® http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/ reactÁîüÂëΩÂë®ÊúüÈò∂ÊÆµÔºö ÁªÑ‰ª∂ÊåÇËΩΩconstructor ÊûÑÈÄ†ÂáΩÊï∞(ÂîØ‰∏ÄÂèØ‰ª•Áªôthis.stateËµãÂÄºÁöÑÂú∞Êñπ)static getDerivedStateFromPropsrender Ê∏≤ÊüìComponentDidMount ÁªÑ‰ª∂ÊåÇËΩΩcomponentWillUnmount ÁªÑ‰ª∂Âç∏ËΩΩÂΩìÁªÑ‰ª∂ÁöÑpropsÊàñËÄÖstateÊîπÂèòÁöÑÊó∂ÂÄôÔºårenderÂáΩÊï∞ÈÉΩ‰ºöË¢´ÈáçÊñ∞Ë∞ÉÁî® stateÁöÑÊõ¥Êñ∞ÊñπÊ≥ïÔºöÂá∫‰∫éÊÄßËÉΩËÄÉËôëÔºåreactÂèØËÉΩÊääÂ§ö‰∏™setState()Ë∞ÉÁî®ÂêàÂπ∂Êàê‰∏Ä‰∏™Ë∞ÉÁî®„ÄÇ Âõ†‰∏∫this.stateÂíåthis.propsÂèØËÉΩÊòØÂºÇÊ≠•Êõ¥Êñ∞ÁöÑÔºåÊâÄ‰ª•‰∏çË¶Å‰æùËµñ‰ªñ‰ª¨ÁöÑÂÄºÂéªÊõ¥Êñ∞‰∏ã‰∏Ä‰∏™Áä∂ÊÄÅ„ÄÇ ‚Äã ÂºÇÊ≠•Êõ¥Êñ∞state 123this.setState(state, props =&gt; (&#123; counter: state.counter + props.increment&#125;)) Êï∞ÊçÆÊµÅÔºö Ëá™‰∏äËÄå‰∏ã„ÄêÂçïÂêë„Äë‰ªª‰ΩïÁöÑ state ÊÄªÊòØÊâÄÂ±û‰∫éÁâπÂÆöÁöÑÁªÑ‰ª∂ÔºåËÄå‰∏î‰ªéËØ• state Ê¥æÁîüÁöÑ‰ªª‰ΩïÊï∞ÊçÆÊàñ UI Âè™ËÉΩÂΩ±ÂìçÊ†ë‰∏≠‚Äú‰Ωé‰∫é‚ÄùÂÆÉ‰ª¨ÁöÑÁªÑ‰ª∂„ÄÇ Â¶ÇÊûú‰Ω†Êää‰∏Ä‰∏™‰ª•ÁªÑ‰ª∂ÊûÑÊàêÁöÑÊ†ëÊÉ≥Ë±°Êàê‰∏Ä‰∏™ props ÁöÑÊï∞ÊçÆÁÄëÂ∏ÉÁöÑËØùÔºåÈÇ£‰πàÊØè‰∏Ä‰∏™ÁªÑ‰ª∂ÁöÑ state Â∞±ÂÉèÊòØÂú®‰ªªÊÑè‰∏ÄÁÇπ‰∏äÁªôÁÄëÂ∏ÉÂ¢ûÂä†È¢ùÂ§ñÁöÑÊ∞¥Ê∫êÔºå‰ΩÜÊòØÂÆÉÂè™ËÉΩÂêë‰∏ãÊµÅÂä®„ÄÇ Âú®ReactÂ∫îÁî®‰∏≠ÔºåÁªÑ‰ª∂ÊòØÊúâÁä∂ÊÄÅÁªÑ‰ª∂ËøòÊòØÊó†Áä∂ÊÄÅÁªÑ‰ª∂Â±û‰∫éÁªÑ‰ª∂ÁöÑÂÆûÁé∞ÁªÜËäÇÔºåÂÆÉÂèØËÉΩ‰ºöÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÂèëÁîüÊîπÂèò„ÄÇ‰Ω†‰Ω†ÂèØ‰ª•Âú®ÊúâÁä∂ÊÄÅÁªÑ‰ª∂‰∏≠‰ΩøÁî®Êó†Áä∂ÊÄÅÁªÑ‰ª∂ÔºåÂèç‰πã‰∫¶ÁÑ∂„ÄÇ Êõ¥Êñ∞ÂΩìÁªÑ‰ª∂ÁöÑpropsÂíåstateÂèëÁîüÂèòÂåñÊó∂‰ºöËß¶ÂèëÊõ¥Êñ∞„ÄÇÁªÑ‰ª∂Êõ¥Êñ∞ÁöÑÁîüÂëΩÂë®ÊúüË∞ÉÁî®È°∫Â∫èÂ¶Ç‰∏ãÔºö Static getDerivedStateFromProps() ShouldComponentUpdate() render() getSnapshotBeforeUpdate() componentDidUpdate() Âç∏ËΩΩcomponentWillUnmount() React 16 ‰∏≠ÁöÑÈîôËØØÂ§ÑÁêÜÂΩìÊ∏≤ÊüìËøáÁ®ãÔºåÁîüÂëΩÂë®ÊúüÔºåÊàñÂ≠êÁªÑ‰ª∂ÁöÑÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÊäõÂá∫ÈîôËØØÊó∂Ôºå‰ºöË∞ÉÁî®Â¶Ç‰∏ãÊñπÊ≥ïÔºö Static getDerivedStateFromError() 1static getDerivedStateFromError(error) 1componentDidCatch(error, info) Ê≠§ÁîüÂëΩÂë®ÊúüÂú®Âêé‰ª£ÁªÑ‰ª∂ÊäõÂá∫ÈîôËØØÂêéË¢´Ë∞ÉÁî®„ÄÇ ÂÆÉÊé•Êî∂‰∏§‰∏™ÂèÇÊï∞Ôºö error ‚Äî‚Äî ÊäõÂá∫ÁöÑÈîôËØØ„ÄÇ info ‚Äî‚Äî Â∏¶Êúâ componentStack key ÁöÑÂØπË±°ÔºåÂÖ∂‰∏≠ÂåÖÂê´ÊúâÂÖ≥ÁªÑ‰ª∂ÂºïÂèëÈîôËØØÁöÑÊ†à‰ø°ÊÅØ„ÄÇ 123456789101112131415161718192021class ErrorBoundary extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; hasError: false &#125;; &#125; componentDidCatch(error, info) &#123; // Display fallback UI this.setState(&#123; hasError: true &#125;); // You can also log the error to an error reporting service logErrorToMyService(error, info); &#125; render() &#123; if (this.state.hasError) &#123; // You can render any custom fallback UI return &lt;h1&gt;Something went wrong.&lt;/h1&gt;; &#125; return this.props.children; &#125;&#125; ËØ∑Ê≥®ÊÑèÔºåÈîôËØØËæπÁïå‰ªÖÊçïËé∑Ê†ë‰∏≠ÂÆÉ‰ª¨‰∏ãÈù¢ÁöÑÁªÑ‰ª∂‰∏≠ÁöÑÈîôËØØ„ÄÇÈîôËØØËæπÁïåÊú¨Ë∫´Êó†Ê≥ïÊçïËé∑ÈîôËØØ„ÄÇÂ¶ÇÊûúÈîôËØØËæπÁïåÂ∞ùËØïÂëàÁé∞ÈîôËØØÊ∂àÊÅØÂ§±Ë¥•ÔºåÂàôÈîôËØØÂ∞Ü‰º†Êí≠Âà∞ÂÖ∂‰∏äÊñπÊúÄÊé•ËøëÁöÑÈîôËØØËæπÁïå„ÄÇËøô‰πüÁ±ª‰ºº‰∫écatch &#123;&#125;JavaScriptÂú®JavaScript‰∏≠ÁöÑÂ∑•‰ΩúÊñπÂºè„ÄÇ componentWillRecieveProps(){}Âø´Ë¢´ÂºÉÁî®‰∫Ü","categories":[],"tags":[]},{"title":"React PureComponent‰ΩøÁî®ÊåáÂçó","slug":"reactÂ≠¶‰π†-React PureComponent ‰ΩøÁî®ÊåáÂçó","date":"2019-05-02T16:00:00.000Z","updated":"2024-10-16T04:06:47.870Z","comments":true,"path":"2019/05/03/reactÂ≠¶‰π†-React PureComponent ‰ΩøÁî®ÊåáÂçó/","permalink":"https://justsso1.github.io/2019/05/03/react%E5%AD%A6%E4%B9%A0-React%20PureComponent%20%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","excerpt":"","text":"React15.3‰∏≠Êñ∞Âä†‰∫Ü‰∏Ä‰∏™ PureComponent Á±ªÔºåÈ°æÂêçÊÄù‰πâÔºå pure ÊòØÁ∫ØÁöÑÊÑèÊÄùÔºåPureComponent‰πüÂ∞±ÊòØÁ∫ØÁªÑ‰ª∂ÔºåÂèñ‰ª£ÂÖ∂ÂâçË∫´ PureRenderMixin ,PureComponent ÊòØ‰ºòÂåñ React Â∫îÁî®Á®ãÂ∫èÊúÄÈáçË¶ÅÁöÑÊñπÊ≥ï‰πã‰∏ÄÔºåÊòì‰∫éÂÆûÊñΩÔºåÂè™Ë¶ÅÊääÁªßÊâøÁ±ª‰ªé Component Êç¢Êàê PureComponent Âç≥ÂèØÔºåÂèØ‰ª•ÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑ render Êìç‰ΩúÁöÑÊ¨°Êï∞Ôºå‰ªéËÄåÊèêÈ´òÊÄßËÉΩÔºåËÄå‰∏îÂèØ‰ª•Â∞ëÂÜô shouldComponentUpdate ÂáΩÊï∞ÔºåËäÇÁúÅ‰∫ÜÁÇπ‰ª£Á†Å","categories":[],"tags":[]},{"title":"ËãπÊûúÊâãÊú∫‰∏ìÂ±ûbugÈõÜ","slug":"ËãπÊûúÊâãÊú∫‰∏ìÂ±ûbugÈõÜ","date":"2019-03-25T16:00:00.000Z","updated":"2024-10-16T04:06:37.130Z","comments":true,"path":"2019/03/26/ËãπÊûúÊâãÊú∫‰∏ìÂ±ûbugÈõÜ/","permalink":"https://justsso1.github.io/2019/03/26/%E8%8B%B9%E6%9E%9C%E6%89%8B%E6%9C%BA%E4%B8%93%E5%B1%9Ebug%E9%9B%86/","excerpt":"","text":"ËãπÊûúÊâãÊú∫‰∏ìÂ±ûbugÈõÜ1.ÈîÆÁõòÂºπËµ∑ÂêéÈ°µÈù¢‰∏äÊªëÔºåÂØºËá¥ÂºπÊ°ÜÔºà‰ΩøÁî®‰∫Üposition:fixedÔºâ‰∏≠ÊåâÈíÆÂìçÂ∫îÂå∫ÂüüÈîô‰ΩçÔºåË¢´Êå§ÂéãÁöÑÈ°µÈù¢Ê≤°ÊúâÊÅ¢Â§çÊàêÂéüÊù•ÁöÑÊ†∑Â≠ê Á≥ªÁªüÔºö IOS 12 Ëß£ÂÜ≥ÊñπÊ°àÔºö Âú®ÁÇπÂáªÊåâÈíÆÈÇ£ÈáåÂä†‰∏ãÈù¢ÂÖ∂‰∏≠‰∏Ä‰∏™Âç≥ÂèØËß£ÂÜ≥. 12345//ÊªöÂä®Âà∞È°∂ÈÉ®window.scrollTo(0, 0);//ÊªöÂä®Âà∞Â∫ïÈÉ®window.scrollTo(0, document.documentElement.clientHeight); Ëøô‰∏™ÁöÑÂÖ≥ÈîÆÁÇπÂú®‰∫éÔºå‰ªÄ‰πàÊó∂Êú∫Ë∞ÉÁî®Ëøô‰∏™‰ª£Á†Å 2.ËãπÊûúÊâãÊú∫‰∏ä‰∏çËÉΩËá™Âä®Êí≠ÊîæÈü≥È¢ë Áî±‰∫é iOS Safari ÈôêÂà∂‰∏çÂÖÅËÆ∏ audio autoplay, ÂøÖÈ°ªÁî®Êà∑‰∏ªÂä®‰∫§‰∫í(‰æãÂ¶Ç click)ÂêéÊâçËÉΩÊí≠Êîæ audio, Âõ†Ê≠§Êàë‰ª¨ÈÄöËøá‰∏Ä‰∏™Áî®Êà∑‰∫§‰∫í‰∫ã‰ª∂Êù•‰∏ªÂä® play ‰∏Ä‰∏ã audio. iOS 9 ËøòÈúÄË¶ÅÈ¢ùÂ§ñÁöÑ load ‰∏Ä‰∏ã, Âê¶ÂàôÁõ¥Êé• play ‰∏çËÉΩËÆ© audio ÂºÄÂßãÊí≠Êîæ Ëß£ÂÜ≥ÊñπÊ°àÔºö 123456789101112131415161718192021222324252627282930313233play() &#123; const node = this.audio.current; clearTimeout(a); console.log(node.readyState, &#x27;readyState 4&#x27;); if (!node.ended) &#123; // Ê≤°ÊúâÁªìÊùü,Á¨¨‰∏ÄÊ¨°ÁÇπÂáª node.play(); this.setState(&#123; VolumeColor: green &#125;); var that = this; setTimeout(() =&gt; &#123; that.setState(&#123; VolumeColor: grey &#125;) &#125;, 1000) &#125; else &#123; // Á¨¨2..nÊ¨°ÁÇπÂáª node.currentTime = 0; node.load(); //ÂÖàload‰∏Ä‰∏ã node.play(); this.setState(&#123; VolumeColor: green &#125;); var that = this; var a = setTimeout(() =&gt; &#123; that.setState(&#123; VolumeColor: grey &#125;) &#125;, 1000) &#125; &#125;","categories":[],"tags":[]},{"title":"ÂæÆ‰ø°H5ÊéàÊùÉÁôªÂΩïÁöÑ‰ºòÈõÖÊñπÂºè","slug":"ÂæÆ‰ø°H5‰∏≠ÊéàÊùÉÁôªÈôÜÁöÑ‰ºòÈõÖÊñπÂºè","date":"2019-03-20T16:00:00.000Z","updated":"2024-10-12T08:40:56.549Z","comments":true,"path":"2019/03/21/ÂæÆ‰ø°H5‰∏≠ÊéàÊùÉÁôªÈôÜÁöÑ‰ºòÈõÖÊñπÂºè/","permalink":"https://justsso1.github.io/2019/03/21/%E5%BE%AE%E4%BF%A1H5%E4%B8%AD%E6%8E%88%E6%9D%83%E7%99%BB%E9%99%86%E7%9A%84%E4%BC%98%E9%9B%85%E6%96%B9%E5%BC%8F/","excerpt":"","text":"Âú®ÂæÆ‰ø°‰∏≠ÊâìÂºÄÁΩëÈ°µÔºåËé∑ÂèñÁî®Êà∑‰ø°ÊÅØÔºàopen,Â§¥ÂÉèÔºâÁöÑÊó∂ÂÄôÔºåÂæÆ‰ø°ÂÆòÊñπÁªôÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏§ÁßçÁôªÈôÜË∞ÉÁî®ÊñπÂºèÔºöÈùôÈªòÁôªÈôÜÂíåÈùûÈùôÈªòÁôªÈôÜ„ÄÇ Âú®Â∑•‰ΩúÂÆûË∑µ‰∏≠ÔºåÊàëÊÄªÁªìÂá∫‰∫ÜÊØîËæÉÂ•ΩÁöÑÊñπÂºè„ÄÇ ÂÖàÁúãÂÆòÊñπÊñáÊ°£‰º†ÈÄÅÈó® ÂÖ≥‰∫éÁΩëÈ°µÊéàÊùÉÁöÑ‰∏§ÁßçscopeÁöÑÂå∫Âà´ËØ¥Êòé 1„ÄÅ‰ª•snsapi_base‰∏∫scopeÂèëËµ∑ÁöÑÁΩëÈ°µÊéàÊùÉÔºåÊòØÁî®Êù•Ëé∑ÂèñËøõÂÖ•È°µÈù¢ÁöÑÁî®Êà∑ÁöÑopenidÁöÑÔºåÂπ∂‰∏îÊòØÈùôÈªòÊéàÊùÉÂπ∂Ëá™Âä®Ë∑≥ËΩ¨Âà∞ÂõûË∞ÉÈ°µÁöÑ„ÄÇÁî®Êà∑ÊÑüÁü•ÁöÑÂ∞±ÊòØÁõ¥Êé•ËøõÂÖ•‰∫ÜÂõûË∞ÉÈ°µÔºàÂæÄÂæÄÊòØ‰∏öÂä°È°µÈù¢Ôºâ 2„ÄÅ‰ª•snsapi_userinfo‰∏∫scopeÂèëËµ∑ÁöÑÁΩëÈ°µÊéàÊùÉÔºåÊòØÁî®Êù•Ëé∑ÂèñÁî®Êà∑ÁöÑÂü∫Êú¨‰ø°ÊÅØÁöÑ„ÄÇ‰ΩÜËøôÁßçÊéàÊùÉÈúÄË¶ÅÁî®Êà∑ÊâãÂä®ÂêåÊÑèÔºåÂπ∂‰∏îÁî±‰∫éÁî®Êà∑ÂêåÊÑèËøáÔºåÊâÄ‰ª•Êó†È°ªÂÖ≥Ê≥®ÔºåÂ∞±ÂèØÂú®ÊéàÊùÉÂêéËé∑ÂèñËØ•Áî®Êà∑ÁöÑÂü∫Êú¨‰ø°ÊÅØ„ÄÇ ÂÖ∑‰ΩìËÄåË®ÄÔºåÁΩëÈ°µÊéàÊùÉÊµÅÁ®ãÂàÜ‰∏∫ÂõõÊ≠•Ôºö 1„ÄÅÂºïÂØºÁî®Êà∑ËøõÂÖ•ÊéàÊùÉÈ°µÈù¢ÂêåÊÑèÊéàÊùÉÔºåËé∑Âèñcode 2„ÄÅÈÄöËøácodeÊç¢ÂèñÁΩëÈ°µÊéàÊùÉaccess_tokenÔºà‰∏éÂü∫Á°ÄÊîØÊåÅ‰∏≠ÁöÑaccess_token‰∏çÂêåÔºâ 3„ÄÅÂ¶ÇÊûúÈúÄË¶ÅÔºåÂºÄÂèëËÄÖÂèØ‰ª•Âà∑Êñ∞ÁΩëÈ°µÊéàÊùÉaccess_tokenÔºåÈÅøÂÖçËøáÊúü 4„ÄÅÈÄöËøáÁΩëÈ°µÊéàÊùÉaccess_tokenÂíåopenidËé∑ÂèñÁî®Êà∑Âü∫Êú¨‰ø°ÊÅØÔºàÊîØÊåÅUnionIDÊú∫Âà∂Ôºâ util.js 123456789101112131415161718192021222324252627282930313233343536import * as wxConfig from &quot;./wxConfig&quot;;const homepagedir = &#x27;http://testwordcamp.ibt.tel/wx_login?from=&#x27;;function quietLogin(pathname) &#123; const loginConfig = &#123; &#x27;appid&#x27;: wxConfig.appId, &#x27;redirect_uri&#x27;: homepagedir + pathname, &#x27;response_type&#x27;: &#x27;code&#x27;, &#x27;scope&#x27;: &#x27;snsapi_base&#x27;, &#x27;state&#x27;: &#x27;120&#x27; &#125;; window.location.href = &#x27;https://open.weixin.qq.com/connect/oauth2/authorize?&#x27; + qs.stringify(loginConfig) + &#x27;#wechat_redirect&#x27;&#125;//redirect_uri ÁöÑÂÄºÈáåÈù¢Êúâ#ÊòØ‰ºö‰∫ßÁîüresponse typeÈîôËØØÁöÑÔºå‰∏îÊó†Ê≥ï‰øÆÊîπ// Ëß£ÂÜ≥ÊñπÊ°àÔºö ÂèØ‰ª•Êää#ÂêéÈù¢ÁöÑË∑ØÂæÑËß£ÊûêÂá∫Êù•ÔºåÁî®queryÊê∫Â∏¶ÂèÇÊï∞ÔºåÂèØ‰ª•ÂÅöÂà∞ÊéàÊùÉ‰πãÂêéË∑≥ËΩ¨ÂõûÂéüÊù•ÁöÑÈ°µÈù¢function login(pathname) &#123; const loginConfig = &#123; &#x27;appid&#x27;: wxConfig.appId, &#x27;redirect_uri&#x27;: homepagedir + pathname, &#x27;response_type&#x27;: &#x27;code&#x27;, &#x27;scope&#x27;: &#x27;snsapi_userinfo&#x27;, &#x27;state&#x27;: &#x27;120&#x27; &#125;; window.location.href = &#x27;https://open.weixin.qq.com/connect/oauth2/authorize?&#x27; + qs.stringify(loginConfig) + &#x27;#wechat_redirect&#x27;&#125;export &#123; quietLogin, login&#125; È°πÁõÆÁöÑÈ¶ñÈ°µ‰Ωú‰∏∫Ê£ÄÊµãÊòØÂê¶ÁôªÈôÜÁöÑÂÖ•Âè£ 12345678910111213141516171819202122232425262728293031323334Home.jsimport React from &#x27;react&#x27;;import * as wxConfig from &#x27;../../wxConfig&#x27;;import qs from &#x27;querystring&#x27;;import &#123;login, quietLogin&#125; from &quot;../../util&quot;;const homepagedir = &#x27;http://testwordcamp.ibt.tel/wx_login?from=&#x27;;class Home extends React.Component &#123; constructor(props) &#123; super(props); &#125; componentDidMount() &#123; //Ê£ÄÊü•ÊòØÂê¶ÁôªÈôÜËøá let wx_login = window.localStorage.getItem(&#x27;wx_login&#x27;); let phone_login = window.localStorage.getItem(&#x27;phone_login&#x27;); if (!wx_login) &#123; // login(this.props.location.pathname); quietLogin(this.props.location.pathname); &#125; &#125; render() &#123; return ( &lt;div&gt; &lt;p&gt;Home page&lt;/p&gt; &lt;/div&gt; ) &#125;&#125;export default Home; Âú®ÈùôÈªòÊéàÊùÉ‰∏≠, window.location.href &#x3D; ‚Äòhttps://open.weixin.qq.com/connect/oauth2/authorize?‚Äô + qs.stringify(loginConfig) + ‚Äò#wechat_redirect‚Äô ÁΩëÈ°µÊâìÂºÄ https://open.weixin.qq.com/connect/oauth2/authorize?&#39; + qs.stringify(loginConfig) + &#39;#wechat_redirect&#39;ÂæÆ‰ø°ÊµèËßàÂô®‰ºöËá™Âä®ÊâìÂºÄ‰Ω†ËÆæÁΩÆÁöÑ redirect_uri,Âπ∂‰∏îÊê∫Â∏¶code „ÄÇÂú®redirect_uriÊàëÊê∫Â∏¶‰∫ÜË∑≥ËΩ¨ÂâçÁöÑÁΩëÈ°µÂú∞ÂùÄÔºåËøôÊ†∑Âú®ÁôªÈôÜ‰πãÂêéÔºåËøòÂèØ‰ª•Ë∑≥ËΩ¨Âõû‰πãÂâçÁöÑÈ°µÈù¢„ÄÇÊàëÊòØÂú®WxLogin È°µÈù¢‰∏≠Êé•Êî∂code WxLogin.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import React from &#x27;react&#x27;;import axios from &#x27;axios&#x27;;import &#123;fixSearch, login&#125; from &quot;../../util&quot;;// ÂæÆ‰ø°ÁôªÈôÜclass WxLogin extends React.Component &#123; constructor(props) &#123; super(props) &#125; async componentDidMount() &#123; const &#123;from, code, state&#125; = fixSearch(this.props.location.search); console.log(&#123;from, code, state&#125;); // Â¶ÇÊûúÊúâcodeÔºåË∞ÉÁî®ÂêéÁ´ØÁöÑÂæÆ‰ø°ÁôªÈôÜÊé•Âè£ setTimeout(() =&gt; &#123; console.log(&#x27;ÁôªÈôÜÊàêÂäü&#x27;); window.localStorage.setItem(&#x27;wx_login&#x27;, true); window.location.href = from; &#125;, 1000); // if (code &amp;&amp; state) &#123; // let res = await axios.get(`/api/auth?code=$&#123;code&#125;&amp;state=$&#123;state&#125;`); // console.log(res.data, 16); // if (res.data.is_ok) &#123; // setTimeout(() =&gt; &#123; // console.log(&#x27;ÁôªÈôÜÊàêÂäü&#x27;); // window.localStorage.setItem(&#x27;wx_login&#x27;, true); // window.location.href = from; // // &#125;, 1000); // &#125; else &#123; // login(from) // &#125; // //ÁôªÈôÜÊàêÂäü‰πãÂêéÔºåË∑≥ËΩ¨ÂõûÂéª // // &#125; else &#123; // // &#125; &#125; render() &#123; return (&lt;div&gt; &lt;p&gt; ÂæÆ‰ø°ÁôªÈôÜÈ°µÈù¢ &lt;/p&gt; &lt;/div&gt;) &#125;&#125;export default WxLogin;","categories":[{"name":"ÂæÆ‰ø°ÂºÄÂèë","slug":"ÂæÆ‰ø°ÂºÄÂèë","permalink":"https://justsso1.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"3‰ΩúÁî®ÂüüÂíåÈó≠ÂåÖ","slug":"jsÂü∫Á°Ä-3 ‰ΩúÁî®ÂüüÂíåÈó≠ÂåÖ","date":"2019-02-23T16:00:00.000Z","updated":"2024-10-13T16:40:43.618Z","comments":true,"path":"2019/02/24/jsÂü∫Á°Ä-3 ‰ΩúÁî®ÂüüÂíåÈó≠ÂåÖ/","permalink":"https://justsso1.github.io/2019/02/24/js%E5%9F%BA%E7%A1%80-3%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E9%97%AD%E5%8C%85/","excerpt":"","text":"jsÂü∫Á°Ä-‰ΩúÁî®ÂüüÂíåÈó≠ÂåÖ‰ΩúÁî®ÂüüÊ¶ÇÂøµÔºöÊü•ÊâæÂèòÈáèÁöÑËßÑÂàô„ÄÇ ÁºñËØëÂéüÁêÜ‰∏∫‰ªÄ‰πàË¶ÅÁü•ÈÅìÁºñËØëÂéüÁêÜÂë¢ÔºüÁºñËØëÂéüÁêÜÊòØ‰ªéÊ∫ê‰ª£Á†ÅÂà∞ÂèØÊâßË°å‰ª£Á†ÅÂà∞Êú∫Âô®ÂèØ‰ª•ËØÜÂà´ÁöÑ‰ª£Á†ÅÁöÑ‰∏Ä‰∏™ËøáÁ®ã„ÄÇ ‰∏çÂêåÁöÑËØ≠Ë®ÄÁöÑÁºñËØëÂéüÁêÜ‰∏ç‰∏ÄÊ†∑ÔºåÂèØËÉΩÂêåÊ†∑‰∏Ä‰ªΩ‰ª£Á†ÅÔºåÂú®java‰∏≠ÂíåÂú®javascript‰∏≠ÁöÑÊâßË°åÁªìÊûú‰∏çÂêå„ÄÇÊ†πÊú¨ÁöÑÂå∫Âà´Â∞±Âú®‰∫é‰∏§ËÄÖÂØπ‰∫éÁ®ãÂ∫èÁöÑÁºñËØëÁöÑËøáÁ®ã‰∏çÂêå„ÄÇ ‰º†ÁªüÁöÑËØ≠Ë®ÄÊòØÊèêÂâçÁºñËØëÁöÑÔºå‰ΩÜjs‰∏çÊòØÊèêÂâçÁºñËØëÁöÑ„ÄÇÁºñËØëÁªìÊûú‰πü‰∏çËÉΩÂú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ËøõË°åÁßªÊ§ç„ÄÇ ‰º†ÁªüÁºñËØëËØ≠Ë®ÄÔºåÁ®ãÂ∫è‰∏≠ÁöÑÊ∫ê‰ª£Á†ÅÂú®ÊâßË°åÂâç‰ºöÁªèÂéÜ3‰∏™Ê≠•È™§ÔºåÁªüÁß∞‰∏∫‚ÄúÁºñËØë‚Äù„ÄÇ ÂàÜËØç&#x2F;ËØçÊ≥ïÂàÜÊûê Ëß£Êûê&#x2F;ËØ≠Ê≥ïÂàÜÊûê ‰ª£Á†ÅÁîüÊàê ÂºïÊìéÊü•ÊâæÊñπÂºèÊúâ2ÁßçÔºö LHSÂíåRHS ÂèòÈáèËµãÂÄºÔºåLHSÈùûÂèòÈáèËµãÂÄºÔºöRHS ‰∏∫‰ªÄ‰πàÂå∫ÂàÜLHSÂíåRHSÔºü Âõ†‰∏∫Âú®ÂèòÈáèËøòÊ≤°ÊúâÂ£∞ÊòéÔºàÂú®‰ªª‰Ωï‰ΩúÁî®Âüü‰∏≠ÈÉΩÊó†Ê≥ïÊâæÂà∞ËØ•ÂèòÈáèÔºâÁöÑÊÉÖÂÜµ‰∏ãÔºåËøô‰∏§ÁßçÊü•ËØ¢ÁöÑË°å‰∏∫ÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇ LHS Âíå RHS Êü•ËØ¢ÈÉΩ‰ºöÂú®ÂΩìÂâçÊâßË°å‰ΩúÁî®Âüü‰∏≠ÂºÄÂßãÔºåÂ¶ÇÊûúÊúâÈúÄË¶Å(‰πüÂ∞±ÊòØËØ¥ÂÆÉ‰ª¨Ê≤°ÊúâÊâæÂà∞ÊâÄ ÈúÄÁöÑÊ†áËØÜÁ¨¶)ÔºåÂ∞±‰ºöÂêë‰∏äÁ∫ß‰ΩúÁî®ÂüüÁªßÁª≠Êü•ÊâæÁõÆÊ†áÊ†áËØÜÁ¨¶ÔºåËøôÊ†∑ÊØèÊ¨°‰∏äÂçá‰∏ÄÁ∫ß‰ΩúÁî®Âüü(‰∏ÄÂ±Ç Ê•º)ÔºåÊúÄÂêéÊäµËææÂÖ®Â±Ä‰ΩúÁî®Âüü(È°∂Â±Ç)ÔºåÊó†ËÆ∫ÊâæÂà∞ÊàñÊ≤°ÊâæÂà∞ÈÉΩÂ∞ÜÂÅúÊ≠¢„ÄÇ‰∏çÊàêÂäüÁöÑ RHS ÂºïÁî®‰ºöÂØºËá¥ÊäõÂá∫ ReferenceError ÂºÇÂ∏∏„ÄÇ‰∏çÊàêÂäüÁöÑ LHS ÂºïÁî®‰ºöÂØºËá¥Ëá™Âä®ÈöêÂºè Âú∞ÂàõÂª∫‰∏Ä‰∏™ÂÖ®Â±ÄÂèòÈáè(Èùû‰∏•Ê†ºÊ®°Âºè‰∏ã)ÔºåËØ•ÂèòÈáè‰ΩøÁî® LHS ÂºïÁî®ÁöÑÁõÆÊ†á‰Ωú‰∏∫Ê†áËØÜÁ¨¶ÔºåÊàñËÄÖÊäõ Âá∫ ReferenceError ÂºÇÂ∏∏(‰∏•Ê†ºÊ®°Âºè‰∏ã)„ÄÇ ‰ΩúÁî®ÂüüÊü•ÊâæËßÑÂàô ÂºïÊìé‰ªéÂΩìÂâçÁöÑÊâßË°å‰ΩúÁî®ÂüüÂºÄÂßãÊü•ÊâæÂèòÈáèÔºåÂ¶ÇÊûúÊâæ‰∏çÂà∞ÔºåÂ∞±Âêë‰∏ä‰∏ÄÁ∫ßÊü•Êâæ„ÄÇÂΩìÊäµËææÊúÄÂ§ñÂ±ÇÁöÑÂÖ®Â±Ä‰ΩúÁî®ÂüüÊó∂ÔºåÊó†ËÆ∫ÊâæÂà∞ËøòÊòØÊ≤°ÊúâÊâæÂà∞ÔºåÈÉΩ‰ºöÁªìÊùü„ÄÇ ËØçÊ≥ï‰ΩúÁî®Âüü‰ΩúÁî®ÂüüÊúâ‰∏§ÁßçÔºöËØçÊ≥ï‰ΩúÁî®ÂüüÂíåÂä®ÊÄÅ‰ΩúÁî®Âüü„ÄÇjsÈÄâÊã©‰∫ÜËØçÊ≥ï‰ΩúÁî®Âüü„ÄÇ‰ΩúÁî®ÂüüÊü•Êâæ‰ºöÂú®ÊâæÂà∞Á¨¨‰∏Ä‰∏™ÂåπÈÖçÁöÑÊ†áËØÜÁ¨¶Êó∂ÂÅúÊ≠¢„ÄÇ Ê¨∫È™óËØçÊ≥ï‰ΩúÁî®Âüü ‰∏§ÁßçÊú∫Âà∂,ÈÉΩ‰∏çÊé®Ëçê‰ΩøÁî®ÔºåËôΩÁÑ∂ÂèØ‰ª•Ê¨∫È™óËØçÊ≥ï‰ΩúÁî®ÂüüÔºå‰ΩÜÊòØ‰ºöÊçüÂùèÊÄßËÉΩ„ÄÇ eval() with ÂÖ≥ÈîÆÂ≠ó ‰∏•Ê†ºÊ®°Âºè‰∏ãÔºåËøô‰∏§ÁßçÈÉΩË¢´Á¶ÅÁî®‰∫Ü„ÄÇ ‰ΩúÁî®ÂüüÂíåÂáΩÊï∞‰ΩúÁî®ÂüüÊúÄÂ∞èÊéàÊùÉÊàñËÄÖÊúÄÂ∞èÊö¥Èú≤ÂéüÂàôÊòØÊåáÂ∫îËØ•ÊúÄÂ∞èÈôêÂ∫¶ÁöÑÊö¥Èú≤ÂøÖË¶ÅÂÜÖÂÆπ„ÄÇÊúâ‰∫õÂèòÈáèÊàñËÄÖÂáΩÊï∞Â∫îËØ•ÊòØÁßÅÊúâÁöÑÔºå‰∏çÂ∫îËØ•ÂÖ®ÈÉ®Êö¥Èú≤Âá∫Âéª„ÄÇÊ≠£Á°ÆÁöÑ‰ª£Á†ÅÂ∫îËØ•ÂèØ‰ª•ÈòªÊ≠¢ÂØπËøô‰∫õÂèòÈáèÊàñËÄÖÂáΩÊï∞ÁöÑËÆøÈóÆ„ÄÇËâØÂ•ΩÁöÑËΩØ‰ª∂ÈÉΩ‰ºö‰æùÊ¨°ÂÆûÁé∞„ÄÇ Áî®varÂ£∞ÊòéÁöÑÂèòÈáèÈÉΩ‰ºöÂú®ÂÖ®Â±Ä‰ΩúÁî®Âüü‰∏≠„ÄÇjs‰∏≠ÊúâÂÖ®Â±Ä‰ΩúÁî®ÂüüÔºåÂáΩÊï∞‰ΩúÁî®ÂüüÔºåÂùó‰ΩúÁî®Âüü„ÄÇ Âùó‰ΩúÁî®ÂüüÔºöwith() try‚Ä¶catch‚Ä¶ let let Â£∞ÊòéÁöÑÂèòÈáè‰∏ç‰ºöÊúâÂèòÈáèÊèêÂçáÔºåÂú®Âùó‰ΩúÁî®Âüü‰πãÂ§ñ‰πü‰∏ç‰ºöË¢´ËÆøÈóÆÂà∞ÁöÑ„ÄÇÂùó‰ΩúÁî®ÂüüÁöÑÂ•ΩÂ§ÑÔºö Èó≠ÂåÖÂíåÂûÉÂúæÂõûÊî∂Êú∫Âà∂Èó≠ÂåÖÁöÑ‰æãÂ≠êÂ∞±ÊòØforÂæ™ÁéØ‰∫ÜÔºåÂûÉÂúæÂõûÊî∂Êú∫Âà∂Ôºå‰∏∫ÂèòÈáèÊòæÁ§∫Â£∞ÊòéÂùó‰ΩúÁî®ÂüüÔºåÂπ∂ÂØπÂèòÈáèËøõË°åÊú¨Âú∞ÁªëÂÆöÊòØÈùûÂ∏∏ÊúâÁî®ÁöÑÂ∑•ÂÖ∑„ÄÇ ÂèòÈáèÊèêÂçáÔºåÁºñËØëÂô®‰ºöÂàÜÊàê2ÈÉ®ËøõË°å„ÄÇÁ¨¨‰∏ÄÊ≠•ÊòØÂèòÈáèÂ£∞ÊòéÔºåÁ¨¨‰∫åÈÉ®ÊòØÊâßË°åÈò∂ÊÆµ„ÄÇ Êàë‰ª¨‰π†ÊÉØÂ∞Üvar a &#x3D; 2;Áúã‰Ωú‰∏Ä‰∏™Â£∞ÊòéÔºåËÄåÂÆûÈôÖ‰∏äJavaScriptÂºïÊìéÂπ∂‰∏çËøô‰πàËÆ§‰∏∫„ÄÇÂÆÉÂ∞Üvar aÂíå a &#x3D; 2 ÂΩì‰Ωú‰∏§‰∏™ÂçïÁã¨ÁöÑÂ£∞ÊòéÔºåÁ¨¨‰∏Ä‰∏™ÊòØÁºñËØëÈò∂ÊÆµÁöÑ‰ªªÂä°ÔºåËÄåÁ¨¨‰∫å‰∏™ÂàôÊòØÊâßË°åÈò∂ÊÆµÁöÑ‰ªªÂä°„ÄÇ ‰ΩúÁî®ÂüüÈó≠ÂåÖÈó≠ÂåÖÁöÑÊ¶ÇÂøµÔºöÂú®Â£∞ÊòéÊó∂ÊâÄÂú®‰ΩúÁî®Âüü‰πãÂ§ñË∞ÉÁî®ËØ•ÂáΩÊï∞ÔºåÂ∞±‰ºö‰∫ßÁîüÈó≠ÂåÖ„ÄÇÂâØ‰ΩúÁî®Ôºö‰øùÁïô‰∏ÄÊÆµ‰ΩúÁî®ÂüüÂ£∞ÊòéÂë®ÊúüÔºåÂûÉÂúæÂõûÊî∂Êú∫Âà∂‰∏çËÉΩÂõûÊî∂Ôºå‰ΩúÁî®Âüü‰∏ÄÁõ¥Â≠òÂú®„ÄÇ ÂáΩÊï∞Âú®ÂÆÉÊú¨Ë∫´ÁöÑËØçÊ≥ï‰ΩúÁî®Âüü‰πãÂ§ñÊâßË°å„ÄÇ &#x2F;&#x2F; function foo(){&#x2F;&#x2F; var a &#x3D; 2;&#x2F;&#x2F; function bar() {&#x2F;&#x2F; console.log(a)&#x2F;&#x2F; }&#x2F;&#x2F; return bar;&#x2F;&#x2F; }&#x2F;&#x2F;&#x2F;&#x2F; var baz &#x3D; foo();&#x2F;&#x2F; baz(); &#x2F;&#x2F;Èó≠ÂåÖÁöÑ‰æãÂ≠ê&#x2F;&#x2F; function wait(message){&#x2F;&#x2F; setTimeout(function timer () {&#x2F;&#x2F; console.log(message)&#x2F;&#x2F; }, 1000)&#x2F;&#x2F; }&#x2F;&#x2F; wait(‚Äòhello world‚Äô); &#x2F;&#x2F;forÂæ™ÁéØÈó≠ÂåÖÁöÑ‰æãÂ≠ê&#x2F;&#x2F;1sÔºå2s,3s,4s,5sÂêéËæìÂá∫ÁöÑÈÉΩÊòØ6&#x2F;&#x2F; for (var i &#x3D; 1; i &lt;&#x3D; 5; i++) {&#x2F;&#x2F; &#x2F;&#x2F; setTimeout(function timer() {&#x2F;&#x2F; &#x2F;&#x2F; console.log(i)&#x2F;&#x2F; &#x2F;&#x2F; }, 100)&#x2F;&#x2F; &#x2F;&#x2F; } &#x2F;&#x2F;ËøôÊ†∑Âíå‰∏äÈù¢ÁöÑÁªìÊûú‰∏ÄÊ†∑ÔºåËôΩÁÑ∂ÊØè‰∏Ä‰∏™forÂæ™ÁéØÈÉΩÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑËØçÊ≥ï‰ΩúÁî®ÂüüÂá∫Êù•&#x2F;&#x2F; for (var i &#x3D; 1; i &lt;&#x3D;5 ; i++) {&#x2F;&#x2F; (function () {&#x2F;&#x2F; setTimeout(function timer() {&#x2F;&#x2F; console.log(i)&#x2F;&#x2F; }, i*1000)&#x2F;&#x2F; })()&#x2F;&#x2F; } &#x2F;&#x2F;ËøôÊ†∑ÂèØ‰ª•1 2 3 4 5‰æùÊ¨°ËæìÂá∫&#x2F;&#x2F;ËøôÊ†∑‰∏ç‰ªÖÂàõÂª∫‰∫Ü5‰∏™‰∏çÂêåÁöÑËØçÊ≥ï‰ΩúÁî®ÂüüÔºåËøòÊää‰∏çÂêåÂæ™ÁéØ‰∏≠ÁöÑiÁöÑÂÄºÔºå‰º†ÂÖ•Âà∞Á´ãÂç≥ÊâßË°åÂáΩÊï∞‰∏≠&#x2F;&#x2F; for (var i &#x3D; 1; i &lt;&#x3D;5 ; i++) {&#x2F;&#x2F; (function (i) {&#x2F;&#x2F; setTimeout(function timer() {&#x2F;&#x2F; console.log(i)&#x2F;&#x2F; }, i*1000)&#x2F;&#x2F; })(i)&#x2F;&#x2F; } &#x2F;&#x2F;ËøôÊ†∑‰æø‰∏ç‰ºöÊØèÊ¨°ÊâãÂä®ÂàõÂª∫‰∏Ä‰∏™‰ΩúÁî®Âüü‰∫Ü&#x2F;&#x2F;Âõ†‰∏∫letÊúâÊã¶Êà™‰ΩúÁî®ÂüüÁöÑ‰ΩúÁî®&#x2F;&#x2F; for (let i &#x3D; 1; i &lt;&#x3D; 5; i++) {&#x2F;&#x2F; setTimeout(function timer() {&#x2F;&#x2F; console.log(i)&#x2F;&#x2F; }, i*1000)&#x2F;&#x2F; } &#x2F;&#x2F;Ê®°Âùófunction foo() { var something &#x3D; ‚Äòsomething‚Äô; var arr &#x3D; [1,2,3]; function a() { console.log(something) } function b() &#123; console.log(arr.join(&#39;,&#39;)) &#125; return &#123; a, b &#125; } var Foo &#x3D; foo();Foo.a();Foo.b(); ËØçÊ≥ï‰ΩúÁî®ÂüüÂíåÂä®ÊÄÅ‰ΩúÁî®ÂüüÁöÑÂå∫Âà´Ôºö‰∏ªË¶ÅÂå∫Âà´:ËØçÊ≥ï‰ΩúÁî®ÂüüÊòØÂú®ÂÜô‰ª£Á†ÅÊàñËÄÖËØ¥ÂÆö‰πâÊó∂Á°ÆÂÆöÁöÑÔºåËÄåÂä®ÊÄÅ‰ΩúÁî®ÂüüÊòØÂú®ËøêË°åÊó∂Á°ÆÂÆö ÁöÑ„ÄÇ(this ‰πüÊòØ!)ËØçÊ≥ï‰ΩúÁî®ÂüüÂÖ≥Ê≥®ÂáΩÊï∞Âú®‰ΩïÂ§ÑÂ£∞ÊòéÔºåËÄåÂä®ÊÄÅ‰ΩúÁî®ÂüüÂÖ≥Ê≥®ÂáΩÊï∞‰ªé‰ΩïÂ§ÑË∞ÉÁî®„ÄÇ ÂºÇÊ≠•","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"2ÂºÇÊ≠•ÂõûË∞É","slug":"jsÂü∫Á°Ä-2 ÂºÇÊ≠•ÂõûË∞É","date":"2019-02-17T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2019/02/18/jsÂü∫Á°Ä-2 ÂºÇÊ≠•ÂõûË∞É/","permalink":"https://justsso1.github.io/2019/02/18/js%E5%9F%BA%E7%A1%80-2%20%E5%BC%82%E6%AD%A5%E5%9B%9E%E8%B0%83/","excerpt":"","text":"jsÂü∫Á°Ä-2 ÂºÇÊ≠•ÂõûË∞ÉÂÜçËØ¥ÂõûJavascriptÂºïÊìéGoogle V8 ÂºïÊìé‰ΩøÁî® C++ ‰ª£Á†ÅÁºñÂÜôÔºåÂÆûÁé∞‰∫Ü ECMAScript ËßÑËåÉÁöÑÁ¨¨‰∫îÁâàÔºåÂèØ‰ª•ËøêË°åÂú®ÊâÄÊúâÁöÑ‰∏ªÊµÅÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÁîöËá≥ÂèØ‰ª•ËøêË°åÂú®ÁßªÂä®ÁªàÁ´Ø ( Âü∫‰∫é ARM ÁöÑÂ§ÑÁêÜÂô®ÔºåÂ¶Ç HTC G7 Á≠â )„ÄÇV8 ÊúÄÊó©Ë¢´ÂºÄÂèëÁî®‰ª•ÂµåÂÖ•Âà∞ Google ÁöÑÂºÄÊ∫êÊµèËßàÂô® Chrome ‰∏≠Ôºå‰ΩÜÊòØ V8 ÊòØ‰∏Ä‰∏™ÂèØ‰ª•Áã¨Á´ãÁöÑÊ®°ÂùóÔºåÂÆåÂÖ®ÂèØ‰ª•ÂµåÂÖ•ÊÇ®Ëá™Â∑±ÁöÑÂ∫îÁî®ÔºåËëóÂêçÁöÑ Node.js( ‰∏Ä‰∏™ÂºÇÊ≠•ÁöÑÊúçÂä°Âô®Ê°ÜÊû∂ÔºåÂèØ‰ª•Âú®ÊúçÂä°Á´Ø‰ΩøÁî® JavaScript ÂÜôÂá∫È´òÊïàÁöÑÁΩëÁªúÊúçÂä°Âô® ) Â∞±ÊòØÂü∫‰∫é V8 ÂºïÊìéÁöÑ„ÄÇ ÂíåÂÖ∂‰ªñ JavaScript ÂºïÊìé‰∏ÄÊ†∑ÔºåV8 ‰ºöÁºñËØë &#x2F; ÊâßË°å JavaScript ‰ª£Á†ÅÔºåÁÆ°ÁêÜÂÜÖÂ≠òÔºåË¥üË¥£ÂûÉÂúæÂõûÊî∂Ôºå‰∏éÂÆø‰∏ªËØ≠Ë®ÄÁöÑ‰∫§‰∫íÁ≠â„ÄÇV8 ÁöÑÂûÉÂúæÂõûÊî∂Âô®ÈááÁî®‰∫Ü‰ºóÂ§öÊäÄÊúØÔºå‰ΩøÂæóÂÖ∂ËøêË°åÊïàÁéáÂ§ßÂ§ßÊèêÈ´ò„ÄÇÈÄöËøáÊö¥Èú≤ÂÆø‰∏ªÂØπË±° ( ÂèòÈáèÔºåÂáΩÊï∞Á≠â ) Âà∞ JavaScriptÔºåJavaScript ÂèØ‰ª•ËÆøÈóÆÂÆø‰∏ªÁéØÂ¢É‰∏≠ÁöÑÂØπË±°ÔºåÂπ∂Âú®ËÑöÊú¨‰∏≠ÂÆåÊàêÂØπÂÆø‰∏ªÂØπË±°ÁöÑÊìç‰Ωú„ÄÇ ÂÖãÊúçÂçïÁ∫øÁ®ãÁºñÁ®ãÁöÑÁº∫ÁÇπ ‚Äî‚Äî‚Äî‚Äî‚ÄîÂºÇÊ≠•ÂõûË∞ÉJavaScript Á®ãÂ∫èÁöÑÂçïÂÖÉÂùó,ÊúÄÂ∏∏ËßÅÁöÑÂçïÂÖÉÂùóÂ∞±ÊòØÂáΩÊï∞„ÄÇ Áî±‰∫éjavascriptÁöÑÂçïÁ∫øÁ®ãÔºå‰ΩøÂæó‰ªéÁé∞Âú®Âà∞‚ÄúÂ∞ÜÊù•‚ÄùË¶ÅÊâßË°åÁöÑÂáΩÊï∞ÁöÑËøôÊÆµÊó∂Èó¥Êó∂Èó¥Èó¥ÈöôÊòØÁ©∫ÁöÑÔºåËøôÊòØ‰∏çËÉΩÂÖÅËÆ∏ÁöÑ„ÄÇ Èº†Ê†áÁÇπÂáª„ÄÅÂÆöÊó∂Âô®„ÄÅAjaxÂìçÂ∫îÁöÑÂáΩÊï∞ÈÉΩÊòØÂºÇÊ≠•ÊâßË°åÁöÑÔºåÂÆÉ‰ª¨ÂÖ≥ËÅîÁöÑÂáΩÊï∞ÈÉΩ‰∏çÊòØÁ´ãÂàªÂ∞±ÊâßË°å„ÄÇ ÂÖ∂ÂÆûÊµèËßàÂô®ÁöÑÊéßÂà∂Âè∞‰πüÊòØÂºÇÊ≠•ÁöÑÔºåÂÖ∂Êú¨Ë¥®ÊòØI&#x2F;O ÁöÑÂºÇÊ≠•Âåñ„ÄÇ Ëß£Êûê‰∫ã‰ª∂Âæ™ÁéØ‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂ÊòØÁî±ÂÆø‰∏ªÁéØÂ¢ÉÊèê‰æõÁöÑ„ÄÇ‰∫ã‰ª∂ÊòØÊÄé‰πàË∞ÉÂ∫¶ÁöÑÔºåÊòØÊúâÂÆø‰∏ªÁéØÂ¢ÉÊéßÂà∂ÁöÑÔºåÂèØËÉΩ‰∏çÂêåÁöÑÂÆø‰∏ªÁéØÂ¢ÉÊèê‰æõÁöÑ‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂ÊúâÊâÄ‰∏çÂêåÔºåjavascriptÂºïÊìéÂè™ÊòØÂéªÊâßË°åËøô‰∫õjs‰ª£Á†Å„ÄÇ ÂÆø‰∏ªÁéØÂ¢ÉÊèê‰æõÁöÑ‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂Âπ∂‰∏çÊòØÈÇ£‰πàÁöÑÁ≤æÁ°Æ„ÄÇÊØîÂ¶ÇsetTimeout()ÂáΩÊï∞ÔºåËÉΩÂ§ü‰øùËØÅÂú®ÊåáÂÆöÁöÑÊó∂Èó¥‰πãÂêéÊääÂõûË∞ÉÂáΩÊï∞ÊîæÂÖ•‰∫ã‰ª∂Âæ™ÁéØÈòüÂàóÔºå‰ΩÜÊòØÊ≠§Êó∂‰∫ã‰ª∂Âæ™ÁéØÈòüÂàóÂ∑≤ÁªèÂ≠òÂú®Êú™ÊâßË°åÁöÑÂáΩÊï∞ÔºåÈÇ£‰πàÂõûË∞ÉÂáΩÊï∞Â∞±Â∫îËØ•Á≠âÂæÖ„ÄÇÊâÄ‰ª•ÔºåsetTimeout()ÂèØËÉΩ‰ºöÂú®ÊåáÂÆöÈó¥ÈöîË∞ÉÁî®Ôºå‰πüÂèØËÉΩÂú®ÊåáÂÆöÈó¥Èöî‰πãÂêéË∞ÉÁî®„ÄÇ Áõ¥Âà∞Âú®ES6‰∏≠ÔºåJavaScriptÊâçÁúüÊ≠£Âª∫Á´ãËµ∑Áõ¥Êé•ÁöÑÂºÇÊ≠•Ê¶ÇÂøµ„ÄÇ JavaScript ÂºïÊìéÊú¨Ë∫´ÊâÄÂÅöÁöÑÂè™‰∏çËøáÊòØÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÔºåÂú®ÁªôÂÆöÁöÑ‰ªªÊÑèÊó∂ÂàªÊâßË°åÁ®ãÂ∫è‰∏≠ÁöÑÂçï‰∏™‰ª£Á†ÅÂùó„ÄÇ JavaScript ÂºïÊìéÂπ∂‰∏çÊòØÁã¨Á´ãËøêË°åÁöÑÔºåÂÆÉËøêË°åÂú®ÂÆø‰∏ªÁéØÂ¢É‰∏≠ÔºåÂØπÂ§öÊï∞ÂºÄÂèëËÄÖÊù•ËØ¥ÈÄöÂ∏∏Â∞±ÊòØ Web ÊµèËßàÂô®„ÄÇÁªèËøáÊúÄËøëÂá†Âπ¥(‰∏ç‰ªÖ‰∫éÊ≠§)ÁöÑÂèëÂ±ïÔºåJavaScript Â∑≤ÁªèË∂ÖÂá∫‰∫ÜÊµèËßàÂô®ÁöÑËåÉÂõ¥Ôºå ËøõÂÖ•‰∫ÜÂÖ∂‰ªñÁéØÂ¢ÉÔºåÊØîÂ¶ÇÈÄöËøáÂÉè Node.js ËøôÊ†∑ÁöÑÂ∑•ÂÖ∑ËøõÂÖ•ÊúçÂä°Âô®È¢ÜÂüü„ÄÇÂÆûÈôÖ‰∏äÔºåJavaScript Áé∞Â¶Ç‰ªäÂ∑≤ÁªèÂµåÂÖ•Âà∞‰∫Ü‰ªéÊú∫Âô®‰∫∫Âà∞ÁîµÁÅØÊ≥°Á≠âÂêÑÁßçÂêÑÊ†∑ÁöÑËÆæÂ§á‰∏≠„ÄÇ ‰ΩÜÊòØÔºåÊâÄÊúâËøô‰∫õÁéØÂ¢ÉÈÉΩÊúâ‰∏Ä‰∏™ÂÖ±Âêå‚ÄúÁÇπ‚Äù(threadÔºå‰πüÊåáÁ∫øÁ®ã„ÄÇ‰∏çËÆ∫ÁúüÂÅá‰∏éÂê¶ÔºåËøôÈÉΩ‰∏çÁÆó‰∏Ä ‰∏™ÂæàÁ≤æÂ¶ôÁöÑÂºÇÊ≠•Á¨ëËØù)ÔºåÂç≥ÂÆÉ‰ª¨ÈÉΩÊèê‰æõ‰∫Ü‰∏ÄÁßçÊú∫Âà∂Êù•Â§ÑÁêÜÁ®ãÂ∫è‰∏≠Â§ö‰∏™ÂùóÁöÑÊâßË°åÔºå‰∏îÊâßË°åÊØèÂùóÊó∂Ë∞ÉÁî® JavaScript ÂºïÊìéÔºåËøôÁßçÊú∫Âà∂Ë¢´Áß∞‰∏∫‰∫ã‰ª∂Âæ™ÁéØ„ÄÇ Êàë‰ª¨ÂÖà‰ªé‰∏Ä‰∏™Â•áÊÄ™ÁöÑËØ¥Ê≥ïË∞àËµ∑ ‚Äî‚Äî Â∞ΩÁÆ° JavaScript ÂÖÅËÆ∏ÂºÇÊ≠•ÁöÑ‰ª£Á†Å(Â∞±ÂÉèÊòØÊàë‰ª¨ÂàöÂàöËØ¥ÁöÑ setTimeout) Ôºå‰ΩÜÁõ¥Âà∞ ES6ÔºåJavaScript Ëá™Ë∫´‰ªéÊú™ÊúâËøá‰ªª‰ΩïÂÖ≥‰∫éÂºÇÊ≠•ÁöÑÁõ¥Êé•Ê¶ÇÂøµ„ÄÇJavaScript ÂºïÊìéÂè™‰ºöÂú®‰ªªÊÑèÊó∂ÂàªÊâßË°å‰∏Ä‰∏™Á®ãÂ∫è„ÄÇ PromisePromiseÁöÑÂºÇÊ≠•ÁâπÊÄßÊòØÂü∫‰∫é‰ªªÂä°ÁöÑ„ÄÇ ‰∫ã‰ª∂Âæ™ÁéØÈòüÂàóÁ±ª‰ºº‰∫é‰∏Ä‰∏™Ê∏∏‰πêÂõ≠Ê∏∏Êàè:Áé©Ëøá‰∫Ü‰∏Ä‰∏™Ê∏∏Êàè‰πãÂêéÔºå‰Ω†ÈúÄË¶ÅÈáçÊñ∞Âà∞ÈòüÂ∞æÊéíÈòüÊâçËÉΩ ÂÜçÁé©‰∏ÄÊ¨°„ÄÇËÄå‰ªªÂä°ÈòüÂàóÁ±ª‰ºº‰∫éÁé©Ëøá‰∫ÜÊ∏∏Êàè‰πãÂêéÔºåÊèíÈòüÊé•ÁùÄÁªßÁª≠Áé©„ÄÇ‰∏Ä‰∏™‰ªªÂä°ÂèØËÉΩÂºïËµ∑Êõ¥Â§ö‰ªªÂä°Ë¢´Ê∑ªÂä†Âà∞Âêå‰∏Ä‰∏™ÈòüÂàóÊú´Â∞æ„ÄÇÊâÄ‰ª•ÔºåÁêÜËÆ∫‰∏äËØ¥Ôºå‰ªªÂä°Âæ™ÁéØ(job loop)ÂèØËÉΩÊó†ÈôêÂæ™ÁéØ(‰∏Ä‰∏™‰ªªÂä°ÊÄªÊòØÊ∑ªÂä†Âè¶‰∏Ä‰∏™‰ªªÂä°Ôºå‰ª•Ê≠§Á±ªÊé®)ÔºåËøõËÄåÂØºËá¥Á®ãÂ∫èÁöÑ È•øÊ≠ªÔºåÊó†Ê≥ïËΩ¨ÁßªÂà∞‰∏ã‰∏Ä‰∏™‰∫ã‰ª∂Âæ™ÁéØ tick„ÄÇ‰ªéÊ¶ÇÂøµ‰∏äÁúãÔºåËøôÂíå‰ª£Á†Å‰∏≠ÁöÑÊó†ÈôêÂæ™ÁéØ(Â∞±ÂÉè while(true)..)ÁöÑ‰ΩìÈ™åÂá†‰πéÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ ‰ª£Á†Å‰∏≠ËØ≠Âè•ÁöÑÈ°∫Â∫èÂíåjavascriptÂºïÊìéÊâßË°åËØ≠Âè•ÁöÑÈ°∫Â∫èÂπ∂‰∏ç‰∏ÄÂÆöË¶Å‰∏ÄËá¥„ÄÇ async awaitÊÄùË∑ØÔºö ‰ªéÂõûË∞ÉÂáΩÊï∞Âà∞promiseÂà∞generatorÂà∞async await Ê∑±ÂÖ•Â∫ïÂ±Ç jsÁöÑÊâßË°åÊú∫Âà∂Ôºåv8ÂºïÊìéÁöÑÊâßË°åÊú∫Âà∂ÔºåÊâçÂèØ‰ª•‰∫ÜËß£jsÁöÑÂºÇÊ≠•Êú∫Âà∂„ÄÇ promise Âíå jsÂºÇÊ≠•Êú∫Âà∂ÊòØ‰∏§Á†Å‰∫ãÂêóÔºü jsÁöÑÂºïÊìéÊúâÂæàÂ§ö‰∏≠ÔºåÊµèËßàÂô®‰∏≠ÈááÁî®ÂæóÊòØÁî±Ë∞∑Ê≠åÂèëÊòéÂæóV8ÂºïÊìé„ÄÇjsËøòÂèØ‰ª•Â∫îÁî®Âú®Áâ©ËÅîÁΩëÔºåÁ°¨‰ª∂‰∫ßÂìÅ‰∏≠ÔºåÂè™ÊòØÈááÁî®ÂæóÂºïÊìéÊú∫Âà∂‰∏çÂêåËÄåÂ∑≤„ÄÇ jsÊâßË°åÊó∂Ôºåv8 ÂºïÊìéÂíåÂÆø‰∏ªÁéØÂ¢ÉÁªìÂêàÔºåÂÆø‰∏ªÁéØÂ¢ÉÂ∞±ÊòØÊµèËßàÂô®ÔºåÊàñËÄÖÁâ©ËÅîÁΩëÁ°¨‰ª∂„ÄÇ Â£∞ÊòéÂºèÁºñÁ®ã ÁúüÊ≠£ÁêÜËß£ÂõûË∞ÉÂáΩÊï∞ÂõûË∞ÉÂáΩÊï∞Â∏¶Êù•‰∏§‰∏™‰∏§‰∏™Áº∫ÁÇπÔºöÊéßÂà∂ÂèçËΩ¨Ëøõ Tina","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"1Ë∞ÉÁî®Â†ÜÊ†à","slug":"jsÂü∫Á°Ä-1 Ë∞ÉÁî®Â†ÜÊ†à","date":"2019-02-17T16:00:00.000Z","updated":"2024-10-16T04:06:54.382Z","comments":true,"path":"2019/02/18/jsÂü∫Á°Ä-1 Ë∞ÉÁî®Â†ÜÊ†à/","permalink":"https://justsso1.github.io/2019/02/18/js%E5%9F%BA%E7%A1%80-1%20%E8%B0%83%E7%94%A8%E5%A0%86%E6%A0%88/","excerpt":"","text":"jsÂü∫Á°Ä-1 Ë∞ÉÁî®Â†ÜÊ†àË∞ÉÁî®Ê†àÊòØËß£ÈáäÂô®ÔºàÂ∞±ÂÉèÊµèËßàÂô®‰∏≠ÁöÑjavascriptËß£ÈáäÂô®ÔºâËøΩË∏™ÂáΩÊï∞ÊâßË°åÊµÅÁöÑ‰∏ÄÁßçÊú∫Âà∂„ÄÇÂΩìÊâßË°åÁéØÂ¢É‰∏≠Ë∞ÉÁî®‰∫ÜÂ§ö‰∏™ÂáΩÊï∞Êó∂ÔºåÈÄöËøáËøôÁßçÊú∫Âà∂ÔºåÊàë‰ª¨ËÉΩÂ§üËøΩË∏™Âà∞Âì™‰∏™ÂáΩÊï∞Ê≠£Âú®ÊâßË°åÔºåÊâßË°åÁöÑÂáΩÊï∞‰Ωì‰∏≠ÂèàË∞ÉÁî®‰∫ÜÂì™‰∏™ÂáΩÊï∞„ÄÇ ÊØèË∞ÉÁî®‰∏Ä‰∏™ÂáΩÊï∞ÔºåËß£ÈáäÂô®Â∞±‰ºöÊääËØ•ÂáΩÊï∞Ê∑ªÂä†ËøõË∞ÉÁî®Ê†àÂπ∂ÂºÄÂßãÊâßË°å„ÄÇ Ê≠£Âú®Ë∞ÉÁî®Ê†à‰∏≠ÊâßË°åÁöÑÂáΩÊï∞ËøòË∞ÉÁî®‰∫ÜÂÖ∂ÂÆÉÂáΩÊï∞ÔºåÈÇ£‰πàÊñ∞ÂáΩÊï∞‰πüÂ∞Ü‰ºöË¢´Ê∑ªÂä†ËøõË∞ÉÁî®Ê†àÔºå‰∏ÄÊó¶Ëøô‰∏™ÂáΩÊï∞Ë¢´Ë∞ÉÁî®Ôºå‰æø‰ºöÁ´ãÂç≥ÊâßË°å„ÄÇ ÂΩìÂâçÂáΩÊï∞ÊâßË°åÂÆåÊØïÂêéÔºåËß£ÈáäÂô®Â∞ÜÂÖ∂Ê∏ÖÂá∫Ë∞ÉÁî®Ê†àÔºåÁªßÁª≠ÊâßË°åÂΩìÂâçÊâßË°åÁéØÂ¢É‰∏ãÁöÑÂâ©‰ΩôÁöÑ‰ª£Á†Å„ÄÇ ÂΩìÂàÜÈÖçÁöÑË∞ÉÁî®Ê†àÁ©∫Èó¥Ë¢´Âç†Êª°Êó∂Ôºå‰ºöÂºïÂèë‚ÄúÂ†ÜÊ†àÊ∫¢Âá∫‚Äù„ÄÇ 12345678910111213function greeting() &#123; // [1] Some codes here sayHi(); // [2] Some codes here&#125;function sayHi() &#123; return &quot;Hi!&quot;;&#125;// Ë∞ÉÁî® `greeting` ÂáΩÊï∞greeting();// [3] Some codes here ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂ∞ÜËøôÊ†∑ÊâßË°å: ÂøΩÁï•ÂâçÈù¢ÊâÄÊúâÂáΩÊï∞ÔºåÁõ¥Âà∞greeting()ÂáΩÊï∞Ë¢´Ë∞ÉÁî®„ÄÇ Êäägreeting()Ê∑ªÂä†ËøõË∞ÉÁî®Ê†àÂàóË°®„ÄÇ ÊâßË°ågreeting()ÂáΩÊï∞‰Ωì‰∏≠ÁöÑÊâÄÊúâ‰ª£Á†Å„ÄÇ Ë∞ÉÁî®Ê†àÂàóË°®: -greeting ‰ª£Á†ÅÊâßË°åÂà∞sayHi()Êó∂ÔºåËØ•ÂáΩÊï∞Ë¢´Ë∞ÉÁî®„ÄÇ ÊääsayHi()Ê∑ªÂä†ËøõË∞ÉÁî®Ê†àÂàóË°®„ÄÇ ÊâßË°åsayHi()ÂáΩÊï∞‰Ωì‰∏≠ÁöÑ‰ª£Á†ÅÔºåÁõ¥Âà∞ÂÖ®ÈÉ®ÊâßË°åÂÆåÊØï„ÄÇ Ë∞ÉÁî®Ê†àÂàóË°®: -greeting -sayHi ËøîÂõûÊù•ÁªßÁª≠ÊâßË°ågreeting()ÂáΩÊï∞‰Ωì‰∏≠sayHi()ÂêéÈù¢ÁöÑ‰ª£Á†Å„ÄÇ Âà†Èô§Ë∞ÉÁî®Ê†àÂàóË°®‰∏≠ÁöÑsayHi()ÂáΩÊï∞„ÄÇ ÂΩìgreeting()ÂáΩÊï∞‰Ωì‰∏≠ÁöÑ‰ª£Á†ÅÂÖ®ÈÉ®ÊâßË°åÂÆåÊØïÔºåËøîÂõûÂà∞Ë∞ÉÁî®greeting()ÁöÑ‰ª£Á†ÅË°åÔºåÁªßÁª≠ÊâßË°åÂâ©‰ΩôJS‰ª£Á†Å„ÄÇ Ë∞ÉÁî®Ê†àÂàóË°®: -greeting Âà†Èô§Ë∞ÉÁî®Ê†àÂàóË°®‰∏≠ÁöÑgreeting()ÂáΩÊï∞„ÄÇ ‰∏ÄÂºÄÂßãÔºåÊàë‰ª¨ÂæóÂà∞‰∏Ä‰∏™Á©∫Á©∫Â¶Ç‰πüÁöÑË∞ÉÁî®Ê†à„ÄÇÈöèÂêéÔºåÊØèÂΩìÊúâÂáΩÊï∞Ë¢´Ë∞ÉÁî®ÈÉΩ‰ºöËá™Âä®Âú∞Ê∑ªÂä†ËøõË∞ÉÁî®Ê†àÔºåÊâßË°åÂÆåÂáΩÊï∞‰Ωì‰∏≠ÁöÑ‰ª£Á†ÅÂêéÔºåË∞ÉÁî®Ê†àÂèà‰ºöËá™Âä®Âú∞ÁßªÈô§Ëøô‰∏™ÂáΩÊï∞„ÄÇÊúÄÂêéÔºåÊàë‰ª¨ÂèàÂæóÂà∞‰∫Ü‰∏Ä‰∏™Á©∫Á©∫Â¶Ç‰πüÁöÑË∞ÉÁî®Ê†à„ÄÇ ÂÜçÊù•Áúã‰∏™‰æãÂ≠êÔºö 12345678910111213141516function baz() &#123; console.log(&#x27;baz&#x27;); bar();&#125;function bar() &#123; console.log(&#x27;bar&#x27;); foo();&#125;function foo() &#123; debugger; console.log(&#x27;foo&#x27;);&#125;baz(); ÊµèËßàÂô®‰∏≠ÁöÑË∞ÉÁî®Â†ÜÊ†àÊà™ÂõæÔºö JavaScriptÂ∫ïÂ±ÇÊòØÊÄé‰πàËøê‰ΩúÁöÑJavascriptÂºïÊìéJavaScript ÂºïÊìéËØ¥Ëµ∑Êù•ÊúÄÊµÅË°åÁöÑÂΩìÁÑ∂ÊòØË∞∑Ê≠åÁöÑ V8 ÂºïÊìé‰∫ÜÔºå V8 ÂºïÊìé‰ΩøÁî®Âú® Chrome ‰ª•Âèä Node ‰∏≠Ôºå‰∏ãÈù¢Êúâ‰∏™ÁÆÄÂçïÁöÑÂõæËÉΩËØ¥Êòé‰ªñ‰ª¨ÁöÑÂÖ≥Á≥ªÔºö Ëøô‰∏™ÂºïÊìé‰∏ªË¶ÅÁî±‰∏§ÈÉ®ÂàÜÁªÑÊàê: ÂÜÖÂ≠òÂ†ÜÔºöËøôÊòØÂÜÖÂ≠òÂàÜÈÖçÂèëÁîüÁöÑÂú∞Êñπ Ë∞ÉÁî®Ê†àÔºöËøôÊòØ‰Ω†ÁöÑ‰ª£Á†ÅÊâßË°åÊó∂ÁöÑÂú∞Êñπ ËøêË°åÊó∂ Êúâ‰∫õÊµèËßàÂô®ÁöÑ API ÁªèÂ∏∏Ë¢´‰ΩøÁî®Âà∞(ÊØîÂ¶ÇËØ¥ÔºösetTimeout)Ôºå‰ΩÜÊòØÔºåËøô‰∫õ API Âç¥‰∏çÊòØÂºïÊìéÊèê‰æõÁöÑ„ÄÇÈÇ£‰πàÔºå‰ªñ‰ª¨ÊòØ‰ªéÂì™ÂÑøÊù•ÁöÑÂë¢Ôºü‰∫ãÂÆû‰∏äËøôÈáåÈù¢ÂÆûÈôÖÊÉÖÂÜµÊúâÁÇπÂ§çÊùÇ„ÄÇ ÂæàÂ§öÂºïÊìé‰πãÂ§ñÁöÑapiÔºåÊàë‰ª¨ÊääËøô‰∫õÁß∞‰∏∫ÊµèËßàÂô®Êèê‰æõÁöÑ Web APIÔºåÊØîÂ¶ÇËØ¥ DOM„ÄÅAJAX„ÄÅsetTimeoutÁ≠âÁ≠â„ÄÇ ÁÑ∂ÂêéÊàë‰ª¨ËøòÊã•ÊúâÂ¶ÇÊ≠§ÊµÅË°åÁöÑ‰∫ã‰ª∂Âæ™ÁéØÂíåÂõûË∞ÉÈòüÂàó„ÄÇ Ë∞ÉÁî®Ê†àJavaScript ÊòØ‰∏ÄÈó®ÂçïÁ∫øÁ®ãÁöÑËØ≠Ë®ÄÔºåËøôÊÑèÂë≥ÁùÄÂÆÉÂè™Êúâ‰∏Ä‰∏™Ë∞ÉÁî®Ê†àÔºåÂõ†Ê≠§ÔºåÂÆÉÂêå‰∏ÄÊó∂Èó¥Âè™ËÉΩÂÅö‰∏Ä‰ª∂‰∫ã„ÄÇ Ë∞ÉÁî®Ê†àÊòØ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåÂÆÉËÆ∞ÂΩï‰∫ÜÊàë‰ª¨Âú®Á®ãÂ∫è‰∏≠ÁöÑ‰ΩçÁΩÆ„ÄÇÂ¶ÇÊûúÊàë‰ª¨ËøêË°åÂà∞‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂÆÉÂ∞±‰ºöÂ∞ÜÂÖ∂ÊîæÁΩÆÂà∞Ê†àÈ°∂„ÄÇÂΩì‰ªéËøô‰∏™ÂáΩÊï∞ËøîÂõûÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÂ∞ÜËøô‰∏™ÂáΩÊï∞‰ªéÊ†àÈ°∂ÂºπÂá∫ÔºåËøôÂ∞±ÊòØË∞ÉÁî®Ê†àÂÅöÁöÑ‰∫ãÊÉÖ„ÄÇ ËÆ©Êàë‰ª¨Êù•Áúã‰∏ÄÁúã‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºö 123456789function multiply(x, y) &#123; return x * y; &#125; function printSquare(x) &#123; var s = multiply(x, x); console.log(s); &#125; printSquare(5); ÂΩìÁ®ãÂ∫èÂºÄÂßãÊâßË°åÁöÑÊó∂ÂÄôÔºåË∞ÉÁî®Ê†àÊòØÁ©∫ÁöÑÔºåÁÑ∂ÂêéÔºåÊ≠•È™§Â¶Ç‰∏ãÔºö ÊØè‰∏Ä‰∏™ËøõÂÖ•Ë∞ÉÁî®Ê†àÁöÑÈÉΩÁß∞‰∏∫__Ë∞ÉÁî®Â∏ß__„ÄÇ ËøôËÉΩÊ∏ÖÊ•öÁöÑÁü•ÈÅìÂΩìÂºÇÂ∏∏ÂèëÁîüÁöÑÊó∂ÂÄôÂ†ÜÊ†àËøΩË∏™ÊòØÊÄé‰πàË¢´ÊûÑÈÄ†ÁöÑÔºåÂ†ÜÊ†àÁöÑÁä∂ÊÄÅÊòØÂ¶Ç‰ΩïÁöÑ„ÄÇËÆ©Êàë‰ª¨Áúã‰∏Ä‰∏ã‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö 1234567891011function foo() &#123; throw new Error(&#x27;SessionStack will help you resolve crashes :)&#x27;); &#125; function bar() &#123; foo(); &#125; function start() &#123; bar(); &#125; start(); Â¶ÇÊûúËøôÂèëÁîüÂú® Chrome Èáå(ÂÅáËÆæËøôÊÆµ‰ª£Á†ÅÂÆûÂú®‰∏Ä‰∏™Âêç‰∏∫ foo.js ÁöÑÊñá‰ª∂‰∏≠)ÔºåÈÇ£‰πàÂ∞Ü‰ºöÁîüÊàê‰ª•‰∏ãÁöÑÂ†ÜÊ†àËøΩË∏™Ôºö ‚ÄúÂ†ÜÊ†àÊ∫¢Âá∫‚ÄùÔºåÂΩì‰Ω†ËææÂà∞Ë∞ÉÁî®Ê†àÊúÄÂ§ßÁöÑÂ§ßÂ∞èÁöÑÊó∂ÂÄôÂ∞±‰ºöÂèëÁîüËøôÁßçÊÉÖÂÜµÔºåËÄå‰∏îËøôÁõ∏ÂΩìÂÆπÊòìÂèëÁîüÔºåÁâπÂà´ÊòØÂú®‰Ω†ÂÜôÈÄíÂΩíÁöÑÊó∂ÂÄôÂç¥Ê≤°ÊúâÂÖ®Êñπ‰ΩçÁöÑÊµãËØïÂÆÉ„ÄÇÊàë‰ª¨Êù•ÁúãÁúã‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö 1234function foo() &#123; foo();&#125;foo(); ÂΩìÊàë‰ª¨ÁöÑÂºïÊìéÂºÄÂßãÊâßË°åËøôÊÆµ‰ª£Á†ÅÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ªé foo ÂáΩÊï∞ÂºÄÂßã„ÄÇÁÑ∂ÂêéËøôÊòØ‰∏™ÈÄíÂΩíÁöÑÂáΩÊï∞ÔºåÂπ∂‰∏îÂú®Ê≤°Êúâ‰ªª‰ΩïÁöÑÁªàÊ≠¢Êù°‰ª∂ÁöÑÊÉÖÂÜµ‰∏ãÂºÄÂßãË∞ÉÁî®Ëá™Â∑±„ÄÇÂõ†Ê≠§ÔºåÊØèÊâßË°å‰∏ÄÊ≠•ÔºåÂ∞±‰ºöÊääËøô‰∏™Áõ∏ÂêåÁöÑÂáΩÊï∞‰∏ÄÊ¨°Âèà‰∏ÄÊ¨°Âú∞Ê∑ªÂä†Âà∞Ë∞ÉÁî®Â†ÜÊ†à‰∏≠„ÄÇÁÑ∂ÂêéÂÆÉÁúãËµ∑Êù•Â∞±ÂÉèÊòØËøôÊ†∑ÁöÑÔºö Âπ∂Âèë‰∏é‰∫ã‰ª∂Âæ™ÁéØÁî±‰∫éjavascriptÊòØÂçïÁ∫øÁ®ãËøêË°åÔºåÂè™Êúâ‰∏Ä‰∏™Ë∞ÉÁî®Â†ÜÊ†àÔºåÂΩìÊüê‰∏™ÂáΩÊï∞Âç†Áî®Â§ßÈáèÁöÑÊó∂Èó¥Êó∂ÔºåÊµèËßàÂô®Â∞±‰∏çËÉΩÂÅö‰ªª‰ΩïÂÖ∂‰ªñ‰∫ãÊÉÖÔºåÂÆÉ‰ºöË¢´Â†µÂ°û„ÄÇËøôÊÑèÂë≥ÁùÄÊµèËßàÂô®‰∏çËÉΩÊ∏≤ÊüìÔºå‰∏çËÉΩËøêË°åÂÖ∂‰ªñÁöÑ‰ª£Á†ÅÔºåÂÆÉË¢´Âç°‰Ωè‰∫Ü„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥Âú®Â∫îÁî®ÈáåËÆ© UI ÂæàÊµÅÁïÖÁöÑËØùÔºåËøôÂ∞±‰ºö‰∫ßÁîüÈóÆÈ¢ò„ÄÇÂ¶Ç‰ΩïÂú®‰∏çÈòªÂ°û UI ÁöÑÊÉÖÂÜµ‰∏ãÊâßË°åÂ§çÊùÇÁöÑ‰ª£Á†ÅÔºåËÆ©ÊµèËßàÂô®‰∏ç‰ºö‰∏çÂìçÂ∫î?Ëß£ÂÜ≥ÊñπÊ°àÂ∞±ÊòØÂºÇÊ≠•ÂõûË∞É„ÄÇ ‰∏ãÁØáÊñáÁ´†[ÂºÇÊ≠•ÂõûË∞É](.&#x2F;jsÂü∫Á°Ä-2 ÂºÇÊ≠•ÂõûË∞É.md)","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"Ëß£ÂÜ≥ÂâçÁ´ØË∑®ÂüüÁöÑÊñπÊ≥ï","slug":"ÂâçÁ´ØÂøÖÂ§á-Ëß£ÂÜ≥Ë∑®ÂüüÁöÑÊñπÊ≥ï","date":"2019-02-15T16:00:00.000Z","updated":"2024-10-16T04:06:44.986Z","comments":true,"path":"2019/02/16/ÂâçÁ´ØÂøÖÂ§á-Ëß£ÂÜ≥Ë∑®ÂüüÁöÑÊñπÊ≥ï/","permalink":"https://justsso1.github.io/2019/02/16/%E5%89%8D%E7%AB%AF%E5%BF%85%E5%A4%87-%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E7%9A%84%E6%96%B9%E6%B3%95/","excerpt":"","text":"Ëß£ÂÜ≥ÂâçÁ´ØË∑®ÂüüÁöÑÊñπÊ≥ï jsonp corsÔºåÈúÄË¶ÅÂêéÁ´ØÈÖçÂêà ÊúçÂä°Âô®‰ª£ÁêÜ nginxÂèçÂêë‰ª£ÁêÜ devServer ÂâçË®ÄÂâçÂêéÁ´ØÊï∞ÊçÆ‰∫§‰∫íÁªèÂ∏∏‰ºöÁ¢∞Âà∞ËØ∑Ê±ÇË∑®ÂüüÔºå‰ªÄ‰πàÊòØË∑®ÂüüÔºå‰ª•ÂèäÊúâÂì™Âá†ÁßçË∑®ÂüüÊñπÂºèÔºåËøôÊòØÊú¨ÊñáË¶ÅÊé¢ËÆ®ÁöÑÂÜÖÂÆπ„ÄÇ ‰∏Ä„ÄÅ‰ªÄ‰πàÊòØË∑®ÂüüÔºü1.‰ªÄ‰πàÊòØÂêåÊ∫êÁ≠ñÁï•ÂèäÂÖ∂ÈôêÂà∂ÂÜÖÂÆπÔºüÂêåÊ∫êÁ≠ñÁï•ÊòØ‰∏ÄÁßçÁ∫¶ÂÆöÔºåÂÆÉÊòØÊµèËßàÂô®ÊúÄÊ†∏ÂøÉ‰πüÊúÄÂü∫Êú¨ÁöÑÂÆâÂÖ®ÂäüËÉΩÔºåÂ¶ÇÊûúÁº∫Â∞ë‰∫ÜÂêåÊ∫êÁ≠ñÁï•ÔºåÊµèËßàÂô®ÂæàÂÆπÊòìÂèóÂà∞XSS„ÄÅCSRFÁ≠âÊîªÂáª„ÄÇÊâÄË∞ìÂêåÊ∫êÊòØÊåá‚ÄùÂçèËÆÆ+ÂüüÂêç+Á´ØÂè£‚Äù‰∏âËÄÖÁõ∏ÂêåÔºåÂç≥‰æø‰∏§‰∏™‰∏çÂêåÁöÑÂüüÂêçÊåáÂêëÂêå‰∏Ä‰∏™ipÂú∞ÂùÄÔºå‰πüÈùûÂêåÊ∫ê„ÄÇ ÂêåÊ∫êÁ≠ñÁï•ÈôêÂà∂ÂÜÖÂÆπÊúâÔºö Cookie„ÄÅLocalStorage„ÄÅIndexedDB Á≠âÂ≠òÂÇ®ÊÄßÂÜÖÂÆπ DOM ËäÇÁÇπ AJAX ËØ∑Ê±ÇÂèëÈÄÅÂêéÔºåÁªìÊûúË¢´ÊµèËßàÂô®Êã¶Êà™‰∫Ü ‰ΩÜÊòØÊúâ‰∏â‰∏™Ê†áÁ≠æÊòØÂÖÅËÆ∏Ë∑®ÂüüÂä†ËΩΩËµÑÊ∫êÔºö &lt;img src=XXX&gt; &lt;link href=XXX&gt; &lt;script src=XXX&gt; 2.Â∏∏ËßÅË∑®ÂüüÂú∫ÊôØÂΩìÂçèËÆÆ„ÄÅÂ≠êÂüüÂêç„ÄÅ‰∏ªÂüüÂêç„ÄÅÁ´ØÂè£Âè∑‰∏≠‰ªªÊÑè‰∏Ä‰∏™‰∏çÁõ∏ÂêåÊó∂ÔºåÈÉΩÁÆó‰Ωú‰∏çÂêåÂüü„ÄÇ‰∏çÂêåÂüü‰πãÈó¥Áõ∏‰∫íËØ∑Ê±ÇËµÑÊ∫êÔºåÂ∞±ÁÆó‰Ωú‚ÄúË∑®Âüü‚Äù„ÄÇÂ∏∏ËßÅË∑®ÂüüÂú∫ÊôØÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºöÁâπÂà´ËØ¥Êòé‰∏§ÁÇπÔºö Á¨¨‰∏ÄÔºöÂ¶ÇÊûúÊòØÂçèËÆÆÂíåÁ´ØÂè£ÈÄ†ÊàêÁöÑË∑®ÂüüÈóÆÈ¢ò‚ÄúÂâçÂè∞‚ÄùÊòØÊó†ËÉΩ‰∏∫ÂäõÁöÑ„ÄÇ Á¨¨‰∫åÔºöÂú®Ë∑®ÂüüÈóÆÈ¢ò‰∏äÔºå‰ªÖ‰ªÖÊòØÈÄöËøá‚ÄúURLÁöÑÈ¶ñÈÉ®‚ÄùÊù•ËØÜÂà´ËÄå‰∏ç‰ºöÊ†πÊçÆÂüüÂêçÂØπÂ∫îÁöÑIPÂú∞ÂùÄÊòØÂê¶Áõ∏ÂêåÊù•Âà§Êñ≠„ÄÇ‚ÄúURLÁöÑÈ¶ñÈÉ®‚ÄùÂèØ‰ª•ÁêÜËß£‰∏∫‚ÄúÂçèËÆÆ, ÂüüÂêçÂíåÁ´ØÂè£ÂøÖÈ°ªÂåπÈÖç‚Äù„ÄÇ ËøôÈáå‰Ω†ÊàñËÆ∏Êúâ‰∏™ÁñëÈóÆÔºöËØ∑Ê±ÇË∑®Âüü‰∫ÜÔºåÈÇ£‰πàËØ∑Ê±ÇÂà∞Â∫ïÂèëÂá∫ÂéªÊ≤°ÊúâÔºü Ë∑®ÂüüÂπ∂‰∏çÊòØËØ∑Ê±ÇÂèë‰∏çÂá∫ÂéªÔºåËØ∑Ê±ÇËÉΩÂèëÂá∫ÂéªÔºåÊúçÂä°Á´ØËÉΩÊî∂Âà∞ËØ∑Ê±ÇÂπ∂Ê≠£Â∏∏ËøîÂõûÁªìÊûúÔºåÂè™ÊòØÁªìÊûúË¢´ÊµèËßàÂô®Êã¶Êà™‰∫Ü„ÄÇ‰Ω†ÂèØËÉΩ‰ºöÁñëÈóÆÊòéÊòéÈÄöËøáË°®ÂçïÁöÑÊñπÂºèÂèØ‰ª•ÂèëËµ∑Ë∑®ÂüüËØ∑Ê±ÇÔºå‰∏∫‰ªÄ‰πà Ajax Â∞±‰∏ç‰ºö?Âõ†‰∏∫ÂΩíÊ†πÁªìÂ∫ïÔºåË∑®ÂüüÊòØ‰∏∫‰∫ÜÈòªÊ≠¢Áî®Êà∑ËØªÂèñÂà∞Âè¶‰∏Ä‰∏™ÂüüÂêç‰∏ãÁöÑÂÜÖÂÆπÔºåAjax ÂèØ‰ª•Ëé∑ÂèñÂìçÂ∫îÔºåÊµèËßàÂô®ËÆ§‰∏∫Ëøô‰∏çÂÆâÂÖ®ÔºåÊâÄ‰ª•Êã¶Êà™‰∫ÜÂìçÂ∫î„ÄÇ‰ΩÜÊòØË°®ÂçïÂπ∂‰∏ç‰ºöËé∑ÂèñÊñ∞ÁöÑÂÜÖÂÆπÔºåÊâÄ‰ª•ÂèØ‰ª•ÂèëËµ∑Ë∑®ÂüüËØ∑Ê±Ç„ÄÇÂêåÊó∂‰πüËØ¥Êòé‰∫ÜË∑®ÂüüÂπ∂‰∏çËÉΩÂÆåÂÖ®ÈòªÊ≠¢ CSRFÔºåÂõ†‰∏∫ËØ∑Ê±ÇÊØïÁ´üÊòØÂèëÂá∫Âéª‰∫Ü„ÄÇ ‰∫å„ÄÅË∑®ÂüüËß£ÂÜ≥ÊñπÊ°à1.jsonp1) JSONPÂéüÁêÜÂà©Áî® &lt;script&gt; Ê†áÁ≠æÊ≤°ÊúâË∑®ÂüüÈôêÂà∂ÁöÑÊºèÊ¥ûÔºåÁΩëÈ°µÂèØ‰ª•ÂæóÂà∞‰ªéÂÖ∂‰ªñÊù•Ê∫êÂä®ÊÄÅ‰∫ßÁîüÁöÑ JSON Êï∞ÊçÆ„ÄÇJSONPËØ∑Ê±Ç‰∏ÄÂÆöÈúÄË¶ÅÂØπÊñπÁöÑÊúçÂä°Âô®ÂÅöÊîØÊåÅÊâçÂèØ‰ª•„ÄÇ 2) JSONPÂíåAJAXÂØπÊØîJSONPÂíåAJAXÁõ∏ÂêåÔºåÈÉΩÊòØÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Âô®Á´ØÂèëÈÄÅËØ∑Ê±ÇÔºå‰ªéÊúçÂä°Âô®Á´ØËé∑ÂèñÊï∞ÊçÆÁöÑÊñπÂºè„ÄÇ‰ΩÜAJAXÂ±û‰∫éÂêåÊ∫êÁ≠ñÁï•ÔºåJSONPÂ±û‰∫éÈùûÂêåÊ∫êÁ≠ñÁï•ÔºàË∑®ÂüüËØ∑Ê±ÇÔºâ 3) JSONP‰ºòÁº∫ÁÇπJSONP‰ºòÁÇπÊòØÁÆÄÂçïÂÖºÂÆπÊÄßÂ•ΩÔºåÂèØÁî®‰∫éËß£ÂÜ≥‰∏ªÊµÅÊµèËßàÂô®ÁöÑË∑®ÂüüÊï∞ÊçÆËÆøÈóÆÁöÑÈóÆÈ¢ò„ÄÇÁº∫ÁÇπÊòØ‰ªÖÊîØÊåÅgetÊñπÊ≥ïÂÖ∑ÊúâÂ±ÄÈôêÊÄß,‰∏çÂÆâÂÖ®ÂèØËÉΩ‰ºöÈÅ≠ÂèóXSSÊîªÂáª„ÄÇ 4) JSONPÁöÑÂÆûÁé∞ÊµÅÁ®ã Â£∞Êòé‰∏Ä‰∏™ÂõûË∞ÉÂáΩÊï∞ÔºåÂÖ∂ÂáΩÊï∞Âêç(Â¶Çshow)ÂΩìÂÅöÂèÇÊï∞ÂÄºÔºåË¶Å‰º†ÈÄíÁªôË∑®ÂüüËØ∑Ê±ÇÊï∞ÊçÆÁöÑÊúçÂä°Âô®ÔºåÂáΩÊï∞ÂΩ¢ÂèÇ‰∏∫Ë¶ÅËé∑ÂèñÁõÆÊ†áÊï∞ÊçÆ(ÊúçÂä°Âô®ËøîÂõûÁöÑdata)„ÄÇ ÂàõÂª∫‰∏Ä‰∏™&lt;script&gt;Ê†áÁ≠æÔºåÊääÈÇ£‰∏™Ë∑®ÂüüÁöÑAPIÊï∞ÊçÆÊé•Âè£Âú∞ÂùÄÔºåËµãÂÄºÁªôscriptÁöÑsrc,ËøòË¶ÅÂú®Ëøô‰∏™Âú∞ÂùÄ‰∏≠ÂêëÊúçÂä°Âô®‰º†ÈÄíËØ•ÂáΩÊï∞ÂêçÔºàÂèØ‰ª•ÈÄöËøáÈóÆÂè∑‰º†ÂèÇ:?callback&#x3D;showÔºâ„ÄÇ ÊúçÂä°Âô®Êé•Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÈúÄË¶ÅËøõË°åÁâπÊÆäÁöÑÂ§ÑÁêÜÔºöÊää‰º†ÈÄíËøõÊù•ÁöÑÂáΩÊï∞ÂêçÂíåÂÆÉÈúÄË¶ÅÁªô‰Ω†ÁöÑÊï∞ÊçÆÊãºÊé•Êàê‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤,‰æãÂ¶ÇÔºö‰º†ÈÄíËøõÂéªÁöÑÂáΩÊï∞ÂêçÊòØshowÔºåÂÆÉÂáÜÂ§áÂ•ΩÁöÑÊï∞ÊçÆÊòØshow(&#39;Êàë‰∏çÁà±‰Ω†&#39;)„ÄÇ ÊúÄÂêéÊúçÂä°Âô®ÊääÂáÜÂ§áÁöÑÊï∞ÊçÆÈÄöËøáHTTPÂçèËÆÆËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºåÂÆ¢Êà∑Á´ØÂÜçË∞ÉÁî®ÊâßË°å‰πãÂâçÂ£∞ÊòéÁöÑÂõûË∞ÉÂáΩÊï∞ÔºàshowÔºâÔºåÂØπËøîÂõûÁöÑÊï∞ÊçÆËøõË°åÊìç‰Ωú„ÄÇ Âú®ÂºÄÂèë‰∏≠ÂèØËÉΩ‰ºöÈÅáÂà∞Â§ö‰∏™ JSONP ËØ∑Ê±ÇÁöÑÂõûË∞ÉÂáΩÊï∞ÂêçÊòØÁõ∏ÂêåÁöÑÔºåËøôÊó∂ÂÄôÂ∞±ÈúÄË¶ÅËá™Â∑±Â∞ÅË£Ö‰∏Ä‰∏™ JSONPÂáΩÊï∞„ÄÇ 123456789101112131415161718192021222324// index.htmlfunction jsonp(&#123; url, params, callback &#125;) &#123; return new Promise((resolve, reject) =&gt; &#123; let script = document.createElement(&#x27;script&#x27;) window[callback] = function(data) &#123; resolve(data) document.body.removeChild(script) &#125; params = &#123; ...params, callback &#125; // wd=b&amp;callback=show let arrs = [] for (let key in params) &#123; arrs.push(`$&#123;key&#125;=$&#123;params[key]&#125;`) &#125; script.src = `$&#123;url&#125;?$&#123;arrs.join(&#x27;&amp;&#x27;)&#125;` document.body.appendChild(script) &#125;)&#125;jsonp(&#123; url: &#x27;http://localhost:3000/say&#x27;, params: &#123; wd: &#x27;Iloveyou&#x27; &#125;, callback: &#x27;show&#x27;&#125;).then(data =&gt; &#123; console.log(data)&#125;) ‰∏äÈù¢ËøôÊÆµ‰ª£Á†ÅÁõ∏ÂΩì‰∫éÂêëhttp://localhost:3000/say?wd=Iloveyou&amp;callback=showËøô‰∏™Âú∞ÂùÄËØ∑Ê±ÇÊï∞ÊçÆÔºåÁÑ∂ÂêéÂêéÂè∞ËøîÂõûshow(&#39;Êàë‰∏çÁà±‰Ω†&#39;)ÔºåÊúÄÂêé‰ºöËøêË°åshow()Ëøô‰∏™ÂáΩÊï∞ÔºåÊâìÂç∞Âá∫‚ÄôÊàë‰∏çÁà±‰Ω†‚Äô 12345678910// server.jslet express = require(&#x27;express&#x27;)let app = express()app.get(&#x27;/say&#x27;, function(req, res) &#123; let &#123; wd, callback &#125; = req.query console.log(wd) // Iloveyou console.log(callback) // show res.end(`$&#123;callback&#125;(&#x27;Êàë‰∏çÁà±‰Ω†&#x27;)`)&#125;)app.listen(3000) 5) jQueryÁöÑjsonpÂΩ¢ÂºèJSONPÈÉΩÊòØGETÂíåÂºÇÊ≠•ËØ∑Ê±ÇÁöÑÔºå‰∏çÂ≠òÂú®ÂÖ∂‰ªñÁöÑËØ∑Ê±ÇÊñπÂºèÂíåÂêåÊ≠•ËØ∑Ê±ÇÔºå‰∏îjQueryÈªòËÆ§Â∞±‰ºöÁªôJSONPÁöÑËØ∑Ê±ÇÊ∏ÖÈô§ÁºìÂ≠ò„ÄÇ 123456789$.ajax(&#123;url:&quot;http://crossdomain.com/jsonServerResponse&quot;,dataType:&quot;jsonp&quot;,type:&quot;get&quot;,//ÂèØ‰ª•ÁúÅÁï•jsonpCallback:&quot;show&quot;,//-&gt;Ëá™ÂÆö‰πâ‰º†ÈÄíÁªôÊúçÂä°Âô®ÁöÑÂáΩÊï∞ÂêçÔºåËÄå‰∏çÊòØ‰ΩøÁî®jQueryËá™Âä®ÁîüÊàêÁöÑÔºåÂèØÁúÅÁï•jsonp:&quot;callback&quot;,//-&gt;Êää‰º†ÈÄíÂáΩÊï∞ÂêçÁöÑÈÇ£‰∏™ÂΩ¢ÂèÇcallbackÔºåÂèØÁúÅÁï•success:function (data)&#123;console.log(data);&#125;&#125;); 2.corsCORS ÈúÄË¶ÅÊµèËßàÂô®ÂíåÂêéÁ´ØÂêåÊó∂ÊîØÊåÅ„ÄÇIE 8 Âíå 9 ÈúÄË¶ÅÈÄöËøá XDomainRequest Êù•ÂÆûÁé∞„ÄÇ ÊµèËßàÂô®‰ºöËá™Âä®ËøõË°å CORS ÈÄö‰ø°ÔºåÂÆûÁé∞ CORS ÈÄö‰ø°ÁöÑÂÖ≥ÈîÆÊòØÂêéÁ´Ø„ÄÇÂè™Ë¶ÅÂêéÁ´ØÂÆûÁé∞‰∫Ü CORSÔºåÂ∞±ÂÆûÁé∞‰∫ÜË∑®Âüü„ÄÇ ÊúçÂä°Á´ØËÆæÁΩÆ Access-Control-Allow-Origin Â∞±ÂèØ‰ª•ÂºÄÂêØ CORS„ÄÇ ËØ•Â±ûÊÄßË°®Á§∫Âì™‰∫õÂüüÂêçÂèØ‰ª•ËÆøÈóÆËµÑÊ∫êÔºåÂ¶ÇÊûúËÆæÁΩÆÈÄöÈÖçÁ¨¶ÂàôË°®Á§∫ÊâÄÊúâÁΩëÁ´ôÈÉΩÂèØ‰ª•ËÆøÈóÆËµÑÊ∫ê„ÄÇ ËôΩÁÑ∂ËÆæÁΩÆ CORS ÂíåÂâçÁ´ØÊ≤°‰ªÄ‰πàÂÖ≥Á≥ªÔºå‰ΩÜÊòØÈÄöËøáËøôÁßçÊñπÂºèËß£ÂÜ≥Ë∑®ÂüüÈóÆÈ¢òÁöÑËØùÔºå‰ºöÂú®ÂèëÈÄÅËØ∑Ê±ÇÊó∂Âá∫Áé∞‰∏§ÁßçÊÉÖÂÜµÔºåÂàÜÂà´‰∏∫ÁÆÄÂçïËØ∑Ê±ÇÂíåÂ§çÊùÇËØ∑Ê±Ç„ÄÇ 1) ÁÆÄÂçïËØ∑Ê±ÇÂè™Ë¶ÅÂêåÊó∂Êª°Ë∂≥‰ª•‰∏ã‰∏§Â§ßÊù°‰ª∂ÔºåÂ∞±Â±û‰∫éÁÆÄÂçïËØ∑Ê±Ç Êù°‰ª∂1Ôºö‰ΩøÁî®‰∏ãÂàóÊñπÊ≥ï‰πã‰∏ÄÔºö GET HEAD POST Êù°‰ª∂2ÔºöContent-Type ÁöÑÂÄº‰ªÖÈôê‰∫é‰∏ãÂàó‰∏âËÄÖ‰πã‰∏ÄÔºö text&#x2F;plain multipart&#x2F;form-data application&#x2F;x-www-form-urlencoded ËØ∑Ê±Ç‰∏≠ÁöÑ‰ªªÊÑè XMLHttpRequestUpload ÂØπË±°ÂùáÊ≤°ÊúâÊ≥®ÂÜå‰ªª‰Ωï‰∫ã‰ª∂ÁõëÂê¨Âô®Ôºõ XMLHttpRequestUpload ÂØπË±°ÂèØ‰ª•‰ΩøÁî® XMLHttpRequest.upload Â±ûÊÄßËÆøÈóÆ„ÄÇ 2) Â§çÊùÇËØ∑Ê±Ç‰∏çÁ¨¶Âêà‰ª•‰∏äÊù°‰ª∂ÁöÑËØ∑Ê±ÇÂ∞±ËÇØÂÆöÊòØÂ§çÊùÇËØ∑Ê±Ç‰∫Ü„ÄÇÂ§çÊùÇËØ∑Ê±ÇÁöÑCORSËØ∑Ê±ÇÔºå‰ºöÂú®Ê≠£ÂºèÈÄö‰ø°‰πãÂâçÔºåÂ¢ûÂä†‰∏ÄÊ¨°HTTPÊü•ËØ¢ËØ∑Ê±ÇÔºåÁß∞‰∏∫‚ÄùÈ¢ÑÊ£Ä‚ÄùËØ∑Ê±Ç,ËØ•ËØ∑Ê±ÇÊòØ option ÊñπÊ≥ïÁöÑÔºåÈÄöËøáËØ•ËØ∑Ê±ÇÊù•Áü•ÈÅìÊúçÂä°Á´ØÊòØÂê¶ÂÖÅËÆ∏Ë∑®ÂüüËØ∑Ê±Ç„ÄÇ Êàë‰ª¨Áî®PUTÂêëÂêéÂè∞ËØ∑Ê±ÇÊó∂ÔºåÂ±û‰∫éÂ§çÊùÇËØ∑Ê±ÇÔºåÂêéÂè∞ÈúÄÂÅöÂ¶Ç‰∏ãÈÖçÁΩÆÔºö 12345678910111213// ÂÖÅËÆ∏Âì™‰∏™ÊñπÊ≥ïËÆøÈóÆÊàëres.setHeader(&#x27;Access-Control-Allow-Methods&#x27;, &#x27;PUT&#x27;)// È¢ÑÊ£ÄÁöÑÂ≠òÊ¥ªÊó∂Èó¥res.setHeader(&#x27;Access-Control-Max-Age&#x27;, 6)// OPTIONSËØ∑Ê±Ç‰∏çÂÅö‰ªª‰ΩïÂ§ÑÁêÜif (req.method === &#x27;OPTIONS&#x27;) &#123; res.end() &#125;// ÂÆö‰πâÂêéÂè∞ËøîÂõûÁöÑÂÜÖÂÆπapp.put(&#x27;/getData&#x27;, function(req, res) &#123; console.log(req.headers) res.end(&#x27;Êàë‰∏çÁà±‰Ω†&#x27;)&#125;) Êé•‰∏ãÊù•Êàë‰ª¨Áúã‰∏ã‰∏Ä‰∏™ÂÆåÊï¥Â§çÊùÇËØ∑Ê±ÇÁöÑ‰æãÂ≠êÔºåÂπ∂‰∏î‰ªãÁªç‰∏ãCORSËØ∑Ê±ÇÁõ∏ÂÖ≥ÁöÑÂ≠óÊÆµ 12345678910111213141516// index.htmllet xhr = new XMLHttpRequest()document.cookie = &#x27;name=xiamen&#x27; // cookie‰∏çËÉΩË∑®Âüüxhr.withCredentials = true // ÂâçÁ´ØËÆæÁΩÆÊòØÂê¶Â∏¶cookiexhr.open(&#x27;PUT&#x27;, &#x27;http://localhost:4000/getData&#x27;, true)xhr.setRequestHeader(&#x27;name&#x27;, &#x27;xiamen&#x27;)xhr.onreadystatechange = function() &#123; if (xhr.readyState === 4) &#123; if ((xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) || xhr.status === 304) &#123; console.log(xhr.response) //ÂæóÂà∞ÂìçÂ∫îÂ§¥ÔºåÂêéÂè∞ÈúÄËÆæÁΩÆAccess-Control-Expose-Headers console.log(xhr.getResponseHeader(&#x27;name&#x27;)) &#125; &#125;&#125;xhr.send() 12345//server1.jslet express = require(&#x27;express&#x27;);let app = express();app.use(express.static(__dirname));app.listen(3000); 123456789101112131415161718192021222324252627282930313233343536//server2.jslet express = require(&#x27;express&#x27;)let app = express()let whitList = [&#x27;http://localhost:3000&#x27;] //ËÆæÁΩÆÁôΩÂêçÂçïapp.use(function(req, res, next) &#123; let origin = req.headers.origin if (whitList.includes(origin)) &#123; // ËÆæÁΩÆÂì™‰∏™Ê∫êÂèØ‰ª•ËÆøÈóÆÊàë res.setHeader(&#x27;Access-Control-Allow-Origin&#x27;, origin) // ÂÖÅËÆ∏Êê∫Â∏¶Âì™‰∏™Â§¥ËÆøÈóÆÊàë res.setHeader(&#x27;Access-Control-Allow-Headers&#x27;, &#x27;name&#x27;) // ÂÖÅËÆ∏Âì™‰∏™ÊñπÊ≥ïËÆøÈóÆÊàë res.setHeader(&#x27;Access-Control-Allow-Methods&#x27;, &#x27;PUT&#x27;) // ÂÖÅËÆ∏Êê∫Â∏¶cookie res.setHeader(&#x27;Access-Control-Allow-Credentials&#x27;, true) // È¢ÑÊ£ÄÁöÑÂ≠òÊ¥ªÊó∂Èó¥ res.setHeader(&#x27;Access-Control-Max-Age&#x27;, 6) // ÂÖÅËÆ∏ËøîÂõûÁöÑÂ§¥ res.setHeader(&#x27;Access-Control-Expose-Headers&#x27;, &#x27;name&#x27;) if (req.method === &#x27;OPTIONS&#x27;) &#123; res.end() // OPTIONSËØ∑Ê±Ç‰∏çÂÅö‰ªª‰ΩïÂ§ÑÁêÜ &#125; &#125; next()&#125;)app.put(&#x27;/getData&#x27;, function(req, res) &#123; console.log(req.headers) res.setHeader(&#x27;name&#x27;, &#x27;jw&#x27;) //ËøîÂõû‰∏Ä‰∏™ÂìçÂ∫îÂ§¥ÔºåÂêéÂè∞ÈúÄËÆæÁΩÆ res.end(&#x27;Êàë‰∏çÁà±‰Ω†&#x27;)&#125;)app.get(&#x27;/getData&#x27;, function(req, res) &#123; console.log(req.headers) res.end(&#x27;Êàë‰∏çÁà±‰Ω†&#x27;)&#125;)app.use(express.static(__dirname))app.listen(4000) ‰∏äËø∞‰ª£Á†ÅÁî±http://localhost:3000/index.htmlÂêëhttp://localhost:4000/Ë∑®ÂüüËØ∑Ê±ÇÔºåÊ≠£Â¶ÇÊàë‰ª¨‰∏äÈù¢ÊâÄËØ¥ÁöÑÔºåÂêéÁ´ØÊòØÂÆûÁé∞ CORS ÈÄö‰ø°ÁöÑÂÖ≥ÈîÆ„ÄÇ 3.postMessagepostMessageÊòØHTML5 XMLHttpRequest Level 2‰∏≠ÁöÑAPIÔºå‰∏îÊòØ‰∏∫Êï∞‰∏çÂ§öÂèØ‰ª•Ë∑®ÂüüÊìç‰ΩúÁöÑwindowÂ±ûÊÄß‰πã‰∏ÄÔºåÂÆÉÂèØÁî®‰∫éËß£ÂÜ≥‰ª•‰∏ãÊñπÈù¢ÁöÑÈóÆÈ¢òÔºö È°µÈù¢ÂíåÂÖ∂ÊâìÂºÄÁöÑÊñ∞Á™óÂè£ÁöÑÊï∞ÊçÆ‰º†ÈÄí Â§öÁ™óÂè£‰πãÈó¥Ê∂àÊÅØ‰º†ÈÄí È°µÈù¢‰∏éÂµåÂ•óÁöÑiframeÊ∂àÊÅØ‰º†ÈÄí ‰∏äÈù¢‰∏â‰∏™Âú∫ÊôØÁöÑË∑®ÂüüÊï∞ÊçÆ‰º†ÈÄí postMessage()ÊñπÊ≥ïÂÖÅËÆ∏Êù•Ëá™‰∏çÂêåÊ∫êÁöÑËÑöÊú¨ÈááÁî®ÂºÇÊ≠•ÊñπÂºèËøõË°åÊúâÈôêÁöÑÈÄö‰ø°ÔºåÂèØ‰ª•ÂÆûÁé∞Ë∑®ÊñáÊú¨Ê°£„ÄÅÂ§öÁ™óÂè£„ÄÅË∑®ÂüüÊ∂àÊÅØ‰º†ÈÄí„ÄÇ otherWindow.postMessage(message, targetOrigin, [transfer]); message: Â∞ÜË¶ÅÂèëÈÄÅÂà∞ÂÖ∂‰ªñ windowÁöÑÊï∞ÊçÆ„ÄÇ targetOrigin:ÈÄöËøáÁ™óÂè£ÁöÑoriginÂ±ûÊÄßÊù•ÊåáÂÆöÂì™‰∫õÁ™óÂè£ËÉΩÊé•Êî∂Âà∞Ê∂àÊÅØ‰∫ã‰ª∂ÔºåÂÖ∂ÂÄºÂèØ‰ª•ÊòØÂ≠óÁ¨¶‰∏≤‚Äù*‚ÄùÔºàË°®Á§∫Êó†ÈôêÂà∂ÔºâÊàñËÄÖ‰∏Ä‰∏™URI„ÄÇÂú®ÂèëÈÄÅÊ∂àÊÅØÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÁõÆÊ†áÁ™óÂè£ÁöÑÂçèËÆÆ„ÄÅ‰∏ªÊú∫Âú∞ÂùÄÊàñÁ´ØÂè£Ëøô‰∏âËÄÖÁöÑ‰ªªÊÑè‰∏ÄÈ°π‰∏çÂåπÈÖçtargetOriginÊèê‰æõÁöÑÂÄºÔºåÈÇ£‰πàÊ∂àÊÅØÂ∞±‰∏ç‰ºöË¢´ÂèëÈÄÅÔºõÂè™Êúâ‰∏âËÄÖÂÆåÂÖ®ÂåπÈÖçÔºåÊ∂àÊÅØÊâç‰ºöË¢´ÂèëÈÄÅ„ÄÇ transfer(ÂèØÈÄâ)ÔºöÊòØ‰∏Ä‰∏≤Âíåmessage ÂêåÊó∂‰º†ÈÄíÁöÑ Transferable ÂØπË±°. Ëøô‰∫õÂØπË±°ÁöÑÊâÄÊúâÊùÉÂ∞ÜË¢´ËΩ¨ÁßªÁªôÊ∂àÊÅØÁöÑÊé•Êî∂ÊñπÔºåËÄåÂèëÈÄÅ‰∏ÄÊñπÂ∞Ü‰∏çÂÜç‰øùÊúâÊâÄÊúâÊùÉ„ÄÇ Êé•‰∏ãÊù•Êàë‰ª¨Áúã‰∏™‰æãÂ≠êÔºö http://localhost:3000/a.htmlÈ°µÈù¢Âêëhttp://localhost:4000/b.html‰º†ÈÄí‚ÄúÊàëÁà±‰Ω†‚Äù,ÁÑ∂ÂêéÂêéËÄÖ‰º†Âõû‚ÄùÊàë‰∏çÁà±‰Ω†‚Äù„ÄÇ 123456789101112// a.html &lt;iframe src=&quot;http://localhost:4000/b.html&quot; frameborder=&quot;0&quot; id=&quot;frame&quot; onload=&quot;load()&quot;&gt;&lt;/iframe&gt; //Á≠âÂÆÉÂä†ËΩΩÂÆåËß¶Âèë‰∏Ä‰∏™‰∫ã‰ª∂ //ÂÜÖÂµåÂú®http://localhost:3000/a.html &lt;script&gt; function load() &#123; let frame = document.getElementById(&#x27;frame&#x27;) frame.contentWindow.postMessage(&#x27;ÊàëÁà±‰Ω†&#x27;, &#x27;http://localhost:4000&#x27;) //ÂèëÈÄÅÊï∞ÊçÆ window.onmessage = function(e) &#123; //Êé•ÂèóËøîÂõûÊï∞ÊçÆ console.log(e.data) //Êàë‰∏çÁà±‰Ω† &#125; &#125; &lt;/script&gt; 12345// b.html window.onmessage = function(e) &#123; console.log(e.data) //ÊàëÁà±‰Ω† e.source.postMessage(&#x27;Êàë‰∏çÁà±‰Ω†&#x27;, e.origin) &#125; 4.websocketWebsocketÊòØHTML5ÁöÑ‰∏Ä‰∏™ÊåÅ‰πÖÂåñÁöÑÂçèËÆÆÔºåÂÆÉÂÆûÁé∞‰∫ÜÊµèËßàÂô®‰∏éÊúçÂä°Âô®ÁöÑÂÖ®ÂèåÂ∑•ÈÄö‰ø°ÔºåÂêåÊó∂‰πüÊòØË∑®ÂüüÁöÑ‰∏ÄÁßçËß£ÂÜ≥ÊñπÊ°à„ÄÇWebSocketÂíåHTTPÈÉΩÊòØÂ∫îÁî®Â±ÇÂçèËÆÆÔºåÈÉΩÂü∫‰∫é TCP ÂçèËÆÆ„ÄÇ‰ΩÜÊòØ WebSocket ÊòØ‰∏ÄÁßçÂèåÂêëÈÄö‰ø°ÂçèËÆÆÔºåÂú®Âª∫Á´ãËøûÊé•‰πãÂêéÔºåWebSocket ÁöÑ server ‰∏é client ÈÉΩËÉΩ‰∏ªÂä®ÂêëÂØπÊñπÂèëÈÄÅÊàñÊé•Êî∂Êï∞ÊçÆ„ÄÇÂêåÊó∂ÔºåWebSocket Âú®Âª∫Á´ãËøûÊé•Êó∂ÈúÄË¶ÅÂÄüÂä© HTTP ÂçèËÆÆÔºåËøûÊé•Âª∫Á´ãÂ•Ω‰∫Ü‰πãÂêé client ‰∏é server ‰πãÈó¥ÁöÑÂèåÂêëÈÄö‰ø°Â∞±‰∏é HTTP Êó†ÂÖ≥‰∫Ü„ÄÇ ÂéüÁîüWebSocket API‰ΩøÁî®Ëµ∑Êù•‰∏çÂ§™Êñπ‰æøÔºåÊàë‰ª¨‰ΩøÁî®Socket.ioÔºåÂÆÉÂæàÂ•ΩÂú∞Â∞ÅË£Ö‰∫ÜwebSocketÊé•Âè£ÔºåÊèê‰æõ‰∫ÜÊõ¥ÁÆÄÂçï„ÄÅÁÅµÊ¥ªÁöÑÊé•Âè£Ôºå‰πüÂØπ‰∏çÊîØÊåÅwebSocketÁöÑÊµèËßàÂô®Êèê‰æõ‰∫ÜÂêë‰∏ãÂÖºÂÆπ„ÄÇ Êàë‰ª¨ÂÖàÊù•Áúã‰∏™‰æãÂ≠êÔºöÊú¨Âú∞Êñá‰ª∂socket.htmlÂêëlocalhost:3000ÂèëÁîüÊï∞ÊçÆÂíåÊé•ÂèóÊï∞ÊçÆ 12345678910// socket.html&lt;script&gt; let socket = new WebSocket(&#x27;ws://localhost:3000&#x27;); socket.onopen = function () &#123; socket.send(&#x27;ÊàëÁà±‰Ω†&#x27;);//ÂêëÊúçÂä°Âô®ÂèëÈÄÅÊï∞ÊçÆ &#125; socket.onmessage = function (e) &#123; console.log(e.data);//Êé•Êî∂ÊúçÂä°Âô®ËøîÂõûÁöÑÊï∞ÊçÆ &#125;&lt;/script&gt; 1234567891011// server.jslet express = require(&#x27;express&#x27;);let app = express();let WebSocket = require(&#x27;ws&#x27;);//ËÆ∞ÂæóÂÆâË£Öwslet wss = new WebSocket.Server(&#123;port:3000&#125;);wss.on(&#x27;connection&#x27;,function(ws) &#123; ws.on(&#x27;message&#x27;, function (data) &#123; console.log(data); ws.send(&#x27;Êàë‰∏çÁà±‰Ω†&#x27;) &#125;);&#125;) 5. Node‰∏≠Èó¥‰ª∂‰ª£ÁêÜ(‰∏§Ê¨°Ë∑®Âüü)ÂÆûÁé∞ÂéüÁêÜÔºöÂêåÊ∫êÁ≠ñÁï•ÊòØÊµèËßàÂô®ÈúÄË¶ÅÈÅµÂæ™ÁöÑÊ†áÂáÜÔºåËÄåÂ¶ÇÊûúÊòØÊúçÂä°Âô®ÂêëÊúçÂä°Âô®ËØ∑Ê±ÇÂ∞±Êó†ÈúÄÈÅµÂæ™ÂêåÊ∫êÁ≠ñÁï•„ÄÇ‰ª£ÁêÜÊúçÂä°Âô®ÔºåÈúÄË¶ÅÂÅö‰ª•‰∏ãÂá†‰∏™Ê≠•È™§Ôºö Êé•ÂèóÂÆ¢Êà∑Á´ØËØ∑Ê±Ç „ÄÇ Â∞ÜËØ∑Ê±Ç ËΩ¨ÂèëÁªôÊúçÂä°Âô®„ÄÇ ÊãøÂà∞ÊúçÂä°Âô® ÂìçÂ∫î Êï∞ÊçÆ„ÄÇ Â∞Ü ÂìçÂ∫î ËΩ¨ÂèëÁªôÂÆ¢Êà∑Á´Ø„ÄÇ Êàë‰ª¨ÂÖàÊù•Áúã‰∏™‰æãÂ≠êÔºöÊú¨Âú∞Êñá‰ª∂index.htmlÊñá‰ª∂ÔºåÈÄöËøá‰ª£ÁêÜÊúçÂä°Âô®http://localhost:3000ÂêëÁõÆÊ†áÊúçÂä°Âô®http://localhost:4000ËØ∑Ê±ÇÊï∞ÊçÆ„ÄÇ 12345678910111213141516// index.html(http://127.0.0.1:5500) &lt;script src=&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $.ajax(&#123; url: &#x27;http://localhost:3000&#x27;, type: &#x27;post&#x27;, data: &#123; name: &#x27;xiamen&#x27;, password: &#x27;123456&#x27; &#125;, contentType: &#x27;application/json;charset=utf-8&#x27;, success: function(result) &#123; console.log(result) // &#123;&quot;title&quot;:&quot;fontend&quot;,&quot;password&quot;:&quot;123456&quot;&#125; &#125;, error: function(msg) &#123; console.log(msg) &#125; &#125;) &lt;/script&gt; 1234567891011121314151617181920212223242526272829303132333435363738// server1.js ‰ª£ÁêÜÊúçÂä°Âô®(http://localhost:3000)const http = require(&#x27;http&#x27;)// Á¨¨‰∏ÄÊ≠•ÔºöÊé•ÂèóÂÆ¢Êà∑Á´ØËØ∑Ê±Çconst server = http.createServer((request, response) =&gt; &#123; // ‰ª£ÁêÜÊúçÂä°Âô®ÔºåÁõ¥Êé•ÂíåÊµèËßàÂô®Áõ¥Êé•‰∫§‰∫íÔºåÈúÄË¶ÅËÆæÁΩÆCORS ÁöÑÈ¶ñÈÉ®Â≠óÊÆµ response.writeHead(200, &#123; &#x27;Access-Control-Allow-Origin&#x27;: &#x27;*&#x27;, &#x27;Access-Control-Allow-Methods&#x27;: &#x27;*&#x27;, &#x27;Access-Control-Allow-Headers&#x27;: &#x27;Content-Type&#x27; &#125;) // Á¨¨‰∫åÊ≠•ÔºöÂ∞ÜËØ∑Ê±ÇËΩ¨ÂèëÁªôÊúçÂä°Âô® const proxyRequest = http .request( &#123; host: &#x27;127.0.0.1&#x27;, port: 4000, url: &#x27;/&#x27;, method: request.method, headers: request.headers &#125;, serverResponse =&gt; &#123; // Á¨¨‰∏âÊ≠•ÔºöÊî∂Âà∞ÊúçÂä°Âô®ÁöÑÂìçÂ∫î var body = &#x27;&#x27; serverResponse.on(&#x27;data&#x27;, chunk =&gt; &#123; body += chunk &#125;) serverResponse.on(&#x27;end&#x27;, () =&gt; &#123; console.log(&#x27;The data is &#x27; + body) // Á¨¨ÂõõÊ≠•ÔºöÂ∞ÜÂìçÂ∫îÁªìÊûúËΩ¨ÂèëÁªôÊµèËßàÂô® response.end(body) &#125;) &#125; ) .end()&#125;)server.listen(3000, () =&gt; &#123; console.log(&#x27;The proxyServer is running at http://localhost:3000&#x27;)&#125;) 1234567891011// server2.js(http://localhost:4000)const http = require(&#x27;http&#x27;)const data = &#123; title: &#x27;fontend&#x27;, password: &#x27;123456&#x27; &#125;const server = http.createServer((request, response) =&gt; &#123; if (request.url === &#x27;/&#x27;) &#123; response.end(JSON.stringify(data)) &#125;&#125;)server.listen(4000, () =&gt; &#123; console.log(&#x27;The server is running at http://localhost:4000&#x27;)&#125;) ‰∏äËø∞‰ª£Á†ÅÁªèËøá‰∏§Ê¨°Ë∑®ÂüüÔºåÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÊµèËßàÂô®Âêë‰ª£ÁêÜÊúçÂä°Âô®ÂèëÈÄÅËØ∑Ê±ÇÔºå‰πüÈÅµÂæ™ÂêåÊ∫êÁ≠ñÁï•ÔºåÊúÄÂêéÂú®index.htmlÊñá‰ª∂ÊâìÂç∞Âá∫&#123;&quot;title&quot;:&quot;fontend&quot;,&quot;password&quot;:&quot;123456&quot;&#125; 6.nginxÂèçÂêë‰ª£ÁêÜÂÆûÁé∞ÂéüÁêÜÁ±ª‰ºº‰∫éNode‰∏≠Èó¥‰ª∂‰ª£ÁêÜÔºåÈúÄË¶Å‰Ω†Êê≠Âª∫‰∏Ä‰∏™‰∏≠ËΩ¨nginxÊúçÂä°Âô®ÔºåÁî®‰∫éËΩ¨ÂèëËØ∑Ê±Ç„ÄÇ ‰ΩøÁî®nginxÂèçÂêë‰ª£ÁêÜÂÆûÁé∞Ë∑®ÂüüÔºåÊòØÊúÄÁÆÄÂçïÁöÑË∑®ÂüüÊñπÂºè„ÄÇÂè™ÈúÄË¶Å‰øÆÊîπnginxÁöÑÈÖçÁΩÆÂç≥ÂèØËß£ÂÜ≥Ë∑®ÂüüÈóÆÈ¢òÔºåÊîØÊåÅÊâÄÊúâÊµèËßàÂô®ÔºåÊîØÊåÅsessionÔºå‰∏çÈúÄË¶Å‰øÆÊîπ‰ªª‰Ωï‰ª£Á†ÅÔºåÂπ∂‰∏î‰∏ç‰ºöÂΩ±ÂìçÊúçÂä°Âô®ÊÄßËÉΩ„ÄÇ ÂÆûÁé∞ÊÄùË∑ØÔºöÈÄöËøánginxÈÖçÁΩÆ‰∏Ä‰∏™‰ª£ÁêÜÊúçÂä°Âô®ÔºàÂüüÂêç‰∏édomain1Áõ∏ÂêåÔºåÁ´ØÂè£‰∏çÂêåÔºâÂÅöË∑≥ÊùøÊú∫ÔºåÂèçÂêë‰ª£ÁêÜËÆøÈóÆdomain2Êé•Âè£ÔºåÂπ∂‰∏îÂèØ‰ª•È°∫‰æø‰øÆÊîπcookie‰∏≠domain‰ø°ÊÅØÔºåÊñπ‰æøÂΩìÂâçÂüücookieÂÜôÂÖ•ÔºåÂÆûÁé∞Ë∑®ÂüüÁôªÂΩï„ÄÇ ÂÖà‰∏ãËΩΩnginxÔºåÁÑ∂ÂêéÂ∞ÜnginxÁõÆÂΩï‰∏ãÁöÑnginx.conf‰øÆÊîπÂ¶Ç‰∏ã: 1234567891011121314// proxyÊúçÂä°Âô®server &#123; listen 80; server_name www.domain1.com; location / &#123; proxy_pass http://www.domain2.com:8080; #ÂèçÂêë‰ª£ÁêÜ proxy_cookie_domain www.domain2.com www.domain1.com; #‰øÆÊîπcookieÈáåÂüüÂêç index index.html index.htm; # ÂΩìÁî®webpack-dev-serverÁ≠â‰∏≠Èó¥‰ª∂‰ª£ÁêÜÊé•Âè£ËÆøÈóÆnignxÊó∂ÔºåÊ≠§Êó∂Êó†ÊµèËßàÂô®ÂèÇ‰∏éÔºåÊïÖÊ≤°ÊúâÂêåÊ∫êÈôêÂà∂Ôºå‰∏ãÈù¢ÁöÑË∑®ÂüüÈÖçÁΩÆÂèØ‰∏çÂêØÁî® add_header Access-Control-Allow-Origin http://www.domain1.com; #ÂΩìÂâçÁ´ØÂè™Ë∑®Âüü‰∏çÂ∏¶cookieÊó∂ÔºåÂèØ‰∏∫* add_header Access-Control-Allow-Credentials true; &#125;&#125; ÊúÄÂêéÈÄöËøáÂëΩ‰ª§Ë°ånginx -s reloadÂêØÂä®nginx 1234567// index.htmlvar xhr = new XMLHttpRequest();// ÂâçÁ´ØÂºÄÂÖ≥ÔºöÊµèËßàÂô®ÊòØÂê¶ËØªÂÜôcookiexhr.withCredentials = true;// ËÆøÈóÆnginx‰∏≠ÁöÑ‰ª£ÁêÜÊúçÂä°Âô®xhr.open(&#x27;get&#x27;, &#x27;http://www.domain1.com:81/?user=admin&#x27;, true);xhr.send(); 123456789101112131415// server.jsvar http = require(&#x27;http&#x27;);var server = http.createServer();var qs = require(&#x27;querystring&#x27;);server.on(&#x27;request&#x27;, function(req, res) &#123; var params = qs.parse(req.url.substring(2)); // ÂêëÂâçÂè∞ÂÜôcookie res.writeHead(200, &#123; &#x27;Set-Cookie&#x27;: &#x27;l=a123456;Path=/;Domain=www.domain2.com;HttpOnly&#x27; // HttpOnly:ËÑöÊú¨Êó†Ê≥ïËØªÂèñ &#125;); res.write(JSON.stringify(params)); res.end();&#125;);server.listen(&#x27;8080&#x27;);console.log(&#x27;Server is running at port 8080...&#x27;); 7.window.name + iframewindow.nameÂ±ûÊÄßÁöÑÁã¨Áâπ‰πãÂ§ÑÔºönameÂÄºÂú®‰∏çÂêåÁöÑÈ°µÈù¢ÔºàÁîöËá≥‰∏çÂêåÂüüÂêçÔºâÂä†ËΩΩÂêé‰æùÊóßÂ≠òÂú®ÔºåÂπ∂‰∏îÂèØ‰ª•ÊîØÊåÅÈùûÂ∏∏ÈïøÁöÑ name ÂÄºÔºà2MBÔºâ„ÄÇ ÂÖ∂‰∏≠a.htmlÂíåb.htmlÊòØÂêåÂüüÁöÑÔºåÈÉΩÊòØhttp://localhost:3000;ËÄåc.htmlÊòØhttp://localhost:4000 1234567891011121314151617// a.html(http://localhost:3000/b.html) &lt;iframe src=&quot;http://localhost:4000/c.html&quot; frameborder=&quot;0&quot; onload=&quot;load()&quot; id=&quot;iframe&quot;&gt;&lt;/iframe&gt; &lt;script&gt; let first = true // onload‰∫ã‰ª∂‰ºöËß¶Âèë2Ê¨°ÔºåÁ¨¨1Ê¨°Âä†ËΩΩË∑®ÂüüÈ°µÔºåÂπ∂ÁïôÂ≠òÊï∞ÊçÆ‰∫éwindow.name function load() &#123; if(first)&#123; // Á¨¨1Ê¨°onload(Ë∑®ÂüüÈ°µ)ÊàêÂäüÂêéÔºåÂàáÊç¢Âà∞ÂêåÂüü‰ª£ÁêÜÈ°µÈù¢ let iframe = document.getElementById(&#x27;iframe&#x27;); iframe.src = &#x27;http://localhost:3000/b.html&#x27;; first = false; &#125;else&#123; // Á¨¨2Ê¨°onload(ÂêåÂüüb.htmlÈ°µ)ÊàêÂäüÂêéÔºåËØªÂèñÂêåÂüüwindow.name‰∏≠Êï∞ÊçÆ console.log(iframe.contentWindow.name); &#125; &#125; &lt;/script&gt; b.html‰∏∫‰∏≠Èó¥‰ª£ÁêÜÈ°µÔºå‰∏éa.htmlÂêåÂüüÔºåÂÜÖÂÆπ‰∏∫Á©∫„ÄÇ 1234// c.html(http://localhost:4000/c.html) &lt;script&gt; window.name = &#x27;Êàë‰∏çÁà±‰Ω†&#x27; &lt;/script&gt; ÊÄªÁªìÔºöÈÄöËøáiframeÁöÑsrcÂ±ûÊÄßÁî±Â§ñÂüüËΩ¨ÂêëÊú¨Âú∞ÂüüÔºåË∑®ÂüüÊï∞ÊçÆÂç≥Áî±iframeÁöÑwindow.name‰ªéÂ§ñÂüü‰º†ÈÄíÂà∞Êú¨Âú∞Âüü„ÄÇËøô‰∏™Â∞±Â∑ßÂ¶ôÂú∞ÁªïËøá‰∫ÜÊµèËßàÂô®ÁöÑË∑®ÂüüËÆøÈóÆÈôêÂà∂Ôºå‰ΩÜÂêåÊó∂ÂÆÉÂèàÊòØÂÆâÂÖ®Êìç‰Ωú„ÄÇ 8.location.hash + iframeÂÆûÁé∞ÂéüÁêÜÔºö a.htmlÊ¨≤‰∏éc.htmlË∑®ÂüüÁõ∏‰∫íÈÄö‰ø°ÔºåÈÄöËøá‰∏≠Èó¥È°µb.htmlÊù•ÂÆûÁé∞„ÄÇ ‰∏â‰∏™È°µÈù¢Ôºå‰∏çÂêåÂüü‰πãÈó¥Âà©Áî®iframeÁöÑlocation.hash‰º†ÂÄºÔºåÁõ∏ÂêåÂüü‰πãÈó¥Áõ¥Êé•jsËÆøÈóÆÊù•ÈÄö‰ø°„ÄÇ ÂÖ∑‰ΩìÂÆûÁé∞Ê≠•È™§Ôºö‰∏ÄÂºÄÂßãa.htmlÁªôc.html‰º†‰∏Ä‰∏™hashÂÄºÔºåÁÑ∂Âêéc.htmlÊî∂Âà∞hashÂÄºÂêéÔºåÂÜçÊäähashÂÄº‰º†ÈÄíÁªôb.htmlÔºåÊúÄÂêéb.htmlÂ∞ÜÁªìÊûúÊîæÂà∞a.htmlÁöÑhashÂÄº‰∏≠„ÄÇÂêåÊ†∑ÁöÑÔºåa.htmlÂíåb.htmlÊòØÂêåÂüüÁöÑÔºåÈÉΩÊòØhttp://localhost:3000;ËÄåc.htmlÊòØhttp://localhost:4000 1234567// a.html &lt;iframe src=&quot;http://localhost:4000/c.html#iloveyou&quot;&gt;&lt;/iframe&gt; &lt;script&gt; window.onhashchange = function () &#123; //Ê£ÄÊµãhashÁöÑÂèòÂåñ console.log(location.hash); &#125; &lt;/script&gt; 12345// b.html &lt;script&gt; window.parent.parent.location.hash = location.hash //b.htmlÂ∞ÜÁªìÊûúÊîæÂà∞a.htmlÁöÑhashÂÄº‰∏≠Ôºåb.htmlÂèØÈÄöËøáparent.parentËÆøÈóÆa.htmlÈ°µÈù¢ &lt;/script&gt; 12345// c.htmlconsole.log(location.hash); let iframe = document.createElement(&#x27;iframe&#x27;); iframe.src = &#x27;http://localhost:3000/b.html#idontloveyou&#x27;; document.body.appendChild(iframe); 9.document.domain + iframeËØ•ÊñπÂºèÂè™ËÉΩÁî®‰∫é‰∫åÁ∫ßÂüüÂêçÁõ∏ÂêåÁöÑÊÉÖÂÜµ‰∏ãÔºåÊØîÂ¶Ç a.test.com Âíå b.test.com ÈÄÇÁî®‰∫éËØ•ÊñπÂºè„ÄÇÂè™ÈúÄË¶ÅÁªôÈ°µÈù¢Ê∑ªÂä† document.domain =&#39;test.com&#39; Ë°®Á§∫‰∫åÁ∫ßÂüüÂêçÈÉΩÁõ∏ÂêåÂ∞±ÂèØ‰ª•ÂÆûÁé∞Ë∑®Âüü„ÄÇ ÂÆûÁé∞ÂéüÁêÜÔºö‰∏§‰∏™È°µÈù¢ÈÉΩÈÄöËøájsÂº∫Âà∂ËÆæÁΩÆdocument.domain‰∏∫Âü∫Á°Ä‰∏ªÂüüÔºåÂ∞±ÂÆûÁé∞‰∫ÜÂêåÂüü„ÄÇ Êàë‰ª¨Áúã‰∏™‰æãÂ≠êÔºöÈ°µÈù¢a.zf1.cn:3000/a.htmlËé∑ÂèñÈ°µÈù¢b.zf1.cn:3000/b.html‰∏≠aÁöÑÂÄº 1234567891011// a.html&lt;body&gt; helloa &lt;iframe src=&quot;http://b.zf1.cn:3000/b.html&quot; frameborder=&quot;0&quot; onload=&quot;load()&quot; id=&quot;frame&quot;&gt;&lt;/iframe&gt; &lt;script&gt; document.domain = &#x27;zf1.cn&#x27; function load() &#123; console.log(frame.contentWindow.a); &#125; &lt;/script&gt;&lt;/body&gt; 12345678// b.html&lt;body&gt; hellob &lt;script&gt; document.domain = &#x27;zf1.cn&#x27; var a = 100; &lt;/script&gt;&lt;/body&gt; ‰∏â„ÄÅÊÄªÁªì CORSÊîØÊåÅÊâÄÊúâÁ±ªÂûãÁöÑHTTPËØ∑Ê±ÇÔºåÊòØË∑®ÂüüHTTPËØ∑Ê±ÇÁöÑÊ†πÊú¨Ëß£ÂÜ≥ÊñπÊ°à JSONPÂè™ÊîØÊåÅGETËØ∑Ê±ÇÔºåJSONPÁöÑ‰ºòÂäøÂú®‰∫éÊîØÊåÅËÄÅÂºèÊµèËßàÂô®Ôºå‰ª•ÂèäÂèØ‰ª•Âêë‰∏çÊîØÊåÅCORSÁöÑÁΩëÁ´ôËØ∑Ê±ÇÊï∞ÊçÆ„ÄÇ ‰∏çÁÆ°ÊòØNode‰∏≠Èó¥‰ª∂‰ª£ÁêÜËøòÊòØnginxÂèçÂêë‰ª£ÁêÜÔºå‰∏ªË¶ÅÊòØÈÄöËøáÂêåÊ∫êÁ≠ñÁï•ÂØπÊúçÂä°Âô®‰∏çÂä†ÈôêÂà∂„ÄÇ Êó•Â∏∏Â∑•‰Ωú‰∏≠ÔºåÁî®ÂæóÊØîËæÉÂ§öÁöÑË∑®ÂüüÊñπÊ°àÊòØcorsÂíånginxÂèçÂêë‰ª£ÁêÜ ÂèÇËÄÉÊñáÁ´† Ë∑®ÂüüËµÑÊ∫êÂÖ±‰∫´ CORS ËØ¶Ëß£ ÂâçÁ´ØÈù¢ËØï‰πãÈÅì window.postMessage ÂâçÁ´ØÂ∏∏ËßÅË∑®ÂüüËß£ÂÜ≥ÊñπÊ°àÔºàÂÖ®Ôºâ Ê∑±ÂÖ•Ë∑®ÂüüÈóÆÈ¢ò(4) - Âà©Áî®‰ª£ÁêÜËß£ÂÜ≥Ë∑®Âüü CORS-mdn","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"thisÂíåÂØπË±°ÂéüÂûã2","slug":"jsÂü∫Á°Ä-thisÂíåÂØπË±°ÂéüÂûã2","date":"2019-02-12T16:00:00.000Z","updated":"2024-10-16T03:57:21.085Z","comments":true,"path":"2019/02/13/jsÂü∫Á°Ä-thisÂíåÂØπË±°ÂéüÂûã2/","permalink":"https://justsso1.github.io/2019/02/13/js%E5%9F%BA%E7%A1%80-this%E5%92%8C%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%9E%8B2/","excerpt":"","text":"jsÂü∫Á°Ä-thisÂíåÂØπË±°ÂéüÂûã[[Prototype]]JavaScript‰∏≠ÁöÑÂØπË±°Êúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑ[[Prototype]]ÂÜÖÁΩÆÂ±ûÊÄßÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂØπ‰∫éÂÖ∂‰ªñÂØπË±°ÁöÑÂºïÁî®„ÄÇÂá†‰πéÊâÄÊúâÂØπË±°Âú®ÂàõÂª∫Êó∂[[Prototype]]Â±ûÊÄßÈÉΩ‰ºöË¢´Ëµã‰∫à‰∏Ä‰∏™ÈùûÁ©∫ÂÄº„ÄÇ ÂØπË±°ÁöÑ[[Prototype]]Èìæ1234var anotherObject = &#123; a:2&#125;;// ÂàõÂª∫‰∏Ä‰∏™ÂÖ≥ËÅîÂà∞ anotherObject ÁöÑÂØπË±°var myObject = Object.create( anotherObject ); myObject.a; // 2 Object.create(..) ÁöÑÂéüÁêÜ.ÂàõÂª∫‰∏Ä‰∏™ ÂØπË±°Âπ∂ÊääËøô‰∏™ÂØπË±°ÁöÑ [[Prototype]] ÂÖ≥ËÅîÂà∞ÊåáÂÆöÁöÑÂØπË±° ‰ΩøÁî® for..in ÈÅçÂéÜÂØπË±°Êó∂ÂéüÁêÜÂíåÊü•Êâæ [[Prototype]] ÈìæÁ±ª‰ººÔºå‰ªª‰ΩïÂèØ‰ª•ÈÄöËøáÂéüÂûãÈìæËÆøÈóÆÂà∞ (Âπ∂‰∏îÊòØ enumerableÔºåÂèÇËßÅÁ¨¨ 3 Á´†)ÁöÑÂ±ûÊÄßÈÉΩ‰ºöË¢´Êûö‰∏æ„ÄÇ‰ΩøÁî® in Êìç‰ΩúÁ¨¶Êù•Ê£ÄÊü•Â±ûÊÄßÂú®ÂØπË±°‰∏≠ÊòØÂê¶Â≠òÂú®Êó∂ÔºåÂêåÊ†∑‰ºöÊü•ÊâæÂØπË±°ÁöÑÊï¥Êù°ÂéüÂûãÈìæ(Êó†ËÆ∫Â±ûÊÄßÊòØÂê¶ÂèØÊûö‰∏æ) ÈÄöËøáÂêÑÁßçËØ≠Ê≥ïËøõË°åÂ±ûÊÄßÊü•ÊâæÊó∂ÈÉΩ‰ºöÊü•Êâæ [[Prototype]] ÈìæÔºåÁõ¥Âà∞ÊâæÂà∞Â±ûÊÄßÊàñËÄÖÊü•ÊâæÂÆåÊï¥Êù°ÂéüÂûãÈìæ Object.prototypeÊâÄÊúâÊôÆÈÄöÁöÑ [[Prototype]] ÈìæÊúÄÁªàÈÉΩ‰ºöÊåáÂêëÂÜÖÁΩÆÁöÑ Object.prototype Object.prototypeÂåÖÊ∂µÂæàÂ§öÈÄöÁî®ÁöÑÂäüËÉΩÔºötoString() Âíå .valueOf() .hasOwnProperty(..)„ÄÇ Â±ûÊÄßËÆæÁΩÆÂíåÂ±èËîΩÁªô‰∏Ä‰∏™ÂØπË±°ËÆæÁΩÆÂ±ûÊÄßÁöÑËøáÁ®ã„ÄÇ myObject.foo = &#39;aa&#39;; Â¶ÇÊûúÂ±ûÊÄßÂêç foo Êó¢Âá∫Áé∞Âú® myObject ‰∏≠‰πüÂá∫Áé∞Âú® myObject ÁöÑ [[Prototype]] Èìæ‰∏äÂ±ÇÔºåÈÇ£ ‰πàÂ∞±‰ºöÂèëÁîüÂ±èËîΩ„ÄÇmyObject ‰∏≠ÂåÖÂê´ÁöÑ foo Â±ûÊÄß‰ºöÂ±èËîΩÂéüÂûãÈìæ‰∏äÂ±ÇÁöÑÊâÄÊúâ foo Â±ûÊÄßÔºåÂõ†‰∏∫ myObject.foo ÊÄªÊòØ‰ºöÈÄâÊã©ÂéüÂûãÈìæ‰∏≠ÊúÄÂ∫ïÂ±ÇÁöÑ foo Â±ûÊÄß„ÄÇ Â±èËîΩÊØîÊàë‰ª¨ÊÉ≥Ë±°ÁöÑÊõ¥Â§çÊùÇ„ÄÇ ‰∏ãÈù¢Êàë‰ª¨ÂàÜÊûê‰∏Ä‰∏ãÂ¶ÇÊûú foo ‰∏çÁõ¥Êé•Â≠òÂú®‰∫é myObject ‰∏≠ËÄåÊòØÂ≠òÂú®‰∫éÂéüÂûãÈìæ‰∏äÂ±ÇÊó∂ myObject.foo &#x3D; ‚Äúbar‚Äù ‰ºöÂá∫Áé∞ÁöÑ‰∏âÁßçÊÉÖÂÜµ„ÄÇ Â¶ÇÊûúÂú®[[Prototype]]Èìæ‰∏äÂ±ÇÂ≠òÂú®Âêç‰∏∫fooÁöÑÊôÆÈÄöÊï∞ÊçÆËÆøÈóÆÂ±ûÊÄß(ÂèÇËßÅÁ¨¨3Á´†)Âπ∂‰∏îÊ≤° ÊúâË¢´Ê†áËÆ∞‰∏∫Âè™ËØª(writable:false)ÔºåÈÇ£Â∞±‰ºöÁõ¥Êé•Âú® myObject ‰∏≠Ê∑ªÂä†‰∏Ä‰∏™Âêç‰∏∫ foo ÁöÑÊñ∞ Â±ûÊÄßÔºåÂÆÉÊòØÂ±èËîΩÂ±ûÊÄß„ÄÇ Â¶ÇÊûúÂú®[[Prototype]]Èìæ‰∏äÂ±ÇÂ≠òÂú®fooÔºå‰ΩÜÊòØÂÆÉË¢´Ê†áËÆ∞‰∏∫Âè™ËØª(writable:false)ÔºåÈÇ£‰πà Êó†Ê≥ï‰øÆÊîπÂ∑≤ÊúâÂ±ûÊÄßÊàñËÄÖÂú® myObject ‰∏äÂàõÂª∫Â±èËîΩÂ±ûÊÄß„ÄÇÂ¶ÇÊûúËøêË°åÂú®‰∏•Ê†ºÊ®°Âºè‰∏ãÔºå‰ª£Á†Å‰ºö ÊäõÂá∫‰∏Ä‰∏™ÈîôËØØ„ÄÇÂê¶ÂàôÔºåËøôÊù°ËµãÂÄºËØ≠Âè•‰ºöË¢´ÂøΩÁï•„ÄÇÊÄª‰πãÔºå‰∏ç‰ºöÂèëÁîüÂ±èËîΩ„ÄÇ Â¶ÇÊûúÂú®[[Prototype]]Èìæ‰∏äÂ±ÇÂ≠òÂú®fooÂπ∂‰∏îÂÆÉÊòØ‰∏Ä‰∏™setter(ÂèÇËßÅÁ¨¨3Á´†)ÔºåÈÇ£Â∞±‰∏ÄÂÆö‰ºö Ë∞ÉÁî®Ëøô‰∏™ setter„ÄÇfoo ‰∏ç‰ºöË¢´Ê∑ªÂä†Âà∞(ÊàñËÄÖËØ¥Â±èËîΩ‰∫é)myObjectÔºå‰πü‰∏ç‰ºöÈáçÊñ∞ÂÆö‰πâ foo Ëøô ‰∏™ setter„ÄÇ Â§ßÂ§öÊï∞ÂºÄÂèëËÄÖÈÉΩËÆ§‰∏∫Â¶ÇÊûúÂêë [[Prototype]] Èìæ‰∏äÂ±ÇÂ∑≤ÁªèÂ≠òÂú®ÁöÑÂ±ûÊÄß([[Put]])ËµãÂÄºÔºåÂ∞±‰∏Ä ÂÆö‰ºöËß¶ÂèëÂ±èËîΩÔºå‰ΩÜÊòØÂ¶Ç‰Ω†ÊâÄËßÅÔºå‰∏âÁßçÊÉÖÂÜµ‰∏≠Âè™Êúâ‰∏ÄÁßç(Á¨¨‰∏ÄÁßç)ÊòØËøôÊ†∑ÁöÑ„ÄÇÂ¶ÇÊûú‰Ω†Â∏åÊúõÂú®Á¨¨‰∫åÁßçÂíåÁ¨¨‰∏âÁßçÊÉÖÂÜµ‰∏ã‰πüÂ±èËîΩ fooÔºåÈÇ£Â∞±‰∏çËÉΩ‰ΩøÁî® &#x3D; Êìç‰ΩúÁ¨¶Êù•ËµãÂÄºÔºåËÄåÊòØ‰Ωø Áî® Object.defineProperty(..)(ÂèÇËßÅÁ¨¨ 3 Á´†)Êù•Âêë myObject Ê∑ªÂä† foo„ÄÇ ÈöêÂºèÂ±èËîΩ++ Êìç‰Ωú ‚ÄúÁ±ª‚ÄùJavaScript‰∏≠Âè™ÊúâÂØπË±°ÔºåÊ≤°ÊúâÁ±ª„ÄÇjsÊòØÂ∞ëÊúâÁöÑÂèØ‰ª•‰∏çÈÄöËøáÁ±ªÔºåÁõ¥Êé•ÂàõÂª∫ÂØπË±°ÁöÑËØ≠Ë®Ä„ÄÇ ‚ÄúÁ±ª‚ÄùÂáΩÊï∞jsÈÉΩÊòØÂú®Ê®°‰ªøÁ±ª„ÄÇ ÊâÄÊúâÁöÑÂáΩÊï∞ÈªòËÆ§ÈÉΩ‰ºöÊã•Êúâ‰∏Ä‰∏™ Âêç‰∏∫ prototype ÁöÑÂÖ¨ÊúâÂπ∂‰∏î‰∏çÂèØÊûö‰∏æ(ÂèÇËßÅÁ¨¨ 3 Á´†)ÁöÑÂ±ûÊÄßÔºåÂÆÉ‰ºöÊåáÂêëÂè¶‰∏Ä‰∏™ÂØπË±° 123function Foo() &#123; // ...&#125;Foo.prototype; // &#123; &#125; ÔºàÂéüÂûãÔºâÁªßÊâøÂ¶ÇÊûúË¶ÅËÆøÈóÆÂØπË±°‰∏≠Âπ∂‰∏çÂ≠òÂú®ÁöÑ‰∏Ä‰∏™Â±ûÊÄßÔºå[[Get]] Êìç‰Ωú(ÂèÇËßÅÁ¨¨ 3 Á´†)Â∞±‰ºöÊü•ÊâæÂØπË±°ÂÜÖÈÉ®[[Prototype]] ÂÖ≥ËÅîÁöÑÂØπË±°„ÄÇËøô‰∏™ÂÖ≥ËÅîÂÖ≥Á≥ªÂÆûÈôÖ‰∏äÂÆö‰πâ‰∫Ü‰∏ÄÊù°‚ÄúÂéüÂûãÈìæ‚Äù(ÊúâÁÇπÂÉèÂµåÂ•óÁöÑ‰ΩúÁî®ÂüüÈìæ)ÔºåÂú®Êü•ÊâæÂ±ûÊÄßÊó∂‰ºöÂØπÂÆÉËøõË°åÈÅçÂéÜ„ÄÇ ÊâÄÊúâÊôÆÈÄöÂØπË±°ÈÉΩÊúâÂÜÖÁΩÆÁöÑ Object.prototypeÔºåÊåáÂêëÂéüÂûãÈìæÁöÑÈ°∂Á´Ø(ÊØîÂ¶ÇËØ¥ÂÖ®Â±Ä‰ΩúÁî®Âüü)ÔºåÂ¶Ç ÊûúÂú®ÂéüÂûãÈìæ‰∏≠Êâæ‰∏çÂà∞ÊåáÂÆöÁöÑÂ±ûÊÄßÂ∞±‰ºöÂÅúÊ≠¢„ÄÇtoString()„ÄÅvalueOf() ÂíåÂÖ∂‰ªñ‰∏Ä‰∫õÈÄöÁî®ÁöÑÂäüËÉΩ ÈÉΩÂ≠òÂú®‰∫é Object.prototype ÂØπË±°‰∏äÔºåÂõ†Ê≠§ËØ≠Ë®Ä‰∏≠ÊâÄÊúâÁöÑÂØπË±°ÈÉΩÂèØ‰ª•‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇ ÂÖ≥ËÅî‰∏§‰∏™ÂØπË±°ÊúÄÂ∏∏Áî®ÁöÑÊñπÊ≥ïÊòØ‰ΩøÁî® new ÂÖ≥ÈîÆËØçËøõË°åÂáΩÊï∞Ë∞ÉÁî®ÔºåÂú®Ë∞ÉÁî®ÁöÑ 4 ‰∏™Ê≠•È™§(Á¨¨ 2 Á´†)‰∏≠‰ºöÂàõÂª∫‰∏Ä‰∏™ÂÖ≥ËÅîÂÖ∂‰ªñÂØπË±°ÁöÑÊñ∞ÂØπË±°„ÄÇ‰ΩøÁî® new Ë∞ÉÁî®ÂáΩÊï∞Êó∂‰ºöÊääÊñ∞ÂØπË±°ÁöÑ .prototype Â±ûÊÄßÂÖ≥ËÅîÂà∞‚ÄúÂÖ∂‰ªñÂØπË±°‚Äù„ÄÇÂ∏¶ new ÁöÑÂáΩÊï∞Ë∞ÉÁî® ÈÄöÂ∏∏Ë¢´Áß∞‰∏∫‚ÄúÊûÑÈÄ†ÂáΩÊï∞Ë∞ÉÁî®‚ÄùÔºåÂ∞ΩÁÆ°ÂÆÉ‰ª¨ÂÆûÈôÖ‰∏äÂíå‰º†ÁªüÈù¢ÂêëÁ±ªËØ≠Ë®Ä‰∏≠ÁöÑÁ±ªÊûÑÈÄ†ÂáΩÊï∞‰∏ç‰∏ÄÊ†∑„ÄÇ ËôΩÁÑ∂Ëøô‰∫õ JavaScript Êú∫Âà∂Âíå‰º†ÁªüÈù¢ÂêëÁ±ªËØ≠Ë®Ä‰∏≠ÁöÑ‚ÄúÁ±ªÂàùÂßãÂåñ‚ÄùÂíå‚ÄúÁ±ªÁªßÊâø‚ÄùÂæàÁõ∏‰ººÔºå‰ΩÜ ÊòØ JavaScript ‰∏≠ÁöÑÊú∫Âà∂Êúâ‰∏Ä‰∏™Ê†∏ÂøÉÂå∫Âà´ÔºåÈÇ£Â∞±ÊòØ‰∏ç‰ºöËøõË°åÂ§çÂà∂ÔºåÂØπË±°‰πãÈó¥ÊòØÈÄöËøáÂÜÖÈÉ®ÁöÑ [[Prototype]] ÈìæÂÖ≥ËÅîÁöÑ„ÄÇ Âá∫‰∫éÂêÑÁßçÂéüÂõ†Ôºå‰ª•‚ÄúÁªßÊâø‚ÄùÁªìÂ∞æÁöÑÊúØËØ≠(ÂåÖÊã¨‚ÄúÂéüÂûãÁªßÊâø‚Äù)ÂíåÂÖ∂‰ªñÈù¢ÂêëÂØπË±°ÁöÑÊúØËØ≠ÈÉΩÊó† Ê≥ïÂ∏ÆÂä©‰Ω†ÁêÜËß£ JavaScript ÁöÑÁúüÂÆûÊú∫Âà∂(‰∏ç‰ªÖ‰ªÖÊòØÈôêÂà∂Êàë‰ª¨ÁöÑÊÄùÁª¥Ê®°Âºè) ÁªßÊâøÊÑèÂë≥ÁùÄÂ§çÂà∂Êìç‰ΩúÔºåJavaScript(ÈªòËÆ§)Âπ∂‰∏ç‰ºöÂ§çÂà∂ÂØπË±°Â±ûÊÄß„ÄÇÁõ∏ÂèçÔºåJavaScript ‰ºöÂú®‰∏§ ‰∏™ÂØπË±°‰πãÈó¥ÂàõÂª∫‰∏Ä‰∏™ÂÖ≥ËÅîÔºåËøôÊ†∑‰∏Ä‰∏™ÂØπË±°Â∞±ÂèØ‰ª•ÈÄöËøáÂßîÊâòËÆøÈóÆÂè¶‰∏Ä‰∏™ÂØπË±°ÁöÑÂ±ûÊÄßÂíåÂáΩÊï∞„ÄÇ ÂßîÊâò(ÂèÇËßÅÁ¨¨ 6 Á´†)Ëøô‰∏™ÊúØËØ≠ÂèØ‰ª•Êõ¥Âä†ÂáÜÁ°ÆÂú∞ÊèèËø∞ JavaScript ‰∏≠ÂØπË±°ÁöÑÂÖ≥ËÅîÊú∫Âà∂„ÄÇ ÂØπË±°ÂÖ≥ËÅîË°å‰∏∫ÂßîÊâòÈù¢ÂêëÂßîÊâòÁöÑËÆæËÆ°Á±ª‰∏éÂØπË±°Êõ¥ÁÆÄÊ¥ÅÁöÑËÆæËÆ°es6‰∏≠classÁöÑËÆ§ËØÜ","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"thisÂíåÂØπË±°ÂéüÂûã1","slug":"jsÂü∫Á°Ä-thisÂíåÂØπË±°ÂéüÂûã1","date":"2019-02-11T16:00:00.000Z","updated":"2024-10-16T03:57:17.090Z","comments":true,"path":"2019/02/12/jsÂü∫Á°Ä-thisÂíåÂØπË±°ÂéüÂûã1/","permalink":"https://justsso1.github.io/2019/02/12/js%E5%9F%BA%E7%A1%80-this%E5%92%8C%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%9E%8B1/","excerpt":"","text":"jsÂü∫Á°Ä-thisÂíåÂØπË±°ÂéüÂûãËÆ§ËØÜthisthisÊòØ‰∏Ä‰∏™ÂÖ≥ÈîÆÂ≠óÔºåË¢´Ëá™Âä®ÂÆö‰πâÂú®ÊâÄÊúâÂáΩÊï∞ÁöÑ‰ΩúÁî®Âüü‰∏≠„ÄÇthisÊèê‰æõ‰∫Ü‰∏ÄÁßçÊõ¥‰ºòÈõÖÁöÑÊñπÂºèÊù•ÈöêÂºè‚Äú‰º†ÈÄí‚Äù‰∏Ä‰∏™ÂØπË±°ÂºïÁî®ÔºåÂõ†Ê≠§ÂèØ‰ª•Â∞ÜAPIËÆæËÆ°ÁöÑÊõ¥Âä†ÁÆÄÊ¥ÅÂπ∂‰∏îÊòì‰∫éÂ§çÁî®„ÄÇ ÂáΩÊï∞ÂèØ‰ª•Ëá™Âä®ÂºïÁî®ÂêàÈÄÇÁöÑ‰∏ä‰∏ãÊñáÂØπË±°ÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑ„ÄÇ 12345678910111213141516171819202122function foo(num) &#123; console.log(&#x27;foo:&#x27;, num); this.count++; console.log(this) //windowÂØπË±°&#125;foo.count = 0;for (var i = 0; i &lt; 10; i++) &#123; if (i &gt; 5) &#123; foo(i) &#125;&#125;console.log(foo.count); //0//ÊâÄÊúâÊâìÂç∞//foo: 6//foo: 7//foo: 8//foo: 9//0 ÊâìÂç∞ÂíåÊàë‰ª¨È¢ÑÊúüÁöÑ‰∏ç‰∏ÄÊ†∑Ôºå‰∏∫‰ªÄ‰πàfoo.count\bËøòÊòØ0Âë¢Ôºü‰∏∫‰∫ÜËææÂà∞‰∏ÄÊ†∑ÔºåÊàë‰ª¨ÂèØ‰ª•ËøôÊ†∑ÂÅöÔºö 1.ÂáΩÊï∞Ê†áÁ§∫Á¨¶Êõø‰ª£thisÊù•ÂºïÁî®ÂáΩÊï∞ÂØπË±° ÂáΩÊï∞ÂàÜ‰∏∫ÂÖ∑ÂêçÂáΩÊï∞ÂíåÂåøÂêçÂáΩÊï∞ÔºåÂÖ∑ÂêçÂáΩÊï∞‰∏≠ÔºåÂáΩÊï∞ÂêçÂèØ‰ª•ÊåáÂêëthis,‰ΩÜÊòØÂåøÂêçÂáΩÊï∞Â∞±Êâæ‰∏çÂà∞ÂêçÁß∞ÊåáÂêëthis. 123456789101112131415161718192021function foo(num) &#123; console.log(&#x27;foo:&#x27;, num); foo.count++&#125;foo.count = 0;for (var i = 0; i &lt; 10; i++) &#123; if (i &gt; 5) &#123; foo(i) &#125;&#125;console.log(foo.count);//ÊâÄÊúâÊâìÂç∞// foo: 6// foo: 7// foo: 8// foo: 9// 4 2.Âº∫Âà∂thisÊåáÂêëÂáΩÊï∞Ôºå‰ΩøÁî®call()ÂáΩÊï∞,ÊääÂáΩÊï∞Ê†áÁ§∫Á¨¶‰º†ÂÖ•„ÄÇ 123456789101112131415161718192021function foo(num) &#123; console.log(&#x27;foo:&#x27;, num); this.count++&#125;foo.count = 0;for (var i = 0; i &lt; 10; i++) &#123; if (i &gt; 5) &#123; foo.call(foo, i) &#125;&#125;console.log(foo.count);//ÊâÄÊúâÊâìÂç∞// foo: 6// foo: 7// foo: 8// foo: 9// 4 ‰ΩÜÊòØ‰∏äÈù¢ÁöÑ‰∏§ÁßçÊñπÊ≥ïÈÉΩ\bÈÅøÂÖç‰∫Ü‰ΩøÁî®this„ÄÇÊàë‰ª¨‰πãÂâçËØ¥‰∫ÜÔºåthisÊèê‰æõ‰∫Ü‰∏ÄÁßçÊõ¥‰ºòÈõÖÁöÑÊñπÂºèÊù•ÈöêÂºè‚Äú‰º†ÈÄí‚Äù‰∏Ä‰∏™ÂØπË±°ÂºïÁî®ÔºåÂõ†Ê≠§ÂèØ‰ª•Â∞ÜAPIËÆæËÆ°ÁöÑÊõ¥Âä†ÁÆÄÊ¥ÅÂπ∂‰∏îÊòì‰∫éÂ§çÁî®„ÄÇÂáΩÊï∞ÂèØ‰ª•Ëá™Âä®ÂºïÁî®ÂêàÈÄÇÁöÑ‰∏ä‰∏ãÊñáÂØπË±°ÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑ„ÄÇ ÊâÄ‰ª•Êàë‰ª¨\bËÆ§ËØÜ‰∏Ä‰∏ãthis.\b Ê≥®ÊÑè\bÔºöthisÂú®‰ªª‰ΩïÊó∂ÂÄôÈÉΩ‰∏çÁ≠â‰∫éÂáΩÊï∞ÁöÑ‰ΩúÁî®Âüü„ÄÇÂú®jsÂÜÖÂÆπÔºå‰ΩúÁî®ÂüüÁ°ÆÂÆûÂíåÂØπË±°Á±ª‰ººÔºåÂèØËßÅÁöÑÊ†áÁ§∫Á¨¶ÈÉΩÊòØÂÆÉÁöÑÂ±ûÊÄß„ÄÇ‰ΩÜÊòØ‰ΩúÁî®Âüü‚ÄúÂØπË±°‚ÄùÊó†Ê≥ïÈÄöËøájs\b‰ª£Á†ÅËÆøÈóÆÔºà‰πüÂ∞±ÊòØ‰ΩúÁî®ÂüüÂè™ÂíåËØçÊ≥ï‰ΩúÁî®ÂüüÊúâÂÖ≥‰∫éÔºåËÄåÂíåËøêË°åÊó∂ÊòØÊó†ÂÖ≥ÁöÑÔºâÔºå ÂÆÉÂ≠òÂú®‰∏éjavascriptÂºïÊìéÂÜÖ„ÄÇ this Âíå‰ΩúÁî®ÂüüÊòØ‰∏çÂèØ‰ª•Ê∑∑ÂêàÁöÑ,thisÊó¢‰∏çÊåáÂêëËá™Ë∫´Ôºå‰πü‰∏çÊåáÂêëÂáΩÊï∞ÁöÑËØçÊ≥ï‰ΩúÁî®Âüü„ÄÇthisÂÆûÈôÖ‰∏äÊòØÂú®ÂáΩÊï∞Ë¢´Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÂèëÁîüÁöÑÁªëÂÆöÔºåÂÆÉÊåáÂêë‰ªÄ‰πàÂÆåÂÖ®ÂèñÂÜ≥‰∫éÂáΩÊï∞Âú®Âì™ÈáåË¢´Ë∞ÉÁî®„ÄÇ this ÊòØÂú®ËøêË°åÊó∂ËøõË°åÁªëÂÆöÁöÑÔºåÂπ∂‰∏çÊòØÂú®ÁºñÂÜôÊó∂ÁªëÂÆöÔºåÂÆÉÁöÑ‰∏ä‰∏ãÊñáÂèñÂÜ≥‰∫éÂáΩÊï∞Ë∞ÉÁî®Êó∂ÁöÑÂêÑÁßçÊù°‰ª∂„ÄÇthis ÁöÑÁªëÂÆöÂíåÂáΩÊï∞Â£∞ÊòéÁöÑ‰ΩçÁΩÆÊ≤°Êúâ‰ªª‰ΩïÂÖ≥Á≥ªÔºåÂè™ÂèñÂÜ≥‰∫éÂáΩÊï∞ÁöÑË∞ÉÁî®ÊñπÂºè„ÄÇ ÂΩì‰∏Ä‰∏™ÂáΩÊï∞Ë¢´Ë∞ÉÁî®Êó∂Ôºå‰ºöÂàõÂª∫‰∏Ä‰∏™Ê¥ªÂä®ËÆ∞ÂΩï(ÊúâÊó∂ÂÄô‰πüÁß∞‰∏∫ÊâßË°å‰∏ä‰∏ãÊñá)„ÄÇËøô‰∏™ËÆ∞ÂΩï‰ºöÂåÖ Âê´ÂáΩÊï∞Âú®Âì™ÈáåË¢´Ë∞ÉÁî®(Ë∞ÉÁî®Ê†à)„ÄÅÂáΩÊï∞ÁöÑË∞ÉÁî®ÊñπÊ≥ï„ÄÅ‰º†ÂÖ•ÁöÑÂèÇÊï∞Á≠â‰ø°ÊÅØ„ÄÇthis Â∞±ÊòØËÆ∞ÂΩïÁöÑ ÂÖ∂‰∏≠‰∏Ä‰∏™Â±ûÊÄßÔºå‰ºöÂú®ÂáΩÊï∞ÊâßË°åÁöÑËøáÁ®ã‰∏≠Áî®Âà∞ Ëß£ÊûêthisthisÂÆåÂÖ®ÂèñÂÜ≥‰∫éÂáΩÊï∞Ë∞ÉÁî®ÁöÑ‰ΩçÁΩÆ„ÄÇÈÇ£ÊâæÂà∞Ë∞ÉÁî®‰ΩçÁΩÆ‰∫ÜÔºåÂ∞±Á¶ªthisÊõ¥Ëøõ‰∏ÄÊ≠•‰∫Ü„ÄÇÊâÄ‰ª•ÔºåË∞ÉÁî®‰ΩçÁΩÆÊòØ‰ªÄ‰πàÂë¢ÔºüÊòØÂáΩÊï∞Ë¢´Ë∞ÉÁî®ÁöÑ‰ΩçÁΩÆÔºüÊ≤°ÈÇ£‰πàÁÆÄÂçïÔºåÂõ†‰∏∫Êúâ‰∫õÁºñÁ®ã‰ºöÈöêËóèÂáΩÊï∞ÁöÑÁúüÊ≠£ÁöÑË∞ÉÁî®‰ΩçÁΩÆ„ÄÇ ÂÖàÊù•Áúã‰∏™‰æãÂ≠êÔºõ 12345678910111213141516function baz() &#123; console.log(&#x27;baz&#x27;); bar();&#125;function bar() &#123; console.log(&#x27;bar&#x27;); foo();&#125;function foo() &#123; debugger; console.log(&#x27;foo&#x27;);&#125;baz(); \bÊéßÂà∂Âè∞ÁöÑÊà™ÂõæÔºö Call StackÊòØË∞ÉÁî®Â†ÜÊ†à Ê†àÁªìÊûÑÊòØÂÖàÂÖ•ÂêéÂá∫ÔºåÂêéÂÖ•ÂÖàÂá∫ÁöÑ„ÄÇ Ê†àÁöÑÁ¨¨‰∫å‰ΩçÊòØÂáΩÊï∞ÁöÑË∞ÉÁî®‰ΩçÁΩÆ„ÄÇ Ê†àÈáåÈù¢Â≠òÁöÑÊòØË∞ÉÁî®Â†ÜÊ†à„ÄÇ thisÁöÑÁªëÂÆöËßÑÂàôthisÁöÑÂá†ÁßçÁªëÂÆöËßÑÂàô 1 ÈªòËÆ§ÁªëÂÆöÔºåËøêË°åÂú®Èùû‰∏•Ê†ºÊ®°Âºè‰∏ãÔºåthisÁªëÂÆöwindow,ËøêË°åÂú®‰∏•Ê†ºÊ®°Âºè‰∏ãÔºåthisÊòØundefined 2 ÈöêÂºèÁªëÂÆöÂáΩÊï∞Âú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºåË¢´‰∏Ä‰∫õ‰∏ä‰∏ãÊñáÂØπË±°Êã•ÊúâÔºåËøô‰πàËØ¥‰πü‰∏çÂ§™ÂáÜÁ°Æ 12345678910function foo() &#123; console.log(this.a);&#125;var obj = &#123; a: 2, foo: foo&#125;;obj.foo();//ÊâìÂç∞Ôºö 2 ÂáΩÊï∞ÁöÑ‰∏ä‰∏ãÊñáÂØπË±°ÂíåÂÆÉÁöÑÊúÄÈ´òÂ±ÇË∞ÉÁî®ÊúâÂÖ≥Á≥ª 12345678910111213141516function foo() &#123; console.log(this.a)&#125;var obj1 = &#123; a: 2, obj2: obj2&#125;;var obj2 = &#123; a: &#x27;3&#x27;, foo: foo&#125;;console.log(obj1.obj2); //undefinedobj1.obj2.foo(); //Cannot read property &#x27;foo&#x27; of undefined 123456789101112131415161718//‰ºö‰∫ßÁîüÈîôËØØÁöÑÂÜôÊ≥ïfunction foo() &#123; console.log(this.a)&#125;var obj2 = &#123; a: &#x27;3&#x27;, foo: foo&#125;;var obj1 = &#123; a: 2, obj2: obj2&#125;;console.log(obj1.obj2); //undefinedobj1.obj2.foo(); //Cannot read property &#x27;foo&#x27; of undefined 2.ÈöêÂºè‰∏¢Â§± ÈöêÂºèÁªëÂÆö‰∏≠ÊúÄÂÆπÊòìÂá∫Áé∞ÁöÑÈóÆÈ¢òÊòØÔºåthis‰∏¢Â§±ÁªëÂÆöÁöÑ‰∏ä‰∏ãÊñáÂØπË±°.‰ªéËÄåÂèòÊàêÈªòËÆ§ÁªëÂÆöÔºåthisÊåáÂêëwindowÊàñËÄÖundefined. 1234567891011121314151617function foo() &#123; console.log(this.a)&#125;function doFun(fn) &#123; fn()&#125;var obj = &#123; a: 2, foo: foo&#125;;var a = &#x27;ÊàëÊòØwindowÁöÑa&#x27;;doFun(obj.foo);//ÊâìÂç∞Ôºö ÊàëÊòØwindowÁöÑa ‰∏∫‰∫ÜËß£ÂÜ≥ÁªëÂÆö‰∏¢Â§±ÁöÑÈóÆÈ¢òÔºåÊúâ‰∫ÜÊòæÁ§∫ÁªëÂÆöÔºå bind() ES5ÂÜÖÁΩÆ‰∫ÜÔºå‰∏çËøá‰πüÂèØ‰ª•ÊâãÂä®ÂÆûÁé∞Ëøô‰∏™ÂáΩÊï∞ ‰º†ÂÖ•ÁöÑÂèÇÊï∞ÔºåÊúÄÁªàËøîÂõû‰∏Ä‰∏™ÂáΩÊï∞ ÂáΩÊï∞ÁöÑ[[ÂéüÂûã]]ÂèØ‰ª•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇJavaScriptÊèê‰æõÁöÑÂ§ßÈÉ®ÂàÜÂáΩÊï∞‰ª•ÂèäÊàë‰ª¨ÂàõÂª∫ÁöÑËá™ÂÆö‰πâÂáΩÊï∞ÔºåÈÉΩÂèØ‰ª•ÂÆûÁî®apply()Âíåcall()ÂáΩÊï∞„ÄÇ ‰ªñ‰ª¨ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™ÂØπË±°Ôºå‰ªñ‰ª¨‰ºöÊääËøô‰∏™ÂØπË±°ÁªëÂÆöÂà∞this‰∏äÈù¢ÔºåÊé•ÁùÄÂú®Ë∞ÉÁî®ÂáΩÊï∞Êó∂ÔºåÊåáÂÆöËøô‰∏™this. ‰ªéthisÁöÑÁªëÂÆöËßíÂ∫¶Ôºåapply()Âíåcall()ÁöÑÊïàÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂè™ÊòØÂèÇ‰∏éÁöÑ‰º†ÂÖ•‰∏ç‰∏ÄÊ†∑„ÄÇ Es5Êèê‰æõ‰∫ÜÁ°¨ÁªëÂÆöÁöÑÂáΩÊï∞Âú®Function.prototype‰∏≠ bind() 3-2 apiË∞ÉÁî®‰∏ä‰∏ãÊñá 12345678910111213function foo(item) &#123; console.log(this.id, item)&#125;var obj = &#123; id: &#x27;aseome&#x27;&#125;;[1, 2, 3].forEach(foo, obj);// aseome 1// aseome 2// aseome 3 4.newÁªëÂÆö Âπ∂‰∏çÂ≠òÂú®ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂè™ÊòØÂ≠òÂú® 1234567891011121314function foo(a) &#123; this.a = a;&#125;var bar = new foo(2);console.log(bar);console.log(bar.a);//ÊâìÂç∞//foo &#123;a: 2&#125;// a: 2// __proto__: Object// this.js:213 2 thisËßÑÂàôÁöÑ‰ºòÂÖàÁ∫ß1„ÄÇ newÁªëÂÆö 2„ÄÇ ÊòæÁ§∫ÁªëÂÆö call() apply()È´ò‰∫éÈöêÂºèÁªëÂÆöÁöÑÔºå‰πüÂ∞±ÊòØÈöêÂºèÁªëÂÆö‰∏Ä‰∏™‰∏ä‰∏ãÊñáÂØπË±° Á°¨ÁªëÂÆö bind() ‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂåÖË£ÖÂáΩÊï∞ 3„ÄÇ ÈöêÂºèÁªëÂÆö 4„ÄÇ ÊúÄÂêéÁöÑÊòØÈªòËÆ§ÁªëÂÆö‰∫ÜÔºåthisÊòØwindowÊàñËÄÖundefined ÊâãÂä®ÂÆûÁé∞bind()ÂáΩÊï∞ÔºåÂú®‰∏Ä‰∫õÂè§ËÄÅÁöÑÊµèËßàÂô®‰∏≠Ê≤°ÊúâFunction.prototypeÊ≤°ÊúâbindÂáΩÊï∞ 123456789101112131415161718192021222324252627282930function bind() &#123; // console.log(typeof Function.prototype.bind); if (!Function.prototype.bind) &#123; Function.prototype.bind = function (oThis) &#123; // if (typeof this !== &#x27;function&#x27;) &#123; // throw new Error(&#x27;Ëøô‰∏çÊòØ‰∏Ä‰∏™ÂáΩÊï∞&#x27;) // &#125; console.log(typeof this); &#125; &#125; var aArgs = Array.prototype.slice.call(arguments, 1), fToBind = this, fNOP = function () &#123; &#125;, fBind = function () &#123; return fToBind.apply( (this instanceof fNOP &amp;&amp; oThis ? this : oThis), aArgs.concat( Array.prototype.slice.call(arguments) ) ) &#125; ; fNOP.prototype = this.prototype; fBound.prototype = new fNOP();&#125;// bind(2); console.log(Array.prototype);console.log(Number.prototype);console.log(Function.prototype); ÂØπË±°Âú®javascript‰∏≠‰∏ÄÂÖ±Êúâ7ÁßçaËØ≠Ë®ÄÁ±ªÂûã string number boolean undefined null object symbol ÁÆÄÂçïÂü∫Êú¨Á±ªÂûãÊúâ6‰∏≠Ôºåstring number boolean undefined null symbol,‰ªñ‰ª¨‰∏çÊòØÂØπË±° ÂÆûÈôÖ‰∏äÔºåJavaScript ‰∏≠ÊúâËÆ∏Â§öÁâπÊÆäÁöÑÂØπË±°Â≠êÁ±ªÂûãÔºåÊàë‰ª¨ÂèØ‰ª•Áß∞‰πã‰∏∫Â§çÊùÇÂü∫Êú¨Á±ªÂûã„ÄÇÂÜÖÁΩÆÂØπË±° String Number Boolean Object Function Array Data RegExp Error .Âú®js ÊèíÊõ≤Ôºö 123var myObject = &#123;&#125;;myObject.toString()&quot;[object Object] ÂèØËÆ°ÁÆóÂ±ûÊÄß„ÄÇ[]Á¨¶Âè∑ÂÜÖÈÉ®Â≠òÊîæË°®ËææÂºèÔºå[]Âíåes6‰∏≠ÁöÑsymbolÁªìÂêàÁöÑÊØîËæÉÂ§ö„ÄÇ Â±ûÊÄßÂíåÊñπÊ≥ï ‰ªéÊäÄÊúØËßíÂ∫¶Êù•ËØ¥ÔºåÂáΩÊï∞Ê∞∏Ëøú‰∏ç‰ºö‚ÄúÂ±û‰∫é‚Äù‰∏Ä‰∏™ÂØπË±°„ÄÇÊó†ËÆ∫ËøîÂõûÂÄºÊòØ‰ªÄ‰πàÁ±ªÂûãÔºåÊØèÊ¨°ËÆøÈóÆÂØπË±°ÔºåÈÉΩÂè´ÂÅöÂ±ûÊÄßËÆøÈóÆ„ÄÇ","categories":[{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"}],"tags":[]},{"title":"jsÂØπË±°","slug":"ÂØπË±°","date":"2019-02-05T16:00:00.000Z","updated":"2024-10-16T03:56:51.585Z","comments":true,"path":"2019/02/06/ÂØπË±°/","permalink":"https://justsso1.github.io/2019/02/06/%E5%AF%B9%E8%B1%A1/","excerpt":"","text":"jsÂü∫Á°Ä-ÂØπË±°-Â±ûÊÄßÊèèËø∞Á¨¶ÊÄùËÄÉ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö Jsvar myObject &#x3D; { a:2}; Object.getOwnPropertyDescriptor( myObject, ‚Äúa‚Äù );&#x2F;&#x2F; {&#x2F;&#x2F; value: 2,&#x2F;&#x2F; writable: true,&#x2F;&#x2F; enumerable: true,&#x2F;&#x2F; configurable: true &#x2F;&#x2F; }Object.getOwnPropertyDescriptor()Object.defineProperty()Jsvar myObject &#x3D; {};Object.defineProperty( myObject, ‚Äúa‚Äù, { value: 2, writable: false, &#x2F;&#x2F; ‰∏çÂèØÂÜô! configurable: true, enumerable: true });myObject.a &#x3D; 3;myObject.a; &#x2F;&#x2F; 2configurableÂÆÉÁöÑ‰øÆÊîπÈÉΩÊòØÂçïÂêëÁöÑÔºå‰∏çÂèØÈÄÜËΩ¨ÁöÑenumerablewritable Ê∑∑ÂêàÂØπË±°‚ÄúÁ±ª‚ÄùÁ±ªÁöÑÊú∫Âà∂Á±ªÊûÑÈÄ†ÂáΩÊï∞Â±û‰∫éÁ±ªÔºåËÄå‰∏îÈÄöÂ∏∏ÂíåÁ±ªÂêåÂêç„ÄÇÊ≠§Â§ñÔºåÊûÑÈÄ†ÂáΩÊï∞Â§ßÂ§öÈúÄË¶ÅÁî® new Êù•Ë∞ÉÔºåËøôÊ†∑ËØ≠Ë®ÄÂºïÊìéÊâçÁü•ÈÅì‰Ω†ÊÉ≥Ë¶ÅÊûÑÈÄ†‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÂÆû‰æã„ÄÇ Á±ªÁöÑÁªßÊâøÁà∂Á±ªÂíåÂ≠êÁ±ª","categories":[],"tags":[]},{"title":"‰∏ä‰º†‰∏é‰∏ãËΩΩ","slug":"ÂâçÁ´ØÂøÖÂ§á-‰∏ä‰º†‰∏é‰∏ãËΩΩ","date":"2019-01-23T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2019/01/24/ÂâçÁ´ØÂøÖÂ§á-‰∏ä‰º†‰∏é‰∏ãËΩΩ/","permalink":"https://justsso1.github.io/2019/01/24/%E5%89%8D%E7%AB%AF%E5%BF%85%E5%A4%87-%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD/","excerpt":"","text":"ÂâçÁ´ØÂøÖÂ§á-‰∏ä‰º†‰∏é‰∏ãËΩΩ ÊéòÈáëÊñáÁ´†ÈìæÊé• Koa2 ‰πãÊñá‰ª∂‰∏ä‰º†‰∏ãËΩΩ koa ‰∏≠ÁöÑexamples ÂâçÁ´ØÂéãÁº©ÂõæÁâá ÊÉ≥Êêû‰∏Ä‰∏ãÔºå‰∏çÂêåÊñá‰ª∂‰∏ä‰º†ÁöÑ‰∏çÂêåÂ§ÑÁêÜ„ÄÇÂõæÁâá‰∏ä‰º†Ôºåpdf‰∏ä‰º†„ÄÇÊÄé‰πà‰∏ä‰º†Âà∞Ëá™Â∑±ÁöÑÊúçÂä°Âô®ÔºåÊÄé‰πà‰∏ä‰º†Âà∞‰∏ÉÁâõ‰∫ë‰∏≠„ÄÇ ÊÉ≥Êêû‰∏Ä‰∏ãÔºåÈÄöËøáurl‰∏ãËΩΩÊñá‰ª∂ÔºåÂõæÁâáÊñá‰ª∂ÔºåexcelÊñá‰ª∂Ôºå\bpdfÊñá‰ª∂Âú®ÂâçÁ´ØÈ°µÈù¢Âíånode‰∏≠ÊòØÊÄé‰πàÂ§ÑÁêÜÁöÑ„ÄÇ \bÂú∫ÊôØ1: ant-design\b Upload ÁªÑ‰ª∂‰ΩøÁî®,ÂêéÂè∞‰ΩøÁî®koa2react ‰ª£Á†Å 12345678910111213141516171819202122&lt;Upload name=&quot;image&quot; accept=&#123;&quot;.bmp,.png,.jpeg,.jpg,.gif&quot;&#125; multiple=&#123;true&#125; action=&#123;&#x27;/api/upload?type=image&#x27;&#125; onChange=&#123;info =&gt; &#123; //‰∏ä‰º†‰∏≠„ÄÅÂÆåÊàê„ÄÅÂ§±Ë¥•ÈÉΩ‰ºöË∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞ // console.log(info.file, 39); // info.file.status = uploading done error removed if (info.file.status !== &#x27;uploading&#x27;) &#123; if (info.file.status === &#x27;done&#x27;) &#123; if (info.file.response.code === 200) &#123; message.success(`$&#123;info.file.name&#125; ‰∏ä‰º†ÊàêÂäü`); &#125; &#125; else if (info.file.status === &#x27;error&#x27;) &#123; message.error(`$&#123;info.file.name&#125; $&#123;info.file.response.info&#125;`; &#125; &#125; // console.log(info.event) &#125;&#125;&gt; &lt;Button type=&quot;primary&quot;&gt;&lt;Icon type=&quot;upload&quot;/&gt;‰∏ä‰º†&lt;/Button&gt;&lt;/Upload&gt; koa2‰∏≠ÁöÑ‰ª£Á†ÅÔºö koa2 ‰∏≠‰ΩøÁî®ÁöÑ‰∏≠Èó¥‰ª∂ÊòØkoa-body 1234567app.use(bodyParser(&#123; multipart: true, formidable: &#123; maxFileSize: 200 * 1024 * 1024, //Âçï‰∏™Êñá‰ª∂ÁöÑÊúÄÂ§ßÈôêÂà∂ maxFieldsSize: 200 * 1024 * 1024 //ÊâÄÊúâÊñá‰ª∂ÔºåÊï¥‰∏™Ë°®ÂçïÁöÑÂ§ßÂ∞èÈôêÂà∂\b &#125;&#125;)); 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758//‰∏ä‰º†Á¥†Êùêrouter.post(&#x27;/upload&#x27;, async (ctx, next) =&gt; &#123; // console.log(&#x27;ËøôÈáåÊòØ‰∏ä‰º†Á¥†Êùê‰∏≠ÂøÉ&#x27;); // console.log(ctx.request.files.images, 202); try &#123; //ÂàõÂª∫Êñá‰ª∂ÂèØËØªÊµÅÔºåÊääÊñá‰ª∂Â≠òÂÇ®Âà∞Êú¨Âú∞ let type = ctx.query.type; let file = ctx.request.files[type]; console.log(file); if (file) &#123; let fsread = fs.createReadStream(file.path); //ÂàõÂª∫Êñá‰ª∂ÂèØËØªÊµÅ let ext = file.name.split(&#x27;.&#x27;).pop(); //Ëé∑ÂèñÊñá‰ª∂ÂêéÁºÄ if (file.size &lt;= fileControl[type].size) &#123; if (fileControl[type].accept.indexOf(ext) !== -1) &#123; let uploadPath = path.resolve(__dirname, defaultUploadPath); if (!fs.existsSync(uploadPath)) &#123; mkdirp.sync(uploadPath) &#125; //Êü•ÁúãÊòØÂê¶Â≠òÂú®ÂêåÂêçÊñá‰ª∂ if (fs.existsSync(uploadPath + &#x27;/&#x27; + file.name)) &#123; ctx.response.status = 500; ctx.response.body = &#123; code: 500, info: &#x27;Â≠òÂú®ÂêåÂêçÊñá‰ª∂&#x27; &#125; &#125; else &#123; let fswrite = fs.createWriteStream(uploadPath + &#x27;/&#x27; + file.name); await fsread.pipe(fswrite); ctx.body = &#123; code: 200, info: &#x27;ok&#x27; &#125; &#125; &#125; else &#123; ctx.response.status = 500; ctx.body = &#123; code: 500, info: `Êñá‰ª∂‰ªÖÊîØÊåÅ$&#123;fileControl[type].accept&#125;Ê†ºÂºè` &#125; &#125; &#125; else &#123; ctx.response.status = 500; ctx.body = &#123; code: 500, info: `Êñá‰ª∂‰ΩìÁßØË∂ÖËøá$&#123;fileControl[type].info&#125;` &#125; &#125; &#125; else &#123; ctx.response.status = 500; ctx.body = &#123; code: 500, info: &#x27;Êú™ÊâæÂà∞‰∏ä‰º†Êñá‰ª∂&#x27; &#125; &#125; &#125; catch (e) &#123; console.log(e); &#125;&#125;); Âú∫ÊôØ2: ÂéüÁîü\bjs ‰∏é a Ê†áÁ≠æ‰ΩøÁî®Âú∫ÊôØ3: axios„ÄÅkoa2 ÂÆûÁé∞‰∏ä‰º†\bÂú∫ÊôØ4: ‰∏ä‰º†Âà∞ÂæÆ‰ø°ÂÖ¨‰ºó\bÂπ≥Âè∞12345678910111213141516171819//ÂàõÂª∫Ê∞∏‰πÖÁ¥†Êùêasync function uploadMaterial(access_token, filePath, mediaType) &#123; try &#123; return new Promise((resolve, reject) =&gt; &#123; exec(`curl -F media=@$&#123;filePath&#125; &quot;https://api.weixin.qq.com/cgi-bin/material/add_material?access_token=$&#123;access_token&#125;&amp;type=$&#123;mediaType&#125;&quot; `, (er, result) =&gt; &#123; er &amp;&amp; console.log(er, 346); console.log(result, 347); if (result) &#123; resolve(result) &#125; else &#123; reject(null) &#125; &#125;) &#125;) &#125; catch (e) &#123; console.log(e.message, 130); throw (e) &#125;&#125; Âú∫ÊôØ5: ‰∏ä‰º†Âà∞‰∏ÉÁâõ‰∫ëÁ©∫Èó¥HTML5‰∏≠ÁöÑÊñá‰ª∂‰∏ä‰º†Áü•ËØÜÊñáÁ´†ÈìæÊé•Ôºö&lt;input type=&quot;file&quot;&gt; ÂéüÁîüÁöÑÔºåÂéüÁêÜ‰∏ÄÂÆöË¶Å\b‰ºö ÊúçÂä°Á´ØÂ§ÑÁêÜÊñá‰ª∂Ôºå‰∏ªË¶Å‰ΩøÁî®‚ÄúÊµÅ‚ÄùËØªÂÖ•ÊµÅ„ÄÅÂÜôÂÖ•ÊµÅ„ÄÅÁÆ°ÈÅì","categories":[],"tags":[]},{"title":".gitignoreÊñá‰ª∂‰∫ÜËß£‰∏Ä‰∏ã","slug":"git Â≠¶‰π†-.gitignoreÊñá‰ª∂‰∫ÜËß£‰∏Ä‰∏ãÔºü","date":"2019-01-08T16:00:00.000Z","updated":"2024-10-12T08:40:56.541Z","comments":true,"path":"2019/01/09/git Â≠¶‰π†-.gitignoreÊñá‰ª∂‰∫ÜËß£‰∏Ä‰∏ãÔºü/","permalink":"https://justsso1.github.io/2019/01/09/git%20%E5%AD%A6%E4%B9%A0-.gitignore%E6%96%87%E4%BB%B6%E4%BA%86%E8%A7%A3%E4%B8%80%E4%B8%8B%EF%BC%9F/","excerpt":"","text":".gitignoreÊñá‰ª∂ÈáåÈù¢Â°´ÂÜôÁöÑÊñá‰ª∂ÂêçÔºåÂú®Êèê‰∫§Êó∂ÔºåËøô‰∫õÊñá‰ª∂‰ºöË¢´ÂøΩÁï•Êéâ„ÄÇ.gitignoreÊñá‰ª∂‰∏≠ÈÄöÂ∏∏‰ºöÂÜô Á≥ªÁªüËá™Âä®ÁîüÊàêÁöÑÂûÉÂúæÊñá‰ª∂Âêç„ÄÅ‰øùÂØÜÊÄßÁöÑÊñá‰ª∂„ÄÅËá™Âä®ÁîüÊàêÁöÑÊñá‰ª∂ÊàñÊñá‰ª∂Â§π ÈÄöÂ∏∏‰∏Ä‰∏™git‰ªìÂ∫ì‰∏≠Ôºå‰ºöËá™Âä®ÁîüÊàê.gitignoreÊñá‰ª∂ÔºåËØ•Êñá‰ª∂Êúâ‰∏Ä‰∫õÈªòËÆ§ÁöÑÈÖçÁΩÆ„ÄÇ ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Ê®°ÁâàÁöÑÊñá‰ª∂Ôºö 12345/node_modules.idea/.vscode/.DS_Store/routes/public/uploads/ &#x2F;node_modulesÊñá‰ª∂Â§πÊ≤°ÊúâÂøÖË¶Å‰∏ä‰º†ÔºåÂ§™Â§ßËÄå‰∏îËøòÂèØ‰ª•Ê†πÊçÆpackage.jsonÊñá‰ª∂Ëá™Âä®ÁîüÊàê .vscode&#x2F;vscodeÊñá‰ª∂Â§π‰∏≠ÊúâvsCodeÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÊ≤°ÊúâÂøÖË¶ÅÊèê‰∫§ .DS_Store ÊòØËãπÊûúÁ≥ªÁªüËá™Â∏¶ÁöÑÊñá‰ª∂ &#x2F;router&#x2F;public&#x2F;uploads ÊòØ‰∏ä‰º†ÁöÑÊñá‰ª∂ÔºåÊ≤°ÊúâÂøÖË¶Å‰∏ä‰º†Âà∞‰ªìÂ∫ì","categories":[],"tags":[]},{"title":"React 16Êñ∞ÁâπÊÄß","slug":"reactÂ≠¶‰π†-ReactËøõÈò∂‰πãË∑Ø„ÄêÁ¨îËÆ∞„Äë","date":"2019-01-08T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2019/01/09/reactÂ≠¶‰π†-ReactËøõÈò∂‰πãË∑Ø„ÄêÁ¨îËÆ∞„Äë/","permalink":"https://justsso1.github.io/2019/01/09/react%E5%AD%A6%E4%B9%A0-React%E8%BF%9B%E9%98%B6%E4%B9%8B%E8%B7%AF%E3%80%90%E7%AC%94%E8%AE%B0%E3%80%91/","excerpt":"","text":"React 16 Êñ∞ÁâπÊÄßProtalsÔºàÂÖàÂ§©ÁöÑÔºâ ÂèØ‰ª•ÊääÁªÑ‰ª∂Ê∏≤ÊüìÂà∞ÂΩìÂâçÁªÑ‰ª∂Ê†ëÊÑèÂ§ñÁöÑDOMËäÇÁÇπ‰∏ä„ÄÇÂÖ∏ÂûãÂ∫îÁî®ÊòØÂºπÊ°Ü ReactDOM.createPortal(child, container) ÁªÑ‰ª∂ÈÄö‰ø°Áà∂Â≠êÁªÑ‰ª∂ÈÄö‰ø° props‰ª•ÂèäÂõûË∞ÉÂáΩÊï∞ ÂÖÑÂºüÁªÑ‰ª∂ÈÄö‰ø° Â±ÇÁ∫ß‰∏çÂ§öÔºåÂèØ‰ª•Âêå‰∏Ä‰∏™Áà∂ÁªÑ‰ª∂‰º†ÈÄíprops Â±ÇÁ∫ßÂæàÂ§öÔºå‰ΩøÁî® context ÈÄö‰ø°„ÄÇÂú®Êèê‰æõcontextÁöÑÁªÑ‰ª∂ÂÜÖÊñ∞Â¢û‰∏Ä‰∏™getChildContextÊñπÊ≥ïÔºåËøîÂõûcontextÂØπË±°ÔºåÁÑ∂ÂêéÂú®ÁªÑ‰ª∂ÁöÑchildContextTypesÂ±ûÊÄß‰∏äÂÆö‰πâcontextÂØπË±°ÁöÑÂ±ûÊÄßÁöÑÁ±ªÂûã‰ø°ÊÅØ„ÄÇ È´òÈò∂ÁªÑ‰ª∂ÔºàÁÆÄÁß∞HOCÔºâ‰∏ªË¶ÅÁî®Êù•ÂÆûÁé∞ÁªÑ‰ª∂ÈÄªËæëÁöÑÊäΩË±°ÂíåÂ§çÁî®„ÄÇÈ´òÈò∂ÁªÑ‰ª∂Êé•Êî∂ReactÁªÑ‰ª∂‰Ωú‰∏∫ÂèÇÊï∞ÔºåÂπ∂‰∏îËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑReactÁªÑ‰ª∂ÔºåÈ´òÈò∂ÁªÑ‰ª∂Êú¨Ë¥®‰∏äËÄåÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂπ∂‰∏çÊòØ‰∏Ä‰∏™ÁªÑ‰ª∂ const EnhancedComponent = higherOrderComponent(WrappedComponent) È´òÈò∂ÁªÑ‰ª∂‰∏ªË¶ÅÂäüËÉΩÊòØÂ∞ÅË£ÖÂπ∂ÂàÜÁ¶ªÁªÑ‰ª∂ÁöÑÈÄöÁî®ÈÄªËæëÔºåËÆ©ÈÄöÁî®ÈÄªËæëÂú®ÁªÑ‰ª∂Èó¥Êõ¥Â•ΩÁöÑË¢´Â§çÁî®„ÄÇÈ´òÈò∂ÁªÑ‰ª∂ÁöÑËøôÁßçÂÆûÁé∞ÊñπÂºèÊú¨Ë¥®‰∏äÊòØË£ÖÈ•∞ÁùÄËÆæËÆ°Ê®°Âºè„ÄÇ ÁªßÊâøÂºèÁöÑÁªÑ‰ª∂","categories":[],"tags":[]},{"title":"ÂæÆ‰ø°Ë£ÇÂèòËÆ∞ÂΩï","slug":"ÂæÆ‰ø°ÂºÄÂèë-ÂæÆ‰ø°Ë£ÇÂèòËÆ∞ÂΩï","date":"2019-01-08T16:00:00.000Z","updated":"2024-10-12T08:40:56.549Z","comments":true,"path":"2019/01/09/ÂæÆ‰ø°ÂºÄÂèë-ÂæÆ‰ø°Ë£ÇÂèòËÆ∞ÂΩï/","permalink":"https://justsso1.github.io/2019/01/09/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91-%E5%BE%AE%E4%BF%A1%E8%A3%82%E5%8F%98%E8%AE%B0%E5%BD%95/","excerpt":"","text":"ÂæÆ‰ø°Ë£ÇÂèòËÆ∞ÂΩïÂú∫ÊôØÔºöÂ∑≤ÂÖ≥Ê≥®Áî®Êà∑ÂõûÂ§çÂÖ≥ÈîÆÂ≠óËé∑ÂèñËá™Â∑±ÁöÑ‰∏ìÂ±ûÊµ∑Êä•ÔºåÈÇÄËØ∑‰ªñ‰∫∫Êâ´Á†ÅÊµ∑Êä•ÔºåÂπ∂ÂÖ≥Ê≥®Êú¨ÂÖ¨‰ºóÂè∑Ôºå‰ª•ËææÂà∞ÂæÆ‰ø°Á≤â‰∏ùÂ¢ûÈïøÁöÑÁõÆÁöÑ„ÄÇ ËøõË°åÂæÆ‰ø°ÂºÄÂèëÔºåÈ¶ñÂÖàÊòØÔºåÂü∫Êú¨ÂºÄÂèë‰∏≠ÁöÑÊúçÂä°Âô®ÈÖçÁΩÆÔºåÂª∫ËÆÆÂ§ßÂÆ∂ÂèÇËÄÉÂÖ•Èó®ÊåáÂºïÔºåÂæàÁÆÄÂçïÔºåÂèÇÁÖßÁùÄËÆæÁΩÆ‰∏Ä‰∏ãÂæàÂø´Â∞±Â•Ω‰∫Ü„ÄÇ‰∏çËøáÊúÄÂêéË¶ÅÁÇπÂáª‰∏Ä‰∏ãÂè≥‰∏äËßíÁöÑ‚ÄúÂêØÁî®‚ÄùÊåâÈíÆÔºåÂê¶ÂàôÔºåÂæÆ‰ø°ÊúçÂä°Âô®Êé•Âèó‰∏çÂà∞Êàë‰ª¨Ëá™Â∑±ÁöÑÊúçÂä°Âô®ÁöÑÂìçÂ∫îÔºåÂØºËá¥Êàë‰ª¨ÁöÑÊúçÂä°Âô®ÁöÑurlËÆæÁΩÆ‰∏çÊàêÂäü„ÄÇÊàêÂäü‰πãÂêéÁöÑÊà™ÂõæÂ¶Ç‰∏ãÔºö ÁÑ∂ÂêéËÆæÁΩÆÂ•Ωaccess_token , ÂæÆ‰ø°ÂºÄÂèëÁ¶ª‰∏çÂºÄaccess_tokenÁöÑÈ™åËØÅÔºåÊâçËÉΩ‰ΩøÁî®ÂæÆ‰ø°Êèê‰æõÁöÑÂêÑÁßçÊé•Âè£„ÄÇÂæÆ‰ø°ÊúçÂä°Âô®(ÂÖ¨‰ºóÂπ≥Âè∞)ÔºåËá™Â∑±ÁöÑÊúçÂä°Âô®ÔºåËá™Â∑±ÁöÑÈ°πÁõÆÂâçÂè∞ÁöÑÂÖ≥Á≥ªÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ÈÖçÁΩÆÂ•ΩÁéØÂ¢É‰πãÂêéÔºåÂèØ‰ª•ÂºÄÂºÄÂøÉÂøÉÁöÑÂºÄÂèëÂï¶üòÑ Á¨¨‰∏ÄÊ≠•ÔºåÊé•ÂèóÂà∞ÂÖ≥Ê≥®Áî®Êà∑ÁöÑËØ∑Ê±Ç„ÄÇÂ§ÑÁêÜÁî®Êà∑ÁöÑËØ∑Ê±ÇÁöÑÈÄªËæëÈÉΩÂú®Êú¨ÊúçÂä°Âô®‰∏≠ËøõË°åÔºåÈÇ£‰πàÂÖàË¶ÅËß£ÂÜ≥ÁöÑ‰∫ãÊÉÖÊòØÊÄéÊ†∑ËÆ©ÊúçÂä°Âô®Êé•Êî∂Âà∞Áî®Êà∑ÁöÑÊ∂àÊÅØÂë¢ÔºüÊàëÁöÑÂêéÂè∞‰ΩøÁî®ÁöÑÊòØkoa2Êê≠Âª∫ÁöÑÔºåÊé•ÂèóÂæÆ‰ø°ÊúçÂä°Âô®ÂèëÊù•ÁöÑÊ∂àÊÅØÈÉΩÊòØxmlÊ†ºÂºèÁöÑ,‰ΩøÁî®parsePostDataÂ∞±ÂèØ‰ª•ÂæóÂà∞ÂÆåÊï¥ÁöÑxmlÊï∞ÊçÆ‰∫Ü„ÄÇ 123456789101112131415161718// Ëß£Êûê‰∏ä‰∏ãÊñáÈáå node ÂéüÁîüËØ∑Ê±ÇÁöÑ POST ÂèÇÊï∞function parsePostData(ctx) &#123; return new Promise((resovle, reject) =&gt; &#123; try &#123; let postData = &quot;&quot;; // ctx.req ÊòØÂéüÁîü HTTP ËØ∑Ê±ÇÂØπË±° ctx.req.on(&quot;data&quot;, (data) =&gt; &#123; postData += data; &#125;); ctx.req.on(&quot;end&quot;, () =&gt; &#123; resovle(postData); &#125;) &#125; catch (err) &#123; reject(err); &#125; &#125;);&#125; Êé•ÂèóÊñáÊú¨Ê∂àÊÅØÂΩìÁî®Êà∑Âú®ÂÖ¨‰ºóÂè∑ÁöÑÂØπËØùÊ°Ü\bÂèëÈÄÅ‰ªª‰ΩïÊ∂àÊÅØÊó∂ÔºåÊàë‰ª¨ÈÖçÁΩÆÁöÑÊúçÂä°Âô®ÈÉΩ‰ºöÊî∂Âà∞Êù•Ëá™ÂæÆ‰ø°ÊúçÂä°Âô®ÁöÑxmlÊ∂àÊÅØ„ÄÇ 123456789&lt;xml&gt; &lt;ToUserName&gt;&lt;![CDATA[gh_69b9829760d6]]&gt;&lt;/ToUserName&gt; &lt;FromUserName&gt;&lt;![CDATA[o92L_1dye9BhzOpQEYARNLSgg0BM]]&gt;&lt;/FromUserName&gt; &lt;CreateTime&gt;1538397268&lt;/CreateTime&gt; &lt;MsgType&gt;&lt;![CDATA[text]]&gt;&lt;/MsgType&gt; &lt;Content&gt;&lt;![CDATA[ÊâòÁ¶èÂ§áËÄÉ]]&gt;&lt;/Content&gt; &lt;MsgId&gt;6607365954744739874&lt;/MsgId&gt;&lt;/xml&gt; Ëß£ÈáäÔºöcreateTime ÊòØÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ËÆ∞ÂΩïÁ≤â‰∏ùÂèëÈÄÅËØ•Ê∂àÊÅØÁöÑÂÖ∑‰ΩìÊó∂Èó¥ text: Áî®‰∫éÊ†áËÆ∞ËØ•xml ÊòØÊñáÊú¨Ê∂àÊÅØÔºå‰∏ÄËà¨Áî®‰∫éÂå∫Âà´Âà§Êñ≠ ÊâòÁ¶èÂ§áËÄÉ: ËØ¥ÊòéËØ•Á≤â‰∏ùÂèëÁªôÂÖ¨‰ºóÂè∑ÁöÑÂÖ∑‰ΩìÂÜÖÂÆπÊòØÊâòÁ¶èÂ§áËÄÉ MsgId: ÊòØÂÖ¨‰ºóÂπ≥Âè∞‰∏∫ËÆ∞ÂΩïËØÜÂà´ËØ•Ê∂àÊÅØÁöÑ‰∏Ä‰∏™Ê†áËÆ∞Êï∞ÂÄº, ÂæÆ‰ø°ÂêéÂè∞Á≥ªÁªüËá™Âä®‰∫ßÁîü ‰∏∫‰∫ÜÊñπ‰æøÁöÑËß£ÊûêXMLÂÜÖÂÆπÔºåÊàë‰ΩøÁî®‰∫Üxml2jsËøô‰∏™ÂåÖÔºåÂÜô‰∫Ü‰∏Ä‰∏™ÂáΩÊï∞Êù•Ëß£ÊûêÊé•ÂèóÂà∞ÁöÑxmlÊï∞ÊçÆ„ÄÇ 12345678910111213const &#123;parseString&#125; = require(&#x27;xml2js&#x27;);function parseXML(xml) &#123; try &#123; return new Promise((resolve, reject) =&gt; &#123; parseString(xml, (err, result) =&gt; &#123; err &amp;&amp; console.log(err); resolve(result); &#125;) &#125;) &#125;catch (e) &#123; throw (e); &#125;&#125; ÂΩìÂà§Êñ≠ÂæóÂà∞Áî®Êà∑ÂèëÊù•‰∫ÜÂÖ≥ÈîÆÂ≠ó‰πãÂêéÔºåÂ∞±Ë¶ÅÂõûÂ§çÁî®Êà∑‰∏ÄÊÆµÊñáÂ≠óÂíå‰∏ÄÂº†Êµ∑Êä•ÔºåÊàë‰ª¨ÂÖàÂÅöÂà∞ÂõûÂ§çÊñáÂ≠ó„ÄÇ Ë¢´Âä®ÂõûÂ§çÊñáÊú¨Ê∂àÊÅØËøô‰∫õÂº∫ÁÉàÊé®ËçêÂÖ•Èó®ÊåáÂºïhttps://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id&#x3D;mp1472017492_58YV5","categories":[{"name":"ÂæÆ‰ø°ÂºÄÂèë","slug":"ÂæÆ‰ø°ÂºÄÂèë","permalink":"https://justsso1.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"call apply bind","slug":"call apply bind","date":"2018-11-17T16:00:00.000Z","updated":"2024-10-12T08:40:56.538Z","comments":true,"path":"2018/11/18/call apply bind/","permalink":"https://justsso1.github.io/2018/11/18/call%20apply%20bind/","excerpt":"","text":"call()Âíåapply()‰ªãÁªçËøô‰∏§‰∏™ÊñπÊ≥ïÈÉΩÊòØÂáΩÊï∞ÂØπË±°ÁöÑÊñπÊ≥ïÔºåÈúÄË¶ÅÈÄöËøáÂáΩÊï∞ÂØπË±°Êù•Ë∞ÉÁî®„ÄÇ ÂΩìÂáΩÊï∞Ë∞ÉÁî®call()Âíåapply()Êó∂ÔºåÂáΩÊï∞ÈÉΩ‰ºöÁ´ãÂç≥ÊâßË°å„ÄÇ ÈÉΩÂèØ‰ª•Áî®Êù•ÊîπÂèòÂáΩÊï∞ÁöÑthisÂØπË±°ÁöÑÊåáÂêë„ÄÇ Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÈÉΩÊòØthisË¶ÅÊåáÂêëÁöÑÂØπË±°ÔºàÂáΩÊï∞ÊâßË°åÊó∂ÔºåthisÂ∞ÜÊåáÂêëËøô‰∏™ÂØπË±°ÔºâÔºåÂêéÁª≠ÂèÇÊï∞Áî®Êù•‰º†ÂÆûÂèÇ„ÄÇ ÊòæÂºèÁªëÂÆöthisJSÊèê‰æõÁöÑÁªùÂ§ßÂ§öÊï∞ÂáΩÊï∞‰ª•ÂèäÊàë‰ª¨Ëá™Â∑±ÂàõÂª∫ÁöÑÊâÄÊúâÂáΩÊï∞ÔºåÈÉΩÂèØ‰ª•‰ΩøÁî®call ÂíåapplyÊñπÊ≥ï„ÄÇ ÂÆÉ‰ª¨ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™ÂØπË±°„ÄÇÂõ†‰∏∫‰Ω†ÂèØ‰ª•Áõ¥Êé•ÊåáÂÆö this ÁªëÂÆöÁöÑÂØπË±°ÔºåÂõ†Ê≠§Êàë‰ª¨Áß∞‰πã‰∏∫ÊòæÂºèÁªëÂÆö„ÄÇ ‰æã1Ôºö function foo() { console.log(this.a);} var obj &#x3D; { a: 2}; &#x2F;&#x2F; Â∞Ü this ÊåáÂêë objfoo.apply(obj); &#x2F;&#x2F;ÊâìÂç∞ÁªìÊûúÔºö2Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÁöÑ‰º†ÈÄí1„ÄÅthisObj‰∏ç‰º†ÊàñËÄÖ‰∏∫null„ÄÅundefinedÊó∂ÔºåÂáΩÊï∞‰∏≠ÁöÑthis‰ºöÊåáÂêëwindowÂØπË±°ÔºàÈùû‰∏•Ê†ºÊ®°ÂºèÔºâ„ÄÇ 2„ÄÅ‰º†ÈÄí‰∏Ä‰∏™Âà´ÁöÑÂáΩÊï∞ÂêçÊó∂ÔºåÂáΩÊï∞‰∏≠ÁöÑthisÂ∞ÜÊåáÂêëËøô‰∏™ÂáΩÊï∞ÁöÑÂºïÁî®„ÄÇ 3„ÄÅ‰º†ÈÄíÁöÑÂÄº‰∏∫Êï∞Â≠ó„ÄÅÂ∏ÉÂ∞îÂÄº„ÄÅÂ≠óÁ¨¶‰∏≤Êó∂Ôºåthis‰ºöÊåáÂêëËøô‰∫õÂü∫Êú¨Á±ªÂûãÁöÑÂåÖË£ÖÂØπË±°Number„ÄÅBoolean„ÄÅString„ÄÇ 4„ÄÅ‰º†ÈÄí‰∏Ä‰∏™ÂØπË±°Êó∂ÔºåÂáΩÊï∞‰∏≠ÁöÑthisÂàôÊåáÂêë‰º†ÈÄíÁöÑËøô‰∏™ÂØπË±°„ÄÇ call()Âíåapply()ÁöÑÂå∫Âà´call()Âíåapply()ÊñπÊ≥ïÈÉΩÂèØ‰ª•Â∞ÜÂÆûÂèÇÂú®ÂØπË±°‰πãÂêé‰æùÊ¨°‰º†ÈÄíÔºå‰ΩÜÊòØapply()ÊñπÊ≥ïÈúÄË¶ÅÂ∞ÜÂÆûÂèÇÂ∞ÅË£ÖÂà∞‰∏Ä‰∏™Êï∞ÁªÑ‰∏≠Áªü‰∏Ä‰º†ÈÄíÔºàÂç≥‰ΩøÂè™ÊúâÂÆûÂèÇÂè™Êúâ‰∏Ä‰∏™Ôºå‰πüË¶ÅÊîæÂà∞Êï∞ÁªÑ‰∏≠Ôºâ„ÄÇ ÊØîÂ¶ÇÈíàÂØπ‰∏ãÈù¢ËøôÊ†∑ÁöÑ‰ª£Á†ÅÔºö var persion1 &#x3D; { name: ‚ÄúÂ∞èÁéã‚Äù, gender: ‚ÄúÁî∑‚Äù, age: 24, say: function (school, grade) { alert(this.name + ‚Äú , ‚Äú + this.gender + ‚Äú ,‰ªäÂπ¥‚Äù + this.age + ‚Äú ,Âú®‚Äù + school + ‚Äú‰∏ä‚Äù + grade); }}var person2 &#x3D; { name: ‚ÄúÂ∞èÁ∫¢‚Äù, gender: ‚ÄúÂ•≥‚Äù, age: 18}Â¶ÇÊûúÊòØÈÄöËøácallÁöÑÂèÇÊï∞ËøõË°å‰º†ÂèÇÔºåÊòØËøôÊ†∑ÁöÑÔºö persion1.say.call(persion2, ‚ÄúÂÆûÈ™åÂ∞èÂ≠¶‚Äù, ‚ÄúÂÖ≠Âπ¥Á∫ß‚Äù);Â¶ÇÊûúÊòØÈÄöËøáapplyÁöÑÂèÇÊï∞ËøõË°å‰º†ÂèÇÔºåÊòØËøôÊ†∑ÁöÑÔºö persion1.say.apply(persion2, [‚ÄúÂÆûÈ™åÂ∞èÂ≠¶‚Äù, ‚ÄúÂÖ≠Âπ¥Á∫ß‚Äù]);ÁúãÂà∞Âå∫Âà´‰∫ÜÂêóÔºåcallÂêéÈù¢ÁöÑÂÆûÂèÇ‰∏ésayÊñπÊ≥ï‰∏≠ÊòØ‰∏Ä‰∏ÄÂØπÂ∫îÁöÑÔºåËÄåapply‰º†ÂÆûÂèÇÊó∂ÔºåË¶ÅÂ∞ÅË£ÖÊàê‰∏Ä‰∏™Êï∞ÁªÑÔºåÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†ÊòØÂíåsayÊñπÊ≥ï‰∏≠‰∏Ä‰∏ÄÂØπÂ∫îÁöÑÔºåËøôÂ∞±ÊòØ‰∏§ËÄÖÊúÄÂ§ßÁöÑÂå∫Âà´„ÄÇ call()Âíåapply()ÁöÑ‰ΩúÁî®ÊîπÂèòthisÁöÑÊåáÂêë ÂÆûÁé∞ÁªßÊâø„ÄÇFather.call(this) bind()ÈÉΩËÉΩÊîπÂèòthisÁöÑÊåáÂêë call()&#x2F;apply()ÊòØÁ´ãÂç≥Ë∞ÉÁî®ÂáΩÊï∞ bind()ÊòØÂ∞ÜÂáΩÊï∞ËøîÂõûÔºåÂõ†Ê≠§ÂêéÈù¢ËøòÈúÄË¶ÅÂä†()ÊâçËÉΩË∞ÉÁî®„ÄÇ bind()‰º†ÂèÇÁöÑÊñπÂºè‰∏écall()Áõ∏Âêå„ÄÇ","categories":[],"tags":[]},{"title":"create react appËÑöÊâãÊû∂","slug":"reactÂ≠¶‰π†-create react app ËÑöÊâãÊû∂","date":"2018-11-09T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2018/11/10/reactÂ≠¶‰π†-create react app ËÑöÊâãÊû∂/","permalink":"https://justsso1.github.io/2018/11/10/react%E5%AD%A6%E4%B9%A0-create%20react%20app%20%E8%84%9A%E6%89%8B%E6%9E%B6/","excerpt":"","text":"ÂÖ•Èó®Êõ¥Êñ∞Âà∞Êñ∞ÁâàÊú¨create-react-appË¢´ÂàÜÊàê‰∏§‰∏™ÂåÖ„ÄÇ create-react-app ÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑÂëΩ‰ª§Ë°åÂåÖÔºåÁî®Êù•ÂàõÂª∫Êñ∞ÁöÑÈ°πÁõÆ react-scripts ÊòØ‰∏Ä‰∏™Êñ∞ÂàõÂª∫ÁöÑÈ°πÁõÆ‰∏≠ÁöÑÂºÄÂèë‰æùËµñ ‰Ω†Âá†‰πé\b‰ªéÊù•‰∏çÈúÄË¶ÅÊõ¥Êñ∞create-react-appÊú¨Ë∫´ÔºåÂÆÉÂßîÊâòÊâÄÊúâÈÖçÁΩÆÁªôreact-scripts ÂΩì‰Ω†ËøêË°åcreate-react-appÊó∂ÔºåÂÆÉÊÄªÊòØÁî®ÊúÄÊñ∞ÁâàÊú¨ÁöÑreact-scripts ÂàõÂª∫È°πÁõÆ„ÄÇÊâÄ‰ª•Ôºå‰Ω†\bÂ∞ÜËá™Âä®ÁöÑÂú®Êñ∞ÂàõÂª∫ÁöÑapp‰∏≠‰ΩøÁî®Êñ∞ÁöÑÁâπÊÄß„ÄÇ Â∞ÜÂ∑≤ÊúâÁöÑÈ°πÁõÆÊõ¥Êñ∞Âà∞Êñ∞ÁâàÊú¨ÁöÑreact-scripts,ÊâìÂºÄ‰Ω†Êñá‰ª∂ÁõÆÂΩï\b‰∏≠ÁöÑpackage.json,ËøÅÁßªÂà∞Êñ∞ÁöÑÁâàÊú¨„ÄÇ ÂºÄÂèëËÆæÁΩÆÁºñËæëÂô®Â¶ÇÊûúÊ≠£Á°ÆÁöÑÈÖçÁΩÆÔºåcreate-react-app ÈôÑÂ∏¶‰∫ÜÂæàÂ§öÊîπÂñÑÁºñËæë‰ΩìÈ™åÁöÑÂ∑•ÂÖ∑„ÄÇËøôÈáåÊòØÂá†Êù°ÊúÄÂ§ßÂåñÁîü‰∫ßÂäõÁöÑÊäÄÂ∑ßÔºö ËØ≠Ê≥ïÈ´ò‰∫Æ\bdebugÁõÆÂâçÂè™ÊúâVSÂíåwebStormÊîØÊåÅÂà∫ÂäüËÉΩ„ÄÇ Visual Studio CodeÂíåWebStormÊîØÊåÅ‰ΩøÁî®Create React AppÂºÄÁÆ±Âç≥Áî®ÁöÑË∞ÉËØï„ÄÇËøô‰ΩøÊÇ®‰Ωú‰∏∫ÂºÄÂèë‰∫∫ÂëòÂèØ‰ª•Âú®‰∏çÁ¶ªÂºÄÁºñËæëÂô®ÁöÑÊÉÖÂÜµ‰∏ãÁºñÂÜôÂíåË∞ÉËØïReact‰ª£Á†ÅÔºåÊúÄÈáçË¶ÅÁöÑÊòØÔºåÂÆÉ‰ΩøÊÇ®ËÉΩÂ§üÊã•ÊúâËøûÁª≠ÂºÄÂèëÂ∑•‰ΩúÊµÅÔºåÂÖ∂‰∏≠‰∏ä‰∏ãÊñáÂàáÊç¢ÊúÄÂ∞èÔºåÂõ†‰∏∫ÊÇ®‰∏çÂøÖÂú®Â∑•ÂÖ∑‰πãÈó¥ÂàáÊç¢„ÄÇ ÂàÜÁ¶ªÁä∂ÊÄÅ ÂºÄÂèëÁªÑ‰ª∂ÂàÜÊûêÊâìÂåÖ‰ΩìÁßØsource-map-explorer‰ΩøÁî®source maps ÂàÜÊûêjavascriptÂåÖÔºåËøôÂ∏ÆÂä©‰Ω†ÁêÜËß£‰ª£Á†ÅËÜ®ËÉÄÁöÑÊù•Ê∫ê„ÄÇ npm install --save source-map-explorer Âú®package.json‰∏≠Â¢ûÂä†‰∏ÄË°å ‚Äúscripts‚Äù: &#123; &quot;analyze&quot;: &quot;source-map-explorer build/static/js/main.*&quot; &#125;3. ÊâßË°åÊâìÂåÖÂëΩ‰ª§ÂíåÂàÜÊûê ÂëΩ‰ª§ npm run build npm run analyze ÂºÄÂèë‰∏≠‰ΩøÁî®https‰Ω†ÂèØËÉΩÈúÄË¶ÅÂºÄÂèëÊúçÂä°Âô®ÈÄöËøáhttpsÊù•Êèê‰æõÈ°µÈù¢„ÄÇ‰∏Ä‰∏™ÁâπÊÆäÁöÑ‰æãÂ≠êÊòØÔºåÂΩìapiÊúçÂä°Âô®Êú¨Ë∫´ÊòØhttpsÊúçÂä°Êó∂Ôºå‰ΩøÁî®‰ª£ÁêÜÂäüËÉΩÂ∞ÜËØ∑Ê±Ç‰ª£ÁêÜÂà∞apiÊúçÂä°Âô®ÔºåËøôÂèØËÉΩÈùûÂ∏∏ÊúâÁî®„ÄÇ \bWindows (cmd.exe) set HTTPS=true&amp;&amp; npm start Windows (Powershell) ($env:HTTPS = &quot;\btrue&quot;) -add (npm start)Linux, macOS(Bash) HTTPS=true npm start ËØ∑Ê≥®ÊÑèÔºåÊúçÂä°Âô®Â∞Ü‰ΩøÁî®Ëá™Á≠æÂêçËØÅ‰π¶ÔºåÂõ†Ê≠§ÊÇ®ÁöÑWebÊµèËßàÂô®Âú®ËÆøÈóÆÈ°µÈù¢Êó∂Âá†‰πéËÇØÂÆö‰ºöÊòæÁ§∫Ë≠¶Âëä„ÄÇ Style and AssetsËøô‰∏™È°πÁõÆ\bËÆæÁΩÆ‰ΩøÁî®webpackÂ§ÑÁêÜÂêÑÁßçËµÑ‰∫ßÔºåwebpackÊèê‰æõ‰∫Ü‰∏ÄÁßçË∂ÖË∂ä\bJavascriptÁöÑËá™ÂÆö‰πâÊñπÂºèÁöÑÊâ©Â±ïÊ¶ÇÂøµimport„ÄÇË°®Á§∫jsÊñá‰ª∂‰æùËµñ‰∏Ä‰∏™cssÊñá‰ª∂Ôºå‰Ω†ÈúÄË¶Åimport the css from the javascript file. import ÂºïÂÖ• Ê∑ªÂä†cssÊ®°ÂùócssÊñá‰ª∂[name].module.css‰∏∫Êâ©Â±ïÔºåÂàôÂºÄÂêØ‰∫Ücss Ê®°Âùó„ÄÇcssÊ®°Âùó‰Ωø‰Ω†Âú®‰∏çÂêåÁöÑÊñá‰ª∂‰∏≠‰ΩøÁî®Áõ∏ÂêåclassÂêçÂ≠óÔºå‰πü‰∏ç‰ºöÊä•ÈîôÔºå‰∏ç‰ºöÊúâÂëΩÂêçÂÜ≤Á™Å„ÄÇ ‰æãÂ≠êÔºöButton.module.css 1234Button.module.css.error &#123; background-color: red;&#125; another-stylesheet.css 123.error &#123; color: red;&#125; Button.js 12345678910import React, &#123; Component &#125; from &#x27;react&#x27;;import styles from &#x27;./Button.module.css&#x27;; // Import css modules stylesheet as stylesimport &#x27;./another-stylesheet.css&#x27;; // Import regular stylesheetclass Button extends Component &#123; render() &#123; // reference as a js object return &lt;button className=&#123;styles.error&#125;&gt;Error Button&lt;/button&gt;; &#125;&#125; buttonÁúüÊ≠£ÁöÑÁ±ªÂêçÊòØ .Button_error__1gR1K Â¢ûÂä†SASS Ê†∑Âºènpm install node-sass --save Êñá‰ª∂‰ºöË¢´Ëá™Âä®ÁºñËØëÁöÑÔºåÂ¶ÇÊûúË¢´ÂºïÂÖ•ÁöÑÊñá‰ª∂ÊòéÊãìÂ±ïÊòØ.scssÊàñËÄÖ.sass sassËøòÊòØÂèØ‰ª•Ëá™ÂÆö‰πâÂèòÈáèÔºå‰ΩøÁî®@import Êù•ÂºïÂÖ•Êñá‰ª∂ post-processing CSSËá™Âä®Ê∑ªÂä†\bÊµèËßàÂô®ÂâçÁºÄ Ê∑ªÂä†ÂõæÂÉèÔºåÂ≠ó‰ΩìÂíåÊñá‰ª∂‰ΩøÁî® import ÂºïÂÖ• .bmp .gif .jpeg .png ÔºåÂ§ßÂ∞èÂ∞è‰∫é10000Â≠óËäÇÁöÑÂõæÂÉèÂ∞ÜËøîÂõûÊï∞ÊçÆuri, svg Êñá‰ª∂ÂèØ‰ª•Áõ¥Êé•Ë¢´ÂØºÂÖ•‰Ωú‰∏∫ReactÁªÑ‰ª∂„ÄÇ 1234567import &#123; ReactComponent as Logo &#125; from &#x27;./logo.svg&#x27;;const App = () =&gt; ( &lt;div&gt; &#123;/* Logo is an actual React component */&#125; &lt;Logo /&gt; &lt;/div&gt;); ‰ΩøÁî®public \bÊñá‰ª∂Â§πÂèØ‰ª•‰øÆÊîπpublick\bÊñá‰ª∂Â§π‰∏ãÁöÑhtmlÊñá‰ª∂ÔºåÊØîÂ¶ÇËÆæÁΩÆÈ°µÈù¢Ê†áÈ¢òÔºå&lt;script&gt;Ê†áÁ≠æÂú®ÊâìÂåÖÁöÑÁ®ãÂ∫è‰∏≠‰ºöËá™Âä®ÁîüÊàêÂπ∂Ê∑ªÂä†Âà∞‰ª£Á†Å‰∏≠„ÄÇ ‰ΩøÁî®\b importÁöÑÂ•ΩÂ§ÑÔºö scriptÂíåstylesheetsË¢´Áº©Â∞èÂíåÊâìÂåÖÊù•ÂáèÂ∞ëÈ¢ùÂ§ñÁöÑÁΩëÁªúËØ∑Ê±Ç Áº∫Â∞ëÊñá‰ª∂‰ºöÂØºËá¥ÁºñËØëÈîôËØØÔºåËÄå‰∏çÊòØ4040ÈîôËØØ ÁªìÊûúÊñá‰ª∂ÂêçÂåÖÂê´ÂÜÖÂÆπÂìàÂ∏åÔºåÂõ†Ê≠§ÊÇ®Êó†ÈúÄÊãÖÂøÉÊµèËßàÂô®ÁºìÂ≠òÊóßÁâàÊú¨ publicÊñá‰ª∂‰∏ãÁöÑÂÜÖÂÆπ‰∏ç‰ºöË¢´webpackÊâìÂåÖÁöÑÔºåpublicÊñá‰ª∂Â§π‰∏ãÁöÑËµÑÊ∫êÊòØ‰ºöË¢´Â§çÂà∂Âà∞ÊûÑÂª∫Êñá‰ª∂Â§π‰∏≠ÁöÑÔºåË¶ÅÂºïÁî®publicÊñá‰ª∂Â§π‰∏≠ÁöÑËµÑÊ∫êÔºåÈúÄË¶Å‰ΩøÁî®‰∏Ä‰∏™Âêç‰∏∫ÁöÑÁâπÊÆäÂèòÈáèPUBLIC_URL &lt;link rel=&quot;shortcut icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot;&gt; ÂΩìËøêË°åÊó∂npm run buildÔºåCreate React AppÂ∞ÜÊõøÊç¢%PUBLIC_URL%‰∏∫Ê≠£Á°ÆÁöÑÁªùÂØπË∑ØÂæÑ‰ªÄ‰πàÊó∂ÂÄô‰ΩøÁî®publicÊñá‰ª∂Â§π ÊÇ®ÈúÄË¶ÅÂú®ÊûÑÂª∫ËæìÂá∫‰∏≠ÂÖ∑ÊúâÁâπÂÆöÂêçÁß∞ÁöÑÊñá‰ª∂Ôºå‰æãÂ¶Çmanifest.webmanifest ÔºàÂéüÂõ†ÂèØËÉΩÊòØÔºöwebpackÂØπÂÆÉÊó†Ê≥ïÊâìÂåÖÔºâ ÊÇ®ÊúâÊï∞ÂçÉ‰∏™ÂõæÂÉèÔºåÈúÄË¶ÅÂä®ÊÄÅÂºïÂÖ•‰ªñ‰ª¨ÁöÑË∑ØÂæÑ ÔºàÂéüÂõ†ÂèØËÉΩÊòØÔºöÂáèÂ∞ëimportÂ∏¶Êù•ÁöÑÁºñËØëÊàêÊú¨Ôºâ Â∏åÊúõÂú®\bÊâìÂåÖ‰ª£Á†Å‰∏≠ÂåÖÂê´‰∏Ä‰∏™Â∞èÁöÑËÑöÊú¨ Êúâ‰∏Ä‰∫õÂ∫ìÂèØËÉΩÂíåwebpackÊúâÂÜ≤Á™ÅÔºå‰Ω†Ê≤°ÊúâÂà´ÁöÑÈÄâÊã©Âè™ËÉΩÁî®scriptÊ†áÁ≠æÂºïÂÖ• Â¶ÇÊûú‰ΩøÁî®script Ê†áÁ≠æÂºïÂÖ•ÁöÑËØùÔºå\bÊòØÂÖ®Â±ÄÂèòÈáè ‰ª£Á†ÅÊãÜÂàÜimport()Âä®ÊÄÅÂºïÂÖ•ÔºåËøõË°å‰ª£Á†ÅÂàÜÂâ≤„ÄÇimport()ÂáΩÊï∞ÁöÑÂΩ¢ÂºèÂ∞ÜÊ®°ÂùóÂêçÁß∞‰Ωú‰∏∫ÂèÇÊï∞Âπ∂ËøîÂõû‰∏Ä‰∏™PromiseÊÄªÊòØËß£Êûê‰∏∫Ê®°ÂùóÁöÑÂêçÁß∞Á©∫Èó¥ÂØπË±°ÁöÑÂΩ¢Âºè„ÄÇ‰ΩøÁî®reactË∑ØÁî±ËøõË°å‰ª£Á†ÅÊãÜÂàÜ [!https://serverless-stack.com/chapters/code-splitting-in-create-react-app.html] ÊûÑÂª∫‰Ω†ÁöÑAppÂÆâË£Ö‰æùËµñÁîüÊàêÁöÑÈ°πÁõÆÂåÖÊã¨reactÂíåreact dom ‰Ωú‰∏∫‰æùËµñÔºåÂÆÉËøòÂåÖÊã¨create-react-app Áî®‰ΩúÂºÄÂèë‰æùËµñÈ°πÁöÑÊ§ÖÂ≠êËÑöÊú¨„ÄÇÂÆÉËøòÈúÄË¶ÅÂÆâË£ÖÂÖ∂‰ªñ‰æùËµñÔºö 1npm install --save react-router-dom ÂØºÂÖ•ÁªÑ‰ª∂\bÁî±‰∫éWebpackÔºåËØ•È°πÁõÆËÆæÁΩÆÊîØÊåÅES6Ê®°Âùó„ÄÇËôΩÁÑ∂‰Ω†‰ªçÁÑ∂ÂèØ‰ª•‰ΩøÁî®require()Âíåmodule.exportsÔºåÊàë‰ª¨ÈºìÂä±ÊÇ®‰ΩøÁî®importÂíåexportÊõø‰ª£„ÄÇ ‰∏Ä‰∏™Êñá‰ª∂ÊúÄÂ§ö\bÂè™Êúâ‰∏Ä‰∏™ÈªòËÆ§ÂØºÂá∫ÂíåËÆ∏Â§öÊúâÂêçÁöÑexports ‰ΩøÁî®ÂÖ®Â±ÄÂèòÈáèÂèØ‰ª•ÈÄöËøá‰ªéwindowÂØπË±°‰∏≠ÊòæÂºèËØªÂèñÂÖ®Â±ÄÂèòÈáèÊù•ÈÅøÂÖçlinter\bË≠¶ÂëäÔºåÂõ†‰∏∫ linterÁúã‰∏çÂà∞ÂèòÈáèÁöÑÂÆö‰πâ 1const $ = window.$; Â¢ûÂä†Bootstrapnpm install --save reactstrap bootstrap@4 Âú®src/index.jsÊñá‰ª∂ÂºÄÂ§¥ÂºïÂÖ•bootstrap cssÊñá‰ª∂ÔºåÂíåÂèØÈÄâÁöÑbootstrap ‰∏ªÈ¢ò import &#39;bootstrap/dist/css/bootstrap.css&#39;; Âú®src/App.jsÊñá‰ª∂Ê¥ªËá™ÂÆö‰πâÊñá‰ª∂‰∏≠ÂØºÂÖ•ÊâÄÈúÄÁöÑreactstrap ÁªÑ‰ª∂ import &#123; Button &#125; from &#39;reactstrap&#39;; Â¢ûÂä†Flownpm install --save flow-bin ÂÆÉÊòØÂàÜÊûêÊâìÂåÖ‰πãÂêéÁöÑÂåÖ‰∏≠ÂêÑ‰∏™Ê®°ÂùóÁöÑ‰ΩìÁßØÂ§ßÂ∞èÁöÑ","categories":[],"tags":[]},{"title":"Ëß£ÂÜ≥react‰∏≠Âá∫Áé∞invalid host headerÈóÆÈ¢ò","slug":"reactÂÆûÊàò-Ëß£ÂÜ≥react‰∏≠Âá∫Áé∞invalid host header ÈóÆÈ¢ò","date":"2018-10-11T16:00:00.000Z","updated":"2024-10-12T08:40:56.543Z","comments":true,"path":"2018/10/12/reactÂÆûÊàò-Ëß£ÂÜ≥react‰∏≠Âá∫Áé∞invalid host header ÈóÆÈ¢ò/","permalink":"https://justsso1.github.io/2018/10/12/react%E5%AE%9E%E6%88%98-%E8%A7%A3%E5%86%B3react%E4%B8%AD%E5%87%BA%E7%8E%B0invalid%20host%20header%20%E9%97%AE%E9%A2%98/","excerpt":"","text":"Ëß£ÂÜ≥react‰∏≠Âá∫Áé∞invalid host headerÈóÆÈ¢òËøôÊòØÊàëÂú®‰ΩøÁî®reactÊ°ÜÊû∂ÂºÄÂèë‰∏≠ÈÅáÂà∞ÁöÑÈóÆÈ¢ò„ÄÇ ÊàëÊú¨Âú∞ÁöÑ127.0.0.1ÊàñËÄÖlocalhostÈúÄË¶Å‰∏Ä‰∏™‰ª£ÁêÜÂüüÂêçÔºåÂê¶ÂàôÊó†Ê≥ïÂêëÊúçÂä°Âô®ËØ∑Ê±ÇËÆøÈóÆ„ÄÇÂõ†‰∏∫ÂæÆ‰ø°ÁöÑjs-sdk‰ΩøÁî®Êó∂ÔºåÂâçÂè∞ÁöÑÂüüÂêçÂøÖÈ°ªÊòØÂêàÊ≥ïÁöÑ„ÄêÈúÄË¶ÅÈÖçÁΩÆÁöÑÁôΩÂêçÂçïÈáåÈù¢ÔºåÁôΩÂêçÂçïÁöÑÊ£ÄÊü•ÊñπÂºèÊòØÂè™Ê£ÄÊü•ÂüüÂêç„Äë,ÊâÄ‰ª•ÈúÄË¶ÅÈÖçhost,Â∞Ü 127.0.0.1 ÈÖçÂà∞rockcms.ibt.tel Ëß£ÂÜ≥ÊñπÊ≥ïÔºöÂú®configÊñá‰ª∂Â§π‰∏ãÁöÑwebpackDevServer.config.js ‰∏≠ÔºåÂ∞ÜdisableHostCheck ÁöÑÂÄºÊîπ‰∏∫ true","categories":[],"tags":[]},{"title":"‰∏ÄÊ¨°ÁóõËã¶ÂèàÁîúËúúÁöÑÂæÆ‰ø°ÊîØ‰ªòË∏©Âùë‰πãÊóÖ","slug":"ÂæÆ‰ø°ÂºÄÂèë-H5ÂæÆ‰ø°ÊîØ‰ªò","date":"2018-02-02T16:00:00.000Z","updated":"2024-10-14T04:02:45.824Z","comments":true,"path":"2018/02/03/ÂæÆ‰ø°ÂºÄÂèë-H5ÂæÆ‰ø°ÊîØ‰ªò/","permalink":"https://justsso1.github.io/2018/02/03/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91-H5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/","excerpt":"","text":"‰∏ÄÊ¨°ÁóõËã¶ÂèàÁîúËúúÁöÑÂæÆ‰ø°ÊîØ‰ªòË∏©Âùë‰πãÊóÖ Âá°ÊòØÂíåÈí±Êâì‰∫§ÈÅìÁöÑ‰∫ãÔºåÊ≤°Êúâ‰∏ÄÊ†∑ÊòØÂÆπÊòìÁöÑ„ÄÇËøôÊòØÊàëÁ¨¨‰∏ÄÊ¨°Êé•Ëß¶ÂæÆ‰ø°ÊîØ‰ªòÔºåÂèëÁé∞ÁΩë‰∏äËøòÊòØÊúâÂæàÂ§öÂêåÂ≠¶Âú®Ê±ÇÂä©ÔºåXXX‰∫ÜÊÄé‰πàÂäûÔºüXXXÊòØ‰ªÄ‰πàÊÉÖÂÜµÔºü‰∏∫‰∫ÜÂ∏ÆÂä©Êõ¥Â§öÁöÑÂ∞è‰ºô‰º¥ËÑ±Á¶ª‚ÄúËã¶Êµ∑‚ÄùÔºåÊàëÂÜ≥ÂÆöÂÜô‰∏ãËøôÊ¨°ÁöÑË∏©Âùë‰πãÊóÖÔºåÁªôÊõ¥Â§öÁöÑ‰∫∫Â∏ÆÂä©„ÄÇ ‰ªãÁªçÂæÆ‰ø°ÊîØ‰ªòÊñπÂºèÂàÜ‰∏∫Âà∑Âç°ÊîØ‰ªò„ÄÅÂÖ¨‰ºóÂè∑ÊîØ‰ªò„ÄÅÊâ´Á†ÅÊîØ‰ªò„ÄÅAPPÊîØ‰ªò„ÄÅH5ÊîØ‰ªò„ÄÅÂ∞èÁ®ãÂ∫èÊîØ‰ªò„ÄÇ ÂÖà‰ªéÂ∫îÁî®Âú∫ÊôØÊù•ÂêÑËá™ËØ¥‰∏ÄËØ¥ÔºåËøôÊ†∑ÔºåËÉΩÂ§üÊúÄÂø´ÁöÑÂà§Êñ≠Âá∫Â∫îËØ•ÈÄâÊã©Âì™‰∏ÄÁßçÊîØ‰ªò„ÄÇ Âà∑Âç°ÊîØ‰ªòÔºö‰ΩøÁî®Êâ´ÊèèËÆæÂ§áÔºàÊâ´ÊèèÊû™ÔºâÂ§öËßÅ‰∫éË∂ÖÂ∏Ç„ÄÅ‰æøÂà©Â∫ó‰ΩøÁî® ÂÖ¨‰ºóÂè∑ÊîØ‰ªòÔºöÂµåÂÖ•ÂÖ¨‰ºóÂè∑ÁöÑH5È°µÈù¢ Êâ´Á†ÅÊîØ‰ªòÔºöÁî®Êà∑ÊâìÂºÄ‚ÄúÂæÆ‰ø°Êâ´‰∏ÄÊâ´‚ÄùÔºåÊâ´ÊèèÂïÜÊà∑ÁöÑ‰∫åÁª¥Á†ÅÂπ∂ÊîØ‰ªò APPÊîØ‰ªòÔºöÂ§ñÈÉ®APPÂ∫îÁî®ÔºåÁî®Êà∑Ëß¶ÂèëÊîØ‰ªòÊó∂ÔºåËΩ¨Âà∞ÂæÆ‰ø°ÂÜÖÂÆåÊàêÊîØ‰ªò H5ÊîØ‰ªòÔºöÈùûÂæÆ‰ø°ÂÜÖÁΩÆÊµèËßàÂô®ËØ∑Ê±ÇÂæÆ‰ø°ÊîØ‰ªò Â∞èÁ®ãÂ∫èÊîØ‰ªòÔºöÁî®Êà∑Âú®ÂæÆ‰ø°Â∞èÁ®ãÂ∫è‰∏≠‰ΩøÁî®ÂæÆ‰ø°ÊîØ‰ªò ËÉåÊôØÊàë‰ª¨ÂÖ¨Âè∏Áî≥ËØ∑ÁöÑÊòØÂæÆ‰ø°ÊúçÂä°Âè∑ÔºåÈúÄË¶ÅÂæÆ‰ø°ÊîØ‰ªòÁöÑÊòØÂµåÂÖ•ÊúçÂä°Âè∑ÂÜÖÈÉ®ÁöÑÁΩëÈ°µÔºåÊâÄ‰ª•Ê†πÊçÆ‰ªãÁªçÔºåÂ∫îËØ•ÈÄâÊã©‚ÄúÂÖ¨‰ºóÂè∑ÊîØ‰ªò‚Äù„ÄÇ ÂºÄÂèëÊ≠•È™§È¶ñÂÖà‰∏çË¶ÅË¢´ÂæÆ‰ø°ÊîØ‰ªòÁöÑÂºÄÂèëÂêìÁùÄÔºåÂÖ∂ÂÆûÂÆÉÂæàÁÆÄÂçï„ÄÇÂÖà‰ªîÁªÜÁúãÂÖ¨‰ºóÂè∑ÊîØ‰ªòÁöÑÊñáÊ°£ÔºåÁúã‰∏çÊáÇÁöÑÂ§öÁúãÂá†ÈÅçÔºåËøòÁúã‰∏çÊáÇÁöÑÔºåÂä®ÊâãÊìç‰Ωú‰∏Ä‰∏ãÔºåËØï‰∏ÄËØï„ÄÇ ÊñáÊ°£Âú®Ê≠§ÔºöÂæÆ‰ø°ÊîØ‰ªòÁªü‰∏Ä‰∏ãÂçï Ê≠•È™§‰∏ÄÔºöÁªü‰∏Ä‰∏ãÂçï Ë∑üÁùÄÊñáÊ°£ÔºåÂí±‰∏ÄÁÇπÁÇπÊù•ÔºåÊêûÊòéÁôΩÊØè‰∏ÄÊ≠•ÊòØ‰∏∫‰ªÄ‰πàÔºåÂ∞±‰∏ç‰ºöËø∑Ëø∑Á≥äÁ≥äÊêû‰∏çÊ∏ÖÊ•ö‰∫Ü„ÄÇ È¶ñÂÖàËØ¥‰∏Ä‰∏ãÔºåËøô‰∏™Êé•Âè£ÊòØÂêéÂè∞ÈúÄË¶ÅÂÆåÊàêÁöÑÔºåËøô‰∏™Êé•Âè£ÁöÑÁõÆÁöÑÂ∞±ÊòØËé∑Âèñprepay_id,ÂÆÉÊòØÈ¢ÑÊîØ‰ªò‰∫§ÊòìÂõûËØùÊ†áËØÜ„ÄÇÂ∞Üprepay_id‰º†ÁªôÂâçÂè∞ÔºåÂâçÂè∞Ë∞ÉÁî®js-sdkÔºåËøôÂ±û‰∫éÊ≠•È™§‰∫åÁöÑËåÉÂõ¥‰∫ÜÔºå‰∏Ä‰ºöËÆ≤„ÄÇ Êé•Âè£ÈìæÊé• https://api.mch.weixin.qq.com/pay/unifiedorder Âú®ÊñáÊ°£‰∏≠ËØ¥Êòé‰∫ÜÔºåÂøÖÈ°ª‰ΩøÁî®post ÊñπÊ≥ïËØ∑Ê±ÇÂæÆ‰ø°ÁªôÁöÑÊé•Âè£ÈìæÊé•Ôºå‰º†ÂÖ•ÁöÑÊï∞ÊçÆ‰πüÂøÖÈ°ªÊòØxmlÊ†ºÂºèÔºåËøîÂõûÁöÑ‰πüÊòØxmlÁöÑ„ÄÇÈÜâ‰∫ÜÔºü‰∏çË¶ÅÈÜâÔºåÂæÆ‰ø°ÊòØËøôÊ†∑ÁöÑÔºåÊîØ‰ªòÂÆù‰πüÊòØËøôÊ†∑ÁöÑ„ÄÇÊâãÂä®ÂæÆÁ¨ëÔºåÊé•ÂèóÂêß„ÄÇ Êé•ÁùÄÊù•„ÄÇ ÁÆÄÂçïÁ≤óÊö¥Ë¥¥‰ª£Á†ÅÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// &#x27;/addOrder&#x27;ÊòØÁïôÁªôÂâçÂè∞ÁöÑË∞ÉÁî®Êé•Âè£router.post(&#x27;/addOrder&#x27;,(req,res)=&gt;&#123;const addOrderUrl = &#x27;https://api.mch.weixin.qq.com/pay/unifiedorder&#x27;;var client_ip = &quot;&quot;;client_ip = req.body.ipaddr;var appid = &quot;1234567890&quot;; // ÊúçÂä°Âè∑|ÂÖ¨‰ºóÂè∑ÁöÑappidvar body = &quot;ÂïÜÂìÅÁÆÄÂçïÊèèËø∞-ÊµãËØï&quot;; // ÂïÜÂìÅÁÆÄÂçïÊèèËø∞var mch_id= &quot;1234567890&quot;; // ÂïÜÊà∑Âè∑ÔºåÁî≥ËØ∑ÂæÆ‰ø°ÊîØ‰ªòÔºåËÖæËÆØÁªôÁöÑÂïÜÊà∑Âè∑// var device_info = &quot;WEB&quot;;var nonce_str = getRanId(32); // ÈöèÊú∫Â≠óÁ¨¶‰∏≤var out_trade_no = &quot;&quot; +new Date().getTime() + Math.floor( Math.random() * 10 ); //ÂïÜÊà∑ËÆ¢ÂçïÂè∑var total_fee = req.body.total_fee; //ÊîØ‰ªòÈáëÈ¢ùÔºåÂçï‰ΩçÔºöÂàÜvar sign = &quot;&quot;;var notify_url = &quot;http://123.456.789&quot;; //ÂºÇÊ≠•Êé•Êî∂ÂæÆ‰ø°ÊîØ‰ªòÁªìÊûúÈÄöÁü•ÁöÑÂõûË∞ÉÂú∞ÂùÄvar trade_type = &quot;JSAPI&quot;; // ‰∫§ÊòìÁ±ªÂûãvar openid = req.session.openId;console.log(openid);var stringA = `appid=$&#123;appid&#125;&amp;body=$&#123;body&#125;&amp;mch_id=$&#123;mch_id&#125;&amp;nonce_str=$&#123;nonce_str&#125;&amp;notify_url=$&#123;notify_url&#125;&amp;openid=$&#123;openid&#125;&amp;out_trade_no=$&#123;out_trade_no&#125;&amp;spbill_create_ip=$&#123;client_ip&#125;&amp;total_fee=$&#123;total_fee&#125;&amp;trade_type=$&#123;trade_type&#125;`;var stringSighTemp = stringA+&quot;&amp;key=****#####jiaoyuguihuayuan----***&quot;; //32‰ΩçÁöÑÂïÜÊà∑key,Ëá™ÂÆö‰πâÁöÑÔºåËøôÈáå‰∏∫‰∫ÜÈöêÁßÅÔºåÊàëÁî®ÁöÑÁâπÊÆäÁ¨¶Âè∑Áªô‰Ω†‰ª¨Â±ïÁ§∫sign = md5(stringSighTemp).toUpperCase();var xml = `&lt;xml&gt;&lt;appid&gt;$&#123;appid&#125;&lt;/appid&gt;&lt;body&gt;$&#123;body&#125;&lt;/body&gt;&lt;mch_id&gt;$&#123;mch_id&#125;&lt;/mch_id&gt;&lt;nonce_str&gt;$&#123;nonce_str&#125;&lt;/nonce_str&gt;&lt;notify_url&gt;$&#123;notify_url&#125;&lt;/notify_url&gt;&lt;openid&gt;$&#123;openid&#125;&lt;/openid&gt;&lt;out_trade_no&gt;$&#123;out_trade_no&#125;&lt;/out_trade_no&gt;&lt;spbill_create_ip&gt;$&#123;client_ip&#125;&lt;/spbill_create_ip&gt;&lt;total_fee&gt;$&#123;total_fee&#125;&lt;/total_fee&gt; &lt;trade_type&gt;$&#123;trade_type&#125;&lt;/trade_type&gt;&lt;sign&gt;$&#123;sign&#125;&lt;/sign&gt;&lt;/xml&gt;`;var Res = res;axios(&#123; method: &#x27;post&#x27;, url: addOrderUrl, data: xml, responseType: &#x27;text/xml&#x27;, headers: &#123; &#x27;Content-Type&#x27;: &#x27;text/xml&#x27; &#125; &#125;).then( res=&gt;&#123; console.log(res) Res.send(res.data) &#125;).catch( err=&gt;&#123; console.log( err)&#125;)&#125;) ËØ¥Êòéclient_ip ÂèÇÊï∞ ÊòØÂÆ¢Êà∑Á´ØÁöÑipÂú∞ÂùÄÔºåÊú¨Êù•ÊàëÊòØÂú®ÂêéÂè∞Ëé∑ÂèñÂÆ¢Êà∑Á´ØipÂú∞ÂùÄÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨‰ΩøÁî®‰∫Ünginx‰ª£ÁêÜÔºåreq.ip ËøîÂõûÁöÑÈÉΩÊòØ ::ffff:127.0.0.1 ËøôÊòØIPV6Ê†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÁΩë‰∏äÊúâ‰∏Ä‰∏™Á≠îÊ°àÂØπÊ≠§ÂÅöÂá∫‰∫ÜËß£ÈáäÔºö stackoverflow.com&#x2F;questions&#x2F;2‚Ä¶ Âú®ËøôÈáåÔºåÊàëÁî®ÁöÑ‰∏Ä‰∏™ÁΩë‰∏äÁöÑËÑöÊú¨Âú®ÂâçÂè∞Ëé∑ÂèñÁöÑÔºå http://pv.sohu.com/cityjson?ie=utf-8‰ΩøÁî®ÊñπÊ≥ïÔºö window.ipaddr &#x3D; returnCitySN[‚Äòcip‚Äô];ÂÖ∂‰ªñÁöÑÂèÇÊï∞ÔºåÈÉΩÊòØÂèÇËÄÉÂæÆ‰ø°ÊîØ‰ªòÁöÑË¶ÅÊ±ÇÂéªÂÜôÁöÑ„ÄÇ Âá∫Áé∞ÁöÑÈîôËØØ XMLÊ†ºÂºèÈîôËØØ ËÄåÊü•ÁúãÊñáÊ°£ÔºåÂéüÂõ†ÊòØËøôÊ†∑ÁöÑ ÊàëÔºö#&amp;(%#@+%)Ôºå‰πü‰∏çÁªô‰∏™ËØ¶ÁªÜÁÇπÁöÑËØ¥Êòé‚Ä¶ ËøôÁßçÈîôËØØÈúÄË¶Å‚ÄúÈ°øÊÇü‚ÄùÔºåÊàëÁ™ÅÁÑ∂ÂèëÁé∞‰∫ÜÊàëÁöÑÈîôËØØ„ÄÇÊòØÊàëÁêÜËß£Èîô‰∫ÜÔºÅÊàëÁªôbodyÊ†áÁ≠æÂä†‰∫Ü‰∏Ä‰∏™ ÂØºËá¥ÊàëÁöÑxmlÊ†ºÂºèÈîôËØØÔºåÂÖ∂ÂÆûÊòØÊúâdetailÂ≠óÊÆµÊâçÈúÄË¶ÅÊ∑ªÂä† &lt;[CDATA[]]&gt;Ôºå ÂÖ∂‰ªñÁöÑ‰∏çÈúÄË¶Å„ÄÇ ÊàëÔºöÂí≥Âí≥Ôºå‰ΩéÁ∫ßÈîôËØØ„ÄÇÊ≥®ÊÑèÁúãÊñáÊ°£ÔºåÊåâÁÖßË¶ÅÊ±ÇÊù•ÔºåÊó¢‰∏çÂ§öÊ∑ª‰ªÄ‰πàÔºå‰πü‰∏çË¶ÅÂ∞ë‰ªÄ‰πà„ÄÇ ÊàëÊää&lt;[CDATA[]]&gt;ÂéªÊéâ‰πãÂêéÔºåÂèëÁé∞ÊûúÁúüÊòØËøô‰∏™ÂéüÂõ†Ôºå‰∏çÂÜçÂá∫Áé∞XMLÊ†ºÂºèÈîôËØØ‰∫ÜÔºåÁÑ∂ËÄåÔºåËøòÊòØÈ´òÂÖ¥ÁöÑÂ§™Êó©ÔºåÂõ†‰∏∫ÂÆÉÊä•‰∫ÜÁ≠æÂêçÈîôËØØ„ÄÇÂëµÂëµÂëµ~ Á≠æÂêçÈîôËØØ ÊñáÊ°£‰∏≠ËØ¥ÁöÑÁ≠æÂêçËÆ°ÁÆóÂæà‰∏•Ê†ºÔºöÁ¨¨‰∏ÄÊ≠•ÔºåËÆæÊâÄÊúâÂèëÈÄÅÊàñËÄÖÊé•Êî∂Âà∞ÁöÑÊï∞ÊçÆ‰∏∫ÈõÜÂêàMÔºåÂ∞ÜÈõÜÂêàMÂÜÖÈùûÁ©∫ÂèÇÊï∞ÂÄºÁöÑÂèÇÊï∞ÊåâÁÖßÂèÇÊï∞ÂêçASCIIÁ†Å‰ªéÂ∞èÂà∞Â§ßÊéíÂ∫èÔºàÂ≠óÂÖ∏Â∫èÔºâÔºå‰ΩøÁî®URLÈîÆÂÄºÂØπÁöÑÊ†ºÂºèÔºàÂç≥key1&#x3D;value1&amp;key2&#x3D;value2‚Ä¶ÔºâÊãºÊé•ÊàêÂ≠óÁ¨¶‰∏≤stringA„ÄÇ ÁâπÂà´Ê≥®ÊÑè‰ª•‰∏ãÈáçË¶ÅËßÑÂàôÔºöÁ¨¨‰∏ÄÊ≠•ÔºåËÆæÊâÄÊúâÂèëÈÄÅÊàñËÄÖÊé•Êî∂Âà∞ÁöÑÊï∞ÊçÆ‰∏∫ÈõÜÂêàMÔºåÂ∞ÜÈõÜÂêàMÂÜÖÈùûÁ©∫ÂèÇÊï∞ÂÄºÁöÑÂèÇÊï∞ÊåâÁÖßÂèÇÊï∞ÂêçASCIIÁ†Å‰ªéÂ∞èÂà∞Â§ßÊéíÂ∫èÔºàÂ≠óÂÖ∏Â∫èÔºâÔºå‰ΩøÁî®URLÈîÆÂÄºÂØπÁöÑÊ†ºÂºèÔºàÂç≥key1&#x3D;value1&amp;key2&#x3D;value2‚Ä¶ÔºâÊãºÊé•ÊàêÂ≠óÁ¨¶‰∏≤stringA„ÄÇ ‚óÜ ÂèÇÊï∞ÂêçASCIIÁ†Å‰ªéÂ∞èÂà∞Â§ßÊéíÂ∫èÔºàÂ≠óÂÖ∏Â∫èÔºâÔºõ‚óÜ Â¶ÇÊûúÂèÇÊï∞ÁöÑÂÄº‰∏∫Á©∫‰∏çÂèÇ‰∏éÁ≠æÂêçÔºõ‚óÜ ÂèÇÊï∞ÂêçÂå∫ÂàÜÂ§ßÂ∞èÂÜôÔºõ ÔºàÂÖ¨‰ºóÂè∑ÊîØ‰ªòÂÖ®ÊòØÂ∞èÂÜôÔºâ‚óÜ È™åËØÅË∞ÉÁî®ËøîÂõûÊàñÂæÆ‰ø°‰∏ªÂä®ÈÄöÁü•Á≠æÂêçÊó∂Ôºå‰º†ÈÄÅÁöÑsignÂèÇÊï∞‰∏çÂèÇ‰∏éÁ≠æÂêçÔºåÂ∞ÜÁîüÊàêÁöÑÁ≠æÂêç‰∏éËØ•signÂÄº‰ΩúÊ†°È™å„ÄÇ‚óÜ ÂæÆ‰ø°Êé•Âè£ÂèØËÉΩÂ¢ûÂä†Â≠óÊÆµÔºåÈ™åËØÅÁ≠æÂêçÊó∂ÂøÖÈ°ªÊîØÊåÅÂ¢ûÂä†ÁöÑÊâ©Â±ïÂ≠óÊÆµ Á¨¨‰∫åÊ≠•ÔºåÂú®stringAÊúÄÂêéÊãºÊé•‰∏äkeyÂæóÂà∞stringSignTempÂ≠óÁ¨¶‰∏≤ÔºåÂπ∂ÂØπstringSignTempËøõË°åMD5ËøêÁÆóÔºåÂÜçÂ∞ÜÂæóÂà∞ÁöÑÂ≠óÁ¨¶‰∏≤ÊâÄÊúâÂ≠óÁ¨¶ËΩ¨Êç¢‰∏∫Â§ßÂÜôÔºåÂæóÂà∞signÂÄºsignValue„ÄÇ ‚óÜ keyËÆæÁΩÆË∑ØÂæÑÔºöÂæÆ‰ø°ÂïÜÊà∑Âπ≥Âè∞(pay.weixin.qq.com)‚Äì&gt;Ë¥¶Êà∑ËÆæÁΩÆ‚Äì&gt;APIÂÆâÂÖ®‚Äì&gt;ÂØÜÈí•ËÆæÁΩÆ ËøôÈáåÊàëÊü•ÈòÖ‰∫Ü‰∏Ä‰∫õËµÑÊñôÔºåÁúãÂà∞ËøáÊúâËøôÊ†∑Âá†ÁßçÈîôËØØÊÉÖÂÜµÔºökey ÁúãÈîô‰∫ÜÔºåËøôÈáåÂ∫îËØ•ÂÜôÂïÜÊà∑ÁöÑkey,ËÄåËøô‰∏™key ÊòØÁî®Êà∑ÊâãÂä®ËÆæÁΩÆÁöÑÔºåÈïø32‰Ωç„ÄÇÊ≥®ÊÑèÔºöËá™Â∑±‰øùÂ≠ò‰∏Ä‰ªΩÔºåÂõ†‰∏∫ËÆæÁΩÆÂ•Ω‰∫Ü‰πãÂêéÊòØÊ≤°Ê≥ïÊâìÂºÄÊü•ÁúãÁöÑ„ÄÇ ËøòÊúâ‰∏ÄÁßçÈîôËØØÔºåÊàëËßâÂæóÂæàÁ¶ªË∞±ÂïäÔºåbodyÈáåÈù¢‰∏çËÉΩÊúâ‰∏≠ÊñáÔºåÁÑ∂ËÄåÔºåÊàëÊääbody‰∏≠ÁöÑÊñáÂ≠óÊîπ‰∏∫Ëã±ÊñáÔºåÂèëÁé∞Âπ∂‰∏çËÉΩÊîπÂèòÁé∞Áä∂ÔºåÂÖ∂ÂÆûÁî®‰∏≠ÊñáÊòØÂèØ‰ª•ÁöÑ„ÄÇ ‚Ä¶ ÊÄª‰πãÔºåÊâæÂà∞ÁöÑËøô‰∫õÈîôËØØÔºåÈÄöÈÄöÂØπÊàëÁöÑÊÉÖÂÜµÊ≤°Áî®ÔºÅ ÁÑ∂ÂêéËøôÂèàÈúÄË¶Å‚ÄúÈ°øÊÇü‚ÄùÔºåÂéüÊù•stringAÂ≠óÁ¨¶‰∏≤ÊàëÁî®‰∫ÜÊç¢Ë°åÁ¨¶ÊääÂæàÈïøÁöÑÂ≠óÁ¨¶ÈöîÂºÄÔºåËøôÂØºËá¥Êç¢Ë°åÁ¨¶Ë¢´ËΩ¨Êç¢‰∏∫AscallÁ†Å‰∏≠ÁöÑ \\n ÂÜôËøõ‰∫ÜÁ≠æÂêçÈáåÈù¢ÔºåÊâÄ‰ª•ÔºåsignÈîôËØØÔºåÊâÄ‰ª•Ë¶Å‰πàÔºåÊääÊç¢Ë°åÁ¨¶ÈÄöÈÄöÂéªÊéâÔºåË¶Å‰πàÁî®‚Äú‚ÄùËøûÊé•ÔºåËàçÂºÉ„ÄÇÊàëÊääÊç¢Ë°åÈÉΩÂéªÊéâ‰πãÂêéÔºåÂ∞±Ê≤°ÊúâÁ≠æÂêçÈîôËØØ‰∫Ü„ÄÇ ÂΩìÂΩìÂΩìÂΩì ~ Áªà‰∫éÂÆåÊàê‰∫ÜÁ¨¨‰∏ÄÊ≠•ÔºåÂêéÂè∞ÊàêÂäüÁöÑËøîÂõû‰∫ÜÊàë‰ª¨ÈúÄË¶ÅÁöÑprepay_id ËøôÈáå‰∏∫‰∫ÜÂÆâÂÖ®ÔºåÂØπ‰∫éËøîÂõûsignÔºåÂíåÂèëÈÄÅÁöÑsignËøõË°åÂØπÊØîÔºåÂÆåÂÖ®Áõ∏Á≠â‰πãÂêéÔºåÊâçËÉΩÊääÁªìÊûúËøîÂõûÁªôÂâçÂè∞„ÄÇ Ê≠•È™§‰∫åÔºöË∞ÉÁî®ÂæÆ‰ø°js-sdkÊé•Âè£ ÂæÆ‰ø°ÊîØ‰ªò ÂèëËµ∑‰∏Ä‰∏™ÂæÆ‰ø°ÊîØ‰ªòËØ∑Ê±Ç ÂâçÂè∞Êî∂Âà∞ÁöÑÊòØxmlÊï∞ÊçÆÔºåË¶ÅÂÖàËß£Êûê‰∏Ä‰∏ãÔºåÂæóÂà∞prepay_id ÁÑ∂ÂêéË∞ÉÁî®ÂæÆ‰ø°ÊîØ‰ªòjs-sdkÔºå‰∏∫‰∫ÜÂ§ßÂÆ∂Â∞ëËµ∞‰∏Ä‰∫õÂºØË∑ØÔºåÊàëÂÖàÊù•Ê≠£Á°ÆÁöÑÂÜôÊ≥ïÔºåÂÖ≥ÈîÆÊ≠•È™§Â¶Ç‰∏ãÔºö 123456789101112131415161718192021var &#123;prepay_id,appid&#125; = getInfo(res.data); //‰ªéÂêéÂè∞Êï∞ÊçÆ‰∏≠Ëé∑Âèñappid Âíå prepay_idnonceStr = getRanId(32);timeStamp = new Date().getTime();var stringA = &quot;appId=&quot;+appid+&quot;&amp;nonceStr=&quot;+nonceStr+&quot;&amp;package=prepay_id=&quot;+prepay_id+&quot;&amp;signType=MD5&amp;timeStamp=&quot;+timeStamp;var stringSignTemp = stringA+&quot;&amp;key=****#####jiaoyuguihuayuan----***&quot;;paySign = md5(stringSignTemp).toUpperCase();window.wx.chooseWXPay(&#123; timestamp: timeStamp, // ÊîØ‰ªòÁ≠æÂêçÊó∂Èó¥Êà≥ÔºåÊ≥®ÊÑèÂæÆ‰ø°jssdk‰∏≠ÁöÑÊâÄÊúâ‰ΩøÁî®timestampÂ≠óÊÆµÂùá‰∏∫Â∞èÂÜô„ÄÇ‰ΩÜÊúÄÊñ∞ÁâàÁöÑÊîØ‰ªòÂêéÂè∞ÁîüÊàêÁ≠æÂêç‰ΩøÁî®ÁöÑtimeStampÂ≠óÊÆµÂêçÈúÄÂ§ßÂÜôÂÖ∂‰∏≠ÁöÑSÂ≠óÁ¨¶ nonceStr: nonceStr, // ÊîØ‰ªòÁ≠æÂêçÈöèÊú∫‰∏≤Ôºå‰∏çÈïø‰∫é 32 ‰Ωç package: &quot;prepay_id=&quot; + prepay_id, // Áªü‰∏ÄÊîØ‰ªòÊé•Âè£ËøîÂõûÁöÑprepay_idÂèÇÊï∞ÂÄºÔºåÊèê‰∫§Ê†ºÂºèÂ¶ÇÔºöprepay_id=\\*\\*\\*Ôºâ signType: &#x27;MD5&#x27;, // Á≠æÂêçÊñπÂºèÔºåÈªòËÆ§‰∏∫&#x27;SHA1&#x27;Ôºå‰ΩøÁî®Êñ∞ÁâàÊîØ‰ªòÈúÄ‰º†ÂÖ•&#x27;MD5&#x27; paySign: paySign, // ÊîØ‰ªòÁ≠æÂêç success: function (res) &#123; // ÊîØ‰ªòÊàêÂäüÂêéÁöÑÂõûË∞ÉÂáΩÊï∞ console.log(res) &#125;, fail: function(err)&#123; console.log(err) &#125;&#125;); Â§áÊ≥®Ôºöprepay_id ÈÄöËøáÂæÆ‰ø°ÊîØ‰ªòÁªü‰∏Ä‰∏ãÂçïÊé•Âè£ÊãøÂà∞ÔºåpaySign ÈááÁî®Áªü‰∏ÄÁöÑÂæÆ‰ø°ÊîØ‰ªò Sign Á≠æÂêçÁîüÊàêÊñπÊ≥ïÔºåÊ≥®ÊÑèËøôÈáå appId ‰πüË¶ÅÂèÇ‰∏éÁ≠æÂêçÔºåappId ‰∏é config ‰∏≠‰º†ÂÖ•ÁöÑappId ‰∏ÄËá¥ÔºåÂç≥ÊúÄÂêéÂèÇ‰∏éÁ≠æÂêçÁöÑÂèÇÊï∞ÊúâappId, timeStamp, nonceStr,package, signType„ÄÇ Ê≥®ÊÑèÔºåÊàëË¶ÅËÆ≤‰∏™ÂùëÁÇπ~ Ë∞ÉÁî®js-sdkÊó∂ÔºåÁ≠æÂêç‰∏≠ÁöÑÂ≠óÊÆµÈÉΩÊòØÂ∞èÈ©ºÂ≥∞ÁöÑÂÜôÊ≥ïÔºåtimeStampÊòØËøôÊ†∑ÂÜôÁöÑÔºå‰ΩÜÊòØwx.config‰∏≠Ôºåtimestamp ÊòØÂÖ®Â∞èÂÜôÁöÑÔºåÊâÄ‰ª•Ôºå‰∫≤‰ª¨ÔºåÂçÉ‰∏á‰∏çË¶ÅÊêûÈîô‰∫ÜÔºåÊàëÂú®ËøôÈáåÂ∞±Ë¢´Âùë‰∫ÜÂ•Ω‰∏Ä‰ºöÂë¢„ÄÇ* ÂÜôÂÆåÁ≠æÂêç‰πãÂêéÔºåÂΩì‰Ω†Áî®ÂæÆ‰ø°webÂºÄÂèëËÄÖÂ∑•ÂÖ∑ÂéªÊµãËØïÁöÑËØùÔºåÂ∞±‰ºöÁúãÂà∞Ôºå‚Äú‰∏çÊîØÊåÅÊ®°Êãü‚ÄùËøôÊ†∑ÁöÑÊèêÁ§∫„ÄÇËøô‰∏™Êó∂ÂÄôÔºå‰∏çË¶ÅÁäπË±´ÔºåÁõ¥Êé•‰∏äÁúüÊú∫ÂéªÊµãËØïÔºåËøôÂπ∂‰∏çÊòØÊàë‰ª¨ÁöÑÁ®ãÂ∫èÂá∫Áé∞‰∫ÜÈóÆÈ¢ò„ÄÇ Â∞ètips: Âú®ÁúüÊú∫‰∏äÔºåÊàë‰ª¨ÊòØÊ≤°ÊúâÂäûÊ≥ïÁúãÂà∞consoleÂá∫ÁöÑ‰∏Ä‰∫õË∞ÉËØï‰ø°ÊÅØÔºåÊâÄ‰ª•ÔºåË¶ÅÊÉ≥‰∏™ÂäûÊ≥ïÔºåÂèØ‰ª•Áî®alertÔºå‰πüÂèØ‰ª•ÊääË∞ÉËØï‰ø°ÊÅØÊâìÂç∞Âú®Â±èÂπï‰∏äÈù¢ÔºåÊàëÈÄâÊã©ÊâìÂç∞Âú®Â±èÂπï‰∏ä„ÄÇËøôÈáåË¶ÅËØ¥‰∏Ä‰∫õÔºåÂæÆ‰ø°ÁªôÁöÑÊñáÊ°£Ê≤°ÊúâÈÇ£‰πàÈΩêÂÖ®ÔºåÊúâ‰∏Ä‰∫õÊòØË¶ÅËØïËØïÊâçÊåáÂØºÁöÑÔºåÊØîÂ¶Çwx.config‰∏≠ÁöÑsuccessÂíåfailÂáΩÊï∞ÔºåÂèÇÊï∞‰ø°ÊÅØÊÄé‰πàÊâìÂç∞ÔºåÂÖ∂ÂÆûÊòØres.errMsgÂíåerr.errMsg. ‰∏äÈù¢ÊàëËØ¥ÁöÑËøô‰∫õ‰Ω†ÈÉΩÊ≥®ÊÑèÂà∞‰∫ÜÔºå‰ΩÜÊòØÂæÆ‰ø°ÊîØ‰ªòÁöÑÊéß‰ª∂‰Ω†‰æùÁÑ∂Ë∞ÉÂä®‰∏çËµ∑Êù•ÁöÑËØùÔºåÂèØËÉΩÊòØÂæÆ‰ø°ÂïÜÊà∑Âπ≥Âè∞ÁöÑÂºÄÂèëÈÖçÁΩÆÂá∫Áé∞‰∫ÜÈóÆÈ¢òÔºåÂú®‰∫ßÂìÅ‰∏≠ÂøÉ-ÂºÄÂèëÈÖçÁΩÆ-ÊîØ‰ªòÈÖçÁΩÆ-ÂÖ¨‰ºóÂè∑ÊîØ‰ªò‰∏≠ËøõË°åÈÖçÁΩÆÔºåÈÖçÁΩÆÁöÑÊó∂ÂÄôÔºåÊ≥®ÊÑè‰∏ÄÂÆöË¶ÅÂà∞ÊúÄÂêé‰∏ÄÁ∫ßÁõÆÂΩïÔºåÊØîÂ¶ÇÊàëË¶ÅÂú®cms.123.456&#x2F;book&#x2F;list&#x2F;index.htmlÈ°µÈù¢‰∏≠ÂéªËøõË°åÂæÆ‰ø°ÊîØ‰ªòÔºåÈÇ£‰πà‰Ω†ÁöÑÈÖçÁΩÆÂ∫îËØ•ÊòØ cms.123.456&#x2F;book&#x2F;list&#x2F; Â•Ω‰∫ÜÔºåÂºÄÂèë‰∏≠Âü∫Êú¨‰∏äÊâÄÊúâÁöÑÂùëÈÉΩÊèêÂà∞‰∫ÜÔºåËøôÊòØÂª∫Á´ãÂú®‰Ω†ÈÖçÁΩÆÊ≤°ÊúâÂá∫ÈîôÁöÑÊÉÖÂÜµ‰∏ã„ÄÇÊé•‰∏ãÊù•ÔºåÁúãÁúãÂà∞Â∫ïËÉΩ‰∏çËÉΩÁúüÁöÑÊîØ‰ªò„ÄÇ ÂÆåÊàê Â§ßÂäüÂëäÊàêÔºåËÆ©ÊàëÊÉ≥Ëµ∑‰∫ÜÔºåÊúÄËøëÊµÅË°åÁöÑ‰∏ÄÂè•ËØùÔºå‰Ω†ËøôÁ£®‰∫∫ÁöÑÂ∞èÂ¶ñÁ≤æÔºåÂæÆ‰ø°ÊîØ‰ªòÔºÅ Â∏åÊúõËÉΩÁªô‰Ω†‰ª¨Â∏¶Êù•Â∏ÆÂä©~","categories":[{"name":"ÂæÆ‰ø°ÂºÄÂèë","slug":"ÂæÆ‰ø°ÂºÄÂèë","permalink":"https://justsso1.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"}],"tags":[]}],"categories":[{"name":"ÂâçÁ´ØÂ∑•Á®ãÂåñ","slug":"ÂâçÁ´ØÂ∑•Á®ãÂåñ","permalink":"https://justsso1.github.io/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"ÊµèËßàÂô®","slug":"ÊµèËßàÂô®","permalink":"https://justsso1.github.io/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"},{"name":"javascript","slug":"javascript","permalink":"https://justsso1.github.io/categories/javascript/"},{"name":"css","slug":"css","permalink":"https://justsso1.github.io/categories/css/"},{"name":"ÂæÆ‰ø°ÂºÄÂèë","slug":"ÂæÆ‰ø°ÂºÄÂèë","permalink":"https://justsso1.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"},{"name":"es6","slug":"es6","permalink":"https://justsso1.github.io/categories/es6/"},{"name":"react","slug":"react","permalink":"https://justsso1.github.io/categories/react/"},{"name":"ÂâçÁ´ØÂøÖÂ§á","slug":"ÂâçÁ´ØÂøÖÂ§á","permalink":"https://justsso1.github.io/categories/%E5%89%8D%E7%AB%AF%E5%BF%85%E5%A4%87/"}],"tags":[{"name":"Ê®°ÂùóÂåñ","slug":"Ê®°ÂùóÂåñ","permalink":"https://justsso1.github.io/tags/%E6%A8%A1%E5%9D%97%E5%8C%96/"},{"name":"Êï∞ÁªÑ","slug":"Êï∞ÁªÑ","permalink":"https://justsso1.github.io/tags/%E6%95%B0%E7%BB%84/"},{"name":"ÂÆâÂÖ®","slug":"ÂÆâÂÖ®","permalink":"https://justsso1.github.io/tags/%E5%AE%89%E5%85%A8/"},{"name":"ÂºÄÂèëËÄÖÂ∑•ÂÖ∑","slug":"ÂºÄÂèëËÄÖÂ∑•ÂÖ∑","permalink":"https://justsso1.github.io/tags/%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7/"},{"name":"‰∫ã‰ª∂Âæ™ÁéØ","slug":"‰∫ã‰ª∂Âæ™ÁéØ","permalink":"https://justsso1.github.io/tags/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"},{"name":"koa2‰∏≠Èó¥‰ª∂","slug":"koa2‰∏≠Èó¥‰ª∂","permalink":"https://justsso1.github.io/tags/koa2%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"name":"npm","slug":"npm","permalink":"https://justsso1.github.io/tags/npm/"},{"name":"ÂºÇÂ∏∏","slug":"ÂºÇÂ∏∏","permalink":"https://justsso1.github.io/tags/%E5%BC%82%E5%B8%B8/"},{"name":"Áà¨Ëô´","slug":"Áà¨Ëô´","permalink":"https://justsso1.github.io/tags/%E7%88%AC%E8%99%AB/"},{"name":"proxy","slug":"proxy","permalink":"https://justsso1.github.io/tags/proxy/"}]}